import{a as Os,b as Is,g as Rs,r as i,u as ia,c as rs,R as is,d as xe,B as Ls,N as Pe,e as Ts}from"./vendor-DHMqtOm3.js";import{L as Re,M as xa,P as Us,C as va,D as Ye,T as Ge,a as sa,S as ns,b as fa,c as La,d as Le,e as $s,f as Fs,g as Xe,h as Qe,i as qe,j as ms,k as _s,l as ts,m as Ha,U as Ka,n as Wa,o as ga,E as ba,p as Ga,q as Je,X as ra,r as na,s as ha,t as Ta,u as la,v as Ya,w as ya,B as Ua,R as qs,I as Bs,x as ja,y as Xa,z as ls,A as Ia,F as Be,G as ka,H as os,J as Js,K as us,N as zs,O as Hs,Q as Ks,V as $a,W as Ws,Y as ua,Z as cs,_ as Ra,$ as ds,a0 as ps,a1 as Gs,a2 as Ys,a3 as Xs,a4 as Qs}from"./icons-DhTs0tFX.js";(function(){const m=document.createElement("link").relList;if(m&&m.supports&&m.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))b(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const t of l.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&b(t)}).observe(document,{childList:!0,subtree:!0});function h(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function b(u){if(u.ep)return;u.ep=!0;const l=h(u);fetch(u.href,l)}})();var Aa={exports:{}},ca={},Qa;function Zs(){if(Qa)return ca;Qa=1;return(function(){var a=Os(),m=Symbol.for("react.element"),h=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),n=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),o=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),s=Symbol.for("react.lazy"),w=Symbol.for("react.offscreen"),f=Symbol.iterator,j="@@iterator";function C(r){if(r===null||typeof r!="object")return null;var V=f&&r[f]||r[j];return typeof V=="function"?V:null}var g=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function P(r){{for(var V=arguments.length,L=new Array(V>1?V-1:0),Y=1;Y<V;Y++)L[Y-1]=arguments[Y];k("error",r,L)}}function k(r,V,L){{var Y=g.ReactDebugCurrentFrame,ce=Y.getStackAddendum();ce!==""&&(V+="%s",L=L.concat([ce]));var be=L.map(function(le){return String(le)});be.unshift("Warning: "+V),Function.prototype.apply.call(console[r],console,be)}}var M=!1,D=!1,F=!1,$=!1,A=!1,y;y=Symbol.for("react.module.reference");function S(r){return!!(typeof r=="string"||typeof r=="function"||r===b||r===l||A||r===u||r===o||r===x||$||r===w||M||D||F||typeof r=="object"&&r!==null&&(r.$$typeof===s||r.$$typeof===v||r.$$typeof===t||r.$$typeof===n||r.$$typeof===p||r.$$typeof===y||r.getModuleId!==void 0))}function I(r,V,L){var Y=r.displayName;if(Y)return Y;var ce=V.displayName||V.name||"";return ce!==""?L+"("+ce+")":L}function X(r){return r.displayName||"Context"}function B(r){if(r==null)return null;if(typeof r.tag=="number"&&P("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case b:return"Fragment";case h:return"Portal";case l:return"Profiler";case u:return"StrictMode";case o:return"Suspense";case x:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case n:var V=r;return X(V)+".Consumer";case t:var L=r;return X(L._context)+".Provider";case p:return I(r,r.render,"ForwardRef");case v:var Y=r.displayName||null;return Y!==null?Y:B(r.type)||"Memo";case s:{var ce=r,be=ce._payload,le=ce._init;try{return B(le(be))}catch{return null}}}return null}var pe=Object.assign,Z=0,je,he,G,H,oe,E,W;function K(){}K.__reactDisabledLog=!0;function fe(){{if(Z===0){je=console.log,he=console.info,G=console.warn,H=console.error,oe=console.group,E=console.groupCollapsed,W=console.groupEnd;var r={configurable:!0,enumerable:!0,value:K,writable:!0};Object.defineProperties(console,{info:r,log:r,warn:r,error:r,group:r,groupCollapsed:r,groupEnd:r})}Z++}}function we(){{if(Z--,Z===0){var r={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:pe({},r,{value:je}),info:pe({},r,{value:he}),warn:pe({},r,{value:G}),error:pe({},r,{value:H}),group:pe({},r,{value:oe}),groupCollapsed:pe({},r,{value:E}),groupEnd:pe({},r,{value:W})})}Z<0&&P("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var re=g.ReactCurrentDispatcher,Se;function N(r,V,L){{if(Se===void 0)try{throw Error()}catch(ce){var Y=ce.stack.trim().match(/\n( *(at )?)/);Se=Y&&Y[1]||""}return`
`+Se+r}}var U=!1,J;{var ie=typeof WeakMap=="function"?WeakMap:Map;J=new ie}function Ne(r,V){if(!r||U)return"";{var L=J.get(r);if(L!==void 0)return L}var Y;U=!0;var ce=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var be;be=re.current,re.current=null,fe();try{if(V){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(Me){Y=Me}Reflect.construct(r,[],le)}else{try{le.call()}catch(Me){Y=Me}r.call(le.prototype)}}else{try{throw Error()}catch(Me){Y=Me}r()}}catch(Me){if(Me&&Y&&typeof Me.stack=="string"){for(var se=Me.stack.split(`
`),Ce=Y.stack.split(`
`),ke=se.length-1,De=Ce.length-1;ke>=1&&De>=0&&se[ke]!==Ce[De];)De--;for(;ke>=1&&De>=0;ke--,De--)if(se[ke]!==Ce[De]){if(ke!==1||De!==1)do if(ke--,De--,De<0||se[ke]!==Ce[De]){var Ue=`
`+se[ke].replace(" at new "," at ");return r.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",r.displayName)),typeof r=="function"&&J.set(r,Ue),Ue}while(ke>=1&&De>=0);break}}}finally{U=!1,re.current=be,we(),Error.prepareStackTrace=ce}var aa=r?r.displayName||r.name:"",He=aa?N(aa):"";return typeof r=="function"&&J.set(r,He),He}function ue(r,V,L){return Ne(r,!1)}function ae(r){var V=r.prototype;return!!(V&&V.isReactComponent)}function ve(r,V,L){if(r==null)return"";if(typeof r=="function")return Ne(r,ae(r));if(typeof r=="string")return N(r);switch(r){case o:return N("Suspense");case x:return N("SuspenseList")}if(typeof r=="object")switch(r.$$typeof){case p:return ue(r.render);case v:return ve(r.type,V,L);case s:{var Y=r,ce=Y._payload,be=Y._init;try{return ve(be(ce),V,L)}catch{}}}return""}var ge=Object.prototype.hasOwnProperty,d={},O=g.ReactDebugCurrentFrame;function T(r){if(r){var V=r._owner,L=ve(r.type,r._source,V?V.type:null);O.setExtraStackFrame(L)}else O.setExtraStackFrame(null)}function te(r,V,L,Y,ce){{var be=Function.call.bind(ge);for(var le in r)if(be(r,le)){var se=void 0;try{if(typeof r[le]!="function"){var Ce=Error((Y||"React class")+": "+L+" type `"+le+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof r[le]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ce.name="Invariant Violation",Ce}se=r[le](V,le,Y,L,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(ke){se=ke}se&&!(se instanceof Error)&&(T(ce),P("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",Y||"React class",L,le,typeof se),T(null)),se instanceof Error&&!(se.message in d)&&(d[se.message]=!0,T(ce),P("Failed %s type: %s",L,se.message),T(null))}}}var ne=Array.isArray;function Q(r){return ne(r)}function Te(r){{var V=typeof Symbol=="function"&&Symbol.toStringTag,L=V&&r[Symbol.toStringTag]||r.constructor.name||"Object";return L}}function Ie(r){try{return ze(r),!1}catch{return!0}}function ze(r){return""+r}function Ze(r){if(Ie(r))return P("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Te(r)),ze(r)}var _e=g.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0},R,q,z;z={};function de(r){if(ge.call(r,"ref")){var V=Object.getOwnPropertyDescriptor(r,"ref").get;if(V&&V.isReactWarning)return!1}return r.ref!==void 0}function ee(r){if(ge.call(r,"key")){var V=Object.getOwnPropertyDescriptor(r,"key").get;if(V&&V.isReactWarning)return!1}return r.key!==void 0}function ye(r,V){if(typeof r.ref=="string"&&_e.current&&V&&_e.current.stateNode!==V){var L=B(_e.current.type);z[L]||(P('Component "%s" contains the string ref "%s". Support for string refs will be removed in a future major release. This case cannot be automatically converted to an arrow function. We ask you to manually fix this case by using useRef() or createRef() instead. Learn more about using refs safely here: https://reactjs.org/link/strict-mode-string-ref',B(_e.current.type),r.ref),z[L]=!0)}}function me(r,V){{var L=function(){R||(R=!0,P("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",V))};L.isReactWarning=!0,Object.defineProperty(r,"key",{get:L,configurable:!0})}}function Ve(r,V){{var L=function(){q||(q=!0,P("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",V))};L.isReactWarning=!0,Object.defineProperty(r,"ref",{get:L,configurable:!0})}}var Ae=function(r,V,L,Y,ce,be,le){var se={$$typeof:m,type:r,key:V,ref:L,props:le,_owner:be};return se._store={},Object.defineProperty(se._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(se,"_self",{configurable:!1,enumerable:!1,writable:!1,value:Y}),Object.defineProperty(se,"_source",{configurable:!1,enumerable:!1,writable:!1,value:ce}),Object.freeze&&(Object.freeze(se.props),Object.freeze(se)),se};function Ds(r,V,L,Y,ce){{var be,le={},se=null,Ce=null;L!==void 0&&(Ze(L),se=""+L),ee(V)&&(Ze(V.key),se=""+V.key),de(V)&&(Ce=V.ref,ye(V,ce));for(be in V)ge.call(V,be)&&!c.hasOwnProperty(be)&&(le[be]=V[be]);if(r&&r.defaultProps){var ke=r.defaultProps;for(be in ke)le[be]===void 0&&(le[be]=ke[be])}if(se||Ce){var De=typeof r=="function"?r.displayName||r.name||"Unknown":r;se&&me(le,De),Ce&&Ve(le,De)}return Ae(r,se,Ce,ce,Y,_e.current,le)}}var wa=g.ReactCurrentOwner,Fa=g.ReactDebugCurrentFrame;function ea(r){if(r){var V=r._owner,L=ve(r.type,r._source,V?V.type:null);Fa.setExtraStackFrame(L)}else Fa.setExtraStackFrame(null)}var Sa;Sa=!1;function Ca(r){return typeof r=="object"&&r!==null&&r.$$typeof===m}function _a(){{if(wa.current){var r=B(wa.current.type);if(r)return`

Check the render method of \``+r+"`."}return""}}function Es(r){{if(r!==void 0){var V=r.fileName.replace(/^.*[\\\/]/,""),L=r.lineNumber;return`

Check your code at `+V+":"+L+"."}return""}}var qa={};function Vs(r){{var V=_a();if(!V){var L=typeof r=="string"?r:r.displayName||r.name;L&&(V=`

Check the top-level render call using <`+L+">.")}return V}}function Ba(r,V){{if(!r._store||r._store.validated||r.key!=null)return;r._store.validated=!0;var L=Vs(V);if(qa[L])return;qa[L]=!0;var Y="";r&&r._owner&&r._owner!==wa.current&&(Y=" It was passed a child from "+B(r._owner.type)+"."),ea(r),P('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',L,Y),ea(null)}}function Ja(r,V){{if(typeof r!="object")return;if(Q(r))for(var L=0;L<r.length;L++){var Y=r[L];Ca(Y)&&Ba(Y,V)}else if(Ca(r))r._store&&(r._store.validated=!0);else if(r){var ce=C(r);if(typeof ce=="function"&&ce!==r.entries)for(var be=ce.call(r),le;!(le=be.next()).done;)Ca(le.value)&&Ba(le.value,V)}}}function ws(r){{var V=r.type;if(V==null||typeof V=="string")return;var L;if(typeof V=="function")L=V.propTypes;else if(typeof V=="object"&&(V.$$typeof===p||V.$$typeof===v))L=V.propTypes;else return;if(L){var Y=B(V);te(L,r.props,"prop",Y,r)}else if(V.PropTypes!==void 0&&!Sa){Sa=!0;var ce=B(V);P("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",ce||"Unknown")}typeof V.getDefaultProps=="function"&&!V.getDefaultProps.isReactClassApproved&&P("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Ss(r){{for(var V=Object.keys(r.props),L=0;L<V.length;L++){var Y=V[L];if(Y!=="children"&&Y!=="key"){ea(r),P("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",Y),ea(null);break}}r.ref!==null&&(ea(r),P("Invalid attribute `ref` supplied to `React.Fragment`."),ea(null))}}var za={};function Cs(r,V,L,Y,ce,be){{var le=S(r);if(!le){var se="";(r===void 0||typeof r=="object"&&r!==null&&Object.keys(r).length===0)&&(se+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ce=Es(ce);Ce?se+=Ce:se+=_a();var ke;r===null?ke="null":Q(r)?ke="array":r!==void 0&&r.$$typeof===m?(ke="<"+(B(r.type)||"Unknown")+" />",se=" Did you accidentally export a JSX literal instead of a component?"):ke=typeof r,P("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",ke,se)}var De=Ds(r,V,L,ce,be);if(De==null)return De;if(le){var Ue=V.children;if(Ue!==void 0)if(Y)if(Q(Ue)){for(var aa=0;aa<Ue.length;aa++)Ja(Ue[aa],r);Object.freeze&&Object.freeze(Ue)}else P("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Ja(Ue,r)}if(ge.call(V,"key")){var He=B(r),Me=Object.keys(V).filter(function(Ms){return Ms!=="key"}),Pa=Me.length>0?"{key: someKey, "+Me.join(": ..., ")+": ...}":"{key: someKey}";if(!za[He+Pa]){var As=Me.length>0?"{"+Me.join(": ..., ")+": ...}":"{}";P(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,Pa,He,As,He),za[He+Pa]=!0}}return r===b?Ss(De):ws(De),De}}var Ps=Cs;ca.Fragment=b,ca.jsxDEV=Ps})(),ca}var Za;function er(){return Za||(Za=1,Aa.exports=Zs()),Aa.exports}var e=er(),da={},es;function ar(){if(es)return da;es=1;var a=Is();{var m=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.createRoot=function(h,b){m.usingClientEntryPoint=!0;try{return a.createRoot(h,b)}finally{m.usingClientEntryPoint=!1}},da.hydrateRoot=function(h,b,u){m.usingClientEntryPoint=!0;try{return a.hydrateRoot(h,b,u)}finally{m.usingClientEntryPoint=!1}}}return da}var sr=ar();const rr=Rs(sr),ir=()=>"https://posifine22.onrender.com/api",Ee=ir(),bs=()=>localStorage.getItem("token"),hs=async(a,m={},h=0,b=3)=>{const u=bs(),l=a.startsWith("/")?a:`/${a}`,t={...m,headers:{"Content-Type":"application/json",...u&&!(l.startsWith("/auth")&&l!=="/auth/me")&&!l.includes("/main-admin/auth/login")&&{Authorization:`Bearer ${u}`},...m.headers}};try{const n=await fetch(`${Ee}${l}`,t);if(n.status===401){localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("ownerToken"),localStorage.removeItem("ownerUser");const o=window.location.pathname||"";if(!o.includes("/login")&&!o.includes("/signup")&&!o.includes("/auth")&&!o.includes("/main.admin"))try{window.location.href="/login"}catch{}const x=new Error("Unauthorized");throw x.status=401,x}if(n.status===423){const o=await n.json().catch(()=>({error:"Screen locked"})),x=new Error(o.error||"Screen locked");throw x.status=423,x.isScreenLocked=!0,x}if(n.status===500)throw new Error("Server error 500 - Backend unavailable");if(n.ok)return n.status===204?{success:!0}:await n.json();const p=await n.json().catch(()=>({error:"Network error"}));throw new Error(p.error||`HTTP ${n.status}: ${n.statusText}`)}catch(n){if(n.name==="TypeError"&&n.message.includes("fetch")){if(console.error(`API Fetch Error (attempt ${h+1}/${b+1}):`,n),console.error("Attempted URL:",`${Ee}${l}`),h<b){const p=Math.min(1e3*Math.pow(2,h),1e4);return console.log(`Retrying in ${p}ms...`),await new Promise(o=>setTimeout(o,p)),hs(a,m,h+1,b)}throw new Error("Cannot connect to server. The server may be waking up. Please try again in a moment.")}throw n}},_=(a,m={})=>hs(a,m,0,3),We={login:a=>_("/auth/login",{method:"POST",body:JSON.stringify(a)}),pinLogin:a=>_("/auth/pin-login",{method:"POST",body:JSON.stringify(a)}),signup:a=>_("/auth/signup",{method:"POST",body:JSON.stringify(a)}),signupWithPayment:a=>_("/signup-with-payment",{method:"POST",body:JSON.stringify(a)}),me:()=>_("/auth/me"),getSubscriptionStatus:()=>_("/user/subscription-status"),renewSubscription:(a=30)=>_("/subscriptions/renew",{method:"POST",body:JSON.stringify({duration_days:a})})},as={getPlans:()=>_("/subscriptions/plans"),getOverview:()=>{const a=localStorage.getItem("ownerToken");return _("/subscriptions/overview",{headers:a?{Authorization:`Bearer ${a}`}:{}})},checkExpiry:()=>{const a=localStorage.getItem("ownerToken");return _("/subscriptions/check-expiry",{headers:a?{Authorization:`Bearer ${a}`}:{}})},getUserSubscriptionStatus:a=>{const m=localStorage.getItem("ownerToken");return _("/user/subscription-status",{headers:m?{Authorization:`Bearer ${m}`}:{}})}},Ke={getAll:()=>_("/users"),create:a=>_("/users",{method:"POST",body:JSON.stringify(a)}),update:(a,m)=>_(`/users/${a}`,{method:"PUT",body:JSON.stringify(m)}),delete:a=>_(`/users/${a}`,{method:"DELETE"}),setPin:(a,m)=>_(`/users/${a}/set-pin`,{method:"POST",body:JSON.stringify({pin:m})}),lock:(a,m)=>_(`/users/${a}/lock`,{method:"POST",body:JSON.stringify({locked:m})})},Oe={getAll:()=>_("/products"),create:a=>_("/products",{method:"POST",body:JSON.stringify(a)}),update:(a,m)=>_(`/products/${a}`,{method:"PUT",body:JSON.stringify(m)}),delete:a=>_(`/products/${a}`,{method:"DELETE"}),updateStock:(a,m)=>_(`/products/${a}/stock`,{method:"PUT",body:JSON.stringify(m)}),getMaxProducible:a=>_(`/products/${a}/max-producible`),getStockStatus:()=>_("/products/stock-status")},oa={getAll:()=>_("/sales"),create:a=>_("/sales",{method:"POST",body:JSON.stringify(a)}),delete:a=>_(`/sales/${a}`,{method:"DELETE"})},Da={getAll:()=>_("/expenses"),create:a=>_("/expenses",{method:"POST",body:JSON.stringify(a)}),update:(a,m)=>_(`/expenses/${a}`,{method:"PUT",body:JSON.stringify(m)}),delete:a=>_(`/expenses/${a}`,{method:"DELETE"})},Ns={get:()=>_("/stats")},pa={getAll:()=>_("/discounts"),create:a=>_("/discounts",{method:"POST",body:JSON.stringify(a)}),update:(a,m)=>_(`/discounts/${a}`,{method:"PUT",body:JSON.stringify(m)}),delete:a=>_(`/discounts/${a}`,{method:"DELETE"})},Ma={getAll:()=>_("/credit-requests"),create:a=>_("/credit-requests",{method:"POST",body:JSON.stringify(a)}),approve:a=>_(`/credit-requests/${a}/approve`,{method:"POST"}),reject:a=>_(`/credit-requests/${a}/reject`,{method:"POST"})},ta={get:async()=>({screenLockPassword:"2005",businessName:"My Business"}),update:async a=>a},Ea={getAll:a=>{const m=a?`/batches?productId=${a}`:"/batches";return _(m)},create:a=>_("/batches",{method:"POST",body:JSON.stringify(a)})},xs={clearData:(a="all")=>_("/clear-data",{method:"POST",body:JSON.stringify({type:a})})},ma={login:a=>_("/main-admin/auth/login",{method:"POST",body:JSON.stringify(a)}),getUsers:()=>{const a=localStorage.getItem("ownerToken");return _("/main-admin/users",{headers:{Authorization:`Bearer ${a}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})},getStats:()=>{const a=localStorage.getItem("ownerToken");return _("/main-admin/stats",{headers:{Authorization:`Bearer ${a}`,"Cache-Control":"no-cache, no-store, must-revalidate",Pragma:"no-cache",Expires:"0"}})},getActivities:()=>{const a=localStorage.getItem("ownerToken");return _("/main-admin/activities",{headers:{Authorization:`Bearer ${a}`}})},getSalesAll:()=>{const a=localStorage.getItem("ownerToken");return _("/main-admin/sales-all",{headers:{Authorization:`Bearer ${a}`}})},getTimeEntriesAll:()=>{const a=localStorage.getItem("ownerToken");return _("/main-admin/time-entries-all",{headers:{Authorization:`Bearer ${a}`}})},lockUser:(a,m)=>{const h=localStorage.getItem("ownerToken");return _(`/main-admin/users/${a}/lock`,{method:"POST",headers:{Authorization:`Bearer ${h}`},body:JSON.stringify({locked:m})})},changePlan:(a,m)=>{const h=localStorage.getItem("ownerToken");return _(`/main-admin/users/${a}/plan`,{method:"POST",headers:{Authorization:`Bearer ${h}`},body:JSON.stringify({plan:m})})},deleteUser:a=>{const m=localStorage.getItem("ownerToken");return _(`/main-admin/users/${a}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`}})},clearData:a=>{const m=localStorage.getItem("ownerToken");return _("/main-admin/system/clear-data",{method:"POST",headers:{Authorization:`Bearer ${m}`},body:JSON.stringify({type:a})})},lockUserScreen:a=>{const m=localStorage.getItem("ownerToken");return _(`/admin/lock-user-screen/${a}`,{method:"POST",headers:{Authorization:`Bearer ${m}`}})}};let $e=null,Na=new Set;function nr(){const a=Ee.replace(/\/api$/,"");return`${a.startsWith("https")?"wss":"ws"}://${a.replace(/^https?:\/\//,"")}/api/ws/products`}function mr(){if($e&&($e.readyState===WebSocket.OPEN||$e.readyState===WebSocket.CONNECTING))return;const a=bs(),m=nr()+(a?`?token=${encodeURIComponent(a)}`:"");$e=new WebSocket(m),$e.onopen=()=>{console.debug("Products WS connected")},$e.onmessage=h=>{let b=null;try{b=JSON.parse(h.data)}catch{return}Na.forEach(u=>{try{u(b)}catch(l){console.error("ws callback error",l)}})},$e.onclose=()=>{console.debug("Products WS closed"),$e=null},$e.onerror=h=>{console.error("Products WS error",h)}}function tr(a){if(typeof a!="function")throw new Error("subscribeProducts requires a callback");return Na.add(a),mr(),()=>{if(Na.delete(a),$e&&Na.size===0){try{$e.close()}catch{}$e=null}}}function lr(){return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-orange-50 to-yellow-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8 text-center border border-red-200",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-gradient-to-br from-red-500 to-orange-500 rounded-full mx-auto mb-6 flex items-center justify-center",children:e.jsxDEV(Re,{className:"w-10 h-10 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:8,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:7,columnNumber:9},this),e.jsxDEV("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Account Suspended"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:11,columnNumber:9},this),e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[e.jsxDEV("p",{className:"text-red-700 font-medium mb-2",children:"Out of credit"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:14,columnNumber:11},this),e.jsxDEV("p",{className:"text-red-600 text-sm",children:"Your account has been temporarily suspended. Please reach out to the developer to resolve this issue."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:15,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:13,columnNumber:9},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[e.jsxDEV(xa,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:22,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:"Contact: support@universal.com"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:23,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:21,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center gap-2 text-gray-600",children:[e.jsxDEV(Us,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:26,columnNumber:13},this),e.jsxDEV("span",{className:"text-sm",children:"Phone: +254 XXX XXX XXX"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:27,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:25,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:20,columnNumber:9},this),e.jsxDEV("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxDEV("p",{className:"text-xs text-gray-500",children:["Account ID: ",localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")).id:"Unknown"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:32,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:31,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:6,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/LockedAccount.jsx",lineNumber:5,columnNumber:5},this)}const vs=i.createContext(),Fe=()=>i.useContext(vs),or=({children:a})=>{const[m,h]=i.useState(null),[b,u]=i.useState(!0),[l,t]=i.useState(!1),[n,p]=i.useState({});i.useEffect(()=>{x()},[]),i.useEffect(()=>{const S=()=>{const X=localStorage.getItem("user");if(X)try{const B=JSON.parse(X);h(B)}catch(B){console.warn("Failed to parse user from localStorage",B)}else h(null)},I=X=>{const B=X.detail?.userId,pe=m||JSON.parse(localStorage.getItem("user")||"{}");pe&&pe.id===B&&(alert("âš ï¸ Your account has been locked by the system administrator. You will be logged out."),localStorage.removeItem("token"),localStorage.removeItem("user"),h(null),setTimeout(()=>{window.location.href="/auth/login?reason=account_locked"},1e3))};return window.addEventListener("storage",S),window.addEventListener("localStorageUpdated",S),window.addEventListener("accountLocked",I),()=>{window.removeEventListener("storage",S),window.removeEventListener("localStorageUpdated",S),window.removeEventListener("accountLocked",I)}},[m]);const o=()=>{["products","sales","expenses","activities","timeEntries","dashboardCache","inventoryCache","analyticsCache"].forEach(I=>{try{localStorage.removeItem(I),sessionStorage.removeItem(I)}catch(X){console.warn(`Failed to clear ${I}`,X)}})},x=async()=>{try{o();const S=localStorage.getItem("token"),I=localStorage.getItem("user");if(S&&I)try{const X=JSON.parse(I);if(X.locked){localStorage.removeItem("token"),localStorage.removeItem("user"),h(null),t(!0),u(!1);return}h(X),fetch(`${Ee}/auth/me`,{headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}}).then(B=>{if(B.ok)return B.json().then(pe=>{pe.locked?(localStorage.removeItem("token"),localStorage.removeItem("user"),h(null)):(h(pe),localStorage.setItem("user",JSON.stringify(pe)))});throw new Error("Invalid token")}).catch(B=>{console.warn("Auth check failed:",B),localStorage.removeItem("token"),localStorage.removeItem("user")})}catch(X){console.warn("Auth initialization failed:",X),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(S){console.error("Error initializing auth:",S),localStorage.removeItem("token"),localStorage.removeItem("user"),h(null)}finally{t(!0),u(!1)}},v=async S=>{try{if(S&&S.token&&S.user)return localStorage.setItem("token",S.token),localStorage.setItem("user",JSON.stringify(S.user)),h(S.user),S;const I=await We.login(S);if(I.token&&I.user)return localStorage.setItem("token",I.token),localStorage.setItem("user",JSON.stringify(I.user)),h(I.user),I;throw new Error("Invalid response from server")}catch(I){throw console.error("Login failed:",I),I}},s=async S=>{try{const I=await We.signup(S);if(I.token&&I.user)return localStorage.setItem("token",I.token),localStorage.setItem("user",JSON.stringify(I.user)),h(I.user),I;throw new Error("Invalid response from server")}catch(I){throw console.error("Signup failed:",I),I}},w=async S=>{try{if(localStorage.setItem("user",JSON.stringify(S)),h(S),window.dispatchEvent(new Event("localStorageUpdated")),S&&S.id)try{await Ke.update(S.id,S)}catch(I){console.warn("Failed to persist updated user to backend",I)}return S}catch(I){throw console.error("updateUser failed:",I),I}},f=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),h(null),window.location.href="/login"},j=()=>!!m&&!!localStorage.getItem("token"),C=S=>m&&m.role===S,g=()=>m&&(m.role==="admin"||m.role==="main-admin"),P=()=>m&&m.role==="cashier",k=()=>m&&m.plan==="ultra",M=()=>m&&m.plan==="basic",D=()=>m&&(m.role==="admin"||m.role==="cashier"),F=()=>m&&m.role==="admin"&&m.plan==="ultra",$=()=>m&&m.role==="admin",A=()=>!0,y=()=>!0;return m?.locked?e.jsxDEV(lr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/context/AuthContext.jsx",lineNumber:252,columnNumber:12},void 0):e.jsxDEV(vs.Provider,{value:{user:m,loading:b,isInitialized:l,appSettings:n,login:v,signup:s,updateUser:w,logout:f,isAuthenticated:j,hasRole:C,isAdmin:g,isCashier:P,isUltraPackage:k,isBasicPackage:M,canEditStock:D,canManageUsers:F,canViewAnalytics:$,isRealTimeProductSyncEnabled:A,isCashierUserManagementEnabled:y},children:a},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/context/AuthContext.jsx",lineNumber:256,columnNumber:5},void 0)};new Date().toISOString();const fs=i.createContext(),ur=()=>i.useContext(fs),cr=({children:a})=>{const{user:m}=Fe(),[h,b]=i.useState([]),[u,l]=i.useState(!0),[t,n]=i.useState(null),[p,o]=i.useState(Date.now()),x=i.useCallback(async()=>{if(!localStorage.getItem("token")){l(!1);return}try{const s=await Oe.getAll(),f=(Array.isArray(s)?s:[]).filter(j=>m?.role==="admin"?!0:!j.expenseOnly&&!j.pendingDelete&&j.visibleToCashier!==!1);b(f),n(null),window.dispatchEvent(new CustomEvent("productsSync",{detail:{products:f,timestamp:Date.now()}}))}catch(s){console.error("Failed to fetch products:",s),n(`Failed to load products: ${s.message}`),b([])}finally{l(!1),o(Date.now())}},[m]);i.useEffect(()=>{x()},[x,m]),i.useEffect(()=>{const s=setInterval(()=>{x()},500);return()=>clearInterval(s)},[x]),i.useEffect(()=>{const s=()=>{console.log("ðŸ”„ Data cleared event received - forcing products refresh"),b([]),n(null),x()};return window.addEventListener("dataCleared",s),window.addEventListener("productsCleared",s),()=>{window.removeEventListener("dataCleared",s),window.removeEventListener("productsCleared",s)}},[x]);const v=async()=>{l(!0),await x()};return e.jsxDEV(fs.Provider,{value:{products:h,loading:u,error:t,lastUpdated:p,refreshProducts:v},children:a},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/context/ProductsContext.jsx",lineNumber:94,columnNumber:5},void 0)},gs=i.createContext();function dr({children:a}){const[m,h]=i.useState(!1),[b,u]=i.useState(""),l=i.useCallback((n="timeout")=>{h(!0),u(n),console.log(`ðŸ”’ Screen locked by: ${n}`)},[]),t=i.useCallback(()=>{h(!1),u(""),console.log("ðŸ”“ Screen unlocked")},[]);return e.jsxDEV(gs.Provider,{value:{isLocked:m,lockReason:b,lock:l,unlock:t},children:a},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/context/ScreenLockContext.jsx",lineNumber:22,columnNumber:5},this)}function pr(){const a=i.useContext(gs);if(!a)throw new Error("useScreenLock must be used within ScreenLockProvider");return a}function br(){const[a,m]=i.useState({stats:{totalSales:0,totalExpenses:0,profit:0,grossProfit:0,netProfit:0,totalCOGS:0,dailySales:0,weeklySales:0,productCount:0},recentSales:[]}),[h,b]=i.useState(!0),[u,l]=i.useState(null);i.useEffect(()=>{t()},[]);const t=async()=>{try{l(null);const[o,x]=await Promise.all([Ns.get(),oa.getAll()]),v={totalSales:o?.totalSales||0,totalExpenses:o?.totalExpenses||0,profit:o?.profit||0,grossProfit:o?.grossProfit||0,netProfit:o?.netProfit||0,totalCOGS:o?.totalCOGS||0,dailySales:o?.dailySales||0,weeklySales:o?.weeklySales||0,productCount:o?.productCount||0},s=Array.isArray(x)?x:[];m({stats:v,recentSales:s.slice(-10).reverse()})}catch(o){console.error("Failed to load data:",o),l(o.message),m({stats:{totalSales:0,totalExpenses:0,profit:0,grossProfit:0,netProfit:0,totalCOGS:0,dailySales:0,weeklySales:0,productCount:0},recentSales:[]})}finally{b(!1)}};if(h)return e.jsxDEV("div",{className:"flex items-center justify-center h-full",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:63,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:62,columnNumber:7},this);if(u&&a.stats.totalSales===0&&a.recentSales.length===0)return e.jsxDEV("div",{className:"p-6",children:e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[e.jsxDEV(va,{className:"w-12 h-12 text-red-400 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:73,columnNumber:11},this),e.jsxDEV("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Unable to Load Dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:74,columnNumber:11},this),e.jsxDEV("p",{className:"text-red-600 mb-4",children:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:75,columnNumber:11},this),e.jsxDEV("button",{onClick:t,className:"btn-primary",children:"Retry"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:76,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:72,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:71,columnNumber:7},this);const n=[{label:"Total Sales",value:`KSH ${a.stats.totalSales?.toLocaleString()||0}`,icon:Ye,color:"from-green-500 to-emerald-600",change:"+12.5%"},{label:"Gross Profit",value:`KSH ${a.stats.grossProfit?.toLocaleString()||0}`,icon:Ge,color:"from-blue-500 to-indigo-600",change:"+8.2%"},{label:"Total COGS",value:`KSH ${a.stats.totalCOGS?.toLocaleString()||0}`,icon:sa,color:"from-orange-500 to-red-600",change:"+5.1%"},{label:"Net Profit",value:`KSH ${a.stats.netProfit?.toLocaleString()||0}`,icon:Ge,color:"from-purple-500 to-pink-600",change:"+15.3%"}],p=[{label:"Daily Sales",value:`KSH ${a.stats.dailySales?.toLocaleString()||0}`,icon:ns,color:"bg-blue-50 text-blue-600"},{label:"Weekly Sales",value:`KSH ${a.stats.weeklySales?.toLocaleString()||0}`,icon:Ge,color:"bg-green-50 text-green-600"},{label:"Total Expenses",value:`KSH ${a.stats.totalExpenses?.toLocaleString()||0}`,icon:fa,color:"bg-red-50 text-red-600"},{label:"Products",value:a.stats.productCount||0,icon:sa,color:"bg-purple-50 text-purple-600"}];return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(n||[]).map((o,x)=>{const v=o?.icon;return v?e.jsxDEV("div",{className:`card bg-gradient-to-br ${o.color} text-white border-0 shadow-lg hover:shadow-xl transition-all transform hover:scale-105`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:e.jsxDEV(v,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:157,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:156,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm font-semibold bg-white/20 px-2 py-1 rounded-full",children:o.change},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:159,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:155,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-white/80 mb-1",children:o.label},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:163,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:o.value},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:164,columnNumber:15},this)]},x,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:154,columnNumber:13},this):null})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:149,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(p||[]).map((o,x)=>{const v=o?.icon;return v?e.jsxDEV("div",{className:"card",children:e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-xl ${o.color} flex items-center justify-center`,children:e.jsxDEV(v,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:179,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:178,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-600",children:o.label},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:182,columnNumber:19},this),e.jsxDEV("p",{className:"text-xl font-bold text-gray-900",children:o.value},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:183,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:181,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:177,columnNumber:15},this)},x,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:176,columnNumber:13},this):null})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:171,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Recent Sales"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:194,columnNumber:11},this),e.jsxDEV("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:195,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:193,columnNumber:9},this),!a.recentSales||a.recentSales.length===0?e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(va,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:203,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500",children:"No sales yet"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:204,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:202,columnNumber:11},this):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:211,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:212,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:213,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:214,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"COGS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:215,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Profit"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:216,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:210,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:209,columnNumber:15},this),e.jsxDEV("tbody",{children:(a.recentSales||[]).map(o=>o?e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:o.createdAt?new Date(o.createdAt).toLocaleString():"N/A"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:224,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:[Array.isArray(o.items)?o.items.length:0," items"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:225,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-success",children:o.paymentMethod||"N/A"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:227,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:226,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",o.total?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:229,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm text-orange-600",children:["KSH ",o.cogs?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:232,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-blue-600",children:["KSH ",o.profit?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:235,columnNumber:23},this)]},o.id||Math.random(),!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:223,columnNumber:21},this):null)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:208,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:207,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:192,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Overview.jsx",lineNumber:146,columnNumber:5},this)}const hr=()=>"https://posifine22.onrender.com/api".replace("https://","wss://").replace("http://","ws://");class Nr{constructor(){this.ws=null,this.listeners={stock_updated:[],heartbeat:[],initial:[],error:[],sale_deleted:[],sale_created:[],product_deleted:[],product_created:[],product_updated:[],user_deleted:[],data_cleared:[],products_cleared:[],cashier_clocked_in:[],cashier_clocked_out:[]},this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=3e3,this.isManualClose=!1}connect(m,h){return new Promise((b,u)=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){b();return}if(!m){u(new Error("No token provided for WebSocket connection"));return}const l=`${hr()}/ws/products?token=${encodeURIComponent(m)}`;try{this.ws=new WebSocket(l),this.ws.onopen=()=>{console.log("âœ… WebSocket connected for real-time updates"),this.reconnectAttempts=0,b()},this.ws.onmessage=t=>{try{const n=JSON.parse(t.data);n.type==="stock_updated"?(console.log("ðŸ“¦ Stock update received:",n.data),h&&h(n.data),this.emit("stock_updated",n.data)):n.type==="product_created"?(console.log("âœ¨ New product created:",n.data.product),this.emit("product_created",n.data),window.dispatchEvent(new Event("productCreated"))):n.type==="product_updated"?(console.log("ðŸ“ Product updated:",n.data.product),this.emit("product_updated",n.data),window.dispatchEvent(new Event("productUpdated"))):n.type==="initial"?(console.log("ðŸ“¦ Initial products loaded via WebSocket"),this.emit("initial",n.products)):n.type==="heartbeat"?this.emit("heartbeat",n):n.type==="sale_deleted"?(console.log("ðŸ—‘ï¸ Sale deleted:",n.data),this.emit("sale_deleted",n.data),window.dispatchEvent(new Event("saleDeleted"))):n.type==="product_deleted"?(console.log("ðŸ—‘ï¸ Product deleted:",n.data),this.emit("product_deleted",n.data),window.dispatchEvent(new Event("dataUpdated"))):n.type==="user_deleted"?(console.log("ðŸ—‘ï¸ User deleted:",n.data),this.emit("user_deleted",n.data),window.dispatchEvent(new Event("userDeleted"))):n.type==="data_cleared"?(console.log("ðŸ—‘ï¸ Data cleared:",n.data),this.emit("data_cleared",n.data),window.dispatchEvent(new Event("dataUpdated"))):n.type==="products_cleared"?(console.log("ðŸ—‘ï¸ Products cleared:",n.data),this.emit("products_cleared",n.data),window.dispatchEvent(new CustomEvent("productsCleared",{detail:n.data}))):n.type==="sale_created"?(console.log("ðŸ’° New sale recorded:",n.data.sale),this.emit("sale_created",n.data),window.dispatchEvent(new CustomEvent("saleCreated",{detail:n.data}))):n.type==="cashier_clocked_in"?(console.log("â° Cashier clocked in:",n.data.entry),this.emit("cashier_clocked_in",n.data),window.dispatchEvent(new CustomEvent("cashierClockIn",{detail:n.data}))):n.type==="cashier_clocked_out"&&(console.log("â° Cashier clocked out:",n.data.entry),this.emit("cashier_clocked_out",n.data),window.dispatchEvent(new CustomEvent("cashierClockOut",{detail:n.data})))}catch(n){console.error("Error parsing WebSocket message:",n)}},this.ws.onerror=t=>{console.error("âŒ WebSocket error:",t),this.emit("error",t),u(t)},this.ws.onclose=()=>{console.log("ðŸ”Œ WebSocket disconnected"),this.isManualClose||this.attemptReconnect(m,h)}}catch(t){console.error("Failed to create WebSocket:",t),u(t)}})}attemptReconnect(m,h){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached");return}this.reconnectAttempts++;const b=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`ðŸ”„ Reconnecting in ${b}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect(m,h).catch(u=>{console.error("Reconnection failed:",u)})},b)}on(m,h){this.listeners[m]||(this.listeners[m]=[]),this.listeners[m].push(h)}emit(m,h){this.listeners[m]&&this.listeners[m].forEach(b=>{try{b(h)}catch(u){console.error(`Error in ${m} listener:`,u)}})}disconnect(){this.isManualClose=!0,this.ws&&(this.ws.close(),this.ws=null)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}}const Va=new Nr;function xr(){const{user:a,isUltraPackage:m,isRealTimeProductSyncEnabled:h}=Fe(),{products:b,refreshProducts:u}=ur(),[l,t]=i.useState([]),[n,p]=i.useState([]),[o,x]=i.useState("all"),[v,s]=i.useState(""),[w,f]=i.useState(!1),[j,C]=i.useState(!1),[g,P]=i.useState(!1),[k,M]=i.useState(null),[D,F]=i.useState(null),[$,A]=i.useState(null),[y,S]=i.useState(!1),[I,X]=i.useState(null),[B,pe]=i.useState(""),[Z,je]=i.useState({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0}),[he,G]=i.useState({quantity:"",expiryDate:"",batchNumber:"",cost:""}),[H,oe]=i.useState({name:"",price:"",cost:"",quantity:"",unit:"pcs",category:"raw",expenseOnly:!1,image:"",visibleToCashier:!0});i.useEffect(()=>{E();const d=localStorage.getItem("token");return d&&Va.connect(d,O=>{O&&O.allProducts&&t(O.allProducts)}).catch(O=>{console.warn("WebSocket connection failed:",O)}),()=>{Va.disconnect()}},[]);const E=async()=>{try{await u();const d=await Ea.getAll();p(d)}catch(d){console.error("Failed to load data:",d)}};i.useEffect(()=>{b&&t(b)},[b]);const W=(d,O=!0)=>{const T=d.target.files[0];if(T){if(T.size>2*1024*1024){re("Image must be smaller than 2MB","error");return}const te=new FileReader;te.onload=ne=>{const Q=ne.target.result;pe(Q),O?je({...Z,image:Q}):(oe({...H,image:Q}),H.id&&setTimeout(async()=>{try{await Oe.update(H.id,{image:Q}),re("âœ… Image saved","success")}catch(Te){console.error("Failed to save image:",Te)}},500))},te.readAsDataURL(T)}},K=d=>n.filter(T=>T.productId===d&&T.quantity>0).reduce((T,te)=>T+te.quantity,0),fe=d=>n.filter(O=>O.productId===d&&O.quantity>0),we=(d,O)=>!O||!d?d:["kg","g","gram","grams","kilogram","kilograms"].includes(O.toLowerCase())?d>=1?`${d.toFixed(2)}`:`${d.toFixed(3)}`.replace(/\.?0+$/,""):Math.round(d).toString(),re=(d,O="success")=>{A({message:d,type:O}),setTimeout(()=>A(null),5e3)},Se=async d=>{d.preventDefault(),console.log("ðŸ”µ handleAddProduct triggered",{newProduct:Z});try{if(!Z.name||!Z.name.trim()){re("âŒ Product name is required","error");return}if(!Z.price||isNaN(parseFloat(Z.price))){re("âŒ Valid product price is required","error");return}const O={...Z,price:parseFloat(Z.price),cost:parseFloat(Z.cost||0),quantity:0,visibleToCashier:!Z.expenseOnly&&Z.visibleToCashier!==!1};console.log("ðŸ“ Sending product data to API:",O);const T=await Oe.create(O);console.log("âœ… Product created successfully:",T),je({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0}),pe(""),f(!1),console.log("ðŸ”„ Refreshing product list..."),await E(),re(`âœ… Product "${T.name}" added successfully! ${T.visibleToCashier?"Cashiers can now see this product.":"This product is hidden from cashiers."}`,"success")}catch(O){console.error("âŒ Failed to create product:",O),console.error("Error details:",{message:O.message,status:O.status,stack:O.stack}),re(`âŒ Failed to create product: ${O.message||"Unknown error"}`,"error")}},N=async d=>{d.preventDefault();try{const O=parseFloat(he.quantity);if(isNaN(O)||O<=0){re("âŒ Please enter a valid quantity","error");return}const te=k.unit&&["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit.toLowerCase())?.01:1;if(O<te){re(`âŒ Minimum quantity is ${te} ${k.unit}`,"error");return}const ne={id:`batch-${Date.now()}`,productId:k.id,quantity:O,expiryDate:he.expiryDate,batchNumber:he.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(he.cost||k.cost||0)};p(Q=>[...Q,ne]),re("âš¡ Adding stock...","info");try{await Ea.create({productId:k.id,quantity:O,expiryDate:he.expiryDate,batchNumber:he.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(he.cost||k.cost||0)}),G({quantity:"",expiryDate:"",batchNumber:"",cost:""}),P(!1),M(null),await E(),re(`âœ… Stock added successfully for ${k.name}!`,"success")}catch(Q){throw p(Te=>Te.filter(Ie=>Ie.id!==ne.id)),Q}}catch(O){console.error("Failed to add stock:",O),re(`âŒ Failed to add stock: ${O.message||"Unknown error"}`,"error")}},U=async d=>{d.preventDefault();try{const O=l.find(ne=>ne.id===H.id);if(parseFloat(H.price)<O.price){alert("You cannot lower prices, only increase.");return}const T={...H,price:parseFloat(H.price),cost:parseFloat(H.cost),quantity:parseFloat(H.quantity)},te={...O,...T};t(ne=>ne.map(Q=>Q.id===H.id?te:Q)),S(!0),re("âš¡ Updating product...","info");try{const ne=await Oe.update(H.id,T);C(!1),h()?(window.dispatchEvent(new CustomEvent("productUpdated",{detail:{product:ne,originalProduct:O,timestamp:new Date().toISOString(),type:"update"}})),re("âœ… Product updated and synced!","success")):re("âœ… Product updated successfully!","success"),X(new Date)}catch(ne){throw t(Q=>Q.map(Te=>Te.id===H.id?O:Te)),ne}finally{S(!1)}}catch(O){console.error("Failed to update product:",O),re(`âŒ Update failed: ${O.message||"Unknown error"}`,"error")}},J=async d=>{try{if(!confirm("Are you sure you want to delete this product? This action cannot be undone."))return;const O=l.find(te=>te.id===d),T=await Oe.delete(d);if(t(te=>te.filter(ne=>ne.id!==d)),h()&&O)S(!0),window.dispatchEvent(new CustomEvent("productDeleted",{detail:{product:O,timestamp:new Date().toISOString(),type:"delete"}})),re(`ðŸ“¡ Product "${O.name}" deleted and synced to all dashboards!`,"success"),X(new Date),setTimeout(()=>{S(!1)},3e3);else{const te=T?.message||"Product deleted successfully!";alert(te)}await u()}catch(O){console.error("Failed to delete product:",O);let T="Failed to delete product";O.message.includes("Failed to execute")||O.message.includes("JSON")?T="Network error. Please check your connection and try again.":O.message.includes("401")||O.message.includes("unauthorized")?T="You are not authorized to delete this product.":O.message.includes("404")||O.message.includes("not found")?T="Product not found. It may have been deleted already.":O.message&&(T=`Failed to delete product: ${O.message}`),alert(T)}},ie=(l||[]).filter(d=>{if(!d)return!1;const O=d.name?.toLowerCase().includes(v.toLowerCase()),T=o==="all"||o==="raw"&&!d.recipe||o==="composite"&&d.recipe||o==="expense"&&d.expenseOnly||o==="low-stock"&&d.quantity<10;return O&&T}),Ne=(l||[]).filter(d=>d&&!d.recipe&&!d.expenseOnly),ue=(l||[]).filter(d=>d&&d.recipe),ae=(l||[]).filter(d=>d&&d.expenseOnly),ve=d=>{if(!d||!d.recipe)return 0;let O=1/0;return(d.recipe||[]).forEach(T=>{if(!T)return;const te=(l||[]).find(ne=>ne&&ne.id===T.productId);if(te&&te.quantity>0&&T.quantity>0){const ne=Math.floor(te.quantity/T.quantity);O=Math.min(O,ne)}}),O===1/0?0:O},ge=d=>{if(!d)return 0;if(!d.recipe)return d.cost||0;let O=0;return(d.recipe||[]).forEach(T=>{if(!T)return;const te=(l||[]).find(ne=>ne&&ne.id===T.productId);if(te&&te.quantity>0){const ne=(te.cost||0)/te.quantity;O+=ne*(T.quantity||0)}}),O};return e.jsxDEV("div",{className:"p-6 space-y-6",children:[$&&e.jsxDEV("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-md ${$.type==="success"?"bg-green-50 border border-green-200 text-green-800":$.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-blue-50 border border-blue-200 text-blue-800"}`,children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm font-medium",children:$.message},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:481,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>A(null),className:"ml-2 text-gray-400 hover:text-gray-600",children:"Ã—"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:482,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:480,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:475,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:496,columnNumber:13},this),e.jsxDEV("input",{type:"text",placeholder:"Search products...",className:"input pl-10 w-80",value:v,onChange:d=>s(d.target.value)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:497,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:495,columnNumber:11},this),e.jsxDEV("select",{value:o,onChange:d=>x(d.target.value),className:"input w-40",children:[e.jsxDEV("option",{value:"all",children:"All Products"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:511,columnNumber:13},this),e.jsxDEV("option",{value:"raw",children:"Raw Materials"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:512,columnNumber:13},this),e.jsxDEV("option",{value:"composite",children:"Composite"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:513,columnNumber:13},this),e.jsxDEV("option",{value:"expense",children:"Expense Only"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:514,columnNumber:13},this),e.jsxDEV("option",{value:"low-stock",children:"Low Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:515,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:506,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:494,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>f(!0),className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:523,columnNumber:11},this),"Add Product"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:519,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:493,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Raw Materials"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:531,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-blue-900",children:Ne.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:532,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:530,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-purple-700 mb-2",children:"Composite Products"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:535,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-purple-900",children:ue.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:536,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:534,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[e.jsxDEV("h4",{className:"text-sm font-medium text-orange-700 mb-2",children:"Expense Items"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:539,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-orange-900",children:ae.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:540,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:538,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:529,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Image"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:551,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Product Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:552,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:553,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:554,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cost/COGS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:555,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:556,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Batches"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:557,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Max Units"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:558,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Margin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:559,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:560,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:550,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:549,columnNumber:13},this),e.jsxDEV("tbody",{children:(ie||[]).map(d=>{if(!d)return null;const O=ge(d),T=d.price?((d.price-O)/d.price*100).toFixed(1):0,te=ve(d),ne=D===d.id;return e.jsxDEV(e.Fragment,{children:[e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3",children:[d.image?e.jsxDEV("img",{src:d.image,alt:d.name,className:"w-12 h-12 object-cover rounded-lg",onError:Q=>{Q.target.style.display="none",Q.target.nextSibling.style.display="flex"}},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:579,columnNumber:27},this):null,e.jsxDEV("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",style:{display:d.image?"none":"flex"},children:e.jsxDEV("span",{className:"text-xs text-gray-400",children:"No Image"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:590,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:589,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:577,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[d.recipe&&e.jsxDEV("button",{onClick:()=>F(ne?null:d.id),className:"p-1 hover:bg-gray-200 rounded",children:ne?e.jsxDEV($s,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:600,columnNumber:45},this):e.jsxDEV(Fs,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:600,columnNumber:81},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:596,columnNumber:29},this),e.jsxDEV("span",{className:"font-medium",children:d.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:603,columnNumber:27},this),d.quantity<10&&!d.recipe&&e.jsxDEV(Xe,{className:"w-4 h-4 text-orange-500"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:605,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:594,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:593,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("span",{className:`badge ${d.expenseOnly?"badge-warning":d.recipe?"badge-success":"bg-blue-100 text-blue-800"}`,children:d.expenseOnly?"Expense":d.recipe?"Composite":"Raw"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:610,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:609,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 font-semibold text-green-600",children:["KSH ",d.price?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:618,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-orange-600",children:["KSH ",O.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:621,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`font-medium ${K(d.id)===0?"text-red-600":K(d.id)<10?"text-yellow-600":"text-gray-900"}`,children:[we(K(d.id),d.unit)," ",d.unit]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:626,columnNumber:27},this),K(d.id)<10&&K(d.id)>0&&e.jsxDEV(Xe,{className:"w-4 h-4 text-yellow-500"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:633,columnNumber:29},this),K(d.id)===0&&e.jsxDEV("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full font-medium",children:"Out of Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:636,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:625,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:624,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"text-gray-600",children:[fe(d.id).length," active"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:644,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>{M(d),P(!0)},className:"p-1 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Add Stock",children:e.jsxDEV(Le,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:653,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:645,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:643,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:642,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:d.recipe?e.jsxDEV("span",{className:"font-semibold text-blue-600",children:[te," units"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:659,columnNumber:27},this):e.jsxDEV("span",{className:"text-gray-400",children:"-"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:661,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:657,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("span",{className:`font-semibold ${T>30?"text-green-600":T>15?"text-yellow-600":"text-red-600"}`,children:[T,"%"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:665,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:664,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>{oe(d),C(!0)},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-colors",children:e.jsxDEV(Qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:678,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:671,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>J(d.id),className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-colors",children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:684,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:680,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:670,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:669,columnNumber:23},this)]},d.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:575,columnNumber:21},this),ne&&d.recipe&&e.jsxDEV("tr",{className:"bg-blue-50",children:e.jsxDEV("td",{colSpan:"9",className:"px-4 py-4",children:e.jsxDEV("div",{className:"ml-8",children:[e.jsxDEV("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:"Recipe Breakdown:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:696,columnNumber:29},this),e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{className:"bg-white",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Ingredient"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:700,columnNumber:35},this),e.jsxDEV("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Quantity Needed"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:701,columnNumber:35},this),e.jsxDEV("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Available"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:702,columnNumber:35},this),e.jsxDEV("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Unit Cost"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:703,columnNumber:35},this),e.jsxDEV("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Total Cost"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:704,columnNumber:35},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:699,columnNumber:33},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:698,columnNumber:31},this),e.jsxDEV("tbody",{children:(d.recipe||[]).map((Q,Te)=>{if(!Q)return null;const Ie=(l||[]).find(_e=>_e&&_e.id===Q.productId);if(!Ie)return null;const ze=(Ie.cost||0)/(Ie.quantity||1),Ze=ze*(Q.quantity||0);return e.jsxDEV("tr",{className:"border-t border-blue-100",children:[e.jsxDEV("td",{className:"px-3 py-2",children:Ie.name||"Unknown"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:718,columnNumber:39},this),e.jsxDEV("td",{className:"px-3 py-2",children:[Q.quantity||0," ",Ie.unit||"pcs"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:719,columnNumber:39},this),e.jsxDEV("td",{className:"px-3 py-2",children:[Ie.quantity||0," ",Ie.unit||"pcs"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:720,columnNumber:39},this),e.jsxDEV("td",{className:"px-3 py-2",children:["KSH ",ze.toFixed(2)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:721,columnNumber:39},this),e.jsxDEV("td",{className:"px-3 py-2 font-semibold",children:["KSH ",Ze.toFixed(2)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:722,columnNumber:39},this)]},Te,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:717,columnNumber:37},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:708,columnNumber:31},this),e.jsxDEV("tfoot",{className:"bg-white font-semibold",children:e.jsxDEV("tr",{children:[e.jsxDEV("td",{colSpan:"4",className:"px-3 py-2 text-right",children:"Total COGS per unit:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:729,columnNumber:35},this),e.jsxDEV("td",{className:"px-3 py-2 text-orange-600",children:["KSH ",O.toFixed(2)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:730,columnNumber:35},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:728,columnNumber:33},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:727,columnNumber:31},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:697,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:695,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:694,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:693,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:573,columnNumber:19},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:564,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:547,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:546,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:545,columnNumber:7},this),g&&k&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-2",children:["Add Stock for ",k.name]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:751,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-600 mb-4",children:["Unit: ",e.jsxDEV("span",{className:"font-semibold",children:k.unit},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:753,columnNumber:21},this),["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit?.toLowerCase())&&e.jsxDEV("span",{className:"ml-2 text-blue-600",children:"ðŸ”¹ Supports decimals (e.g., 0.5 kg, 250 g)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:755,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:752,columnNumber:13},this),e.jsxDEV("form",{onSubmit:N,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Quantity ",["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit?.toLowerCase())?"(decimal allowed)":"(whole numbers)"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:760,columnNumber:17},this),e.jsxDEV("input",{type:"number",step:["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit?.toLowerCase())?"0.01":"1",min:["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit?.toLowerCase())?"0.01":"1",placeholder:["kg","g","gram","grams","kilogram","kilograms"].includes(k.unit?.toLowerCase())?"e.g., 0.5, 1.25":"e.g., 100, 500",className:"input",value:he.quantity,onChange:d=>G({...he,quantity:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:763,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:759,columnNumber:15},this),e.jsxDEV("input",{type:"date",placeholder:"Expiry Date (Optional)",className:"input",value:he.expiryDate,onChange:d=>G({...he,expiryDate:d.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:774,columnNumber:15},this),e.jsxDEV("input",{type:"text",placeholder:"Batch Number (Optional)",className:"input",value:he.batchNumber,onChange:d=>G({...he,batchNumber:d.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:781,columnNumber:15},this),e.jsxDEV("input",{type:"number",step:"0.01",min:"0",placeholder:"Cost per Unit",className:"input",value:he.cost,onChange:d=>G({...he,cost:d.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:788,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:798,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>{P(!1),M(null),G({quantity:"",expiryDate:"",batchNumber:"",cost:""})},className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:799,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:797,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:758,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:750,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:749,columnNumber:9},this),w&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Add New Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:814,columnNumber:13},this),e.jsxDEV("form",{onSubmit:Se,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Product Name",className:"input",value:Z.name,onChange:d=>je({...Z,name:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:816,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700",children:"Product Image"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:825,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("input",{type:"file",accept:"image/*",onChange:d=>W(d,!0),className:"input"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:827,columnNumber:19},this),e.jsxDEV(ms,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:833,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:826,columnNumber:17},this),(B||Z.image)&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV("img",{src:B||Z.image,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:837,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:836,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:824,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Price",className:"input",value:Z.price,onChange:d=>je({...Z,price:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:842,columnNumber:17},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Cost",className:"input",value:Z.cost,onChange:d=>je({...Z,cost:d.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:851,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:841,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("select",{className:"input",value:Z.category,onChange:d=>je({...Z,category:d.target.value}),children:[e.jsxDEV("option",{value:"finished",children:"Finished Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:866,columnNumber:19},this),e.jsxDEV("option",{value:"raw",children:"Raw Material"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:867,columnNumber:19},this),e.jsxDEV("option",{value:"service",children:"Service"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:868,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:861,columnNumber:17},this),e.jsxDEV("select",{className:"input",value:Z.unit,onChange:d=>je({...Z,unit:d.target.value}),children:[e.jsxDEV("option",{value:"pcs",children:"Pieces"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:875,columnNumber:19},this),e.jsxDEV("option",{value:"kg",children:"Kilograms"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:876,columnNumber:19},this),e.jsxDEV("option",{value:"L",children:"Liters"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:877,columnNumber:19},this),e.jsxDEV("option",{value:"g",children:"Grams"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:878,columnNumber:19},this),e.jsxDEV("option",{value:"ml",children:"Milliliters"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:879,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:870,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:860,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:Z.expenseOnly,onChange:d=>je({...Z,expenseOnly:d.target.checked,visibleToCashier:!d.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:884,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm",children:"Expense Only (Hidden from cashier)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:889,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:883,columnNumber:17},this),!Z.expenseOnly&&e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:Z.visibleToCashier,onChange:d=>je({...Z,visibleToCashier:d.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:893,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm",children:"Visible to Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:898,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:892,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:882,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:903,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>{f(!1),pe(""),je({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0})},className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:904,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:902,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:815,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:813,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:812,columnNumber:9},this),j&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Edit Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:919,columnNumber:13},this),e.jsxDEV("form",{onSubmit:U,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Product Name",className:"input",value:H.name,onChange:d=>oe({...H,name:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:921,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700",children:"Product Image"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:930,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("input",{type:"url",placeholder:"Image URL",className:"input flex-1",value:H.image||"",onChange:d=>oe({...H,image:d.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:932,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm text-gray-500 self-center",children:"or"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:939,columnNumber:19},this),e.jsxDEV("input",{type:"file",accept:"image/*",className:"input flex-1",onChange:d=>{const O=d.target.files[0];if(O){const T=new FileReader;T.onloadend=()=>{oe({...H,image:T.result})},T.readAsDataURL(O)}}},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:940,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:931,columnNumber:17},this),H.image&&e.jsxDEV("img",{src:H.image,alt:"Preview",className:"w-20 h-20 object-cover rounded"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:957,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:929,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Price",className:"input",value:H.price||"",onChange:d=>oe({...H,price:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:961,columnNumber:17},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Cost",className:"input",value:H.cost||"",onChange:d=>oe({...H,cost:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:970,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:960,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Quantity",className:"input",value:H.quantity||"",onChange:d=>oe({...H,quantity:d.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:981,columnNumber:17},this),e.jsxDEV("select",{className:"input",value:H.unit||"pcs",onChange:d=>oe({...H,unit:d.target.value}),children:[e.jsxDEV("option",{value:"pcs",children:"Pieces"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:995,columnNumber:19},this),e.jsxDEV("option",{value:"kg",children:"Kilograms"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:996,columnNumber:19},this),e.jsxDEV("option",{value:"L",children:"Liters"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:997,columnNumber:19},this),e.jsxDEV("option",{value:"g",children:"Grams"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:998,columnNumber:19},this),e.jsxDEV("option",{value:"ml",children:"Milliliters"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:999,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:990,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:980,columnNumber:15},this),e.jsxDEV("select",{className:"input",value:H.category||"raw",onChange:d=>oe({...H,category:d.target.value}),children:[e.jsxDEV("option",{value:"raw",children:"Raw Material"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1007,columnNumber:17},this),e.jsxDEV("option",{value:"finished",children:"Finished Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1008,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1002,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:H.expenseOnly||!1,onChange:d=>oe({...H,expenseOnly:d.target.checked,visibleToCashier:!d.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1012,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm",children:"Expense Only (Hidden from cashier)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1017,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1011,columnNumber:17},this),!H.expenseOnly&&e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:H.visibleToCashier!==!1,onChange:d=>oe({...H,visibleToCashier:d.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1021,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm",children:"Visible to Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1026,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1020,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1010,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Update Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1031,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>C(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1032,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:1030,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:920,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:918,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:917,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Inventory.jsx",lineNumber:472,columnNumber:5},this)}function vr(){const[a,m]=i.useState([]),[h,b]=i.useState([]),[u,l]=i.useState(!1),[t,n]=i.useState({name:"",price:"",ingredients:[],image:"",visibleToCashier:!0});i.useEffect(()=>{p()},[]);const p=async()=>{const j=await Oe.getAll();m(j),b(j.filter(C=>!C.recipe))},o=()=>{n({...t,ingredients:[...t.ingredients,{name:"",quantity:"",unit:"pcs"}]})},x=(j,C,g)=>{const P=[...t.ingredients];P[j][C]=g,n({...t,ingredients:P})},v=j=>{n({...t,ingredients:t.ingredients.filter((C,g)=>g!==j)})},s=()=>t.ingredients.reduce((j,C)=>{const g=h.find(P=>P.name.toLowerCase()===C.name.toLowerCase());if(g&&C.quantity){const P=g.cost/g.quantity;return j+P*parseFloat(C.quantity)}return j},0),w=async j=>{j.preventDefault();const C=[];for(const P of t.ingredients){if(!P.name||!P.quantity)continue;const k=h.find(M=>M.name.toLowerCase()===P.name.toLowerCase());k?C.push({productId:k.id,quantity:parseFloat(P.quantity),unit:P.unit||"pcs"}):C.push({name:P.name,quantity:parseFloat(P.quantity),unit:P.unit||"pcs"})}if(C.length===0){alert("Please add at least one ingredient");return}const g=s();try{await Oe.create({name:t.name,price:parseFloat(t.price),cost:g,quantity:0,unit:"pcs",category:"composite",recipe:C,image:t.image||"",visibleToCashier:t.visibleToCashier,expenseOnly:!1}),n({name:"",price:"",ingredients:[],image:"",visibleToCashier:!0}),l(!1),p(),alert("Recipe created successfully!")}catch(P){console.error("Error creating recipe:",P),alert("Failed to create recipe. Please try again.")}},f=a.filter(j=>j.recipe);return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Recipe & BOM Builder"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:131,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Create composite products with ingredient recipes"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:132,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:130,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>l(!0),className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:138,columnNumber:11},this),"Create Recipe"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:134,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:129,columnNumber:7},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[e.jsxDEV("h3",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ’¡ How it works"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:145,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-blue-800",children:"Create composite products by defining recipes with raw ingredients. When a composite product is sold, the system automatically deducts the required quantities from raw materials and calculates COGS."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:146,columnNumber:9},this),e.jsxDEV("div",{className:"mt-3 p-3 bg-white rounded-lg text-sm",children:[e.jsxDEV("strong",{children:"Example: Fish Fingers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:151,columnNumber:11},this),e.jsxDEV("ul",{className:"mt-2 space-y-1 text-gray-700",children:[e.jsxDEV("li",{children:"â€¢ 0.02 kg Nile Perch"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("li",{children:"â€¢ 0.01 L Cooking Oil"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:154,columnNumber:13},this),e.jsxDEV("li",{children:"â€¢ 0.004 kg Breadcrumbs"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("li",{children:"â€¢ 0.002 kg Salt"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:150,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:144,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:["Existing Recipes (",f.length,")"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:163,columnNumber:9},this),f.length===0?e.jsxDEV("div",{className:"text-center py-12",children:e.jsxDEV("p",{className:"text-gray-500",children:"No recipes created yet"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:167,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:166,columnNumber:11},this):e.jsxDEV("div",{className:"space-y-4",children:f.map(j=>{const C=j.recipe.reduce((P,k)=>{if(k.productId){const M=a.find(D=>D.id===k.productId);if(M){const D=M.cost/M.quantity;return P+D*k.quantity}}else if(k.name){const M=a.find(D=>D.name.toLowerCase()===k.name.toLowerCase());if(M){const D=M.cost/M.quantity;return P+D*k.quantity}}return P},0),g=((j.price-C)/j.price*100).toFixed(1);return e.jsxDEV("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold text-lg",children:j.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:196,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-4 mt-1 text-sm",children:[e.jsxDEV("span",{className:"text-green-600 font-semibold",children:["Price: KSH ",j.price]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:198,columnNumber:25},this),e.jsxDEV("span",{className:"text-orange-600",children:["COGS: KSH ",C.toFixed(2)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:199,columnNumber:25},this),e.jsxDEV("span",{className:`font-semibold ${g>30?"text-green-600":"text-yellow-600"}`,children:["Margin: ",g,"%"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:200,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:197,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:195,columnNumber:21},this),e.jsxDEV("button",{className:"text-red-600 hover:bg-red-50 p-2 rounded-lg",children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:206,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:205,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:194,columnNumber:19},this),e.jsxDEV("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsxDEV("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"INGREDIENTS:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:211,columnNumber:21},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2",children:j.recipe.map((P,k)=>{let M="",D=P.unit||"pcs";if(P.productId){const F=a.find($=>$.id===P.productId);F&&(M=F.name,D=F.unit)}else P.name&&(M=P.name,D=P.unit||"pcs");return M?e.jsxDEV("div",{className:"text-sm flex items-center justify-between bg-white px-3 py-2 rounded",children:[e.jsxDEV("span",{children:M},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:231,columnNumber:29},this),e.jsxDEV("span",{className:"font-semibold text-blue-600",children:[P.quantity," ",D]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:232,columnNumber:29},this)]},k,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:230,columnNumber:27},this):null})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:212,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:210,columnNumber:19},this)]},j.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:193,columnNumber:17},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:170,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:162,columnNumber:7},this),u&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Create New Recipe"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:249,columnNumber:13},this),e.jsxDEV("form",{onSubmit:w,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Product Name (e.g., Fish Fingers)",className:"input",value:t.name,onChange:j=>n({...t,name:j.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:252,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Selling Price",className:"input",value:t.price,onChange:j=>n({...t,price:j.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:262,columnNumber:17},this),e.jsxDEV("input",{type:"url",placeholder:"Image URL (optional)",className:"input",value:t.image,onChange:j=>n({...t,image:j.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:271,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:261,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:t.visibleToCashier,onChange:j=>n({...t,visibleToCashier:j.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:281,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm",children:"Visible to Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:286,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:280,columnNumber:15},this),e.jsxDEV("div",{className:"border-t pt-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("h4",{className:"font-semibold",children:"Ingredients"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:291,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"+ Add Ingredient"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:292,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:290,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:t.ingredients.map((j,C)=>e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"text",placeholder:"Ingredient name (e.g., Nile Perch)",className:"input flex-1",value:j.name,onChange:g=>x(C,"name",g.target.value),required:!0,list:`ingredients-list-${C}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:304,columnNumber:23},this),e.jsxDEV("datalist",{id:`ingredients-list-${C}`,children:h.map(g=>e.jsxDEV("option",{value:g.name,children:[g.name," (",g.quantity," ",g.unit," available)"]},g.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:315,columnNumber:27},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:313,columnNumber:23},this),e.jsxDEV("input",{type:"number",step:"0.001",placeholder:"Qty",className:"input w-32",value:j.quantity,onChange:g=>x(C,"quantity",g.target.value),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:320,columnNumber:23},this),e.jsxDEV("select",{className:"input w-24",value:j.unit,onChange:g=>x(C,"unit",g.target.value),children:[e.jsxDEV("option",{value:"pcs",children:"pcs"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:334,columnNumber:25},this),e.jsxDEV("option",{value:"kg",children:"kg"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:335,columnNumber:25},this),e.jsxDEV("option",{value:"g",children:"g"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:336,columnNumber:25},this),e.jsxDEV("option",{value:"L",children:"L"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:337,columnNumber:25},this),e.jsxDEV("option",{value:"ml",children:"ml"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:338,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:329,columnNumber:23},this),e.jsxDEV("button",{type:"button",onClick:()=>v(C),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:345,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:340,columnNumber:23},this)]},C,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:303,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:301,columnNumber:17},this),t.ingredients.length===0&&e.jsxDEV("p",{className:"text-sm text-gray-500 text-center py-4",children:'No ingredients added yet. Click "Add Ingredient" to start.'},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:352,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:289,columnNumber:15},this),t.ingredients.length>0&&e.jsxDEV("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between text-sm",children:[e.jsxDEV("span",{className:"font-medium",children:"Estimated COGS:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:361,columnNumber:21},this),e.jsxDEV("span",{className:"text-lg font-bold text-orange-600",children:["KSH ",s().toFixed(2)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:362,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:360,columnNumber:19},this),t.price&&e.jsxDEV("div",{className:"flex items-center justify-between text-sm mt-2",children:[e.jsxDEV("span",{className:"font-medium",children:"Profit Margin:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:368,columnNumber:23},this),e.jsxDEV("span",{className:"text-lg font-bold text-green-600",children:[((parseFloat(t.price)-s())/parseFloat(t.price)*100).toFixed(1),"%"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:369,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:367,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:359,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2 pt-4",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[e.jsxDEV(_s,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:379,columnNumber:19},this),"Create Recipe"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:378,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>{l(!1),n({name:"",price:"",ingredients:[]})},className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:382,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:377,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:251,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:248,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:247,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Recipes.jsx",lineNumber:127,columnNumber:5},this)}function fr(){const[a,m]=i.useState([]),[h,b]=i.useState("all"),[u,l]=i.useState(!0);i.useEffect(()=>{t();const s=()=>{console.log("Sales data cleared - refreshing"),m([])};return window.addEventListener("dataCleared",s),window.addEventListener("storage",t),()=>{window.removeEventListener("dataCleared",s),window.removeEventListener("storage",t)}},[]);const t=async()=>{try{l(!0);const s=await oa.getAll();m(Array.isArray(s)?s.reverse():[])}catch(s){console.error("Failed to load sales:",s),m([])}finally{l(!1)}},n=async()=>{if(window.confirm(`âš ï¸ Are you sure you want to clear ALL sales data?

This action CANNOT be undone!`))try{await xs.clearData("sales"),m([]),alert("âœ… All sales cleared successfully!")}catch(s){console.error("Failed to clear sales:",s),alert("âŒ Failed to clear sales: "+s.message)}},p=a.filter(s=>{if(h==="today")return new Date(s.createdAt).toDateString()===new Date().toDateString();if(h==="week"){const w=new Date;return w.setDate(w.getDate()-7),new Date(s.createdAt)>=w}return!0}),o=p.reduce((s,w)=>s+w.total,0),x=p.reduce((s,w)=>s+(w.cogs||0),0),v=o-x;return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:e.jsxDEV("select",{value:h,onChange:s=>b(s.target.value),className:"input w-40",children:[e.jsxDEV("option",{value:"all",children:"All Time"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:79,columnNumber:13},this),e.jsxDEV("option",{value:"today",children:"Today"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:80,columnNumber:13},this),e.jsxDEV("option",{value:"week",children:"This Week"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:81,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:74,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:73,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:n,className:"btn-secondary flex items-center gap-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:86,columnNumber:13},this),"Clear All Sales"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:85,columnNumber:11},this),e.jsxDEV("button",{className:"btn-secondary flex items-center gap-2",children:[e.jsxDEV(Ha,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:90,columnNumber:13},this),"Export"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:89,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:84,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:72,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-green-500 to-emerald-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-green-100 mb-1",children:"Total Sales"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:98,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",o.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:99,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:97,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-orange-500 to-red-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-orange-100 mb-1",children:"Total COGS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:102,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",x.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:103,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:101,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-blue-100 mb-1",children:"Total Profit"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:106,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",v.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:107,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:105,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:96,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Sales History"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:112,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ID"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:117,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:118,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:119,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:120,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:121,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"COGS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:122,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Profit"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:123,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:116,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:115,columnNumber:13},this),e.jsxDEV("tbody",{children:p.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:"7",className:"px-4 py-12 text-center",children:e.jsxDEV("div",{className:"flex flex-col items-center justify-center",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:e.jsxDEV(Ha,{className:"w-8 h-8 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:132,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:131,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 font-medium text-lg",children:"No sales yet"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:134,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-500 text-sm mt-2",children:"Your sales transactions will appear here once processed"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:135,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:130,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:129,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:128,columnNumber:17},this):p.map(s=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm font-medium",children:["#",s.id]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:142,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(s.createdAt).toLocaleString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:143,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:[s.items?.length||0," items"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:144,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-success",children:s.paymentMethod},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:146,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:145,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",s.total?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:148,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm text-orange-600",children:["KSH ",s.cogs?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:151,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-blue-600",children:["KSH ",s.profit?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:154,columnNumber:21},this)]},s.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:141,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:114,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:113,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:111,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Sales.jsx",lineNumber:71,columnNumber:5},this)}function gr(){const[a,m]=i.useState([]),[h,b]=i.useState(!1),[u,l]=i.useState({description:"",amount:"",category:"general"});i.useEffect(()=>{t();const s=()=>{console.log("Expenses data cleared - refreshing"),m([])};return window.addEventListener("dataCleared",s),window.addEventListener("storage",t),()=>{window.removeEventListener("dataCleared",s),window.removeEventListener("storage",t)}},[]);const t=async()=>{try{const s=await Da.getAll();m(Array.isArray(s)?s.reverse():[])}catch(s){console.error("Failed to load expenses:",s),m([])}},n=async()=>{if(window.confirm(`âš ï¸ Are you sure you want to clear ALL expenses data?

This action CANNOT be undone!`))try{if(!localStorage.getItem("token")){alert("âŒ Not authenticated. Please login again.");return}await xs.clearData("expenses"),m([]),localStorage.removeItem("expenses"),window.dispatchEvent(new Event("expensesCleared")),alert("âœ… All expenses cleared successfully!")}catch(s){console.error("Failed to clear expenses:",s),alert("âŒ Failed to clear expenses: "+s.message)}},p=async s=>{s.preventDefault(),await Da.create({...u,amount:parseFloat(u.amount)}),l({description:"",amount:"",category:"general"}),b(!1),t()},o=a.reduce((s,w)=>s+w.amount,0),x=a.filter(s=>!s.automatic),v=a.filter(s=>s.automatic);return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Expense Management"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:80,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Track manual and automatic ingredient-based expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:79,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:n,className:"btn-secondary flex items-center gap-2 hover:bg-red-50 hover:text-red-600 hover:border-red-200",children:[e.jsxDEV(ts,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:88,columnNumber:13},this),"Clear All"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:84,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>b(!0),className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:95,columnNumber:13},this),"Add Expense"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:83,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:78,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-red-500 to-pink-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-red-100 mb-1",children:"Total Expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:103,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",o.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:104,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:102,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-blue-100 mb-1",children:"Manual Expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:107,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",x.reduce((s,w)=>s+w.amount,0).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:106,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-500 to-violet-600 text-white",children:[e.jsxDEV("p",{className:"text-sm text-purple-100 mb-1",children:"Auto Expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:111,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",v.reduce((s,w)=>s+w.amount,0).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:112,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:110,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:101,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Expense History"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:117,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:122,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:123,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:124,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:125,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:126,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:121,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:120,columnNumber:13},this),e.jsxDEV("tbody",{children:a.map(s=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(s.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:132,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:s.description},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-warning",children:s.category},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:135,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:134,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:`badge ${s.automatic?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:s.automatic?"Automatic":"Manual"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:138,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:137,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-red-600",children:["KSH ",s.amount?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:142,columnNumber:19},this)]},s.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:131,columnNumber:17},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:129,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:119,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:118,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:116,columnNumber:7},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Add Manual Expense"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:155,columnNumber:13},this),e.jsxDEV("form",{onSubmit:p,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Description",className:"input",value:u.description,onChange:s=>l({...u,description:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:157,columnNumber:15},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Amount",className:"input",value:u.amount,onChange:s=>l({...u,amount:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:165,columnNumber:15},this),e.jsxDEV("select",{className:"input",value:u.category,onChange:s=>l({...u,category:s.target.value}),children:[e.jsxDEV("option",{value:"general",children:"General"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:179,columnNumber:17},this),e.jsxDEV("option",{value:"utilities",children:"Utilities"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:180,columnNumber:17},this),e.jsxDEV("option",{value:"rent",children:"Rent"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:181,columnNumber:17},this),e.jsxDEV("option",{value:"salaries",children:"Salaries"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:182,columnNumber:17},this),e.jsxDEV("option",{value:"supplies",children:"Supplies"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:183,columnNumber:17},this),e.jsxDEV("option",{value:"other",children:"Other"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:184,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Expense"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:187,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:188,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:186,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:156,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:154,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:153,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Expenses.jsx",lineNumber:77,columnNumber:5},this)}function yr(){const{isCashierUserManagementEnabled:a,isCashier:m}=Fe(),[h,b]=i.useState([]),[u,l]=i.useState(!0),[t,n]=i.useState(!1),[p,o]=i.useState(null),[x,v]=i.useState(null),[s,w]=i.useState(null),[f,j]=i.useState(0),[C,g]=i.useState({name:"",email:"",password:"",permissions:{viewSales:!0,viewInventory:!0,viewExpenses:!1,manageProducts:!1}}),[P,k]=i.useState(!1),[M,D]=i.useState(null),[F,$]=i.useState("");i.useEffect(()=>{A()},[]),i.useEffect(()=>()=>{s?.intervalId&&clearInterval(s.intervalId)},[s]);const A=async()=>{try{l(!0);const E=await Ke.getAll();b(Array.isArray(E)?E:[])}catch(E){console.error("Error loading users:",E),b([])}finally{l(!1)}},y=()=>Math.floor(1e3+Math.random()*9e3).toString(),S=async E=>{if(E.preventDefault(),console.log("Form submitted with data:",C),!C.name?.trim()||!C.email?.trim()||!C.password?.trim()){alert("Please fill in all required fields");return}if(C.password.length<6){alert("Password must be at least 6 characters long");return}try{l(!0);const W=y(),K={name:C.name.trim(),email:C.email.trim().toLowerCase(),password:C.password.trim(),pin:W};console.log("Sending user data:",K);const fe=await Ke.create(K);console.log("User creation result:",fe),await A();const we=`âœ… Cashier added successfully!

ðŸ“§ Email: ${K.email}
ðŸ”‘ Password: ${K.password}
ðŸ”¢ PIN: ${W}

ðŸ’¡ LOGIN OPTIONS:
1. Email + Password: Use email and password above
2. PIN Login: Use email + ${W}

Please share these credentials securely with the new cashier.`;alert(we),g({name:"",email:"",password:"",permissions:{viewSales:!0,viewInventory:!0,viewExpenses:!1,manageProducts:!1}}),n(!1)}catch(W){console.error("Error creating cashier:",W);let K="Failed to add cashier";W.message.includes("Current user not found")?K="Authentication error. Please refresh the page and try again.":W.message.includes("email")?K="Email already exists. Please use a different email.":W.message.includes("network")||W.message.includes("fetch")?K="Network error. Please check your connection and try again.":W.message&&(K=`Failed to add cashier: ${W.message}`),alert(K)}finally{l(!1)}},I=async(E,W)=>{try{l(!0),await Ke.update(E,{permissions:W}),await A(),o(null)}catch(K){console.error("Error updating permissions:",K),alert("Failed to update permissions: "+K.message)}finally{l(!1)}},X=async(E,W)=>{try{l(!0);const K=!W,fe=await fetch(`${Ee}/users/${E}/activate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({active:K})});if(!fe.ok){const we=await fe.json().catch(()=>({error:"Network error"}));throw new Error(we.error||`HTTP ${fe.status}: ${fe.statusText}`)}await A()}catch(K){console.error("Error updating user status:",K),alert("Failed to update user status: "+K.message)}finally{l(!1)}},B=async(E,W)=>{try{l(!0);const K=!W,fe=await fetch(`${Ee}/users/${E}/lock`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({locked:K})});if(!fe.ok){const we=await fe.json().catch(()=>({error:"Network error"}));throw new Error(we.error||`HTTP ${fe.status}: ${fe.statusText}`)}await A()}catch(K){console.error("Error updating user lock status:",K),alert("Failed to update user lock status: "+K.message)}finally{l(!1)}},pe=async E=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{l(!0),await Ke.delete(E),await A()}catch(W){console.error("Error deleting user:",W),alert("Failed to delete user: "+W.message)}finally{l(!1)}},Z=E=>{D(E),$(y()),k(!0)},je=async()=>{try{l(!0),await Ke.update(M.id,{cashierPIN:F}),await A(),k(!1),D(null),$(""),alert(`âœ… PIN reset successfully!

ðŸ”¢ New PIN for ${M.name}: ${F}

Please share this PIN securely with the cashier.`)}catch(E){console.error("Error resetting PIN:",E),alert("Failed to reset PIN: "+E.message)}finally{l(!1)}},he=E=>{v(E),w({isActive:!1,currentCart:[],totalSalesToday:0,salesCount:0,lastActivity:"Loading..."});const W=setInterval(()=>{H(E)},3e3);w(K=>({...K,intervalId:W})),H(E)},G=()=>{s?.intervalId&&clearInterval(s.intervalId),v(null),w(null)},H=async E=>{try{const W=await oa.getAll(),fe=(Array.isArray(W)?W:[]).filter(re=>re.cashierId===E.id).sort((re,Se)=>new Date(Se.createdAt)-new Date(re.createdAt)).slice(0,10),we={isActive:Math.random()>.3,currentCart:fe.length>0?[{name:"Product A",price:150,quantity:2},{name:"Product B",price:300,quantity:1}]:[],totalSalesToday:fe.reduce((re,Se)=>re+Se.total,0),salesCount:fe.length,lastActivity:fe.length>0?new Date(fe[0].createdAt).toLocaleTimeString():"No recent activity"};w(we)}catch(W){console.error("Error loading live view data:",W)}},oe=(h||[]).filter(E=>E.role==="cashier");return u&&h.length===0?e.jsxDEV("div",{className:"p-6 space-y-6",children:e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:320,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:"Loading users..."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:321,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:319,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:318,columnNumber:7},this):e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"User Management"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:332,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage cashiers and their permissions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:333,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:331,columnNumber:9},this),a()&&e.jsxDEV("button",{onClick:()=>n(!0),className:"btn-primary flex items-center gap-2",disabled:u,children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:341,columnNumber:13},this),"Add Cashier"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:336,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:330,columnNumber:7},this),m()&&!a()&&e.jsxDEV("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:e.jsxDEV(Re,{className:"w-4 h-4 text-yellow-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:352,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:351,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("h4",{className:"font-semibold text-yellow-800",children:"User Management Restricted"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:355,columnNumber:15},this),e.jsxDEV("p",{className:"text-sm text-yellow-700 mt-1",children:"The admin has disabled cashier user management. You cannot add, edit, or remove users at this time."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:354,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:350,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:349,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsxDEV("p",{className:"text-sm text-blue-700 mb-1",children:"Total Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:366,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-blue-900",children:h.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:365,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsxDEV("p",{className:"text-sm text-green-700 mb-1",children:"Cashiers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:370,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-green-900",children:oe.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:371,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:369,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsxDEV("p",{className:"text-sm text-purple-700 mb-1",children:"Active Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:374,columnNumber:11},this),e.jsxDEV("p",{className:"text-3xl font-bold text-purple-900",children:h.filter(E=>E.active).length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:375,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:373,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:364,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:380,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-x-auto",children:[e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:386,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:387,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:388,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:389,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"PIN"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:390,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:391,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:392,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:385,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:383,columnNumber:13},this),e.jsxDEV("tbody",{children:(h||[]).map(E=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm font-medium",children:E.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:399,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:E.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:400,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:`badge ${E.role==="admin"?"bg-purple-100 text-purple-800":"badge-success"}`,children:E.role},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:402,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:401,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-warning",children:E.plan||"N/A"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:407,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:406,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:E.role==="cashier"?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-mono text-lg font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded",children:E.pin||E.cashierPIN||"----"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:413,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>Z(E),className:"p-1 hover:bg-yellow-50 rounded text-yellow-600",title:"Reset PIN",disabled:u,children:e.jsxDEV(Qe,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:422,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:416,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:412,columnNumber:23},this):e.jsxDEV("span",{className:"text-gray-400 text-sm",children:"N/A"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:426,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:410,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${E.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:E.active?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Ka,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:439,columnNumber:29},this),"Active"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:438,columnNumber:27},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Wa,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:444,columnNumber:29},this),"Inactive"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:443,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:432,columnNumber:23},this),E.locked&&e.jsxDEV("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[e.jsxDEV(ga,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:451,columnNumber:27},this),"Locked"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:450,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:431,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:430,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("div",{className:"flex gap-2",children:[a()&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:()=>X(E.id,E.active),className:`p-2 rounded-lg transition ${E.active?"hover:bg-red-50 text-red-600":"hover:bg-green-50 text-green-600"}`,title:E.active?"Deactivate User":"Activate User",disabled:u,children:E.active?e.jsxDEV(Wa,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:473,columnNumber:44},this):e.jsxDEV(Ka,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:473,columnNumber:76},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:463,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>B(E.id,E.locked||!1),className:`p-2 rounded-lg transition ${E.locked?"hover:bg-green-50 text-green-600":"hover:bg-red-50 text-red-600"}`,title:E.locked?"Unlock User":"Lock User",disabled:u,children:e.jsxDEV(ga,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:486,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:476,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:462,columnNumber:25},this),E.role==="cashier"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:()=>{localStorage.setItem("adminViewingCashier",E.id),window.location.href="/cashier/pos"},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600",title:"Access Cashier POS",children:e.jsxDEV(ba,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:501,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:493,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>he(E),className:"p-2 hover:bg-green-50 rounded-lg text-green-600",title:"Live View",children:e.jsxDEV(Ga,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:509,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:504,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:492,columnNumber:25},this),a()&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("button",{onClick:()=>o(E),className:"p-2 hover:bg-purple-50 rounded-lg text-purple-600",title:"Edit Permissions",children:e.jsxDEV(Qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:521,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:516,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>pe(E.id),className:"p-2 hover:bg-red-50 rounded-lg text-red-600",title:"Delete User",disabled:u,children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:530,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:524,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:515,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:460,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:459,columnNumber:19},this)]},E.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:398,columnNumber:17},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:395,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:382,columnNumber:11},this),h.length===0&&e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:543,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-400 text-lg",children:"No users found"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:544,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-500 text-sm mt-2",children:"Add your first cashier to get started"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:545,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:542,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:381,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:379,columnNumber:7},this),t&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Add New Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:557,columnNumber:13},this),e.jsxDEV("form",{onSubmit:S,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Full Name",className:"input",value:C.name||"",onChange:E=>{console.log("Name input changed:",E.target.value),g({...C,name:E.target.value})},required:!0,disabled:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:559,columnNumber:15},this),e.jsxDEV("input",{type:"email",placeholder:"Email",className:"input",value:C.email||"",onChange:E=>{console.log("Email input changed:",E.target.value),g({...C,email:E.target.value})},required:!0,disabled:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:571,columnNumber:15},this),e.jsxDEV("input",{type:"password",placeholder:"Password (min 6 characters)",className:"input",value:C.password||"",onChange:E=>{console.log("Password input changed:",E.target.value),g({...C,password:E.target.value})},required:!0,minLength:6,disabled:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:583,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ The cashier will use this email and password to log in to the system"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:596,columnNumber:15},this),e.jsxDEV("div",{className:"border-t pt-4",children:[e.jsxDEV("h4",{className:"font-semibold mb-3 text-sm",children:"Permissions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:601,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2",children:Object.entries(C.permissions).map(([E,W])=>e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:W,onChange:K=>g({...C,permissions:{...C.permissions,[E]:K.target.checked}}),disabled:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:605,columnNumber:23},this),e.jsxDEV("span",{className:"text-sm capitalize",children:E.replace(/([A-Z])/g," $1").trim()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:614,columnNumber:23},this)]},E,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:604,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:602,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:600,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",disabled:u,children:u?"Adding...":"Add Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:621,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>n(!1),className:"btn-secondary",disabled:u,children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:628,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:620,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:558,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:556,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:555,columnNumber:9},this),p&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:["Edit Permissions: ",p.name]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:646,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-3",children:Object.entries(p.permissions||{}).map(([E,W])=>e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:W,onChange:K=>o({...p,permissions:{...p.permissions,[E]:K.target.checked}}),disabled:u},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:650,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm capitalize",children:E.replace(/([A-Z])/g," $1").trim()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:659,columnNumber:19},this)]},E,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:649,columnNumber:17},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:647,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2 mt-6",children:[e.jsxDEV("button",{onClick:()=>I(p.id,p.permissions),className:"btn-primary flex-1",disabled:u,children:u?"Saving...":"Save Changes"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:664,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>o(null),className:"btn-secondary",disabled:u,children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:671,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:663,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:645,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:644,columnNumber:9},this),x&&s&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:e.jsxDEV(Ga,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:690,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:689,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-xl font-bold",children:["Live View: ",x.name]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:693,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:"Real-time cashier activity monitoring"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:694,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:692,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:688,columnNumber:15},this),e.jsxDEV("button",{onClick:G,className:"p-2 hover:bg-red-50 rounded-lg text-red-600",children:e.jsxDEV(ra,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:701,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:697,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:687,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3 mb-6 p-4 bg-gray-50 rounded-xl",children:[e.jsxDEV("div",{className:`w-3 h-3 rounded-full ${s.isActive?"bg-green-500 animate-pulse":"bg-gray-400"}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:707,columnNumber:15},this),e.jsxDEV("span",{className:"font-semibold",children:s.isActive?"Currently Active":"Currently Inactive"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:708,columnNumber:15},this),e.jsxDEV("div",{className:"ml-auto flex items-center gap-2 text-sm text-gray-600",children:[e.jsxDEV(na,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:712,columnNumber:17},this),"Last Activity: ",s.lastActivity]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:711,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:706,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-4",children:[e.jsxDEV(ha,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:721,columnNumber:19},this),e.jsxDEV("h4",{className:"font-semibold",children:"Current Cart"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:722,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:720,columnNumber:17},this),(s.currentCart?.length||0)>0?e.jsxDEV("div",{className:"space-y-2",children:[(s.currentCart||[]).map((E,W)=>e.jsxDEV("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsxDEV("span",{className:"text-sm",children:[E.name," x",E.quantity]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:728,columnNumber:25},this),e.jsxDEV("span",{className:"text-sm font-semibold text-green-600",children:["KSH ",E.price.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:729,columnNumber:25},this)]},W,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:727,columnNumber:23},this)),e.jsxDEV("div",{className:"border-t pt-2 mt-2",children:e.jsxDEV("div",{className:"flex justify-between font-bold",children:[e.jsxDEV("span",{children:"Total:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:734,columnNumber:25},this),e.jsxDEV("span",{className:"text-green-600",children:["KSH ",(s.currentCart||[]).reduce((E,W)=>E+W.price*W.quantity,0).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:735,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:733,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:732,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:725,columnNumber:19},this):e.jsxDEV("p",{className:"text-gray-500 text-sm italic",children:"No items in cart"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:742,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:719,columnNumber:15},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("h4",{className:"font-semibold mb-4",children:"Today's Summary"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:747,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Sales Count:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:750,columnNumber:21},this),e.jsxDEV("span",{className:"font-semibold",children:s.salesCount},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:751,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:749,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Total Sales:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:754,columnNumber:21},this),e.jsxDEV("span",{className:"font-semibold text-green-600",children:["KSH ",s.totalSalesToday.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:755,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:753,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-sm text-gray-600",children:"Average Sale:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:758,columnNumber:21},this),e.jsxDEV("span",{className:"font-semibold",children:["KSH ",s.salesCount>0?Math.round(s.totalSalesToday/s.salesCount).toLocaleString():"0"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:759,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:757,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:748,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:746,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:718,columnNumber:13},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("p",{className:"text-xs text-gray-500",children:["ðŸ”„ Auto-refreshing every 3 seconds â€¢ Last updated: ",new Date().toLocaleTimeString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:769,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:768,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:686,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:685,columnNumber:9},this),P&&M&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:["Reset PIN for ",M.name]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:782,columnNumber:13},this),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-600 mb-4",children:"Generate a new 4-digit PIN for this cashier. The old PIN will be invalid."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:784,columnNumber:15},this),e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsxDEV("p",{className:"text-sm text-blue-800 mb-2",children:"New PIN:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:788,columnNumber:17},this),e.jsxDEV("div",{className:"text-center",children:e.jsxDEV("span",{className:"font-mono text-3xl font-bold text-blue-600 bg-white px-4 py-2 rounded border",children:F},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:790,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:789,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:787,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:783,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>$(y()),className:"btn-secondary flex-1",disabled:u,children:"Generate New PIN"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:797,columnNumber:15},this),e.jsxDEV("button",{onClick:je,className:"btn-primary flex-1",disabled:u,children:u?"Updating...":"Confirm & Update"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:804,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:796,columnNumber:13},this),e.jsxDEV("div",{className:"mt-4",children:e.jsxDEV("button",{onClick:()=>{k(!1),D(null),$("")},className:"btn-secondary w-full",disabled:u,children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:813,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:812,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:781,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:780,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/UserManagement.jsx",lineNumber:328,columnNumber:5},this)}function jr(){const[a,m]=i.useState([]),[h,b]=i.useState("all");i.useEffect(()=>{u()},[]);const u=()=>{const p=JSON.parse(localStorage.getItem("clockRecords")||"[]");m(p.reverse())},l=h==="all"?a:a.filter(p=>p.date===new Date().toDateString()),t=l.filter(p=>p.date===new Date().toDateString()).reduce((p,o)=>p+o.duration,0)/60,n=p=>{const o=Math.floor(p/60),x=p%60;return`${o}h ${x}m`};return e.jsxDEV("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Time Tracking"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:34,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor cashier clock in/out records"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:33,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center",children:e.jsxDEV(na,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:42,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:41,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-blue-700",children:"Total Hours Today"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:45,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-900",children:[t.toFixed(1),"h"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:46,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:44,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:40,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:39,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center",children:e.jsxDEV(Ta,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:54,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:53,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-green-700",children:"Active Cashiers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:57,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-green-900",children:new Set(l.filter(p=>p.date===new Date().toDateString()).map(p=>p.userId)).size},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:58,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:56,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:52,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:51,columnNumber:9},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center",children:e.jsxDEV(la,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:68,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:67,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-purple-700",children:"Total Records"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:71,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-purple-900",children:a.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:72,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:70,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:66,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:65,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:38,columnNumber:7},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Clock Records"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:80,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>b("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All Time"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:82,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>b("today"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${h==="today"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Today"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:90,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:81,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:79,columnNumber:9},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:105,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:106,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Clock In"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:107,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Clock Out"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:108,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Duration"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:109,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:104,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:103,columnNumber:13},this),e.jsxDEV("tbody",{children:l.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:"5",className:"px-4 py-8 text-center text-gray-500",children:"No records found"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:115,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:114,columnNumber:17},this):l.map((p,o)=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm font-medium",children:p.userName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:122,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(p.clockIn).toLocaleDateString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:123,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(p.clockIn).toLocaleTimeString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:124,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(p.clockOut).toLocaleTimeString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:125,columnNumber:21},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-success",children:n(p.duration)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:127,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:126,columnNumber:21},this)]},o,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:121,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:112,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:102,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:101,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:78,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/TimeTracking.jsx",lineNumber:32,columnNumber:5},this)}function kr(){const{user:a,updateUser:m}=Fe();ia();const[h,b]=i.useState(!1),[u,l]=i.useState(a?.plan||"ultra"),[t,n]=i.useState({}),[p,o]=i.useState(null),[x,v]=i.useState(a?.profilePicture||null),[s,w]=i.useState(!0),[f,j]=i.useState(!0);i.useEffect(()=>{C()},[]);const C=async()=>{try{const A=await ta.get();n(A),A.logo&&o(A.logo),w(A.cashierUserManagement!==!1),j(A.realTimeProductSync!==!1)}catch(A){console.error("Failed to load settings:",A)}},g=async A=>{try{const y={...t,...A};return await ta.update(y),n(y),!0}catch(y){return console.error("Failed to save settings:",y),!1}},P=async()=>{const A=!s;w(A),await g({cashierUserManagement:A})?(window.dispatchEvent(new CustomEvent("settingsChanged",{detail:{cashierUserManagement:A}})),alert(`âœ… Cashier User Management ${A?"ENABLED":"DISABLED"}`)):(w(!A),alert("âŒ Failed to save setting. Please try again."))},k=async()=>{const A=!f;j(A),await g({realTimeProductSync:A})?(window.dispatchEvent(new CustomEvent("settingsChanged",{detail:{realTimeProductSync:A}})),alert(`âœ… Real-time Product Sync ${A?"ENABLED":"DISABLED"}`)):(j(!A),alert("âŒ Failed to save setting. Please try again."))},M=async A=>{const y=A.target.files[0];if(y){const S=new FileReader;S.onloadend=async()=>{const I=S.result;o(I);try{await ta.update({...t,logo:I}),n({...t,logo:I})}catch(X){console.error("Failed to save logo:",X)}},S.readAsDataURL(y)}},D=async A=>{const y=A.target.files[0];if(y){const S=new FileReader;S.onloadend=async()=>{const I=S.result;v(I);try{await m({...a,profilePicture:I})}catch(X){console.error("Failed to save profile picture:",X)}},S.readAsDataURL(y)}},F=[{id:"basic",name:"Basic Package",price:900,features:["Cashier Dashboard","Sales Tracking","Product Management","Basic Reports"]},{id:"ultra",name:"Ultra Package",price:1600,features:["Admin Dashboard","Recipe Builder","User Management","Advanced Analytics","Expense Tracking"]}],$=async()=>{const A=F.find(S=>S.id===u),y=u==="ultra"?"admin":"cashier";await m({...a,role:y,plan:u,price:A.price}),b(!1),setTimeout(()=>window.location.href=y==="admin"?"/admin":"/cashier",500)};return e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Settings"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:139,columnNumber:9},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your account and preferences"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:140,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:138,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsxDEV(Ta,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:148,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:147,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Account Information"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:150,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:146,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[x?e.jsxDEV("img",{src:x,alt:"Profile",className:"w-20 h-20 rounded-full object-cover"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:156,columnNumber:19},this):e.jsxDEV("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:a?.name?.charAt(0).toUpperCase()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:158,columnNumber:19},this),e.jsxDEV("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-700 transition",children:[e.jsxDEV(Ya,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:163,columnNumber:19},this),e.jsxDEV("input",{type:"file",accept:"image/*",className:"hidden",onChange:D},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:164,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:162,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:154,columnNumber:15},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:168,columnNumber:17},this),e.jsxDEV("p",{className:"font-medium",children:a?.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:169,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:167,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:153,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Email"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("p",{className:"font-medium",children:a?.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:174,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:172,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Role"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:177,columnNumber:15},this),e.jsxDEV("p",{className:"font-medium capitalize",children:a?.role},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:178,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:176,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:152,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:145,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsxDEV(ya,{className:"w-5 h-5 text-purple-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:187,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:186,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Subscription"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:189,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:185,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Current Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:193,columnNumber:15},this),e.jsxDEV("p",{className:"font-medium capitalize",children:[a?.plan||"Ultra"," Package"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:194,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:192,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-600",children:"Price"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:197,columnNumber:15},this),e.jsxDEV("p",{className:"font-medium",children:["KSH ",a?.price||1600,"/month"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:198,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:196,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>b(!0),className:"btn-secondary text-sm",children:"Change Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:200,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:191,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:184,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:e.jsxDEV(Ua,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:208,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:207,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Notifications"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:210,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:206,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("label",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm",children:"Email Notifications"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:214,columnNumber:15},this),e.jsxDEV("input",{type:"checkbox",defaultChecked:!0,className:"toggle"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:215,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:213,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm",children:"Low Stock Alerts"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:218,columnNumber:15},this),e.jsxDEV("input",{type:"checkbox",defaultChecked:!0,className:"toggle"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:219,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:217,columnNumber:13},this),e.jsxDEV("label",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-sm",children:"Daily Sales Summary"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:222,columnNumber:15},this),e.jsxDEV("input",{type:"checkbox",className:"toggle"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:223,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:221,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:212,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:205,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsxDEV(Je,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:233,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:232,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Cashier User Management"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:235,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:231,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Enable Cashier User Management"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:240,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Allow cashiers to add and remove users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:241,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("button",{onClick:P,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${s?"bg-blue-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:249,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:243,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:238,columnNumber:13},this),e.jsxDEV("div",{className:`p-3 rounded-lg border ${s?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxDEV("p",{className:"text-xs",children:s?"âœ… Cashiers can add and remove users when enabled":"âŒ Cashiers cannot add or remove users when disabled"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:261,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:256,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:230,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsxDEV(qs,{className:"w-5 h-5 text-purple-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:276,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:275,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Real-time Product Sync"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:278,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:273,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium",children:"Enable Real-time Sync"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:283,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:"Automatically sync products between admin and cashier dashboards"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:284,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:282,columnNumber:15},this),e.jsxDEV("button",{onClick:k,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${f?"bg-purple-600":"bg-gray-300"}`,children:e.jsxDEV("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${f?"translate-x-6":"translate-x-1"}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:292,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:286,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:281,columnNumber:13},this),e.jsxDEV("div",{className:`p-3 rounded-lg border ${f?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:e.jsxDEV("p",{className:"text-xs",children:f?"âœ… Products will sync in real-time across all dashboards":"âŒ Products will not sync automatically across dashboards"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:304,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:299,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:280,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:272,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsxDEV(ga,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:318,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:317,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Security"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:320,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:316,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("button",{className:"btn-secondary text-sm w-full",children:"Change Password"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:323,columnNumber:13},this),e.jsxDEV("button",{className:"btn-secondary text-sm w-full",children:"Enable 2FA"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:324,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:322,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:315,columnNumber:9},this),e.jsxDEV("div",{className:"card",children:[e.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:e.jsxDEV(Bs,{className:"w-5 h-5 text-purple-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:332,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:331,columnNumber:13},this),e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Screen Lock Logo"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:334,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:330,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-3",children:[p&&e.jsxDEV("div",{className:"flex justify-center",children:e.jsxDEV("img",{src:p,alt:"Logo Preview",className:"w-32 h-32 object-contain rounded-lg border-2 border-gray-200"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:339,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:338,columnNumber:15},this),e.jsxDEV("label",{className:"btn-secondary text-sm w-full cursor-pointer flex items-center justify-center gap-2",children:[e.jsxDEV(Ya,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:343,columnNumber:15},this),"Upload Logo",e.jsxDEV("input",{type:"file",accept:"image/*",className:"hidden",onChange:M},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:345,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:342,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500 text-center",children:"This logo will appear on the screen lock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:347,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:336,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:329,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:143,columnNumber:7},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("h3",{className:"text-2xl font-bold mb-6",children:"Change Your Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:356,columnNumber:13},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:F.map(A=>e.jsxDEV("div",{onClick:()=>l(A.id),className:`card cursor-pointer transition-all ${u===A.id?"ring-4 ring-blue-600 bg-blue-50":"hover:shadow-lg"}`,children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-4",children:[e.jsxDEV("h4",{className:"text-xl font-bold",children:A.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:367,columnNumber:21},this),u===A.id&&e.jsxDEV(ja,{className:"w-6 h-6 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:368,columnNumber:50},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:366,columnNumber:19},this),e.jsxDEV("p",{className:"text-3xl font-bold mb-4",children:["KSH ",A.price,e.jsxDEV("span",{className:"text-sm text-gray-600",children:"/month"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:370,columnNumber:74},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:370,columnNumber:19},this),e.jsxDEV("ul",{className:"space-y-2",children:A.features.map((y,S)=>e.jsxDEV("li",{className:"flex items-center gap-2 text-sm",children:[e.jsxDEV(ja,{className:"w-4 h-4 text-green-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:374,columnNumber:25},this),y]},S,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:373,columnNumber:23},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:371,columnNumber:19},this)]},A.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:359,columnNumber:17},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:357,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{onClick:$,className:"btn-primary flex-1",children:"Confirm Change"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:383,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:384,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:382,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:355,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:354,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/SettingsPage.jsx",lineNumber:137,columnNumber:5},this)}function Dr(){const[a,m]=i.useState([]),[h,b]=i.useState(!1),[u,l]=i.useState(null),[t,n]=i.useState({name:"",amount:"",description:"",active:!0});i.useEffect(()=>{p()},[]);const p=()=>{const s=JSON.parse(localStorage.getItem("serviceFees")||"[]");m(s)},o=s=>{localStorage.setItem("serviceFees",JSON.stringify(s)),m(s)},x=s=>{if(s.preventDefault(),u){const w=a.map(f=>f.id===u.id?{...t,id:f.id}:f);o(w)}else{const w={...t,id:Date.now(),createdAt:new Date().toISOString()};o([...a,w])}b(!1),l(null),n({name:"",amount:"",description:"",active:!0})},v=s=>{confirm("Delete this service fee?")&&o(a.filter(w=>w.id!==s))};return e.jsxDEV("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Service Fees"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:48,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Manage delivery, packaging, and other fees"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:49,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:47,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>{b(!0),l(null)},className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:52,columnNumber:11},this),"Add Fee"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:51,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:46,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.map(s=>e.jsxDEV("div",{className:`card ${s.active?"border-green-200 bg-green-50":"border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:e.jsxDEV(Ye,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:63,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:62,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold",children:s.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:66,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:s.description},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:67,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:65,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:61,columnNumber:15},this),e.jsxDEV("span",{className:`badge ${s.active?"badge-success":"bg-gray-200 text-gray-600"}`,children:s.active?"Active":"Inactive"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:70,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:60,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:["KSH ",s.amount]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:75,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>{l(s),n(s),b(!0)},className:"p-2 hover:bg-blue-50 rounded-lg",children:e.jsxDEV(Qe,{className:"w-4 h-4 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:78,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:77,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>v(s.id),className:"p-2 hover:bg-red-50 rounded-lg",children:e.jsxDEV(qe,{className:"w-4 h-4 text-red-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:81,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:80,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:76,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:74,columnNumber:13},this)]},s.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:59,columnNumber:11},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:57,columnNumber:7},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:[u?"Edit":"Add"," Service Fee"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:92,columnNumber:13},this),e.jsxDEV("form",{onSubmit:x,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Fee Name (e.g., Delivery)",className:"input",value:t.name,onChange:s=>n({...t,name:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:94,columnNumber:15},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Amount",className:"input",value:t.amount,onChange:s=>n({...t,amount:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:95,columnNumber:15},this),e.jsxDEV("textarea",{placeholder:"Description",className:"input",rows:"2",value:t.description,onChange:s=>n({...t,description:s.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:96,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:t.active,onChange:s=>n({...t,active:s.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:98,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm",children:"Active"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:99,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:97,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Save"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:102,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:103,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:101,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:93,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:91,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:90,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/ServiceFees.jsx",lineNumber:45,columnNumber:5},this)}function Er(){const{user:a}=Fe(),[m,h]=i.useState([]),[b,u]=i.useState([]),[l,t]=i.useState(!1),[n,p]=i.useState(!1),[o,x]=i.useState([]),[v,s]=i.useState(""),[w,f]=i.useState("all"),[j,C]=i.useState({customerName:"",productId:"",frequency:"weekly",days:[],nextDate:""});i.useEffect(()=>{g(),P(),F();const y=()=>{F()};return window.addEventListener("messageReceived",y),()=>window.removeEventListener("messageReceived",y)},[]);const g=async()=>{try{const y=localStorage.getItem("token"),S=await fetch(`${Ee}/reminders`,{headers:{Authorization:`Bearer ${y}`}});if(!S.ok){console.error("API Error:",S.status,S.statusText),h([]);return}const I=await S.json();Array.isArray(I)?h(I):(console.error("Expected array but got:",typeof I,I),h([]))}catch(y){console.error("Failed to fetch reminders:",y),h([])}},P=async()=>{try{const y=localStorage.getItem("token"),S=await fetch(`${Ee}/products`,{headers:{Authorization:`Bearer ${y}`}});if(!S.ok){console.error("API Error:",S.status,S.statusText),u([]);return}const I=await S.json();Array.isArray(I)?u(I):(console.error("Expected array but got:",typeof I,I),u([]))}catch(y){console.error("Failed to fetch products:",y),u([])}},k=async y=>{y.preventDefault();try{const S=localStorage.getItem("token"),I=await fetch(`${Ee}/reminders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${S}`},body:JSON.stringify(j)});if(!I.ok){const B=await I.json();console.error("Failed to create reminder:",B),alert(`Failed to create reminder: ${B.error||"Unknown error"}`);return}const X=await I.json();C({customerName:"",productId:"",frequency:"weekly",days:[],nextDate:""}),t(!1),g(),alert("Reminder created successfully!")}catch(S){console.error("Failed to create reminder:",S),alert("Failed to create reminder. Please try again.")}},M=async y=>{try{if(JSON.parse(localStorage.getItem("user")||"{}").role!=="admin"){alert("Only administrators can delete reminders.");return}if(!confirm("Are you sure you want to delete this reminder? This action cannot be undone."))return;const I=localStorage.getItem("token"),X=await fetch(`${Ee}/reminders/${y}`,{method:"DELETE",headers:{Authorization:`Bearer ${I}`}});if(!X.ok){const B=await X.json();console.error("Failed to delete reminder:",B),alert(`Failed to delete reminder: ${B.error||"Unknown error"}`);return}g(),alert("Reminder deleted successfully!")}catch(S){console.error("Failed to delete reminder:",S),alert("Failed to delete reminder. Please try again.")}},D=y=>{j.days.includes(y)?C({...j,days:j.days.filter(S=>S!==y)}):C({...j,days:[...j.days,y]})},F=()=>{const y=`adminMessages_${a?.email||"default"}`,S=JSON.parse(localStorage.getItem(y)||"[]");x(S)},$=y=>{if(y.preventDefault(),!v.trim())return;const S={id:Date.now(),sender:"admin",recipient:w,text:v,timestamp:new Date().toISOString(),read:!1},I=`adminMessages_${a?.email||"default"}`,X=JSON.parse(localStorage.getItem(I)||"[]");X.push(S),localStorage.setItem(I,JSON.stringify(X));const B=`cashierMessages_${a?.email||"default"}`,pe=JSON.parse(localStorage.getItem(B)||"[]");pe.push(S),localStorage.setItem(B,JSON.stringify(pe)),x(X),s(""),window.dispatchEvent(new CustomEvent("newAdminMessage",{detail:S})),alert("Message sent to cashier(s)!")},A=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[e.jsxDEV(Ua,{className:"text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:226,columnNumber:11},this),"Reminder System"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:225,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{onClick:()=>p(!0),className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition flex items-center gap-2",children:[e.jsxDEV(Xa,{size:20},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:234,columnNumber:13},this),"Message Cashier"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:230,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>t(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition flex items-center gap-2",children:[e.jsxDEV(Le,{size:20},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:241,columnNumber:13},this),"New Reminder"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:237,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:224,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4",children:m.map(y=>{const S=b.find(I=>I.id===y.productId);return e.jsxDEV("div",{className:`p-6 rounded-xl shadow-lg ${y.status==="pending"?"bg-red-50 border-l-4 border-red-500":"bg-green-50 border-l-4 border-green-500"}`,children:e.jsxDEV("div",{className:"flex justify-between items-start",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-2",children:y.customerName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:254,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-700 mb-1",children:["Product: ",S?.name||"Unknown"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:255,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-600 text-sm mb-1",children:["Frequency: ",y.frequency]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:256,columnNumber:19},this),y.days?.length>0&&e.jsxDEV("p",{className:"text-gray-600 text-sm mb-1",children:["Days: ",y.days.join(", ")]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:258,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-600 text-sm flex items-center gap-2",children:[e.jsxDEV(la,{size:16},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:261,columnNumber:21},this),"Next: ",new Date(y.nextDate).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:260,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:253,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("span",{className:`px-4 py-2 rounded-lg font-bold ${y.status==="pending"?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:y.status},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:266,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>M(y.id),className:"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition",children:e.jsxDEV(qe,{size:20},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:273,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:269,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:265,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:252,columnNumber:15},this)},y.id,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:251,columnNumber:13},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:247,columnNumber:7},this),l&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white rounded-t-2xl",children:e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Create Reminder"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:286,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:285,columnNumber:13},this),e.jsxDEV("form",{onSubmit:k,className:"p-6 space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Customer Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:290,columnNumber:17},this),e.jsxDEV("input",{type:"text",value:j.customerName,onChange:y=>C({...j,customerName:y.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:291,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:289,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:300,columnNumber:17},this),e.jsxDEV("select",{value:j.productId,onChange:y=>C({...j,productId:parseInt(y.target.value)}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0,children:[e.jsxDEV("option",{value:"",children:"Select Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:307,columnNumber:19},this),b.map(y=>e.jsxDEV("option",{value:y.id,children:y.name},y.id,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:309,columnNumber:21},this))]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:301,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:299,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Frequency"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:314,columnNumber:17},this),e.jsxDEV("select",{value:j.frequency,onChange:y=>C({...j,frequency:y.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"daily",children:"Daily"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:320,columnNumber:19},this),e.jsxDEV("option",{value:"weekly",children:"Weekly"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:321,columnNumber:19},this),e.jsxDEV("option",{value:"specific",children:"Specific Days"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:322,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:315,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:313,columnNumber:15},this),j.frequency==="specific"&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Select Days"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:327,columnNumber:19},this),e.jsxDEV("div",{className:"flex flex-wrap gap-2",children:A.map(y=>e.jsxDEV("button",{type:"button",onClick:()=>D(y),className:`px-4 py-2 rounded-lg font-medium transition ${j.days.includes(y)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:y},y,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:330,columnNumber:23},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:328,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:326,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Next Reminder Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:347,columnNumber:17},this),e.jsxDEV("input",{type:"date",value:j.nextDate,onChange:y=>C({...j,nextDate:y.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:348,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:346,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition",children:"Create Reminder"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:357,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>t(!1),className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:363,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:288,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:283,columnNumber:9},this),n&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-96 flex flex-col",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 text-white rounded-t-2xl",children:e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(Xa,{size:24},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:382,columnNumber:17},this),"Send Message to Cashier"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:381,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:380,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:o.length===0?e.jsxDEV("p",{className:"text-gray-500 text-center py-8",children:"No messages yet. Start a conversation!"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:389,columnNumber:17},this):o.map(y=>e.jsxDEV("div",{className:`p-4 rounded-lg ${y.sender==="admin"?"bg-blue-50 ml-8":"bg-gray-50 mr-8"}`,children:[e.jsxDEV("p",{className:"text-sm font-semibold text-gray-600 mb-1",children:y.sender==="admin"?"You":"Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:393,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-800",children:y.text},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:396,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-gray-400 mt-2",children:new Date(y.timestamp).toLocaleTimeString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:397,columnNumber:21},this)]},y.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:392,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:387,columnNumber:13},this),e.jsxDEV("form",{onSubmit:$,className:"p-4 border-t space-y-3",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Send To"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:407,columnNumber:17},this),e.jsxDEV("select",{value:w,onChange:y=>f(y.target.value),className:"w-full px-4 py-2 rounded-lg border focus:ring-2 focus:ring-purple-500",children:[e.jsxDEV("option",{value:"all",children:"All Cashiers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:413,columnNumber:19},this),e.jsxDEV("option",{value:"cashier",children:"Primary Cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:414,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:408,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:406,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("input",{type:"text",value:v,onChange:y=>s(y.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 rounded-lg border focus:ring-2 focus:ring-purple-500"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:418,columnNumber:17},this),e.jsxDEV("button",{type:"submit",className:"bg-purple-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-purple-700 transition flex items-center gap-2",children:e.jsxDEV(ls,{size:18},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:429,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:425,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:417,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:405,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>p(!1),className:"w-full py-2 bg-gray-200 text-gray-700 font-bold hover:bg-gray-300 transition rounded-b-2xl",children:"Close"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:434,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:379,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:378,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/RemindersManager.jsx",lineNumber:223,columnNumber:5},this)}function Vr(){const[a,m]=i.useState([]),[h,b]=i.useState(!1),[u,l]=i.useState(null),[t,n]=i.useState({name:"",percentage:"",validFrom:"",validTo:"",active:!0});i.useEffect(()=>{p()},[]);const p=async()=>{try{const s=await pa.getAll();m(s)}catch(s){console.error("Failed to load discounts:",s)}},o=async s=>{s.preventDefault();try{u?await pa.update(u.id,t):await pa.create(t),b(!1),l(null),n({name:"",percentage:"",validFrom:"",validTo:"",active:!0}),p()}catch(w){console.error("Failed to save discount:",w)}},x=async s=>{if(confirm("Delete this discount?"))try{await pa.delete(s),p()}catch(w){console.error("Failed to delete discount:",w)}},v=s=>{const w=new Date,f=new Date(s.validFrom),j=new Date(s.validTo);return s.active&&f<=w&&j>=w};return e.jsxDEV("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Discount Manager"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:69,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage discount rules"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:70,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:68,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>{b(!0),l(null),n({name:"",percentage:"",validFrom:"",validTo:"",active:!0})},className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:80,columnNumber:11},this),"Add Discount"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:72,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:67,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.map(s=>e.jsxDEV("div",{className:`card ${v(s)?"border-green-200 bg-green-50":"border-gray-200"}`,children:[e.jsxDEV("div",{className:"flex items-start justify-between mb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${v(s)?"bg-green-600":"bg-gray-400"}`,children:e.jsxDEV(Ia,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:100,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:97,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"font-semibold",children:s.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:103,columnNumber:19},this),e.jsxDEV("p",{className:"text-2xl font-bold text-red-600",children:[s.percentage,"% OFF"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:104,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:96,columnNumber:15},this),e.jsxDEV("span",{className:`badge ${v(s)?"badge-success":"bg-gray-200 text-gray-600"}`,children:v(s)?"Active":"Inactive"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:107,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:95,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(la,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:113,columnNumber:17},this),e.jsxDEV("span",{children:["From: ",new Date(s.validFrom).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:114,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:112,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(la,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:117,columnNumber:17},this),e.jsxDEV("span",{children:["To: ",new Date(s.validTo).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:118,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:116,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:111,columnNumber:13},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>{l(s),n(s),b(!0)},className:"p-2 hover:bg-blue-50 rounded-lg flex-1",children:e.jsxDEV(Qe,{className:"w-4 h-4 text-blue-600 mx-auto"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:130,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:122,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>x(s.id),className:"p-2 hover:bg-red-50 rounded-lg flex-1",children:e.jsxDEV(qe,{className:"w-4 h-4 text-red-600 mx-auto"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:133,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:132,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:121,columnNumber:13},this)]},s.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:87,columnNumber:11},this)),a.length===0&&e.jsxDEV("div",{className:"card text-center py-12 col-span-full",children:[e.jsxDEV(Ia,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:140,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500",children:"No discounts yet. Create your first discount!"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:141,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:139,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:85,columnNumber:7},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:[u?"Edit":"Add"," Discount"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:150,columnNumber:13},this),e.jsxDEV("form",{onSubmit:o,className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Discount Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:153,columnNumber:17},this),e.jsxDEV("input",{type:"text",className:"input",value:t.name,onChange:s=>n({...t,name:s.target.value}),placeholder:"e.g., Holiday Sale",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:154,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:152,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Percentage (%)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:164,columnNumber:17},this),e.jsxDEV("input",{type:"number",step:"0.01",min:"0",max:"100",className:"input",value:t.percentage,onChange:s=>n({...t,percentage:parseFloat(s.target.value)}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:165,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:163,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Valid From"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:177,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"input",value:t.validFrom,onChange:s=>n({...t,validFrom:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:178,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Valid To"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:187,columnNumber:17},this),e.jsxDEV("input",{type:"date",className:"input",value:t.validTo,onChange:s=>n({...t,validTo:s.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:188,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:186,columnNumber:15},this),e.jsxDEV("label",{className:"flex items-center gap-2",children:[e.jsxDEV("input",{type:"checkbox",checked:t.active,onChange:s=>n({...t,active:s.target.checked})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:197,columnNumber:17},this),e.jsxDEV("span",{className:"text-sm",children:"Active"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:202,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Save"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:205,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>b(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:206,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:204,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:151,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:149,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:148,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Discounts.jsx",lineNumber:66,columnNumber:5},this)}function wr(){const[a,m]=i.useState([]),[h,b]=i.useState([]),[u,l]=i.useState("all");i.useEffect(()=>{t(),n()},[]);const t=async()=>{try{const f=await Ma.getAll();m(f)}catch(f){console.error("Failed to load credit requests:",f)}},n=async()=>{try{const f=await Oe.getAll();b(f)}catch(f){console.error("Failed to load products:",f)}},p=async f=>{try{await Ma.approve(f),t()}catch(j){console.error("Failed to approve request:",j)}},o=async f=>{try{await Ma.reject(f),t()}catch(j){console.error("Failed to reject request:",j)}},x=f=>{const j=h.find(C=>C.id===f);return j?j.name:"Unknown Product"},v=a.filter(f=>u==="all"?!0:f.status===u),s=f=>{switch(f){case"pending":return"bg-orange-50 border-orange-200";case"approved":return"bg-green-50 border-green-200";case"rejected":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},w=f=>{switch(f){case"pending":return e.jsxDEV(na,{className:"w-6 h-6 text-orange-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:72,columnNumber:30},this);case"approved":return e.jsxDEV(Be,{className:"w-6 h-6 text-green-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:73,columnNumber:31},this);case"rejected":return e.jsxDEV(ka,{className:"w-6 h-6 text-red-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:74,columnNumber:31},this);default:return e.jsxDEV(ya,{className:"w-6 h-6 text-gray-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:75,columnNumber:23},this)}};return e.jsxDEV("div",{className:"p-4 md:p-6 space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Credit Requests"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:83,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage credit requests from cashiers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:84,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:82,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:["all","pending","approved","rejected"].map(f=>e.jsxDEV("button",{onClick:()=>l(f),className:`px-4 py-2 rounded-lg font-medium transition ${u===f?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:f.charAt(0).toUpperCase()+f.slice(1)},f,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:88,columnNumber:13},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:86,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:81,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 gap-4",children:[v.map(f=>e.jsxDEV("div",{className:`card border-l-4 ${s(f.status)}`,children:e.jsxDEV("div",{className:"flex items-start justify-between",children:[e.jsxDEV("div",{className:"flex items-start gap-4 flex-1",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${f.status==="pending"?"bg-orange-600":f.status==="approved"?"bg-green-600":"bg-red-600"}`,children:w(f.status)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:108,columnNumber:17},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"font-semibold text-lg",children:f.customerName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:115,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:x(f.productId)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:116,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[e.jsxDEV("span",{children:["Quantity: ",e.jsxDEV("strong",{children:f.quantity},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:118,columnNumber:37},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:118,columnNumber:21},this),e.jsxDEV("span",{children:["Amount: ",e.jsxDEV("strong",{className:"text-green-600",children:["KSH ",f.amount?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:119,columnNumber:35},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:119,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:117,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:["Requested: ",new Date(f.createdAt).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:121,columnNumber:19},this),f.approvedAt&&e.jsxDEV("p",{className:"text-xs text-gray-500",children:["Approved: ",new Date(f.approvedAt).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:125,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:114,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:107,columnNumber:15},this),f.status==="pending"&&e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>p(f.id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[e.jsxDEV(Be,{size:16},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:137,columnNumber:21},this),"Approve"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>o(f.id),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[e.jsxDEV(ka,{size:16},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:144,columnNumber:21},this),"Reject"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:140,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:132,columnNumber:17},this),f.status!=="pending"&&e.jsxDEV("span",{className:`badge ${f.status==="approved"?"badge-success":"bg-red-100 text-red-800"}`,children:f.status.toUpperCase()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:150,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:106,columnNumber:13},this)},f.id,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:105,columnNumber:11},this)),v.length===0&&e.jsxDEV("div",{className:"card text-center py-12",children:[e.jsxDEV(ya,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:161,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500",children:["No ",u!=="all"?u:""," credit requests found."]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:162,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:160,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:103,columnNumber:7},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/CreditRequests.jsx",lineNumber:80,columnNumber:5},this)}function Sr(){const{user:a}=Fe(),[m,h]=i.useState([]),[b,u]=i.useState(!1),[l,t]=i.useState(!1),[n,p]=i.useState(null),[o,x]=i.useState(null),[v,s]=i.useState(""),[w,f]=i.useState({supplierName:"",details:"",orderDate:"",expectedDelivery:"",amount:""}),j=(D,F="success")=>{x({message:D,type:F}),setTimeout(()=>x(null),3e3)};i.useEffect(()=>{C()},[a]);const C=()=>{try{const D=`vendors_${a?.email||"default"}`,F=JSON.parse(localStorage.getItem(D)||"[]");h(F)}catch(D){console.error("Failed to load vendors:",D),h([])}},g=async D=>{D.preventDefault();try{if(!w.supplierName.trim()){j("âŒ Supplier name is required","error");return}const F={id:Math.random().toString(36).substr(2,9),supplierName:w.supplierName,details:w.details,orderDate:w.orderDate,expectedDelivery:w.expectedDelivery,amount:parseFloat(w.amount||0),createdBy:a?.id||a?.name||"Unknown",createdAt:new Date().toISOString()},$=`vendors_${a?.email||"default"}`,A=JSON.parse(localStorage.getItem($)||"[]");A.push(F),localStorage.setItem($,JSON.stringify(A)),f({supplierName:"",details:"",orderDate:"",expectedDelivery:"",amount:""}),u(!1),C(),j(`âœ… Vendor "${F.supplierName}" added successfully!`,"success")}catch(F){console.error("Failed to add vendor:",F),j(`âŒ Failed to add vendor: ${F.message}`,"error")}},P=async D=>{D.preventDefault();try{if(!n.supplierName.trim()){j("âŒ Supplier name is required","error");return}const F=`vendors_${a?.email||"default"}`,$=JSON.parse(localStorage.getItem(F)||"[]"),A=$.findIndex(y=>y.id===n.id);A!==-1&&($[A]={...n,amount:parseFloat(n.amount||0)},localStorage.setItem(F,JSON.stringify($))),t(!1),p(null),C(),j(`âœ… Vendor "${n.supplierName}" updated successfully!`,"success")}catch(F){console.error("Failed to update vendor:",F),j(`âŒ Failed to update vendor: ${F.message}`,"error")}},k=async(D,F)=>{if(confirm(`Are you sure you want to delete vendor "${F}"?`))try{const $=`vendors_${a?.email||"default"}`,y=JSON.parse(localStorage.getItem($)||"[]").filter(S=>S.id!==D);localStorage.setItem($,JSON.stringify(y)),C(),j(`âœ… Vendor "${F}" deleted successfully!`,"success")}catch($){console.error("Failed to delete vendor:",$),j(`âŒ Failed to delete vendor: ${$.message}`,"error")}},M=m.filter(D=>D.supplierName?.toLowerCase().includes(v.toLowerCase())||D.details?.toLowerCase().includes(v.toLowerCase()));return e.jsxDEV("div",{className:"p-6",children:[o&&e.jsxDEV("div",{className:`mb-4 p-4 rounded-lg ${o.type==="error"?"bg-red-50 text-red-800":"bg-green-50 text-green-800"}`,children:o.message},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:136,columnNumber:9},this),e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(os,{className:"w-6 h-6 text-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:144,columnNumber:11},this),"Vendor Management"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:143,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>u(!0),className:"btn-primary flex items-center gap-2",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:151,columnNumber:11},this),"Add Vendor"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:147,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:142,columnNumber:7},this),e.jsxDEV("div",{className:"mb-4",children:e.jsxDEV("input",{type:"text",placeholder:"Search vendors by name or details...",value:v,onChange:D=>s(D.target.value),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:158,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:157,columnNumber:7},this),e.jsxDEV("div",{className:"card overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50 border-b border-gray-200",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Supplier Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:172,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Details"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:173,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Order Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:174,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Expected Delivery"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:175,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount (KSH)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:176,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Created By"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:177,columnNumber:15},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:178,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:171,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:170,columnNumber:11},this),e.jsxDEV("tbody",{children:M&&M.length>0?M.slice().reverse().map(D=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold",children:D.supplierName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:185,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm text-gray-600",children:D.details||"-"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:186,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:D.orderDate?new Date(D.orderDate).toLocaleDateString():"-"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:187,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:D.expectedDelivery?new Date(D.expectedDelivery).toLocaleDateString():"-"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:190,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-orange-600",children:D.amount?D.amount.toLocaleString():"0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:193,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm text-gray-600",children:D.createdBy},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:196,columnNumber:19},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm flex gap-2",children:[e.jsxDEV("button",{onClick:()=>{p(D),t(!0)},className:"text-blue-600 hover:text-blue-800 transition-colors",title:"Edit vendor",children:e.jsxDEV(Qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:206,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:198,columnNumber:21},this),e.jsxDEV("button",{onClick:()=>k(D.id,D.supplierName),className:"text-red-600 hover:text-red-800 transition-colors",title:"Delete vendor",children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:213,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:208,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:197,columnNumber:19},this)]},D.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:184,columnNumber:17},this)):e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:"7",className:"px-4 py-8 text-center text-gray-500",children:v?"No vendors match your search":"No vendors added yet"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:220,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:219,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:181,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:168,columnNumber:7},this),b&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Add New Vendor"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:233,columnNumber:13},this),e.jsxDEV("form",{onSubmit:g,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Supplier Name",value:w.supplierName,onChange:D=>f({...w,supplierName:D.target.value}),className:"input w-full",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("textarea",{placeholder:"Details (optional)",value:w.details,onChange:D=>f({...w,details:D.target.value}),className:"input w-full",rows:"2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:243,columnNumber:15},this),e.jsxDEV("input",{type:"date",value:w.orderDate,onChange:D=>f({...w,orderDate:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:250,columnNumber:15},this),e.jsxDEV("input",{type:"date",value:w.expectedDelivery,onChange:D=>f({...w,expectedDelivery:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:256,columnNumber:15},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Amount (KSH)",value:w.amount,onChange:D=>f({...w,amount:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:262,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Vendor"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:271,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>{u(!1),f({supplierName:"",details:"",orderDate:"",expectedDelivery:"",amount:""})},className:"btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:272,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:270,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:232,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:231,columnNumber:9},this),l&&n&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[e.jsxDEV("h3",{className:"text-xl font-bold mb-4",children:"Edit Vendor"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:292,columnNumber:13},this),e.jsxDEV("form",{onSubmit:P,className:"space-y-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Supplier Name",value:n.supplierName,onChange:D=>p({...n,supplierName:D.target.value}),className:"input w-full",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:294,columnNumber:15},this),e.jsxDEV("textarea",{placeholder:"Details (optional)",value:n.details,onChange:D=>p({...n,details:D.target.value}),className:"input w-full",rows:"2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:302,columnNumber:15},this),e.jsxDEV("input",{type:"date",value:n.orderDate,onChange:D=>p({...n,orderDate:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:309,columnNumber:15},this),e.jsxDEV("input",{type:"date",value:n.expectedDelivery,onChange:D=>p({...n,expectedDelivery:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:315,columnNumber:15},this),e.jsxDEV("input",{type:"number",step:"0.01",placeholder:"Amount (KSH)",value:n.amount,onChange:D=>p({...n,amount:D.target.value}),className:"input w-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:321,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Update Vendor"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:330,columnNumber:17},this),e.jsxDEV("button",{type:"button",onClick:()=>{t(!1),p(null)},className:"btn-secondary flex-1",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:331,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:293,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:291,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:290,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/Vendors.jsx",lineNumber:133,columnNumber:5},this)}function ys({onClose:a}){const[m,h]=i.useState([]),[b,u]=i.useState(!0),l=i.useRef({data:null,timestamp:null}),t=3e4;i.useEffect(()=>{n()},[]);const n=async()=>{try{const o=Date.now();if(l.current.data&&l.current.timestamp&&o-l.current.timestamp<t){console.log("ðŸ“¦ Using cached reminders"),h(l.current.data),u(!1);return}const x=localStorage.getItem("token"),v=await fetch(`${Ee}/reminders/today`,{headers:{Authorization:`Bearer ${x}`}});if(!v.ok){console.error("API Error:",v.status,v.statusText),h([]),u(!1);return}const s=await v.json();Array.isArray(s)?(l.current.data=s,l.current.timestamp=Date.now(),h(s)):(console.error("Expected array but got:",typeof s,s),h([]))}catch(o){console.error("Failed to fetch reminders:",o),h([])}finally{u(!1)}},p=async o=>{try{const x=localStorage.getItem("token");await fetch(`${Ee}/reminders/${o}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({status:"fulfilled"})}),l.current={data:null,timestamp:null},n()}catch(x){console.error("Failed to update reminder:",x)}};return b?null:e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white flex justify-between items-center",children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Today's Reminders"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:83,columnNumber:11},this),e.jsxDEV("button",{onClick:a,className:"hover:bg-white/20 p-2 rounded-lg transition",children:e.jsxDEV(ra,{size:24},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:85,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:84,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:82,columnNumber:9},this),e.jsxDEV("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:m.length===0?e.jsxDEV("div",{className:"text-center py-12",children:[e.jsxDEV(va,{className:"mx-auto h-12 w-12 text-green-500 mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:92,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-600 text-lg",children:"No reminders for today"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:93,columnNumber:15},this),e.jsxDEV("p",{className:"text-gray-400 text-sm mt-2",children:"You're all caught up!"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:94,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:91,columnNumber:13},this):m.map(o=>e.jsxDEV("div",{className:"mb-4 p-4 border-l-4 border-red-500 bg-red-50 rounded-lg flex justify-between items-center",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-semibold text-gray-800",children:o.customerName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:100,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm text-gray-600",children:["Product ID: ",o.productId]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:101,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:o.frequency},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:102,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:99,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>p(o.id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[e.jsxDEV(Be,{size:18},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:108,columnNumber:19},this),"Mark Done"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:104,columnNumber:17},this)]},o.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:98,columnNumber:15},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:89,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:81,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ReminderModal.jsx",lineNumber:80,columnNumber:5},this)}function js({onUnlock:a,userType:m="user"}){const[h,b]=i.useState(""),[u,l]=i.useState(""),[t,n]=i.useState("password"),[p,o]=i.useState(!1),[x,v]=i.useState(""),[s,w]=i.useState(!1),[f,j]=i.useState("2005"),C=JSON.parse(localStorage.getItem("user")||"{}");i.useEffect(()=>{(async()=>{try{const M=await ta.get();M?.screenLockPassword&&j(M.screenLockPassword)}catch(M){console.warn("Failed to load settings, using default password:",M)}})()},[]),i.useEffect(()=>{const k=document.getElementById(t==="password"?"unlock-password":"unlock-pin");k&&k.focus()},[t]);const g=async k=>{k.preventDefault(),k.stopPropagation(),w(!0),v("");try{const M=localStorage.getItem("token");if(!M)throw new Error("No authentication token found");const D=await fetch("https://posifine22.onrender.com/api/auth/unlock-screen",{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({pin:u})});if(!D.ok){const $=await D.json();throw D.status===429?new Error($.message||"Too many failed attempts. Try again later."):D.status===401?new Error($.message||"Incorrect PIN"):new Error($.message||"Unlock failed")}const F=await D.json();F.token&&localStorage.setItem("token",F.token),l(""),b(""),a(F)}catch(M){v(M.message||"Unlock failed")}finally{w(!1)}},P=k=>{const M=k.replace(/\D/g,"").slice(0,4);l(M)};return e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:k=>k.stopPropagation(),children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8",onClick:k=>k.stopPropagation(),children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:`w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center ${m==="main_admin"?"bg-gradient-to-br from-red-600 to-orange-600":"bg-gradient-to-br from-blue-600 to-purple-600"}`,children:e.jsxDEV(Re,{className:"w-8 h-8 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:109,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:104,columnNumber:11},this),e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Screen Locked"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:111,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:m==="main_admin"?"Main Admin":C.name||"User"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:112,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:["Enter your ",t," to continue"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:115,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("form",{onSubmit:g,className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter PIN to unlock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:123,columnNumber:13},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:125,columnNumber:15},this),e.jsxDEV("input",{type:"password",id:"unlock-pin",value:u,onChange:k=>P(k.target.value),placeholder:"0000",maxLength:"4",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center tracking-widest text-2xl",disabled:s},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:126,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:124,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ”’ PIN validated securely on server"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:137,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:122,columnNumber:11},this),x&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxDEV("p",{className:"text-red-700 text-sm font-medium",children:[x.includes("Too many")?"âŒ ":"âš ï¸ ",x]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:142,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:141,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:s||u.length<4,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:s?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:156,columnNumber:17},this),"Verifying..."]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:155,columnNumber:15},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Re,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:161,columnNumber:17},this),"Unlock Screen"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:160,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:149,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:120,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:99,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/ScreenLock.jsx",lineNumber:95,columnNumber:5},this)}function ks(a=6e4){const[m,h]=i.useState(!1),[b,u]=i.useState(Date.now()),l=i.useCallback(()=>{u(Date.now()),m&&h(!1)},[m]),t=i.useCallback(()=>{h(!1),l()},[l]);return i.useEffect(()=>{const n=["mousedown","mousemove","keypress","scroll","touchstart","click"],p=()=>{l()};n.forEach(x=>{document.addEventListener(x,p,!0)});const o=setInterval(()=>{Date.now()-b>a&&!m&&h(!0)},1e3);return()=>{n.forEach(x=>{document.removeEventListener(x,p,!0)}),clearInterval(o)}},[b,a,m,l]),[m,t,l]}function Cr(){const{user:a,logout:m,isCashierUserManagementEnabled:h}=Fe(),b=ia(),u=rs(),[l,t]=i.useState(!0),[n,p]=i.useState(!1),[o,x]=i.useState({}),[v,s]=ks(45e3);i.useEffect(()=>{const g=()=>{const k=localStorage.getItem("user");if(k){const M=JSON.parse(k);let D=!1;(M.plan==="ultra"||M.role==="admin")&&(M.active||(M.active=!0,D=!0),M.plan==="ultra"&&M.role!=="admin"&&(M.role="admin",D=!0),M.plan==="ultra"&&(!M.price||M.price!==1600)&&(M.price=1600,D=!0),D&&(localStorage.setItem("user",JSON.stringify(M)),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new Event("localStorageUpdated"))))}};if(g(),setTimeout(g,100),!sessionStorage.getItem("adminReminderShown")){const k=setTimeout(()=>{p(!0),sessionStorage.setItem("adminReminderShown","true")},1e3);return w(),()=>clearTimeout(k)}w()},[]);const w=async()=>{try{const g=await ta.get();x(g)}catch(g){console.error("Failed to load settings:",g)}},f=async()=>{if(window.confirm("Are you sure you want to clear all sales and expenses data? This action cannot be undone."))try{const g=localStorage.getItem("token"),k=await fetch(`${Ee}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({type:"all"})});if(!k.ok){const M=await k.json();throw console.error("Clear data error:",M),new Error(M.message||"Failed to clear data")}localStorage.removeItem("products"),localStorage.removeItem("sales"),localStorage.removeItem("expenses"),localStorage.removeItem("users"),setData({products:[],sales:[],expenses:[],stats:{},users:[],vendors:[]}),setActiveTab("overview"),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new CustomEvent("dataCleared")),alert("âœ… Data cleared successfully! Refreshing..."),setTimeout(()=>{window.location.href="/admin"},500)}catch(g){console.error("Failed to clear data:",g),alert("âŒ Failed to clear data: "+g.message)}},j=[{id:"overview",label:"Dashboard",icon:Js,path:"/admin"},{id:"sales",label:"Sales",icon:ns,path:"/admin/sales"},{id:"inventory",label:"Inventory",icon:sa,path:"/admin/inventory"},{id:"recipes",label:"Recipes/BOM",icon:us,path:"/admin/recipes"},{id:"vendors",label:"Vendors",icon:os,path:"/admin/vendors"},{id:"expenses",label:"Expenses",icon:fa,path:"/admin/expenses"},...h()?[{id:"users",label:"Users",icon:Je,path:"/admin/users"}]:[],{id:"time",label:"Time Tracking",icon:na,path:"/admin/time"},{id:"reminders",label:"Reminders",icon:Ua,path:"/admin/reminders"},{id:"service-fees",label:"Service Fees",icon:Ye,path:"/admin/service-fees"},{id:"discounts",label:"Discounts",icon:Ia,path:"/admin/discounts"},{id:"credit-requests",label:"Credit Requests",icon:ya,path:"/admin/credit-requests"},{id:"settings",label:"Settings",icon:zs,path:"/admin/settings"}],C=g=>g==="/admin"?u.pathname==="/admin":u.pathname.startsWith(g);return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex",children:[e.jsxDEV("aside",{className:`bg-white border-r border-gray-200 transition-all duration-300 ${l?"w-64":"w-20"} flex flex-col`,children:[e.jsxDEV("div",{className:"p-6 border-b border-gray-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[l&&e.jsxDEV("div",{children:[e.jsxDEV("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Admin Panel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:182,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Ultra Package"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:185,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:181,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>t(!l),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:l?e.jsxDEV(ra,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:192,columnNumber:30},this):e.jsxDEV(Hs,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:192,columnNumber:58},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:188,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:179,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:178,columnNumber:9},this),e.jsxDEV("nav",{className:"flex-1 p-4 space-y-2",children:j.map(g=>{const P=g.icon;return e.jsxDEV("button",{onClick:()=>b(g.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${C(g.path)?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[e.jsxDEV(P,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:210,columnNumber:17},this),l&&e.jsxDEV("span",{className:"font-medium",children:g.label},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:211,columnNumber:33},this)]},g.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:201,columnNumber:15},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:197,columnNumber:9},this),e.jsxDEV("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[e.jsxDEV("button",{onClick:()=>window.open("/cashier","_blank"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsxDEV(Ks,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:222,columnNumber:13},this),l&&e.jsxDEV("span",{className:"font-medium",children:"Open POS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:223,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:218,columnNumber:11},this),e.jsxDEV("button",{onClick:m,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[e.jsxDEV($a,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:230,columnNumber:13},this),l&&e.jsxDEV("span",{className:"font-medium",children:"Logout"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:231,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:226,columnNumber:11},this),e.jsxDEV("button",{onClick:f,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-orange-600 hover:bg-orange-50 transition-colors",children:[e.jsxDEV(ra,{className:"w-5 h-5 flex-shrink-0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:238,columnNumber:13},this),l&&e.jsxDEV("span",{className:"font-medium",children:"Clear Data"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:239,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:234,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:217,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:177,columnNumber:7},this),e.jsxDEV("div",{className:"flex-1 flex flex-col",children:[e.jsxDEV("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:j.find(g=>C(g.path))?.label||"Dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:250,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:249,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"text-sm font-semibold text-gray-900",children:a?.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:256,columnNumber:17},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:a?.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:257,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:255,columnNumber:15},this),e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:a?.name?.charAt(0).toUpperCase()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:259,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:254,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:248,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:247,columnNumber:9},this),e.jsxDEV("main",{className:"flex-1 overflow-auto",children:e.jsxDEV(is,{children:[e.jsxDEV(xe,{path:"/",element:e.jsxDEV(br,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:269,columnNumber:38},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:269,columnNumber:13},this),e.jsxDEV(xe,{path:"/sales",element:e.jsxDEV(fr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:270,columnNumber:43},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:270,columnNumber:13},this),e.jsxDEV(xe,{path:"/inventory",element:e.jsxDEV(xr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:271,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:271,columnNumber:13},this),e.jsxDEV(xe,{path:"/recipes",element:e.jsxDEV(vr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:272,columnNumber:45},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:272,columnNumber:13},this),e.jsxDEV(xe,{path:"/vendors",element:e.jsxDEV(Sr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:273,columnNumber:45},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:273,columnNumber:13},this),e.jsxDEV(xe,{path:"/expenses",element:e.jsxDEV(gr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:274,columnNumber:46},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:274,columnNumber:13},this),e.jsxDEV(xe,{path:"/reminders",element:e.jsxDEV(Er,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:275,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:275,columnNumber:13},this),e.jsxDEV(xe,{path:"/service-fees",element:e.jsxDEV(Dr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:276,columnNumber:50},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:276,columnNumber:13},this),e.jsxDEV(xe,{path:"/discounts",element:e.jsxDEV(Vr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:277,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:277,columnNumber:13},this),e.jsxDEV(xe,{path:"/credit-requests",element:e.jsxDEV(wr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:278,columnNumber:53},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:278,columnNumber:13},this),e.jsxDEV(xe,{path:"/users",element:e.jsxDEV(yr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:279,columnNumber:43},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:279,columnNumber:13},this),e.jsxDEV(xe,{path:"/time",element:e.jsxDEV(jr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:280,columnNumber:42},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:280,columnNumber:13},this),e.jsxDEV(xe,{path:"/settings",element:e.jsxDEV(kr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:281,columnNumber:46},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:281,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:268,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:267,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:245,columnNumber:7},this),n&&e.jsxDEV(ys,{onClose:()=>p(!1)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:288,columnNumber:9},this),v&&e.jsxDEV(js,{onUnlock:s,logo:o.logo},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:293,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/admin/AdminDashboard.jsx",lineNumber:175,columnNumber:5},this)}function Pr(){const a=ia(),[m,h]=i.useState(!1),[b,u]=i.useState(0),l=[{title:"1. Sign Up & Choose Plan",desc:"Create your account and select between Basic (KSH 900) or Ultra (KSH 1,600) package",image:"ðŸ“",details:"First user becomes Admin automatically. Choose Ultra for full features including Recipe Builder and User Management."},{title:"2. Add Raw Materials",desc:"Stock your inventory with raw ingredients like fish, oil, breadcrumbs, salt, etc.",image:"ðŸ“¦",details:'Enter product name, cost, quantity, and unit. Mark items as "expense-only" to hide from cashiers.'},{title:"3. Create Recipes (Ultra Only)",desc:"Build composite products using the Recipe/BOM Builder",image:"ðŸ½ï¸",details:"Example: Fish Fingers = 0.02kg Nile Perch + 0.01L Oil + 0.004kg Breadcrumbs. System auto-calculates COGS and profit margin."},{title:"4. Add Cashiers (Ultra Only)",desc:"Invite team members and set their permissions",image:"ðŸ‘¥",details:"Enter name and email. Set permissions: View Sales, View Inventory, View Expenses, Manage Products. Default password: changeme123"},{title:"5. Make Sales",desc:"Cashiers use the POS to sell products",image:"ðŸ’°",details:"Search products, add to cart, select payment method (Cash/M-Pesa/Card), complete sale. Stock automatically deducted!"},{title:"6. Automatic Stock Deduction",desc:"When selling composite products, ingredients are auto-deducted",image:"âš¡",details:"Sell 1 Fish Finger â†’ System deducts 0.02kg fish, 0.01L oil, 0.004kg breadcrumbs. COGS calculated automatically!"},{title:"7. Track Analytics",desc:"Monitor sales, profit, expenses in real-time",image:"ðŸ“Š",details:"View daily/weekly sales, gross profit, net profit, COGS breakdown. Admin sees full analytics, cashiers see limited data."},{title:"8. Manage Expenses",desc:"Track manual expenses and automatic ingredient costs",image:"ðŸ’¸",details:"Add manual expenses (rent, utilities, salaries). System auto-creates expenses when expense-only items are used in recipes."}],t=[{icon:sa,title:"Smart Inventory",desc:"Track raw materials & composite products with automatic stock deduction"},{icon:us,title:"Recipe Builder",desc:"Create bundled products with BOM and auto-calculate COGS"},{icon:Ge,title:"Real-time Analytics",desc:"Monitor sales, profit margins, and expenses in real-time"},{icon:Je,title:"User Management",desc:"Add cashiers with custom permissions and role-based access"},{icon:ga,title:"Secure & Reliable",desc:"JWT authentication with role-based security"},{icon:Ra,title:"Advanced Reports",desc:"Daily, weekly summaries with profit/loss tracking"}],n=[{name:"Basic",price:900,icon:ds,popular:!1,features:["Cashier Dashboard","Basic Inventory","Sales Tracking","Daily/Weekly Reports","Single User","Email Support"]},{name:"Ultra",price:1600,icon:ps,popular:!0,features:["Admin + Cashier Dashboard","Full Inventory Management","Recipe/BOM Builder","Auto Stock Deduction","COGS Calculation","User Management","Permission Controls","Expense Tracking","Unlimited Users","Priority Support"]}];return e.jsxDEV("div",{className:"min-h-screen bg-white",children:[e.jsxDEV("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600",children:[e.jsxDEV("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:109,columnNumber:9},this),e.jsxDEV("nav",{className:"relative z-10 px-6 py-4",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-white rounded-xl flex items-center justify-center",children:e.jsxDEV("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"P"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:116,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:115,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:"POSify"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:114,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("button",{onClick:()=>a("/auth/login"),className:"text-white hover:text-blue-100 font-medium",children:"Login"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:121,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>a("/plans"),className:"bg-white text-blue-600 px-6 py-2 rounded-lg font-semibold hover:shadow-lg transition-all",children:"Get Started"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:124,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:113,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:112,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 max-w-7xl mx-auto px-6 py-20 text-center",children:[e.jsxDEV("div",{className:"inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-medium mb-6",children:[e.jsxDEV(Ws,{className:"w-4 h-4 fill-yellow-300 text-yellow-300"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:134,columnNumber:13},this),"Trusted by 500+ businesses"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:133,columnNumber:11},this),e.jsxDEV("h1",{className:"text-5xl md:text-7xl font-bold text-white mb-6 leading-tight",children:["Modern POS System",e.jsxDEV("br",{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:139,columnNumber:30},this),e.jsxDEV("span",{className:"text-blue-200",children:"Built for Growth"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:140,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:138,columnNumber:11},this),e.jsxDEV("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Complete inventory management with recipe builder, automatic stock deduction, and real-time analytics. Everything you need to run your business efficiently."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:143,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center justify-center gap-4",children:[e.jsxDEV("button",{onClick:()=>a("/plans"),className:"bg-white text-blue-600 px-8 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all flex items-center gap-2",children:["Start Free Trial",e.jsxDEV(ua,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:153,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:148,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>h(!0),className:"border-2 border-white text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-white/10 transition-all flex items-center gap-2",children:[e.jsxDEV(cs,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:159,columnNumber:15},this),"Watch Demo"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:155,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:147,columnNumber:11},this),e.jsxDEV("p",{className:"text-blue-200 text-sm mt-4",children:"No credit card required â€¢ 30-day free trial"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:164,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:132,columnNumber:9},this),e.jsxDEV("div",{className:"relative z-10 max-w-6xl mx-auto px-6 pb-20",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl p-2 transform hover:scale-105 transition-all duration-500",children:e.jsxDEV("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-8 aspect-video flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV(Ra,{className:"w-24 h-24 text-blue-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:172,columnNumber:17},this),e.jsxDEV("p",{className:"text-gray-600 font-medium",children:"Dashboard Preview"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:173,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:171,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:170,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:169,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:168,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:108,columnNumber:7},this),e.jsxDEV("div",{className:"py-20 px-6 bg-gray-50",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-4xl md:text-5xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Everything You Need"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:184,columnNumber:13},this),e.jsxDEV("p",{className:"text-xl text-gray-600",children:"Powerful features to streamline your business operations"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:187,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:183,columnNumber:11},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:t.map((p,o)=>{const x=p.icon;return e.jsxDEV("div",{className:"bg-white rounded-2xl p-8 shadow-sm hover:shadow-xl transition-all transform hover:-translate-y-2",children:[e.jsxDEV("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-600 to-purple-600 rounded-xl flex items-center justify-center mb-4",children:e.jsxDEV(x,{className:"w-7 h-7 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:196,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:195,columnNumber:19},this),e.jsxDEV("h3",{className:"text-xl font-bold mb-2",children:p.title},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:198,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-600",children:p.desc},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:199,columnNumber:19},this)]},o,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:194,columnNumber:17},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:190,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:182,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:181,columnNumber:7},this),e.jsxDEV("div",{className:"py-20 px-6",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[e.jsxDEV("div",{className:"text-center mb-16",children:[e.jsxDEV("h2",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Simple, Transparent Pricing"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:211,columnNumber:13},this),e.jsxDEV("p",{className:"text-xl text-gray-600",children:"Choose the plan that fits your business"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:212,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:210,columnNumber:11},this),e.jsxDEV("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:n.map((p,o)=>{const x=p.icon;return e.jsxDEV("div",{className:`relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all transform hover:scale-105 ${p.popular?"ring-4 ring-blue-600":""}`,children:[p.popular&&e.jsxDEV("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-bold shadow-lg",children:"Most Popular"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:227,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:226,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-3 mb-6",children:[e.jsxDEV("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${p.popular?"bg-gradient-to-br from-blue-600 to-purple-600":"bg-gradient-to-br from-green-600 to-teal-600"}`,children:e.jsxDEV(x,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:237,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:234,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-2xl font-bold",children:p.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:240,columnNumber:23},this),e.jsxDEV("p",{className:"text-gray-600 text-sm",children:"Package"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:241,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:239,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:233,columnNumber:19},this),e.jsxDEV("div",{className:"mb-6",children:[e.jsxDEV("span",{className:"text-5xl font-bold",children:["KSH ",p.price]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:246,columnNumber:21},this),e.jsxDEV("span",{className:"text-gray-600",children:"/month"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:247,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:245,columnNumber:19},this),e.jsxDEV("ul",{className:"space-y-3 mb-8",children:p.features.map((v,s)=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV(ja,{className:"w-5 h-5 text-green-600 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:253,columnNumber:25},this),e.jsxDEV("span",{className:"text-gray-700",children:v},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:254,columnNumber:25},this)]},s,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:252,columnNumber:23},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:250,columnNumber:19},this),e.jsxDEV("button",{onClick:()=>a("/plans"),className:`w-full py-4 rounded-xl font-bold text-lg transition-all ${p.popular?"bg-gradient-to-r from-blue-600 to-purple-600 text-white hover:shadow-xl transform hover:scale-105":"bg-gray-100 text-gray-900 hover:bg-gray-200"}`,children:"Get Started"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:259,columnNumber:19},this)]},o,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:219,columnNumber:17},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:215,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:209,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:208,columnNumber:7},this),e.jsxDEV("div",{className:"py-20 px-6 bg-gradient-to-br from-blue-600 to-purple-600",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto",children:e.jsxDEV("div",{className:"grid md:grid-cols-4 gap-8 text-center text-white",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-5xl font-bold mb-2",children:"500+"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:281,columnNumber:15},this),e.jsxDEV("div",{className:"text-blue-200",children:"Active Businesses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:282,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:280,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-5xl font-bold mb-2",children:"50K+"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:285,columnNumber:15},this),e.jsxDEV("div",{className:"text-blue-200",children:"Transactions/Day"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:286,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:284,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-5xl font-bold mb-2",children:"99.9%"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:289,columnNumber:15},this),e.jsxDEV("div",{className:"text-blue-200",children:"Uptime"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:290,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:288,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-5xl font-bold mb-2",children:"24/7"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:293,columnNumber:15},this),e.jsxDEV("div",{className:"text-blue-200",children:"Support"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:294,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:292,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:279,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:278,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:277,columnNumber:7},this),e.jsxDEV("div",{className:"py-20 px-6",children:e.jsxDEV("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxDEV("h2",{className:"text-4xl md:text-5xl font-bold mb-6",children:"Ready to Transform Your Business?"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:303,columnNumber:11},this),e.jsxDEV("p",{className:"text-xl text-gray-600 mb-8",children:"Join hundreds of businesses already using POSify to streamline their operations"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:306,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>a("/plans"),className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-12 py-4 rounded-xl font-bold text-lg hover:shadow-2xl transform hover:scale-105 transition-all inline-flex items-center gap-2",children:["Start Your Free Trial",e.jsxDEV(ua,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:314,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:309,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-500 text-sm mt-4",children:"No credit card required â€¢ Cancel anytime"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:316,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:302,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:301,columnNumber:7},this),e.jsxDEV("footer",{className:"bg-gray-900 text-gray-400 py-12 px-6",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto text-center",children:[e.jsxDEV("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-600 to-purple-600 rounded-lg flex items-center justify-center",children:e.jsxDEV("span",{className:"text-sm font-bold text-white",children:"P"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:325,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:324,columnNumber:13},this),e.jsxDEV("span",{className:"text-xl font-bold text-white",children:"POSify"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:327,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:323,columnNumber:11},this),e.jsxDEV("p",{className:"mb-4",children:"Modern POS System for Modern Businesses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:329,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm",children:"Â© 2024 POSify. All rights reserved."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:330,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:322,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:321,columnNumber:7},this),m&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[e.jsxDEV("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"How POSify Works"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:339,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{h(!1),u(0)},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsxDEV(ra,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:341,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:340,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:338,columnNumber:13},this),e.jsxDEV("div",{className:"p-6",children:[e.jsxDEV("div",{className:"mb-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV("span",{className:"text-sm font-medium text-gray-600",children:["Step ",b+1," of ",l.length]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:349,columnNumber:19},this),e.jsxDEV("span",{className:"text-sm font-medium text-blue-600",children:[Math.round((b+1)/l.length*100),"%"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:350,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:348,columnNumber:17},this),e.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${(b+1)/l.length*100}%`}},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:353,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:352,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:347,columnNumber:15},this),e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"text-6xl mb-4",children:l[b].image},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:362,columnNumber:17},this),e.jsxDEV("h3",{className:"text-3xl font-bold mb-3",children:l[b].title},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:363,columnNumber:17},this),e.jsxDEV("p",{className:"text-xl text-gray-600 mb-4",children:l[b].desc},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:364,columnNumber:17},this),e.jsxDEV("div",{className:"bg-blue-50 rounded-xl p-6 text-left",children:e.jsxDEV("p",{className:"text-gray-700",children:l[b].details},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:366,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:365,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:361,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center justify-between gap-4",children:[e.jsxDEV("button",{onClick:()=>u(Math.max(0,b-1)),disabled:b===0,className:"btn-secondary disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:372,columnNumber:17},this),b<l.length-1?e.jsxDEV("button",{onClick:()=>u(b+1),className:"btn-primary flex items-center gap-2",children:["Next Step",e.jsxDEV(ua,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:386,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:381,columnNumber:19},this):e.jsxDEV("button",{onClick:()=>{h(!1),u(0),a("/plans")},className:"btn-primary bg-gradient-to-r from-blue-600 to-purple-600 flex items-center gap-2",children:["Get Started Now",e.jsxDEV(ua,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:394,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:389,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:371,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center justify-center gap-2 mt-8",children:l.map((p,o)=>e.jsxDEV("button",{onClick:()=>u(o),className:`w-2 h-2 rounded-full transition-all ${o===b?"w-8 bg-blue-600":"bg-gray-300 hover:bg-gray-400"}`},o,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:402,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:400,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:345,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:337,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:336,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Landing.jsx",lineNumber:106,columnNumber:5},this)}function ss(){const a=rs(),[m,h]=i.useState(a.pathname==="/auth/login"),[b,u]=i.useState("password"),[l,t]=i.useState({email:"",password:"",pin:"",name:"",newPassword:"",confirmPassword:""}),[n,p]=i.useState(""),[o,x]=i.useState(!1),[v,s]=i.useState(!1),w=ia(),{login:f}=Fe(),j=()=>{try{return JSON.parse(localStorage.getItem("selectedPlan")||"null")}catch(g){return console.warn("Invalid selectedPlan in localStorage:",g),null}},C=async g=>{g.preventDefault(),p(""),x(!0);const P=performance.now();try{if(v){if(l.newPassword!==l.confirmPassword){p("Passwords do not match"),x(!1);return}if(l.newPassword.length<6){p("Password must be at least 6 characters"),x(!1);return}const $=await We.login({email:l.email,newPassword:l.newPassword});$.token&&$.user&&(await f($),w("/dashboard"));return}if(m){if(b==="pin"){if(!l.pin||l.pin.length!==4){p("Please enter a valid 4-digit PIN"),x(!1);return}}else if(!l.password){p("Please enter your password"),x(!1);return}}let k;if(m)if(b==="pin")try{k=await We.pinLogin({email:l.email,pin:l.pin})}catch($){if($.message.includes("PIN not set"))p("PIN not set for this user. Please use password login.");else if($.message.includes("Invalid PIN"))p("Invalid PIN. Please try again.");else throw $;x(!1);return}else k=await We.login({email:l.email,password:l.password});else{const $=j();k=await We.signup({...l,plan:$?.id||"basic"})}if(k.needsPasswordSetup){s(!0),t({...l,email:k.email}),p(""),x(!1);return}if(!k||!k.user||!k.token)throw new Error("Authentication failed. Please try again.");if(k.user?.locked){p("Your account has been locked by the administrator."),x(!1);return}await f(k);const M={id:Date.now(),type:m?"login":"signup",user:{id:k.user.id,name:k.user.name,email:k.user.email,role:k.user.role,plan:k.user.plan},timestamp:new Date().toISOString()};Promise.resolve().then(()=>{const $=JSON.parse(localStorage.getItem("authActivities")||"[]");$.unshift(M),$.splice(50),localStorage.setItem("authActivities",JSON.stringify($))});const D=m?"logged in":"signed up";console.log(`âœ… User ${k.user.name} ${D} successfully`);const F=performance.now()-P;console.log(`âš¡ Auth completed in ${F.toFixed(0)}ms`),k.user.role==="admin"?w("/admin"):(k.user.role==="cashier"||console.log("No role detected, defaulting to cashier"),w("/dashboard/cashier"))}catch(k){console.error("Authentication error:",k);let M=k.message||"Authentication failed. Please try again.";k.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),M="Invalid credentials. Please try again."),p(M)}finally{x(!1)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 flex items-center justify-center p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[e.jsxDEV("div",{className:"text-center mb-8",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:"POS"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:185,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:184,columnNumber:11},this),e.jsxDEV("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:m?"Welcome Back":"Get Started"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:187,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600",children:m?"Login to your account":"Create your account"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:190,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:183,columnNumber:9},this),e.jsxDEV("form",{onSubmit:C,className:"space-y-6",children:[v?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("p",{className:"text-sm text-gray-600 text-center mb-4",children:"Please set your password to continue."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:198,columnNumber:17},this),e.jsxDEV("input",{type:"password",placeholder:"New Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.newPassword,onChange:g=>t({...l,newPassword:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:199,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:197,columnNumber:15},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:209,columnNumber:17},this),e.jsxDEV("input",{type:"password",placeholder:"Confirm Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.confirmPassword,onChange:g=>t({...l,confirmPassword:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:210,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:208,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:195,columnNumber:13},this):e.jsxDEV(e.Fragment,{children:[!m&&e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ta,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:224,columnNumber:19},this),e.jsxDEV("input",{type:"text",placeholder:"Full Name",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.name,onChange:g=>t({...l,name:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:223,columnNumber:17},this),e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(xa,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:237,columnNumber:17},this),e.jsxDEV("input",{type:"email",placeholder:"Email",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.email,onChange:g=>t({...l,email:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:238,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:236,columnNumber:15},this),m&&e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("label",{className:"text-sm font-medium text-gray-700",children:"Login Method"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:250,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"button",onClick:()=>u("password"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${b==="password"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Password"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:252,columnNumber:21},this),e.jsxDEV("button",{type:"button",onClick:()=>u("pin"),className:`flex-1 py-2 px-3 rounded-lg text-sm font-medium transition-all ${b==="pin"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"pin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:263,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:251,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:249,columnNumber:17},this),m&&b==="password"&&e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:280,columnNumber:19},this),e.jsxDEV("input",{type:"password",placeholder:"Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.password,onChange:g=>t({...l,password:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:281,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:279,columnNumber:17},this),m&&b==="pin"&&e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:294,columnNumber:19},this),e.jsxDEV("input",{type:"text",placeholder:"4-digit PIN",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.pin,onChange:g=>t({...l,pin:g.target.value.replace(/\D/g,"").slice(0,4)}),maxLength:4,required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:295,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:293,columnNumber:17},this),!m&&e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Re,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:309,columnNumber:19},this),e.jsxDEV("input",{type:"password",placeholder:"Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",value:l.password,onChange:g=>t({...l,password:g.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:310,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:221,columnNumber:13},this),n&&e.jsxDEV("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-lg",children:n},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:324,columnNumber:13},this),e.jsxDEV("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 rounded-lg font-bold hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50",children:o?"Please wait...":v?"Set Password":m?"Login":"Sign Up"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:329,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:193,columnNumber:9},this),e.jsxDEV("div",{className:"mt-6 text-center",children:e.jsxDEV("button",{onClick:()=>{h(!m),p(""),s(!1)},className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:m?"Don't have an account? Sign up":"Already have an account? Login"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:339,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:338,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:182,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Auth.jsx",lineNumber:181,columnNumber:5},this)}function Ar(){const[a,m]=i.useState("ultra"),[h,b]=i.useState(!1),[u,l]=i.useState({name:"",email:"",company:""}),t=ia(),n=[{id:"basic",name:"Professional Package",price:1500,icon:ds,color:"from-green-500 to-teal-600",features:["Admin Dashboard + Cashier POS","Basic Inventory Management","Sales Tracking","Daily/Weekly Sales Summaries","Basic Profit/Loss View","Limited Email Notifications","Record Products Sold","Up to 2 Users","Vendor Management","Basic Expense Tracking","Limited Analytics"]},{id:"ultra",name:"Ultra Package (Enterprise)",price:3e3,icon:ps,color:"from-blue-600 to-purple-600",popular:!0,features:["Admin Dashboard + Cashier POS","Full Inventory Management","Recipe/BOM Builder","Composite Products Support","Automatic Stock Deduction","COGS Calculation","User Management","Permission Controls","Expense Tracking","Advanced Analytics","Unlimited Users","Vendor Management","Advanced Reporting","Priority Support"]}],p=async o=>{o.preventDefault();try{await fetch(`${Ee}/demo-requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}),alert("Demo request submitted! Admin will review and contact you."),b(!1),l({name:"",email:"",company:""})}catch(x){console.error("Demo request failed:",x),alert("Failed to submit demo request. Please try again.")}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 py-6 md:py-12 px-4 md:px-6",children:e.jsxDEV("div",{className:"max-w-6xl mx-auto",children:[e.jsxDEV("div",{className:"flex items-center gap-4 mb-8",children:e.jsxDEV("button",{onClick:()=>t("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[e.jsxDEV(Gs,{size:20},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:100,columnNumber:13},this),"Back to Home"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:96,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:95,columnNumber:9},this),e.jsxDEV("div",{className:"text-center mb-8 md:mb-12 animate-fade-in",children:[e.jsxDEV("h1",{className:"text-3xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Choose Your Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:105,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-600 text-base md:text-lg",children:"Select the perfect plan for your business needs"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:108,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:104,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8 mb-6 md:mb-8",children:n.map(o=>{const x=o.icon;return e.jsxDEV("div",{onClick:()=>m(o.id),className:`card cursor-pointer transition-all transform hover:scale-105 relative ${a===o.id?"ring-4 ring-blue-600 shadow-2xl bg-gradient-to-br from-blue-50 to-purple-50":"hover:shadow-xl"}`,children:[o.popular&&e.jsxDEV("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsxDEV("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-semibold shadow-lg",children:"Most Popular"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:126,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:125,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-3 mb-3 md:mb-4",children:[e.jsxDEV("div",{className:`w-10 h-10 md:w-12 md:h-12 rounded-xl bg-gradient-to-br ${o.color} flex items-center justify-center`,children:e.jsxDEV(x,{className:"w-5 h-5 md:w-6 md:h-6 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:134,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:133,columnNumber:19},this),e.jsxDEV("h3",{className:"text-xl md:text-2xl font-bold",children:o.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:136,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:132,columnNumber:17},this),e.jsxDEV("div",{className:"mb-4 md:mb-6",children:[e.jsxDEV("span",{className:"text-3xl md:text-4xl font-bold",children:["KSH ",o.price]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:140,columnNumber:19},this),e.jsxDEV("span",{className:"text-gray-600 text-sm md:text-base",children:"/month"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:141,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:139,columnNumber:17},this),e.jsxDEV("ul",{className:"space-y-2 md:space-y-3",children:o.features.map((v,s)=>e.jsxDEV("li",{className:"flex items-start gap-2",children:[e.jsxDEV(ja,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:147,columnNumber:23},this),e.jsxDEV("span",{className:"text-xs md:text-sm",children:v},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:148,columnNumber:23},this)]},s,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:146,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:144,columnNumber:17},this)]},o.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:115,columnNumber:15},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:111,columnNumber:9},this),e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-center animate-fade-in",children:[e.jsxDEV("button",{onClick:()=>{console.log("Get Started clicked with plan:",a);const o=n.find(x=>x.id===a);console.log("Selected plan:",o),localStorage.setItem("selectedPlan",JSON.stringify(o)),t("/auth/signup")},className:"btn-primary px-8 md:px-12 py-3 md:py-4 text-base md:text-lg bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all",children:"Get Started"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:158,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>b(!0),className:"btn-secondary px-8 md:px-12 py-3 md:py-4 text-base md:text-lg border-2 border-gray-300 hover:border-gray-400 transition-all",children:"Request Free Demo"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:170,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:157,columnNumber:9},this),e.jsxDEV("p",{className:"text-xs md:text-sm text-gray-500 mt-3 md:mt-4 text-center",children:"Secure payment â€¢ Cancel anytime"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:177,columnNumber:9},this),h&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 text-white rounded-t-2xl",children:[e.jsxDEV("h2",{className:"text-2xl font-bold",children:"Request Free Demo"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:184,columnNumber:17},this),e.jsxDEV("p",{className:"text-green-100 text-sm mt-1",children:"We'll contact you to schedule a demo"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:185,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:183,columnNumber:15},this),e.jsxDEV("form",{onSubmit:p,className:"p-6 space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Full Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:189,columnNumber:19},this),e.jsxDEV("input",{type:"text",value:u.name,onChange:o=>l({...u,name:o.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:190,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:188,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Email Address"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:199,columnNumber:19},this),e.jsxDEV("input",{type:"email",value:u.email,onChange:o=>l({...u,email:o.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:200,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:198,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium mb-2",children:"Company Name"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:209,columnNumber:19},this),e.jsxDEV("input",{type:"text",value:u.company,onChange:o=>l({...u,company:o.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",placeholder:"Optional"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:210,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:208,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition",children:"Submit Request"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:219,columnNumber:19},this),e.jsxDEV("button",{type:"button",onClick:()=>b(!1),className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:218,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:187,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:182,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:181,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:94,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/Subscription.jsx",lineNumber:93,columnNumber:5},this)}function Mr(){const{user:a,logout:m}=Fe(),[h,b]=i.useState([]),[u,l]=i.useState([]),[t,n]=i.useState([]),[p,o]=i.useState("cash"),[x,v]=i.useState("pos"),[s,w]=i.useState({sales:[],expenses:[],stats:{}}),[f,j]=i.useState(""),[C,g]=i.useState(!1),[P,k]=i.useState(!1),[M,D]=i.useState(null),[F,$]=i.useState({name:"",price:"",cost:"",category:"finished",image:""}),[A,y]=i.useState({quantity:"",expiryDate:"",batchNumber:"",cost:""}),[S,I]=i.useState(!1),[X,B]=i.useState({description:"",amount:"",category:""}),[pe,Z]=i.useState(""),[je,he]=i.useState([]),[G,H]=i.useState(null),[oe,E]=i.useState("exclusive"),[W,K]=i.useState(!1),[fe,we]=i.useState(null),[re,Se]=i.useState(null),[N,U]=i.useState(!1);i.useEffect(()=>{ae();const c=localStorage.getItem(`cart_${a?.id}`),R=localStorage.getItem(`paymentMethod_${a?.id}`),q=localStorage.getItem(`selectedDiscount_${a?.id}`),z=localStorage.getItem(`taxType_${a?.id}`),de=localStorage.getItem(`clockStatus_${a?.id}`),ee=localStorage.getItem(`clockInTime_${a?.id}`);if(c)try{n(JSON.parse(c))}catch(ye){console.warn("Failed to restore cart:",ye)}if(R&&o(R),z&&E(z),q)try{H(JSON.parse(q))}catch{}de==="clocked_in"&&(K(!0),ee&&Se(new Date(ee))),ue()},[a?.id]),i.useEffect(()=>{const c=localStorage.getItem("token");c&&Va.connect(c,me=>{if(me&&me.allProducts){const Ve=me.allProducts.filter(Ae=>Ae.visibleToCashier!==!1&&!Ae.expenseOnly);b(Ve)}me&&me.discounts&&he(me.discounts),me&&me.sale&&ae()}).catch(me=>{console.warn("WebSocket connection failed:",me)});const R=tr(me=>{try{if(!me)return;(me.type==="initial"||me.type==="products_snapshot"||me.type==="product_created"||me.type==="product_updated"||me.type==="product_deleted")&&Oe.getAll().then(Ve=>b(Ve.filter(Ae=>Ae.visibleToCashier!==!1&&!Ae.expenseOnly))).catch(()=>{})}catch(Ve){console.error("Product subscription handler error",Ve)}}),q=()=>{console.log("ðŸŽ‰ Product created event detected - refreshing product list"),Oe.getAll().then(me=>b(me.filter(Ve=>Ve.visibleToCashier!==!1&&!Ve.expenseOnly))).catch(()=>{})},z=()=>{console.log("ðŸ“ Product updated event detected - refreshing product list"),Oe.getAll().then(me=>b(me.filter(Ve=>Ve.visibleToCashier!==!1&&!Ve.expenseOnly))).catch(()=>{})},de=me=>{const Ve=me.detail?.userId,Ae=a?.id;Ve===Ae&&(console.log("ðŸ”’ Screen locked by admin"),U(!0))},ee=me=>{const Ve=me.detail?.userId,Ae=a?.id;Ve===Ae&&(console.log("ðŸ”“ Screen unlocked"),U(!1))},ye=me=>{console.log("ðŸ’° Sale created - refreshing inventory"),Oe.getAll().then(Ve=>b(Ve.filter(Ae=>Ae.visibleToCashier!==!1&&!Ae.expenseOnly))).catch(()=>{}),ae()};return window.addEventListener("productCreated",q),window.addEventListener("productUpdated",z),window.addEventListener("screenLocked",de),window.addEventListener("screenUnlocked",ee),window.addEventListener("saleCreated",ye),()=>{try{R()}catch{}window.removeEventListener("productCreated",q),window.removeEventListener("productUpdated",z),window.removeEventListener("screenLocked",de),window.removeEventListener("screenUnlocked",ee),window.removeEventListener("saleCreated",ye),Va.disconnect()}},[]),i.useEffect(()=>{(t.length>0||p||oe)&&J()},[t,p,oe,G,a?.id]);const J=()=>{localStorage.setItem(`cart_${a?.id}`,JSON.stringify(t)),localStorage.setItem(`paymentMethod_${a?.id}`,p),localStorage.setItem(`taxType_${a?.id}`,oe),G&&localStorage.setItem(`selectedDiscount_${a?.id}`,JSON.stringify(G))},ie=async()=>{try{const c=await fetch(`${Ee}/clock-in`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({})});if(c.ok){const R=await c.json();we(R),K(!0);const q=new Date;Se(q),localStorage.setItem(`clockStatus_${a?.id}`,"clocked_in"),localStorage.setItem(`clockInTime_${a?.id}`,q.toISOString()),alert("â° Clocked in successfully! Your shift has started.")}else{const R=await c.json();alert(`âŒ Clock-in failed: ${R.error}`)}}catch(c){console.error("Clock in failed:",c),alert("Failed to clock in. Please check your connection.")}},Ne=async()=>{try{const c=await fetch(`${Ee}/clock-out`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({})});if(c.ok){const R=await c.json();we(R),K(!1),Se(null),localStorage.removeItem(`clockStatus_${a?.id}`),localStorage.removeItem(`clockInTime_${a?.id}`);const q=Math.floor(R.duration/60),z=R.duration%60;alert(`â° Clocked out successfully! Total time: ${q}h ${z}m`)}else{const R=await c.json();alert(`âŒ Clock-out failed: ${R.error}`)}}catch(c){console.error("Clock out failed:",c),alert("Failed to clock out. Please check your connection.")}},ue=async()=>{try{const c=await fetch(`${Ee}/time-entries/today`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(c.ok){const q=(await c.json()).find(z=>z.cashierId===a?.id&&z.status==="clocked_in");q&&(we(q),K(!0),Se(new Date(q.clockInTime)))}}catch(c){console.warn("Failed to check clock status:",c)}},ae=async()=>{try{const[c,R,q,z,de]=await Promise.all([Oe.getAll(),oa.getAll(),Da.getAll(),Ns.get(),Ea.getAll()]);b(c.filter(ee=>ee.visibleToCashier!==!1&&!ee.expenseOnly)),w({sales:R,expenses:q,stats:z}),l(de);try{const ee=await fetch(`${Ee}/discounts`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}).then(ye=>ye.json());he(ee||[])}catch(ee){console.warn("Failed to load discounts:",ee)}}catch(c){console.error("Failed to load data:",c)}},ve=(c,R=!0)=>{const q=c.target.files[0];if(q){const z=new FileReader;z.onload=de=>{const ee=de.target.result;Z(ee),R&&$({...F,image:ee})},z.readAsDataURL(q)}},ge=c=>u.filter(q=>q.productId===c&&q.quantity>0).reduce((q,z)=>q+z.quantity,0),d=(c,R)=>!R||!c?c:["kg","g","gram","grams","kilogram","kilograms"].includes(R.toLowerCase())?c>=1?`${c.toFixed(2)}`:`${c.toFixed(3)}`.replace(/\.?0+$/,""):Math.round(c).toString(),O=c=>c.unit&&["kg","g","gram","grams","kilogram","kilograms"].includes(c.unit.toLowerCase()),T=c=>{const R=ge(c.id);if(R<=0){alert("Product is out of stock!");return}const q=t.find(de=>de.id===c.id),z=q?q.quantity:0;if(O(c)){const de=prompt(`Enter quantity to add (${c.unit}):

Available: ${d(R,c.unit)} ${c.unit}
Current in cart: ${d(z,c.unit)} ${c.unit}`,"0.1");if(de===null)return;const ee=parseFloat(de);if(isNaN(ee)||ee<=0){alert("Please enter a valid quantity");return}if(z+ee>R){alert(`Only ${d(R-z,c.unit)} ${c.unit} more available!`);return}n(q?t.map(ye=>ye.id===c.id?{...ye,quantity:ye.quantity+ee}:ye):[...t,{...c,quantity:ee}])}else{if(z>=R){alert(`Only ${R} units available in stock!`);return}n(q?t.map(de=>de.id===c.id?{...de,quantity:de.quantity+1}:de):[...t,{...c,quantity:1}])}},te=(c,R)=>{const q=h.find(ee=>ee.id===c),z=ge(c),de=t.find(ee=>ee.id===c);if(O(q)){const ee=prompt(`Update quantity (${q.unit}):

Available: ${d(z,q.unit)} ${q.unit}`,d(de?.quantity||0,q.unit));if(ee===null)return;const ye=parseFloat(ee);if(isNaN(ye)||ye<=0){alert("Please enter a valid quantity");return}if(ye>z){alert(`Only ${d(z,q.unit)} ${q.unit} available!`);return}n(t.map(me=>me.id===c?{...me,quantity:ye}:me).filter(me=>me.quantity>0))}else n(t.map(ee=>{if(ee.id===c){const ye=ee.quantity+R;return ye>z?(alert(`Only ${z} units available!`),ee):{...ee,quantity:Math.max(1,ye)}}return ee}).filter(ee=>ee.quantity>0))},ne=c=>{n(t.filter(R=>R.id!==c))},Q=t.reduce((c,R)=>c+R.price*R.quantity,0),Te=async()=>{if(t.length!==0)try{const c=G?G.type==="percentage"?Q*G.value/100:G.value:0,R=Q*.16,q=oe==="inclusive"?Q-c:Q-c+R;await oa.create({items:t.map(z=>({productId:z.id,quantity:z.quantity,price:z.price})),total:q,discount:c,tax:R,taxType:oe,paymentMethod:p}),n([]),H(null),E("exclusive"),await ae(),alert("Sale completed successfully!")}catch(c){console.error("Checkout failed:",c),alert("Sale failed. Please try again.")}},Ie=async c=>{c.preventDefault();try{await Oe.create({...F,price:parseFloat(F.price),cost:parseFloat(F.cost||0),quantity:0}),$({name:"",price:"",cost:"",category:"finished",image:""}),Z(""),g(!1),await ae(),alert("Product added successfully!")}catch(R){console.error("Failed to add product:",R),alert("Failed to add product")}},ze=async c=>{c.preventDefault();try{const R=Array.isArray(u)?u:[],z={id:R.length>0?Math.max(...R.map(de=>de.id||0))+1:1,productId:M.id,quantity:parseInt(A.quantity),expiryDate:A.expiryDate,batchNumber:A.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(A.cost||M.cost||0)};l(de=>[...de,z]),await Ea.create({productId:M.id,quantity:parseInt(A.quantity),expiryDate:A.expiryDate,batchNumber:A.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(A.cost||M.cost||0)}),y({quantity:"",expiryDate:"",batchNumber:"",cost:""}),k(!1),D(null),await ae(),alert("Stock added successfully!")}catch(R){console.error("Failed to add stock:",R),alert("Failed to add stock")}},Ze=async c=>{c.preventDefault();try{await Da.create({...X,amount:parseFloat(X.amount)}),B({description:"",amount:"",category:""}),I(!1),await ae()}catch(R){console.error("Failed to add expense:",R),alert("Failed to add expense")}},_e=async()=>{if(window.confirm("Are you sure you want to clear all sales and data? This action cannot be undone."))try{const c=localStorage.getItem("token");if(!c){alert("âŒ Not authenticated. Please login again.");return}const q=await fetch(`${Ee}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"},body:JSON.stringify({type:"all"})});if(!q.ok){const z=await q.json();throw new Error(z.message||"Failed to clear data")}localStorage.removeItem("sales"),localStorage.removeItem("expenses"),localStorage.removeItem("products"),localStorage.removeItem("cart"),w({sales:[],expenses:[],stats:{totalSales:0,totalExpenses:0,profit:0},products:[]}),n([]),setActiveTab("dashboard"),window.dispatchEvent(new Event("dataCleared")),window.dispatchEvent(new Event("storage")),alert("âœ… Data cleared successfully! Refreshing..."),setTimeout(()=>{window.location.href="/dashboard/cashier"},500)}catch(c){console.error("Failed to clear data:",c),alert("âŒ Failed to clear data: "+c.message)}};return e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col",children:[N&&e.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-95 flex items-center justify-center z-50 backdrop-blur-sm",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"w-20 h-20 bg-red-600 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsxDEV("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm6-10V7a3 3 0 00-3-3m3 3V7a3 3 0 013 3m-6-3a3 3 0 013-3m0 0V7m0 0a3 3 0 00-3 3m6-3V7m0 0a3 3 0 00-3 3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:620,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:619,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:618,columnNumber:13},this),e.jsxDEV("h1",{className:"text-4xl font-bold text-white mb-4",children:"Screen Locked"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:623,columnNumber:13},this),e.jsxDEV("p",{className:"text-xl text-gray-300 mb-2",children:"Your account has been locked by the administrator"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:624,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-400 mb-8",children:"Please contact your administrator to unlock your account"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:625,columnNumber:13},this),e.jsxDEV("button",{onClick:m,className:"px-6 py-3 bg-white text-red-600 font-bold rounded-lg hover:bg-gray-100 transition",children:"Logout"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:626,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:617,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:616,columnNumber:9},this),e.jsxDEV("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4 sticky top-0 z-50 shadow-sm",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Cashier Dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:639,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-0.5",children:"Cashier Plan - KSH 900/month"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:640,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:638,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:a?.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:644,columnNumber:15},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:a?.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:645,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:643,columnNumber:13},this),W&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("p",{className:"text-xs text-green-600 font-semibold",children:"ðŸŸ¢ Clocked In"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:649,columnNumber:17},this),e.jsxDEV("button",{onClick:Ne,className:"px-4 py-2 rounded-lg font-medium transition-all bg-red-600 hover:bg-red-700 text-white flex items-center gap-2 shadow-md",children:[e.jsxDEV(Ys,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:651,columnNumber:19},this),"Clock Out"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:650,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:648,columnNumber:15},this),!W&&e.jsxDEV("button",{onClick:ie,className:"px-4 py-2 rounded-lg font-medium transition-all bg-green-600 hover:bg-green-700 text-white flex items-center gap-2 shadow-md",children:[e.jsxDEV(cs,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:658,columnNumber:17},this),"Clock In"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:657,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>{J(),m()},className:"px-4 py-2 rounded-lg font-medium transition-all bg-red-100 hover:bg-red-200 text-red-600 border border-red-300 flex items-center gap-2",children:[e.jsxDEV($a,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:663,columnNumber:15},this),"Logout"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:662,columnNumber:13},this),e.jsxDEV("button",{onClick:_e,className:"px-4 py-2 rounded-lg font-medium transition-all bg-orange-100 hover:bg-orange-200 text-orange-600 border border-orange-300 flex items-center gap-2",children:[e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:667,columnNumber:15},this),"Clear"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:666,columnNumber:13},this),W&&re&&e.jsxDEV("div",{className:"ml-auto text-right text-xs",children:e.jsxDEV("p",{className:"text-green-600 font-semibold flex items-center gap-1",children:[e.jsxDEV(na,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:673,columnNumber:19},this),"Clocked In: ",re.toLocaleTimeString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:672,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:671,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:642,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:637,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:636,columnNumber:7},this),e.jsxDEV("div",{className:"flex gap-2 px-6 py-4 bg-white border-b border-gray-200",children:[e.jsxDEV("button",{onClick:()=>v("pos"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="pos"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsxDEV(ha,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:689,columnNumber:11},this),"POS"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:683,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>v("monitor"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="monitor"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsxDEV(Ra,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:698,columnNumber:11},this),"Monitor"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:692,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>v("products"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="products"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsxDEV(sa,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:707,columnNumber:11},this),"Products"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:701,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>v("expenses"),className:`px-6 py-2 rounded-lg font-medium transition-all ${x==="expenses"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[e.jsxDEV(fa,{className:"w-4 h-4 inline mr-2"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:716,columnNumber:11},this),"Expenses"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:710,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:682,columnNumber:7},this),x==="pos"&&e.jsxDEV("div",{className:"flex-1 flex",children:[e.jsxDEV("div",{className:"flex-1 p-6 overflow-y-auto",children:[e.jsxDEV("div",{className:"mb-6",children:e.jsxDEV("div",{className:"relative max-w-md",children:[e.jsxDEV(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:726,columnNumber:17},this),e.jsxDEV("input",{type:"text",placeholder:"Search products...",className:"input pl-10",value:f,onChange:c=>j(c.target.value)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:727,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:725,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:724,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:h.filter(c=>c.name?.toLowerCase().includes(f.toLowerCase())).map(c=>{const R=ge(c.id),q=R<10,z=R<=0;return e.jsxDEV("button",{onClick:()=>T(c),disabled:z,className:`card text-left hover:shadow-xl transition-all transform hover:scale-105 relative ${z?"opacity-50 cursor-not-allowed bg-gray-100":"bg-gradient-to-br from-white to-gray-50"}`,children:[c.image&&e.jsxDEV("div",{className:"w-full h-32 mb-3 rounded-lg overflow-hidden bg-gray-100",children:e.jsxDEV("img",{src:c.image,alt:c.name,className:"w-full h-full object-cover"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:753,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:752,columnNumber:23},this),q&&!z&&e.jsxDEV("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white p-1 rounded-full",children:e.jsxDEV(Xe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:762,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:761,columnNumber:23},this),z&&e.jsxDEV("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"OUT"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:766,columnNumber:23},this),e.jsxDEV("h3",{className:"font-semibold mb-2 text-gray-900",children:c.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:770,columnNumber:21},this),e.jsxDEV("p",{className:"text-xl font-bold text-green-600",children:["KSH ",c.price?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:771,columnNumber:21},this),e.jsxDEV("div",{className:"flex justify-between items-center mt-2",children:[e.jsxDEV("p",{className:`text-xs font-medium ${z?"text-red-600":q?"text-yellow-600":"text-gray-500"}`,children:["Stock: ",R]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:773,columnNumber:23},this),q&&!z&&e.jsxDEV("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium",children:"Low Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:779,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:772,columnNumber:21},this)]},c.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:743,columnNumber:19},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:736,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:723,columnNumber:11},this),e.jsxDEV("div",{className:"w-96 bg-white border-l border-gray-200 p-6 flex flex-col shadow-xl",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-6",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-teal-600 rounded-xl flex items-center justify-center",children:e.jsxDEV(ha,{className:"w-5 h-5 text-white"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:793,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:792,columnNumber:15},this),e.jsxDEV("h2",{className:"text-xl font-semibold",children:"Cart"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:795,columnNumber:15},this),e.jsxDEV("span",{className:"ml-auto bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-semibold",children:[t.length," items"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:796,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:791,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1 overflow-y-auto mb-6",children:t.length===0?e.jsxDEV("div",{className:"text-center mt-16",children:[e.jsxDEV(ha,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:802,columnNumber:19},this),e.jsxDEV("p",{className:"text-gray-400",children:"Cart is empty"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:803,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:801,columnNumber:17},this):e.jsxDEV("div",{className:"space-y-3",children:t.map(c=>e.jsxDEV("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 shadow-sm",children:[e.jsxDEV("div",{className:"flex justify-between items-start mb-3",children:[e.jsxDEV("h4",{className:"font-semibold text-gray-900",children:c.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:810,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>ne(c.id),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:e.jsxDEV(qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:812,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:811,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:809,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>te(c.id,-1),className:"w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-100 transition-colors",children:e.jsxDEV(Xs,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:818,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:817,columnNumber:27},this),e.jsxDEV("span",{className:"w-12 text-center font-semibold text-sm",children:d(c.quantity,c.unit)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:820,columnNumber:27},this),e.jsxDEV("span",{className:"text-xs text-gray-600 w-8",children:c.unit},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:823,columnNumber:27},this),e.jsxDEV("button",{onClick:()=>te(c.id,1),className:"w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-100 transition-colors",children:e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:825,columnNumber:29},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:824,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:816,columnNumber:25},this),e.jsxDEV("span",{className:"font-bold text-green-600",children:["KSH ",(c.price*c.quantity).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:828,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:815,columnNumber:23},this)]},c.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:808,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:806,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:799,columnNumber:13},this),e.jsxDEV("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[e.jsxDEV("div",{className:"space-y-2 bg-gray-50 p-3 rounded-lg",children:[e.jsxDEV("div",{className:"flex justify-between text-sm",children:[e.jsxDEV("span",{children:"Subtotal:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:839,columnNumber:19},this),e.jsxDEV("span",{className:"text-gray-700",children:["KSH ",Q.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:840,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:838,columnNumber:17},this),G&&e.jsxDEV("div",{className:"flex justify-between text-sm text-green-600",children:[e.jsxDEV("span",{children:"Discount:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:844,columnNumber:21},this),e.jsxDEV("span",{children:["-KSH ",(G.type==="percentage"?Q*G.value/100:G.value).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:845,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:843,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between text-sm text-orange-600",children:[e.jsxDEV("span",{children:["Tax (",oe==="exclusive"?"Added":"Included","):"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:849,columnNumber:19},this),e.jsxDEV("span",{children:[oe==="exclusive"?"+":"","KSH ",((Q-(G?G.type==="percentage"?Q*G.value/100:G.value:0))*.16).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:850,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:848,columnNumber:17},this),e.jsxDEV("div",{className:"border-t pt-2 flex justify-between text-lg font-bold",children:[e.jsxDEV("span",{children:"Final Total:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:853,columnNumber:19},this),e.jsxDEV("span",{className:"text-green-600",children:["KSH ",(oe==="exclusive"?Q-(G?G.type==="percentage"?Q*G.value/100:G.value:0)+(Q-(G?G.type==="percentage"?Q*G.value/100:G.value:0))*.16:Q-(G?G.type==="percentage"?Q*G.value/100:G.value:0)).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:854,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:852,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:837,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-2",children:"Discount (Optional)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:866,columnNumber:17},this),e.jsxDEV("select",{value:G?.id||"",onChange:c=>{c.target.value?H(je.find(R=>R.id===parseInt(c.target.value))):H(null)},className:"input",children:[e.jsxDEV("option",{value:"",children:"No Discount"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:878,columnNumber:19},this),je.filter(c=>c.active).map(c=>e.jsxDEV("option",{value:c.id,children:[c.name," - ",c.type==="percentage"?`${c.value}%`:`KSH ${c.value}`]},c.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:880,columnNumber:21},this))]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:867,columnNumber:17},this),G&&e.jsxDEV("p",{className:"text-sm text-green-600 mt-1",children:["Discount: KSH ",(G.type==="percentage"?Q*G.value/100:G.value).toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:886,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:865,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-2",children:"Tax Type"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:893,columnNumber:17},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsxDEV("input",{type:"radio",value:"exclusive",checked:oe==="exclusive",onChange:c=>E(c.target.value)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:896,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm",children:"Tax Exclusive (16% added)"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:897,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:895,columnNumber:19},this),e.jsxDEV("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsxDEV("input",{type:"radio",value:"inclusive",checked:oe==="inclusive",onChange:c=>E(c.target.value)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:900,columnNumber:21},this),e.jsxDEV("span",{className:"text-sm",children:"Tax Inclusive"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:901,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:899,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:894,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:892,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-semibold mb-2",children:"Payment Method"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:907,columnNumber:17},this),e.jsxDEV("select",{value:p,onChange:c=>o(c.target.value),className:"input",children:[e.jsxDEV("option",{value:"cash",children:"Cash"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:909,columnNumber:19},this),e.jsxDEV("option",{value:"mpesa",children:"M-Pesa"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:910,columnNumber:19},this),e.jsxDEV("option",{value:"card",children:"Card"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:911,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:908,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:906,columnNumber:15},this),e.jsxDEV("button",{onClick:Te,disabled:t.length===0,className:"btn-primary w-full py-4 text-lg bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 shadow-lg",children:"Complete Sale"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:915,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:836,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:790,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:722,columnNumber:9},this),x==="monitor"&&e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto w-full",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxDEV("div",{className:"card bg-gradient-to-br from-green-500 to-emerald-600 text-white border-0 shadow-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-green-100 mb-1",children:"Total Sales"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:929,columnNumber:19},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",s.stats.totalSales?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:930,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:928,columnNumber:17},this),e.jsxDEV("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsxDEV(Ye,{className:"w-8 h-8"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:933,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:932,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:927,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:926,columnNumber:13},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-red-500 to-pink-600 text-white border-0 shadow-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-red-100 mb-1",children:"Expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:941,columnNumber:19},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",s.stats.totalExpenses?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:942,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:940,columnNumber:17},this),e.jsxDEV("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsxDEV(fa,{className:"w-8 h-8"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:945,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:944,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:939,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:938,columnNumber:13},this),e.jsxDEV("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white border-0 shadow-lg",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-blue-100 mb-1",children:"Net Profit"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:953,columnNumber:19},this),e.jsxDEV("p",{className:"text-3xl font-bold",children:["KSH ",s.stats.profit?.toLocaleString()||0]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:954,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:952,columnNumber:17},this),e.jsxDEV("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:e.jsxDEV(Ye,{className:"w-8 h-8"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:957,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:956,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:951,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:950,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:925,columnNumber:11},this),e.jsxDEV("div",{className:"card shadow-lg",children:[e.jsxDEV("h3",{className:"text-lg font-semibold mb-4",children:"Recent Sales"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:964,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:969,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:970,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:971,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:972,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:968,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:967,columnNumber:17},this),e.jsxDEV("tbody",{children:s.sales.slice(-15).reverse().map((c,R)=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(c.createdAt).toLocaleString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:978,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:[c.items?.length||0," items"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:979,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-success",children:c.paymentMethod||"cash"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:981,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:980,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",c.total?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:983,columnNumber:23},this)]},R,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:977,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:975,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:966,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:965,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:963,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:924,columnNumber:9},this),x==="products"&&e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto w-full",children:e.jsxDEV("div",{className:"card shadow-lg",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Manage Products & Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:997,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>g(!0),className:"btn-primary flex items-center gap-2 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:999,columnNumber:17},this),"Add Product"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:998,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:996,columnNumber:13},this),C&&e.jsxDEV("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-teal-50 rounded-xl border-2 border-green-200",children:[e.jsxDEV("h4",{className:"font-semibold mb-4 text-lg",children:"Add New Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1006,columnNumber:17},this),e.jsxDEV("form",{onSubmit:Ie,className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Product Name",className:"input",value:F.name,onChange:c=>$({...F,name:c.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1009,columnNumber:21},this),e.jsxDEV("select",{className:"input",value:F.category,onChange:c=>$({...F,category:c.target.value}),children:[e.jsxDEV("option",{value:"finished",children:"Finished Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1022,columnNumber:23},this),e.jsxDEV("option",{value:"raw",children:"Raw Material"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1023,columnNumber:23},this),e.jsxDEV("option",{value:"service",children:"Service"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1024,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1017,columnNumber:21},this),e.jsxDEV("input",{type:"number",placeholder:"Selling Price",className:"input",value:F.price,onChange:c=>$({...F,price:c.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1026,columnNumber:21},this),e.jsxDEV("input",{type:"number",placeholder:"Cost Price (Optional)",className:"input",value:F.cost,onChange:c=>$({...F,cost:c.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1034,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1008,columnNumber:19},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-700",children:"Product Image"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1044,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("input",{type:"file",accept:"image/*",onChange:c=>ve(c,!0),className:"input"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1046,columnNumber:23},this),e.jsxDEV(ms,{className:"w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1052,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1045,columnNumber:21},this),pe&&e.jsxDEV("div",{className:"mt-2",children:e.jsxDEV("img",{src:pe,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1056,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1055,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1043,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1062,columnNumber:21},this),e.jsxDEV("button",{type:"button",onClick:()=>{g(!1),Z(""),$({name:"",price:"",cost:"",category:"finished",image:""})},className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1063,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1061,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1007,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1005,columnNumber:15},this),P&&M&&e.jsxDEV("div",{className:"mb-6 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",children:[e.jsxDEV("h4",{className:"font-semibold mb-4 text-lg",children:["Add Stock for ",M.name]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1075,columnNumber:17},this),e.jsxDEV("form",{onSubmit:ze,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("input",{type:"number",placeholder:"Quantity",className:"input",value:A.quantity,onChange:c=>y({...A,quantity:c.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1077,columnNumber:19},this),e.jsxDEV("input",{type:"date",placeholder:"Expiry Date (Optional)",className:"input",value:A.expiryDate,onChange:c=>y({...A,expiryDate:c.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1085,columnNumber:19},this),e.jsxDEV("input",{type:"text",placeholder:"Batch Number (Optional)",className:"input",value:A.batchNumber,onChange:c=>y({...A,batchNumber:c.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1092,columnNumber:19},this),e.jsxDEV("input",{type:"number",placeholder:"Cost per Unit",className:"input",value:A.cost,onChange:c=>y({...A,cost:c.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1099,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2 md:col-span-4",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1107,columnNumber:21},this),e.jsxDEV("button",{type:"button",onClick:()=>{k(!1),D(null),y({quantity:"",expiryDate:"",batchNumber:"",cost:""})},className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1108,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1106,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1076,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1074,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Product"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1122,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1123,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1124,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Batches"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1125,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1126,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1121,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1120,columnNumber:17},this),e.jsxDEV("tbody",{children:h.map(c=>{const R=ge(c.id),q=u.filter(de=>de.productId===c.id&&de.quantity>0),z=R<10;return e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[c.image&&e.jsxDEV("img",{src:c.image,alt:c.name,className:"w-10 h-10 object-cover rounded-lg"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1140,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"text-sm font-medium",children:c.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1143,columnNumber:31},this),e.jsxDEV("div",{className:"text-xs text-gray-500",children:c.category},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1144,columnNumber:31},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1142,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1138,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1137,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",c.price?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1148,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:`font-medium ${R===0?"text-red-600":z?"text-yellow-600":"text-gray-900"}`,children:R},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1151,columnNumber:29},this),z&&R>0&&e.jsxDEV(Xe,{className:"w-4 h-4 text-yellow-500"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1157,columnNumber:31},this),R===0&&e.jsxDEV("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full font-medium",children:"Out of Stock"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1160,columnNumber:31},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1150,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1149,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"text-gray-600",children:[q.length," active"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1167,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1166,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("button",{onClick:()=>{D(c),k(!0)},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-colors",title:"Add Stock",children:e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1179,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1171,columnNumber:29},this),e.jsxDEV("button",{className:"p-2 hover:bg-green-50 rounded-lg text-green-600 transition-colors",title:"Edit Product",children:e.jsxDEV(Qe,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1182,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1181,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1170,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1169,columnNumber:25},this)]},c.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1136,columnNumber:23},this)})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1129,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1119,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1118,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:995,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:994,columnNumber:9},this),x==="expenses"&&e.jsxDEV("div",{className:"p-6 max-w-7xl mx-auto w-full",children:e.jsxDEV("div",{className:"card shadow-lg",children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[e.jsxDEV("h3",{className:"text-lg font-semibold",children:"Track Expenses"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1200,columnNumber:15},this),e.jsxDEV("button",{onClick:()=>I(!0),className:"btn-primary flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700",children:[e.jsxDEV(Le,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1202,columnNumber:17},this),"Add Expense"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1201,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1199,columnNumber:13},this),S&&e.jsxDEV("div",{className:"mb-6 p-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-xl border-2 border-red-200",children:[e.jsxDEV("h4",{className:"font-semibold mb-4 text-lg",children:"Add New Expense"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1209,columnNumber:17},this),e.jsxDEV("form",{onSubmit:Ze,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("input",{type:"text",placeholder:"Description",className:"input",value:X.description,onChange:c=>B({...X,description:c.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1211,columnNumber:19},this),e.jsxDEV("input",{type:"number",placeholder:"Amount",className:"input",value:X.amount,onChange:c=>B({...X,amount:c.target.value}),required:!0},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1219,columnNumber:19},this),e.jsxDEV("input",{type:"text",placeholder:"Category",className:"input",value:X.category,onChange:c=>B({...X,category:c.target.value})},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1227,columnNumber:19},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{type:"submit",className:"btn-primary flex-1",children:"Add"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1235,columnNumber:21},this),e.jsxDEV("button",{type:"button",onClick:()=>I(!1),className:"btn-secondary",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1236,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1234,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1210,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1208,columnNumber:15},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1246,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1247,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1248,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1249,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1245,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1244,columnNumber:17},this),e.jsxDEV("tbody",{children:s.expenses.slice().reverse().map((c,R)=>e.jsxDEV("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:new Date(c.createdAt).toLocaleDateString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1255,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:c.description},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1256,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm",children:e.jsxDEV("span",{className:"badge badge-warning",children:c.category||"General"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1258,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1257,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-sm font-semibold text-red-600",children:["KSH ",c.amount?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1260,columnNumber:23},this)]},R,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1254,columnNumber:21},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1252,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1243,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1242,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1198,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:1197,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/CashierPOS.jsx",lineNumber:613,columnNumber:5},this)}function Or(){const[a,m]=i.useState(null),[h,b]=i.useState([]),[u,l]=i.useState(!0),[t,n]=i.useState(""),[p,o]=i.useState("overview");i.useEffect(()=>{x();const v=setInterval(x,600*1e3);return()=>clearInterval(v)},[]);const x=async()=>{try{n(""),l(!0);const[v,s]=await Promise.all([as.getOverview(),as.getPlans()]);m(v),b(s)}catch(v){console.error("Failed to load subscription data:",v),n("Failed to load subscription data")}finally{l(!1)}};return u?e.jsxDEV("div",{className:"flex items-center justify-center py-12",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:43,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:42,columnNumber:7},this):e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("h2",{className:"text-2xl font-bold text-gray-900",children:"Subscription Management"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:52,columnNumber:9},this),e.jsxDEV("button",{onClick:x,className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Refresh"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:53,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:51,columnNumber:7},this),t&&e.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:t},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:62,columnNumber:9},this),a&&e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-blue-600 font-medium",children:"Total Subscribers"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:73,columnNumber:17},this),e.jsxDEV("p",{className:"text-3xl font-bold text-blue-900 mt-1",children:a.totalSubscribers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:74,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:72,columnNumber:15},this),e.jsxDEV(Je,{className:"w-12 h-12 text-blue-300"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:76,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:71,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:70,columnNumber:11},this),e.jsxDEV("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-4 border border-green-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-green-600 font-medium",children:"Active Subscriptions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:83,columnNumber:17},this),e.jsxDEV("p",{className:"text-3xl font-bold text-green-900 mt-1",children:a.totalActiveSubscriptions},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:84,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:82,columnNumber:15},this),e.jsxDEV(Be,{className:"w-12 h-12 text-green-300"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:86,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:81,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:80,columnNumber:11},this),e.jsxDEV("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-purple-600 font-medium",children:"Total Revenue"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:93,columnNumber:17},this),e.jsxDEV("p",{className:"text-3xl font-bold text-purple-900 mt-1",children:["KSH ",a.totalRevenue?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:94,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:92,columnNumber:15},this),e.jsxDEV(Ye,{className:"w-12 h-12 text-purple-300"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:96,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:91,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:90,columnNumber:11},this),e.jsxDEV("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 rounded-lg p-4 border border-orange-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-orange-600 font-medium",children:"Available Plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:103,columnNumber:17},this),e.jsxDEV("p",{className:"text-3xl font-bold text-orange-900 mt-1",children:h.length},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:104,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:102,columnNumber:15},this),e.jsxDEV(Ge,{className:"w-12 h-12 text-orange-300"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:106,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:100,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:69,columnNumber:9},this),e.jsxDEV("div",{className:"border-b border-gray-200",children:e.jsxDEV("div",{className:"flex gap-4",children:[e.jsxDEV("button",{onClick:()=>o("plans"),className:`px-4 py-2 font-medium border-b-2 transition ${p==="plans"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:115,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>o("users"),className:`px-4 py-2 font-medium border-b-2 transition ${p==="users"?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:"Active Subscriptions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:125,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:114,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:113,columnNumber:7},this),p==="plans"&&e.jsxDEV("div",{className:"space-y-4",children:a?.plans?.map(v=>e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxDEV("div",{className:"p-4 bg-gradient-to-r from-gray-50 to-gray-100 border-b border-gray-200",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h3",{className:"text-lg font-bold text-gray-900",children:v.planName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:146,columnNumber:21},this),e.jsxDEV("p",{className:"text-sm text-gray-600 mt-1",children:[v.durationDays," days â€¢ KSH ",v.price?.toLocaleString(),"/cycle"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:147,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:145,columnNumber:19},this),e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("p",{className:"text-2xl font-bold text-blue-600",children:v.activeSubscribers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:152,columnNumber:21},this),e.jsxDEV("p",{className:"text-xs text-gray-600",children:"Active"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:153,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:151,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:144,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:143,columnNumber:15},this),e.jsxDEV("div",{className:"p-4 grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxDEV("div",{className:"bg-blue-50 rounded p-3",children:[e.jsxDEV("p",{className:"text-xs text-blue-600 font-medium",children:"Active"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:160,columnNumber:19},this),e.jsxDEV("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:v.activeSubscribers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:161,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:159,columnNumber:17},this),e.jsxDEV("div",{className:"bg-red-50 rounded p-3",children:[e.jsxDEV("p",{className:"text-xs text-red-600 font-medium",children:"Expired"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:164,columnNumber:19},this),e.jsxDEV("p",{className:"text-2xl font-bold text-red-900 mt-1",children:v.expiredSubscribers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:165,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:163,columnNumber:17},this),e.jsxDEV("div",{className:"bg-green-50 rounded p-3",children:[e.jsxDEV("p",{className:"text-xs text-green-600 font-medium",children:"Revenue"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:168,columnNumber:19},this),e.jsxDEV("p",{className:"text-2xl font-bold text-green-900 mt-1",children:["KSH ",v.totalRevenue?.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:169,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:167,columnNumber:17},this),e.jsxDEV("div",{className:"bg-purple-50 rounded p-3",children:[e.jsxDEV("p",{className:"text-xs text-purple-600 font-medium",children:"Total Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:172,columnNumber:19},this),e.jsxDEV("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:v.activeSubscribers+v.expiredSubscribers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:173,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:171,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:158,columnNumber:15},this),v.features&&v.features.length>0&&e.jsxDEV("div",{className:"p-4 border-t border-gray-200",children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Features:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:180,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:v.features.map((s,w)=>e.jsxDEV("div",{className:"flex items-start gap-2 text-sm text-gray-600",children:[e.jsxDEV(Be,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:184,columnNumber:25},this),e.jsxDEV("span",{children:s},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:185,columnNumber:25},this)]},w,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:183,columnNumber:23},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:181,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:179,columnNumber:17},this)]},v.planId,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:142,columnNumber:13},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:140,columnNumber:9},this),p==="users"&&e.jsxDEV("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full text-sm",children:[e.jsxDEV("thead",{children:e.jsxDEV("tr",{className:"border-b border-gray-200 bg-gray-50",children:[e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"User"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:203,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:204,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"Days Used"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:205,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"Days Remaining"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:206,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"Status"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:207,columnNumber:19},this),e.jsxDEV("th",{className:"px-4 py-3 text-left font-medium text-gray-700",children:"End Date"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:208,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:202,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:201,columnNumber:15},this),e.jsxDEV("tbody",{children:a?.plans?.flatMap(v=>v.activeSubscriptions?.map(s=>e.jsxDEV("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-gray-900",children:s.userName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:217,columnNumber:27},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:s.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:218,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:216,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:215,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:v.planName},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:221,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(na,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:224,columnNumber:27},this),e.jsxDEV("span",{children:[s.daysUsed," days"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:225,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:223,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:222,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(la,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:230,columnNumber:27},this),e.jsxDEV("span",{className:s.daysRemaining<=1?"text-red-600 font-medium":"",children:[s.daysRemaining," days"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:231,columnNumber:27},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:229,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:228,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${s.daysRemaining<=1?"bg-red-100 text-red-700":s.daysRemaining<=7?"bg-orange-100 text-orange-700":"bg-green-100 text-green-700"}`,children:[s.daysRemaining<=1?e.jsxDEV(va,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:244,columnNumber:53},this):e.jsxDEV(Be,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:244,columnNumber:91},this),s.status]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:237,columnNumber:25},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:236,columnNumber:23},this),e.jsxDEV("td",{className:"px-4 py-3 text-gray-600",children:new Date(s.endDate).toLocaleDateString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:248,columnNumber:23},this)]},`${v.planId}-${s.userId}`,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:214,columnNumber:21},this)))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:211,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:200,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:199,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:198,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionManagement.jsx",lineNumber:49,columnNumber:5},this)}function Ir(){const[a,m]=i.useState([]),[h,b]=i.useState([]),[u,l]=i.useState("all"),[t,n]=i.useState(""),[p,o]=i.useState(!1),[x,v]=i.useState(!1),[s,w]=i.useState("users"),[f,j]=i.useState([]),[C,g]=i.useState({subject:"",message:""}),[P,k]=i.useState(!0),[M,D]=i.useState(null),[F,$]=i.useState(!0),[A,y]=i.useState(null),[S,I]=i.useState([]),X=ia(),[B,pe]=i.useState({totalUsers:0,activeUsers:0,lockedUsers:0,totalRevenue:0,pendingPayments:0,overduePayments:0,activeDays:0,downDays:0}),[Z,je]=i.useState([]);i.useEffect(()=>{const N=localStorage.getItem("mainAdminToken"),U=localStorage.getItem("mainAdminUser");if(!N||!U){X("/main-admin/login");return}he().finally(()=>k(!1));const J=JSON.parse(localStorage.getItem("authActivities")||"[]");je(J.slice(0,10));const ie=JSON.parse(localStorage.getItem("adminReminders")||"[]");I(ie.filter(ae=>ae.status==="pending"));const Ne=ae=>{const ve=ae.detail;I(ge=>[ve,...ge])};window.addEventListener("subscriptionReminderCreated",Ne);const ue=setInterval(()=>{const ae=JSON.parse(localStorage.getItem("authActivities")||"[]");je(ae.slice(0,10));const ve=JSON.parse(localStorage.getItem("adminReminders")||"[]");I(ve.filter(ge=>ge.status==="pending"))},5e3);return()=>{clearInterval(ue),window.removeEventListener("subscriptionReminderCreated",Ne)}},[X]);const he=async()=>{try{D(null);let N=[],U=[],J=!0;try{N=await ma.getUsers(),U=await ma.getPayments()}catch(ie){console.warn("MainAdmin API not available, falling back to regular users API:",ie.message);try{N=await Ke.getAll()}catch(Ne){console.warn("Users API also failed:",Ne.message),J=!1}J||(U=[],$(!1))}N.length===0&&!J&&(N=H(),U=oe(N)),m(N),b(U),$(J),E(N,U)}catch(N){console.error("Failed to load data:",N),D("Failed to load dashboard data");const U=H();m(U),b(oe(U)),$(!1),E(U,[])}},G=()=>{localStorage.removeItem("mainAdminToken"),localStorage.removeItem("mainAdminUser"),X("/main-admin/login")},H=()=>{const N=localStorage.getItem("user"),U=[];if(N){const ie=JSON.parse(N);U.push({...ie,id:ie.id||"real-user"})}return[{name:"John Doe",email:"john@example.com",plan:"ultra",price:1600,active:!0,locked:!1,role:"admin"},{name:"Jane Smith",email:"jane@example.com",plan:"basic",price:900,active:!0,locked:!1,role:"cashier"},{name:"Bob Wilson",email:"bob@example.com",plan:"ultra",price:1600,active:!1,locked:!1,role:"admin"},{name:"Alice Brown",email:"alice@example.com",plan:"basic",price:900,active:!0,locked:!0,role:"cashier"},{name:"Mike Johnson",email:"mike@example.com",plan:"ultra",price:1600,active:!0,locked:!1,role:"admin"},{name:"Sarah Davis",email:"sarah@example.com",plan:"basic",price:900,active:!1,locked:!1,role:"cashier"}].forEach((ie,Ne)=>{U.push({id:`demo-${Ne+1}`,...ie,createdAt:new Date(Date.now()-Ne*864e5).toISOString(),lastLogin:new Date(Date.now()-Math.random()*864e5).toISOString()})}),U},oe=N=>N.flatMap(U=>[{id:`payment-${U.id}-1`,userId:U.id,amount:U.plan==="ultra"?1600:900,status:Math.random()>.3?"paid":"pending",createdAt:new Date(Date.now()-30*864e5).toISOString(),dueDate:new Date(Date.now()+5*864e5).toISOString()},{id:`payment-${U.id}-2`,userId:U.id,amount:U.plan==="ultra"?1600:900,status:Math.random()>.7?"paid":Math.random()>.5?"pending":"overdue",createdAt:new Date(Date.now()-60*864e5).toISOString(),dueDate:new Date(Date.now()-5*864e5).toISOString()}]),E=(N,U)=>{const J=N.length,ie=N.filter(T=>T.active).length,Ne=N.filter(T=>T.locked).length,ue=U.filter(T=>T.status==="paid").reduce((T,te)=>T+te.amount,0),ae=U.filter(T=>T.status==="pending").length,ve=U.filter(T=>T.status==="overdue").length,ge=localStorage.getItem("appCreatedDate");let d=0,O=0;if(ge){const T=new Date(ge),ne=Math.floor((new Date-T)/(1e3*60*60*24)),Q=parseFloat(localStorage.getItem("uptimePercentage")||"99.5");d=Math.floor(ne*Q/100),O=ne-d}else localStorage.setItem("appCreatedDate",new Date().toISOString()),d=0,O=0;pe({totalUsers:J,activeUsers:ie,lockedUsers:Ne,totalRevenue:ue,pendingPayments:ae,overduePayments:ve,activeDays:d,downDays:O})},W=async(N,U)=>{try{y(N);const J=!U;try{if(await ma.lockUser(N,J),J){const ae=a.find(ve=>ve.id===N);if(localStorage.setItem(`lockNotification_${N}`,JSON.stringify({type:"account_locked",message:"Your account has been locked by the system administrator.",lockedAt:new Date().toISOString(),reason:"Admin account lock"})),ae){const ve={id:Date.now(),type:"subscription_renewal",title:"Subscription Renewal Notice",description:`Account for ${ae.name} (${ae.email}) has been locked. Plan: ${ae.plan?.toUpperCase()||"UNKNOWN"} - ${ae.price?"KSH "+ae.price:"Free"}. Please contact user to renew subscription.`,priority:"high",targetUser:ae.name,targetEmail:ae.email,dueDate:new Date(Date.now()+2592e5).toISOString(),createdAt:new Date().toISOString(),status:"pending"},ge=JSON.parse(localStorage.getItem("adminReminders")||"[]");ge.push(ve),localStorage.setItem("adminReminders",JSON.stringify(ge)),window.dispatchEvent(new CustomEvent("subscriptionReminderCreated",{detail:ve}))}window.dispatchEvent(new CustomEvent("accountLocked",{detail:{userId:N}}))}const ie=a.map(ae=>ae.id===N?{...ae,locked:J,active:!J}:ae);m(ie),E(ie,h);const Ne=a.find(ae=>ae.id===N),ue=J?"locked":"unlocked";alert(`âœ… ${Ne?.name||`User ${N}`} has been ${ue} successfully!${J?" Subscription renewal reminder created and user will be logged out immediately.":""}`)}catch(ie){console.error("API lock failed:",ie);const Ne=a.map(ve=>ve.id===N?{...ve,locked:J,active:!J}:ve);m(Ne),E(Ne,h);const ue=a.find(ve=>ve.id===N),ae=J?"locked":"unlocked";alert(`âš ï¸ Backend not available. ${ue?.name||`User ${N}`} ${ae} locally. Changes will sync when backend is available.`)}}catch(J){console.error("Failed to toggle lock:",J),alert(`âŒ Failed to update user status: ${J.message}`)}finally{y(null)}},K=async(N,U,J)=>{try{k(!0);try{await ma.sendEmail({userIds:N,subject:U,message:J}),alert("Emails sent successfully!"),o(!1),j([]),g({subject:"",message:""});return}catch(ue){console.warn("Backend email operation failed, simulating email send:",ue.message)}const ie=a.filter(ue=>N.includes(ue.id)),Ne=JSON.parse(localStorage.getItem("emailLogs")||"[]");Ne.push({timestamp:new Date().toISOString(),recipients:ie.map(ue=>({id:ue.id,name:ue.name,email:ue.email})),subject:U,message:J,status:"simulated"}),localStorage.setItem("emailLogs",JSON.stringify(Ne)),alert(`âœ… Email simulation successful!

ðŸ“§ Sent to ${ie.length} user(s):
${ie.map(ue=>`${ue.name} (${ue.email})`).join(`
`)}

${F?"":`ðŸ“Œ Backend not deployed - this was a simulation.
`}ðŸ’¡ Deploy backend to send real emails.`),o(!1),j([]),g({subject:"",message:""})}catch(ie){console.error("Failed to send email:",ie),alert("Failed to process email request.")}finally{k(!1)}},fe=async(N,U)=>{try{y(N);const J=await ma.lockUserScreen(N);(J.success||J.message)&&(alert(`âœ… Screen locked for ${U}. They will see the PIN unlock screen immediately.`),setTimeout(()=>{he()},1e3))}catch(J){console.error("Failed to lock screen:",J),alert(`âŒ Failed to lock screen: ${J.message}`)}finally{y(null)}},we=async N=>{const U=a.find(J=>J.id===N);U&&await K([N],"Payment Reminder - Subscription",`Dear ${U.name},

This is a friendly reminder about your pending subscription payment for ${U.plan?.toUpperCase()} plan (KSH ${U.price}).

Please complete your payment to continue enjoying our services.

Thank you!`)},re=a.filter(N=>{const U=N.name?.toLowerCase().includes(t.toLowerCase())||N.email?.toLowerCase().includes(t.toLowerCase());if(u==="all")return U;if(u==="active")return U&&N.active&&!N.locked;if(u==="locked")return U&&N.locked;if(u==="trial")return U&&(!N.active||!N.plan);if(u==="pending-payment"){const J=h.filter(ie=>ie.userId===N.id&&ie.status==="pending");return U&&J.length>0}if(u==="overdue"){const J=h.filter(ie=>ie.userId===N.id&&ie.status==="overdue");return U&&J.length>0}return U}),Se=N=>{const U=h.filter(ue=>ue.userId===N),J=U.filter(ue=>ue.status==="pending").length,ie=U.filter(ue=>ue.status==="overdue").length,Ne=U.filter(ue=>ue.status==="paid").length;return{pending:J,overdue:ie,paid:Ne,total:U.length}};return P&&a.length===0?e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 flex items-center justify-center",children:e.jsxDEV("div",{className:"text-center",children:[e.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-white mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:429,columnNumber:11},this),e.jsxDEV("p",{className:"text-white text-xl",children:"Loading Main Admin Dashboard..."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:430,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:428,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:427,columnNumber:7},this):e.jsxDEV("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900",children:[!F&&e.jsxDEV("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 text-center",children:e.jsxDEV("p",{className:"text-sm md:text-base font-semibold",children:["âš ï¸ Demo Mode: Backend not available. Actions are simulated locally.",e.jsxDEV("a",{href:"/BACKEND_NOT_DEPLOYED.md",className:"underline ml-2",children:"Deploy Backend â†’"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:443,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:441,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:440,columnNumber:9},this),M&&e.jsxDEV("div",{className:"bg-red-500 text-white px-6 py-3 text-center",children:e.jsxDEV("p",{className:"text-sm font-semibold",children:["âš ï¸ ",M]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:451,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:450,columnNumber:9},this),S.length>0&&e.jsxDEV("div",{className:"bg-gradient-to-r from-orange-500/20 to-red-500/20 border-l-4 border-orange-500 px-6 py-4 mx-6 rounded-lg",children:e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV(Xe,{className:"w-5 h-5 text-orange-400 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:459,columnNumber:13},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("h3",{className:"text-white font-bold mb-2",children:[S.length," Subscription Renewal Reminder",S.length!==1?"s":""]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:461,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-2",children:S.slice(0,3).map(N=>e.jsxDEV("p",{className:"text-orange-100 text-sm",children:["â€¢ ",e.jsxDEV("span",{className:"font-semibold",children:N.targetUser},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:467,columnNumber:23},this)," (",N.targetEmail,") - ",N.description.split("-")[1]?.trim()]},N.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:466,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:464,columnNumber:15},this),S.length>3&&e.jsxDEV("p",{className:"text-orange-100 text-sm mt-2",children:["... and ",S.length-3," more pending reminder",S.length-3!==1?"s":""]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:472,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:460,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:458,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:457,columnNumber:9},this),M&&e.jsxDEV("div",{className:"bg-red-500 text-white px-6 py-3 text-center",children:e.jsxDEV("p",{className:"text-sm font-semibold",children:["âš ï¸ ",M]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:484,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:483,columnNumber:9},this),e.jsxDEV("header",{className:"bg-black/30 backdrop-blur-lg border-b border-white/10 px-6 py-4",children:e.jsxDEV("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-white mb-2",children:"Main Admin Dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:492,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300",children:"Monitor all users, payments, and system activity"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:493,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:491,columnNumber:11},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("button",{onClick:()=>v(!0),className:"flex items-center gap-2 bg-green-500/20 hover:bg-green-500/30 text-green-300 px-4 py-2 rounded-lg transition-colors",children:[e.jsxDEV(ba,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:500,columnNumber:15},this),"View Analytics"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:496,columnNumber:13},this),e.jsxDEV("button",{onClick:G,className:"flex items-center gap-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition-colors",children:[e.jsxDEV($a,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:507,columnNumber:15},this),"Logout"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:503,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:495,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:490,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:489,columnNumber:7},this),e.jsxDEV("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(Je,{className:"w-8 h-8 text-blue-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:519,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:B.totalUsers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:520,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:518,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Total Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:522,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:517,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(Be,{className:"w-8 h-8 text-green-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:527,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:B.activeUsers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:528,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:526,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Active Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:530,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:525,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(Re,{className:"w-8 h-8 text-red-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:535,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:B.lockedUsers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:536,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:534,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Locked Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:538,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:533,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(Ye,{className:"w-8 h-8 text-yellow-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:543,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:["KSH ",B.totalRevenue.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:544,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:542,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Total Revenue"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:546,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:541,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(Xe,{className:"w-8 h-8 text-orange-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:551,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:B.pendingPayments},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:552,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:550,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Pending Payments"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:554,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:549,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-2",children:[e.jsxDEV(ka,{className:"w-8 h-8 text-red-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:559,columnNumber:15},this),e.jsxDEV("span",{className:"text-2xl font-bold text-white",children:B.overduePayments},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:560,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:558,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-300 text-sm",children:"Overdue Payments"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:562,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:557,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:516,columnNumber:9},this),e.jsxDEV("div",{className:"border-b border-white/10",children:e.jsxDEV("div",{className:"flex gap-6",children:[e.jsxDEV("button",{onClick:()=>w("users"),className:`px-4 py-3 font-medium border-b-2 transition ${s==="users"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Je,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:578,columnNumber:17},this),"Users & Management"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:577,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:569,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>w("subscriptions"),className:`px-4 py-3 font-medium border-b-2 transition ${s==="subscriptions"?"border-blue-500 text-blue-400":"border-transparent text-gray-400 hover:text-gray-300"}`,children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Ge,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:591,columnNumber:17},this),"Subscriptions"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:590,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:582,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:568,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:567,columnNumber:9},this),s==="subscriptions"&&e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxDEV(Or,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:601,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:600,columnNumber:11},this),s==="users"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[e.jsxDEV("div",{className:"flex gap-4 flex-1 w-full md:w-auto",children:[e.jsxDEV("div",{className:"relative flex-1 md:w-80",children:[e.jsxDEV(La,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:614,columnNumber:17},this),e.jsxDEV("input",{type:"text",placeholder:"Search users...",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",value:t,onChange:N=>n(N.target.value)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:615,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:613,columnNumber:15},this),e.jsxDEV("select",{value:u,onChange:N=>l(N.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsxDEV("option",{value:"all",children:"All Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:629,columnNumber:17},this),e.jsxDEV("option",{value:"active",children:"Active"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:630,columnNumber:17},this),e.jsxDEV("option",{value:"locked",children:"Locked"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:631,columnNumber:17},this),e.jsxDEV("option",{value:"trial",children:"Free Trial"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:632,columnNumber:17},this),e.jsxDEV("option",{value:"pending-payment",children:"Pending Payment"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:633,columnNumber:17},this),e.jsxDEV("option",{value:"overdue",children:"Overdue"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:634,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:624,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:612,columnNumber:13},this),e.jsxDEV("button",{onClick:()=>o(!0),disabled:f.length===0||P,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-bold flex items-center gap-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsxDEV(xa,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:643,columnNumber:15},this),"Send Email to Selected (",f.length,")"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:638,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:611,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:610,columnNumber:9},this),e.jsxDEV("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[e.jsxDEV("div",{className:"xl:col-span-2 bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 overflow-hidden",children:[e.jsxDEV("div",{className:"p-4 border-b border-white/10",children:e.jsxDEV("h2",{className:"text-xl font-bold text-white",children:"All Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:654,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:653,columnNumber:13},this),e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-black/30",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-4 text-left",children:e.jsxDEV("input",{type:"checkbox",checked:f.length===re.length&&re.length>0,onChange:N=>{N.target.checked?j(re.map(U=>U.id)):j([])},className:"w-5 h-5 rounded"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:661,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:660,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"User"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:674,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Plan"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:675,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Trial Status"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:676,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Signup Details"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:677,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Status"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:678,columnNumber:21},this),e.jsxDEV("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Actions"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:679,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:659,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:658,columnNumber:17},this),e.jsxDEV("tbody",{children:[re.length===0&&e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:"7",className:"px-4 py-12 text-center",children:[e.jsxDEV(Je,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:686,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-400 text-lg",children:"No users found"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:687,columnNumber:25},this),e.jsxDEV("p",{className:"text-gray-500 text-sm mt-2",children:t||u!=="all"?"Try adjusting your filters":"Users will appear here once they sign up"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:688,columnNumber:25},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:685,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:684,columnNumber:21},this),re.map(N=>(Se(N.id),e.jsxDEV("tr",{className:"border-t border-white/10 hover:bg-white/5 transition",children:[e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("input",{type:"checkbox",checked:f.includes(N.id),onChange:U=>{U.target.checked?j([...f,N.id]):j(f.filter(J=>J!==N.id))},className:"w-5 h-5 rounded"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:701,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:700,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[N.profilePicture?e.jsxDEV("img",{src:N.profilePicture,alt:N.name,className:"w-10 h-10 rounded-full"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:717,columnNumber:31},this):e.jsxDEV("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:N.name?.charAt(0).toUpperCase()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:719,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-semibold text-white",children:N.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:724,columnNumber:31},this),e.jsxDEV("p",{className:"text-sm text-gray-400",children:N.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:725,columnNumber:31},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:723,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:715,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:714,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${N.plan==="ultra"?"bg-purple-500/20 text-purple-300":"bg-blue-500/20 text-blue-300"}`,children:[N.plan?.toUpperCase()||"FREE"," ",N.price?`- KSH ${N.price}`:""]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:730,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:729,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex flex-col gap-1",children:N.plan==="trial"||!N.plan||N.isFreeTrial?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"px-2 py-1 rounded text-xs font-bold bg-yellow-500/20 text-yellow-300",children:"FREE TRIAL"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:740,columnNumber:33},this),N.trialDaysLeft!==void 0&&e.jsxDEV("span",{className:"text-xs text-gray-400",children:[N.trialDaysLeft," days left"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:744,columnNumber:35},this),N.trialExpiry&&e.jsxDEV("span",{className:"text-xs text-gray-400",children:["Expires: ",new Date(N.trialExpiry).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:749,columnNumber:35},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:739,columnNumber:31},this):e.jsxDEV("span",{className:"px-2 py-1 rounded text-xs font-bold bg-green-500/20 text-green-300",children:"PAID PLAN"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:755,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:737,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:736,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"text-xs space-y-1",children:[e.jsxDEV("div",{className:"font-semibold text-gray-300",children:["Joined: ",new Date(N.createdAt).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:763,columnNumber:29},this),N.signupDetails?.company&&e.jsxDEV("div",{className:"text-gray-400",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Co:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:768,columnNumber:33},this)," ",N.signupDetails.company]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:767,columnNumber:31},this),N.signupDetails?.industry&&e.jsxDEV("div",{className:"text-gray-400",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Industry:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:773,columnNumber:33},this)," ",N.signupDetails.industry]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:772,columnNumber:31},this),N.signupDetails?.country&&e.jsxDEV("div",{className:"text-gray-400",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Country:"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:778,columnNumber:33},this)," ",N.signupDetails.country]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:777,columnNumber:31},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:762,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:761,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:N.locked?e.jsxDEV("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-red-500/20 text-red-300 flex items-center gap-1",children:[e.jsxDEV(Re,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:787,columnNumber:33},this),"Locked"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:786,columnNumber:31},this):N.active?e.jsxDEV("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-green-500/20 text-green-300 flex items-center gap-1",children:[e.jsxDEV(Be,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:792,columnNumber:33},this),"Active"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:791,columnNumber:31},this):e.jsxDEV("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-gray-500/20 text-gray-300",children:"Inactive"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:796,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:784,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:783,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-4",children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>W(N.id,N.locked),disabled:A===N.id,className:`p-2 rounded-lg transition ${N.locked?"bg-green-500/20 hover:bg-green-500/30 text-green-300":"bg-red-500/20 hover:bg-red-500/30 text-red-300"} ${A===N.id?"opacity-50 cursor-not-allowed":""}`,title:N.locked?"Unlock User":"Lock User",children:A===N.id?e.jsxDEV("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:815,columnNumber:33},this):N.locked?e.jsxDEV(Qs,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:817,columnNumber:33},this):e.jsxDEV(Re,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:819,columnNumber:33},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:804,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>fe(N.id,N.name),disabled:A===N.id,className:`p-2 rounded-lg bg-orange-500/20 hover:bg-orange-500/30 text-orange-300 transition ${A===N.id?"opacity-50 cursor-not-allowed":""}`,title:"Lock Screen (Prevents user interaction until PIN is entered)",children:A===N.id?e.jsxDEV("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:829,columnNumber:33},this):e.jsxDEV("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm6-10V7a3 3 0 00-3-3m3 3V7a3 3 0 013 3m-6-3a3 3 0 013-3m0 0V7m0 0a3 3 0 00-3 3m6-3V7m0 0a3 3 0 00-3 3"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:832,columnNumber:35},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:831,columnNumber:33},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:822,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>we(N.id),disabled:P,className:"p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 transition",title:"Send Payment Reminder",children:e.jsxDEV(ls,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:842,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:836,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>{N.role==="cashier"?window.open("/dashboard/cashier","_blank"):window.open("/admin","_blank")},className:"p-2 rounded-lg bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 transition",title:"View User Dashboard",children:e.jsxDEV(ba,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:856,columnNumber:31},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:844,columnNumber:29},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:803,columnNumber:27},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:802,columnNumber:25},this)]},N.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:699,columnNumber:23},this)))]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:682,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:657,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:656,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:652,columnNumber:11},this),e.jsxDEV("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20",children:[e.jsxDEV("div",{className:"p-4 border-b border-white/10",children:e.jsxDEV("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsxDEV(Ge,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:872,columnNumber:17},this),"Recent Activity"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:871,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:870,columnNumber:13},this),e.jsxDEV("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:Z.length===0?e.jsxDEV("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:878,columnNumber:17},this):Z.map(N=>e.jsxDEV("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxDEV("div",{className:`w-2 h-2 rounded-full ${N.type==="login"?"bg-green-400":"bg-blue-400"}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:883,columnNumber:23},this),e.jsxDEV("span",{className:"text-white font-medium",children:N.user.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:886,columnNumber:23},this),e.jsxDEV("span",{className:`text-xs px-2 py-1 rounded ${N.type==="login"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:N.type},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:887,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:882,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-400 text-sm",children:N.user.email},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:893,columnNumber:21},this),e.jsxDEV("p",{className:"text-gray-500 text-xs mt-1",children:new Date(N.timestamp).toLocaleString()},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:894,columnNumber:21},this)]},N.id,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:881,columnNumber:19},this))},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:876,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:869,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:650,columnNumber:9},this),p&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-2xl shadow-2xl max-w-2xl w-full border border-white/20",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white rounded-t-2xl",children:e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(xa,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:910,columnNumber:17},this),"Send Email to ",f.length," User(s)"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:909,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:908,columnNumber:13},this),e.jsxDEV("div",{className:"p-6 space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:916,columnNumber:17},this),e.jsxDEV("input",{type:"text",value:C.subject,onChange:N=>g({...C,subject:N.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email subject..."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:917,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:915,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:926,columnNumber:17},this),e.jsxDEV("textarea",{value:C.message,onChange:N=>g({...C,message:N.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 h-40",placeholder:"Email message..."},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:927,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:925,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3",children:[e.jsxDEV("button",{onClick:()=>K(f,C.subject,C.message),disabled:P,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 rounded-lg font-bold transition disabled:opacity-50",children:P?"Sending...":"Send Email"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:935,columnNumber:17},this),e.jsxDEV("button",{onClick:()=>o(!1),className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg font-bold transition",children:"Cancel"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:942,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:934,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:914,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:907,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:906,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:607,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:514,columnNumber:7},this),x&&e.jsxDEV("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxDEV("div",{className:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-2xl shadow-2xl max-w-2xl w-full border border-white/20",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 text-white rounded-t-2xl",children:e.jsxDEV("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(ba,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:964,columnNumber:17},this),"Website Analytics & Uptime"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:963,columnNumber:15},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:962,columnNumber:13},this),e.jsxDEV("div",{className:"p-6 space-y-6",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"bg-white/10 rounded-lg p-6 border border-white/20",children:e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-green-500/20 rounded-lg flex items-center justify-center",children:e.jsxDEV(Be,{className:"w-6 h-6 text-green-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:973,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:972,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"Active Days"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:976,columnNumber:23},this),e.jsxDEV("p",{className:"text-3xl font-bold text-white",children:B.activeDays},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:977,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:975,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:971,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:970,columnNumber:17},this),e.jsxDEV("div",{className:"bg-white/10 rounded-lg p-6 border border-white/20",children:e.jsxDEV("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxDEV("div",{className:"w-12 h-12 bg-red-500/20 rounded-lg flex items-center justify-center",children:e.jsxDEV(ka,{className:"w-6 h-6 text-red-400"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:984,columnNumber:23},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:983,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-400 text-sm",children:"Down Days"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:987,columnNumber:23},this),e.jsxDEV("p",{className:"text-3xl font-bold text-white",children:B.downDays},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:988,columnNumber:23},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:986,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:982,columnNumber:19},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:981,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:969,columnNumber:15},this),e.jsxDEV("div",{className:"bg-white/10 rounded-lg p-6 border border-white/20",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-white mb-4",children:"System Status"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:995,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{className:"text-gray-300",children:"Uptime Percentage"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:998,columnNumber:21},this),e.jsxDEV("span",{className:"text-2xl font-bold text-green-400",children:[parseFloat(localStorage.getItem("uptimePercentage")||"99.5").toFixed(1),"%"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:999,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:997,columnNumber:19},this),e.jsxDEV("div",{className:"w-full bg-white/20 rounded-full h-3",children:e.jsxDEV("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-3 rounded-full",style:{width:`${parseFloat(localStorage.getItem("uptimePercentage")||"99.5")}%`}},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1002,columnNumber:21},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1001,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:996,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:994,columnNumber:15},this),e.jsxDEV("div",{className:"bg-white/10 rounded-lg p-6 border border-white/20",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-white mb-3",children:"Key Metrics"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1011,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-2 text-sm",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-300",children:"Total Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1014,columnNumber:21},this),e.jsxDEV("span",{className:"text-white font-semibold",children:B.totalUsers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1015,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1013,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-300",children:"Active Users"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1018,columnNumber:21},this),e.jsxDEV("span",{className:"text-green-400 font-semibold",children:B.activeUsers},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1019,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1017,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-300",children:"Total Revenue"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1022,columnNumber:21},this),e.jsxDEV("span",{className:"text-yellow-400 font-semibold",children:["KSH ",B.totalRevenue.toLocaleString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1023,columnNumber:21},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1021,columnNumber:19},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1012,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1010,columnNumber:15},this),e.jsxDEV("div",{className:"flex gap-3",children:e.jsxDEV("button",{onClick:()=>v(!1),className:"flex-1 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 text-white py-3 rounded-lg font-bold transition",children:"Close"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1029,columnNumber:17},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:1028,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:968,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:961,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:960,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/pages/MainAdmin.jsx",lineNumber:437,columnNumber:5},this)}function Rr({userId:a=null}){const[m,h]=i.useState(null),[b,u]=i.useState(!1),[l,t]=i.useState(!0);if(i.useEffect(()=>{const v=async()=>{try{const s=await We.getSubscriptionStatus?.();if(!s){t(!1);return}const{status:w,days_remaining:f,is_active:j,reminder_needed:C}=s;C&&f===1&&j?h({message:`âš ï¸ Your subscription expires ${f===1?"tomorrow":`in ${f} days`}. Renew now to avoid platform closure.`,status:w,daysRemaining:f,expiryDate:s.subscription_end}):w==="expired"&&!j?h({message:"âŒ Your subscription has expired. Please renew to continue using the platform.",status:"expired",daysRemaining:0,type:"error"}):w==="expiring"&&h({message:`âš ï¸ Your subscription expires in ${f} days. Renew now to avoid disruption.`,status:w,daysRemaining:f}),t(!1)}catch(s){console.warn("Failed to check subscription status:",s),t(!1)}};if(!b){v();const s=setInterval(v,300*1e3);return()=>clearInterval(s)}},[b]),i.useEffect(()=>{const v=s=>{console.log("Subscription renewed:",s.detail),u(!0),h(null)};return window.addEventListener("subscription_renewed",v),window.addEventListener("subscription_reminder_day29",v),()=>{window.removeEventListener("subscription_renewed",v),window.removeEventListener("subscription_reminder_day29",v)}},[]),!m||b||l)return null;const n=m.type==="error"||m.status==="expired",p=n?"bg-red-50 border-red-200":"bg-orange-50 border-orange-200",o=n?"text-red-800":"text-orange-800",x=n?"text-red-500":"text-orange-500";return e.jsxDEV("div",{className:`fixed top-0 left-0 right-0 border-b ${p} shadow-lg z-40`,children:e.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-3 flex-1",children:[e.jsxDEV(Xe,{className:`w-5 h-5 flex-shrink-0 ${x}`},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:90,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("p",{className:`text-sm font-medium ${o}`,children:m.message},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:92,columnNumber:13},this),m.expiryDate&&e.jsxDEV("p",{className:`text-xs ${o} opacity-75 mt-1`,children:["Expires on: ",new Date(m.expiryDate).toLocaleDateString()]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:96,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:91,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:89,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>{n?u(!0):window.location.href="/plans"},className:`px-3 py-1 rounded text-sm font-medium whitespace-nowrap flex-shrink-0 ${n?"bg-red-200 text-red-900 hover:bg-red-300":"bg-orange-200 text-orange-900 hover:bg-orange-300"} transition-colors`,children:n?"Dismiss":"Renew Now"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:103,columnNumber:9},this),e.jsxDEV("button",{onClick:()=>u(!0),className:`p-1 hover:opacity-75 transition-opacity ${o}`,title:"Dismiss",children:e.jsxDEV(ra,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:126,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:121,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:88,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/SubscriptionReminderBar.jsx",lineNumber:87,columnNumber:5},this)}function Lr(){const[a,m]=i.useState([]),[h,b]=i.useState(!1),[u,l]=i.useState(null);if(i.useEffect(()=>{const o=new WebSocket(`${window.location.protocol==="https:"?"wss":"ws"}://${window.location.host}/api/live`);return o.onopen=()=>{console.log("âœ… Real-time stock listener connected")},o.onmessage=x=>{try{const v=JSON.parse(x.data);if(v.type==="STOCK_UPDATED"){console.log("ðŸ“¦ Stock updated:",v.deductions),m(v.deductions||[]),b(!0),u&&clearTimeout(u);const s=setTimeout(()=>{b(!1)},8e3);l(s)}}catch(v){console.error("Error parsing WebSocket message:",v)}},o.onerror=x=>{console.error("WebSocket error:",x)},o.onclose=()=>{console.log("âš ï¸ Real-time stock listener disconnected"),setTimeout(()=>{console.log("ðŸ”„ Attempting to reconnect..."),window.location.reload()},3e3)},()=>{u&&clearTimeout(u),o.readyState===WebSocket.OPEN&&o.close()}},[]),!h||a.length===0)return null;const t=a.products||[],n=a.expenses||[],p=t.length+n.length;return e.jsxDEV("div",{className:"fixed bottom-4 right-4 max-w-sm z-40 animate-slideIn",children:e.jsxDEV("div",{className:"bg-white rounded-lg shadow-lg border-l-4 border-blue-500",children:[e.jsxDEV("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-3 border-b border-blue-200 flex items-start gap-3",children:[e.jsxDEV(sa,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:76,columnNumber:11},this),e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("p",{className:"font-semibold text-blue-900 text-sm",children:"Stock Updated"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:78,columnNumber:13},this),e.jsxDEV("p",{className:"text-xs text-blue-700 mt-0.5",children:[p," item",p!==1?"s":""," deducted atomically"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:79,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:77,columnNumber:11},this),e.jsxDEV("button",{onClick:()=>b(!1),className:"text-blue-700 hover:text-blue-900 text-xl flex-shrink-0 ml-1",children:"Ã—"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:83,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:75,columnNumber:9},this),e.jsxDEV("div",{className:"p-3 space-y-2 max-h-48 overflow-y-auto",children:[t.length>0&&e.jsxDEV("div",{className:"space-y-1.5",children:[t.slice(0,3).map((o,x)=>e.jsxDEV("div",{className:"text-xs bg-blue-50 rounded p-2 border border-blue-100",children:[e.jsxDEV("p",{className:"font-medium text-gray-800",children:o.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:98,columnNumber:19},this),e.jsxDEV("p",{className:"text-blue-600",children:["-",o.deducted," ",o.unit," (",o.before_qty," â†’ ",o.after_qty,")"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:99,columnNumber:19},this)]},x,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:97,columnNumber:17},this)),t.length>3&&e.jsxDEV("p",{className:"text-xs text-gray-600 italic p-2",children:["+",t.length-3," more product",t.length-3!==1?"s":""]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:105,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:95,columnNumber:13},this),n.length>0&&e.jsxDEV("div",{className:"space-y-1.5",children:[n.slice(0,2).map((o,x)=>e.jsxDEV("div",{className:"text-xs bg-amber-50 rounded p-2 border border-amber-200",children:[e.jsxDEV("p",{className:"font-medium text-gray-800",children:o.name},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:117,columnNumber:19},this),e.jsxDEV("p",{className:"text-amber-600",children:["-",o.deducted," ",o.unit," (expense)"]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:118,columnNumber:19},this)]},x,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:116,columnNumber:17},this)),n.length>2&&e.jsxDEV("p",{className:"text-xs text-gray-600 italic p-2",children:["+",n.length-2," more expense",n.length-2!==1?"s":""]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:124,columnNumber:17},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:114,columnNumber:13},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:92,columnNumber:9},this),e.jsxDEV("div",{className:"bg-blue-50 border-t border-blue-200 p-2 flex items-center gap-2 text-xs",children:[e.jsxDEV("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:134,columnNumber:11},this),e.jsxDEV("span",{className:"text-gray-700",children:"Inventory synchronized across dashboards"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:135,columnNumber:11},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:133,columnNumber:9},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:73,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/components/StockUpdateListener.jsx",lineNumber:72,columnNumber:5},this)}function Oa({children:a,adminOnly:m=!1,ultraOnly:h=!1,ownerOnly:b=!1}){const{user:u,loading:l}=Fe(),{isLocked:t,lock:n,unlock:p}=pr(),[o,x]=i.useState(!1),v=ks(6e4),s=v?.[0]||t||!1,w=i.useCallback(()=>{v?.[1]?.(),p()},[v,p]),[f,j]=i.useState({});if(i.useEffect(()=>{u&&!b&&((async()=>{try{const P=localStorage.getItem("token"),M=await fetch(`${Ee}/settings`,{headers:{Authorization:`Bearer ${P}`}});if(M.ok){const D=await M.json();j(D)}}catch(P){console.error("Failed to load settings:",P)}})(),sessionStorage.getItem("reminderShown")||(x(!0),sessionStorage.setItem("reminderShown","true")))},[u,b]),i.useEffect(()=>{const g=P=>{console.log("ðŸ”’ Admin locked screen:",P.detail),n("admin")};return window.addEventListener("admin_locked_user_screen",g),()=>window.removeEventListener("admin_locked_user_screen",g)},[n]),l&&!b)return e.jsxDEV("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxDEV("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:75,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:74,columnNumber:7},this);if(b){const g=localStorage.getItem("ownerToken"),P=localStorage.getItem("ownerUser");if(!g||!P)return e.jsxDEV(Pe,{to:"/main.admin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:85,columnNumber:14},this);try{if(JSON.parse(P).type!=="main_admin")return e.jsxDEV(Pe,{to:"/main.admin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:90,columnNumber:16},this)}catch{return e.jsxDEV(Pe,{to:"/main.admin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:93,columnNumber:14},this)}}else{if(!u)return e.jsxDEV(Pe,{to:"/auth/login"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:97,columnNumber:23},this);if(!u.active)return e.jsxDEV(Pe,{to:"/plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:98,columnNumber:30},this);if(m&&u.role!=="admin")return e.jsxDEV(Pe,{to:"/dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:99,columnNumber:52},this);if(h&&(u.role!=="admin"||u.plan!=="ultra"))return e.jsxDEV(Pe,{to:"/dashboard"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:100,columnNumber:79},this)}const C=b?"owner":"user";return e.jsxDEV(e.Fragment,{children:[e.jsxDEV(Rr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:107,columnNumber:7},this),e.jsxDEV(Lr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:108,columnNumber:7},this),s&&e.jsxDEV(js,{onUnlock:w,userType:C},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:109,columnNumber:20},this),o&&e.jsxDEV(ys,{onClose:()=>x(!1)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:110,columnNumber:25},this),a]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:106,columnNumber:5},this)}function Tr(){const{user:a}=Fe();return!a||!a.active?e.jsxDEV(Pe,{to:"/plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:119,columnNumber:37},this):a.role==="admin"?e.jsxDEV(Pe,{to:"/admin"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:123,columnNumber:12},this):e.jsxDEV(Pe,{to:"/dashboard/cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:127,columnNumber:10},this)}function Ur(){return e.jsxDEV(or,{children:e.jsxDEV(cr,{children:e.jsxDEV(dr,{children:e.jsxDEV(Ls,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:e.jsxDEV(is,{children:[e.jsxDEV(xe,{path:"/",element:e.jsxDEV(Pr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:137,columnNumber:40},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:137,columnNumber:15},this),e.jsxDEV(xe,{path:"/auth/login",element:e.jsxDEV(ss,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:138,columnNumber:50},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:138,columnNumber:15},this),e.jsxDEV(xe,{path:"/auth/signup",element:e.jsxDEV(ss,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:139,columnNumber:51},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:139,columnNumber:15},this),e.jsxDEV(xe,{path:"/plans",element:e.jsxDEV(Ar,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:140,columnNumber:45},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:140,columnNumber:15},this),e.jsxDEV(xe,{path:"/main.admin/*",element:e.jsxDEV(Ir,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:143,columnNumber:52},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:143,columnNumber:15},this),e.jsxDEV(xe,{path:"/dashboard",element:e.jsxDEV(Oa,{children:e.jsxDEV(Tr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:146,columnNumber:65},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:146,columnNumber:49},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:146,columnNumber:15},this),e.jsxDEV(xe,{path:"/dashboard/cashier",element:e.jsxDEV(Oa,{children:e.jsxDEV(Mr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:147,columnNumber:73},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:147,columnNumber:57},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:147,columnNumber:15},this),e.jsxDEV(xe,{path:"/admin/*",element:e.jsxDEV(Oa,{adminOnly:!0,children:e.jsxDEV(Cr,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:148,columnNumber:73},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:148,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:148,columnNumber:15},this),e.jsxDEV(xe,{path:"/login",element:e.jsxDEV(Pe,{to:"/auth/login"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:151,columnNumber:45},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:151,columnNumber:15},this),e.jsxDEV(xe,{path:"/signup",element:e.jsxDEV(Pe,{to:"/auth/signup"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:152,columnNumber:46},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:152,columnNumber:15},this),e.jsxDEV(xe,{path:"/subscription",element:e.jsxDEV(Pe,{to:"/plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:153,columnNumber:52},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:153,columnNumber:15},this),e.jsxDEV(xe,{path:"/payment",element:e.jsxDEV(Pe,{to:"/plans"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:154,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:154,columnNumber:15},this),e.jsxDEV(xe,{path:"/cashier",element:e.jsxDEV(Pe,{to:"/dashboard/cashier"},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:155,columnNumber:47},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:155,columnNumber:15},this)]},void 0,!0,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:136,columnNumber:13},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:135,columnNumber:11},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:134,columnNumber:9},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:133,columnNumber:7},this)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/App.jsx",lineNumber:132,columnNumber:5},this)}rr.createRoot(document.getElementById("root")).render(e.jsxDEV(Ts.StrictMode,{children:e.jsxDEV(Ur,{},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/main.jsx",lineNumber:8,columnNumber:5},void 0)},void 0,!1,{fileName:"/home/ian-mabruk/universal/my-react-app/src/main.jsx",lineNumber:7,columnNumber:3},void 0));
