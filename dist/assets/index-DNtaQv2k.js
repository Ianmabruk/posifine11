import{a as _k,b as Ek,g as $e,r as N,c as Ki,R as _,u as wt,d as E1,N as Ne,e as I1,f as xe,B as Ik}from"./vendor-DzMnNEE3.js";import{C as un,D as Dt,T as ft,P as jt,S as D1,a as Eo,b as R1,c as Br,d as og,e as _r,f as Va,g as Ge,h as Dk,i as Rk,j as pa,k as Bn,l as tr,m as M1,n as Mk,o as $1,L as Ut,U as Zx,p as Qx,q as nn,E as L1,M as ey,r as Xe,B as um,s as Wl,H as on,t as dm,X as yr,u as vr,v as lg,w as ty,x as In,y as cg,R as $k,I as Lk,z as gr,A as fm,F as xr,G as Ts,J as ga,K as B1,N as Bk,O as Fk,Q as qk,V as Uk,W as F1,Y as Vk,Z as zk,_ as Ir,$ as q1,a0 as U1,a1 as Wk,a2 as hm,a3 as Hk,a4 as mm,a5 as pm,a6 as Kk,a7 as Gk,a8 as Xk,a9 as V1,aa as Yk,ab as Io,ac as is,ad as xo,ae as Do,af as Hl,ag as Jk,ah as Zk,ai as z1,aj as Qk,ak as eC,al as tC,am as rC,an as W1,ao as nC,ap as aC,aq as sC,ar as iC,as as oC,at as lC,au as H1,av as xa,aw as ry}from"./icons-DWKNHMgz.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Bc={exports:{}},os={};var ny;function cC(){if(ny)return os;ny=1;var e=_k(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var d,f={},h=null,x=null;u!==void 0&&(h=""+u),c.key!==void 0&&(h=""+c.key),c.ref!==void 0&&(x=c.ref);for(d in c)n.call(c,d)&&!i.hasOwnProperty(d)&&(f[d]=c[d]);if(l&&l.defaultProps)for(d in c=l.defaultProps,c)f[d]===void 0&&(f[d]=c[d]);return{$$typeof:t,type:l,key:h,ref:x,props:f,_owner:s.current}}return os.Fragment=r,os.jsx=o,os.jsxs=o,os}var ay;function uC(){return ay||(ay=1,Bc.exports=cC()),Bc.exports}var a=uC(),Gi={},sy;function dC(){if(sy)return Gi;sy=1;var e=Ek();return Gi.createRoot=e.createRoot,Gi.hydrateRoot=e.hydrateRoot,Gi}var fC=dC();const hC=$e(fC),mC=()=>"https://universal-backend-w0x1.onrender.com/api",ye=mC(),K1=()=>localStorage.getItem("token"),G1=async(e,t={},r=0,n=3)=>{const s=K1(),i=e.startsWith("/")?e:`/${e}`,o={...t,headers:{"Content-Type":"application/json",...s&&!(i.startsWith("/auth")&&i!=="/auth/me")&&!i.includes("/main-admin/auth/login")&&{Authorization:`Bearer ${s}`},...t.headers}};try{const l=await fetch(`${ye}${i}`,o);if(l.status===401){if(i.includes("/auth/login")||i.includes("/main-admin/auth/login")){const x=await l.json().catch(()=>({error:"Unauthorized"}));throw new Error(x.error||"Invalid credentials")}localStorage.removeItem("token"),localStorage.removeItem("user");const u=window.location.pathname||"";if(!["/","/get-started","/choose-subscription","/plans","/subscription","/build-pos","/login","/signup","/auth","/main.admin"].some(x=>u===x||u.startsWith(x)))try{window.location.href="/auth/login"}catch{}const h=new Error("Unauthorized");throw h.status=401,h}if(l.status===500)throw new Error("Server error 500 - Backend unavailable");if(l.ok)return l.status===204?{success:!0}:await l.json();const c=await l.json().catch(()=>({error:"Network error"}));throw new Error(c.error||`HTTP ${l.status}: ${l.statusText}`)}catch(l){if(l.name==="TypeError"&&l.message.includes("fetch")){if(console.error(`API Fetch Error (attempt ${r+1}/${n+1}):`,l),console.error("Attempted URL:",`${ye}${i}`),r<n){const c=Math.min(1e3*Math.pow(2,r),1e4);return console.log(`Retrying in ${c}ms...`),await new Promise(u=>setTimeout(u,c)),G1(e,t,r+1,n)}throw new Error("Cannot connect to server. The server may be waking up. Please try again in a moment.")}throw l}},ae=(e,t={})=>G1(e,t,0,3),ra={login:e=>ae("/auth/login",{method:"POST",body:JSON.stringify(e)}),pinLogin:e=>ae("/auth/pin-login",{method:"POST",body:JSON.stringify(e)}),signup:e=>ae("/auth/signup",{method:"POST",body:JSON.stringify(e)}),signupWithPayment:e=>ae("/signup-with-payment",{method:"POST",body:JSON.stringify(e)}),me:()=>ae("/auth/me"),updatePin:e=>ae("/auth/update-pin",{method:"POST",body:JSON.stringify({pin:e})})},Pn={getAll:()=>ae("/users"),create:e=>ae("/users",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>ae(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(`/users/${e}`,{method:"DELETE"}),setPin:(e,t)=>ae(`/users/${e}/set-pin`,{method:"POST",body:JSON.stringify({pin:t})}),lock:(e,t)=>ae(`/users/${e}/lock`,{method:"POST",body:JSON.stringify({locked:t})})},St={getAll:()=>ae("/products"),create:e=>ae("/products",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>ae(`/products/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(`/products/${e}`,{method:"DELETE"}),getLowStockWarnings:()=>ae("/products/low-stock-warnings"),updateStock:(e,t)=>ae(`/products/${e}/stock`,{method:"PUT",body:JSON.stringify(t)}),getMaxProducible:e=>ae(`/products/${e}/max-producible`),getWeightPricing:e=>ae(`/products/${e}/weight-pricing`),addWeightPrice:(e,t,r)=>ae(`/products/${e}/weight-pricing`,{method:"POST",body:JSON.stringify({weight:t,price:r})}),updateWeightPrice:(e,t,r)=>ae(`/products/${e}/weight-pricing`,{method:"PUT",body:JSON.stringify({weight:t,price:r})}),deleteWeightPrice:(e,t)=>ae(`/products/${e}/weight-pricing`,{method:"DELETE",body:JSON.stringify({weight:t})})},Kl={getAll:()=>ae("/sales"),create:e=>ae("/sales",{method:"POST",body:JSON.stringify(e)}),delete:e=>ae(`/sales/${e}`,{method:"DELETE"}),adminComplete:e=>ae("/admin-complete-sale",{method:"POST",body:JSON.stringify(e)})},Ro={getAll:()=>ae("/expenses"),create:e=>ae("/expenses",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>ae(`/expenses/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(`/expenses/${e}`,{method:"DELETE"})},X1={get:()=>ae("/stats")},ws={getAll:()=>ae("/discounts"),create:e=>ae("/discounts",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>ae(`/discounts/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(`/discounts/${e}`,{method:"DELETE"})},yo={getAll:()=>ae("/credit-requests"),create:e=>ae("/credit-requests",{method:"POST",body:JSON.stringify(e)}),update:(e,t)=>ae(`/credit-requests/${e}`,{method:"PUT",body:JSON.stringify(t)}),approve:e=>ae(`/credit-requests/${e}/approve`,{method:"POST"}),reject:e=>ae(`/credit-requests/${e}/reject`,{method:"POST"})},ks={get:()=>ae("/settings"),update:e=>ae("/settings",{method:"PUT",body:JSON.stringify(e)})},bo={getAll:()=>ae("/time-entries"),getStatus:()=>ae("/clock-status"),create:e=>ae("/time-entries",{method:"POST",body:JSON.stringify({action:e})}),update:(e,t)=>ae(`/time-entries/${e}`,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(`/time-entries/${e}`,{method:"DELETE"})},Mo={getAll:e=>{const t=e?`/batches?productId=${e}`:"/batches";return ae(t)},create:e=>ae("/batches",{method:"POST",body:JSON.stringify(e)})},Fc={login:e=>ae("/main-admin/auth/login",{method:"POST",body:JSON.stringify(e)}),getUsers:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/users",{headers:{Authorization:`Bearer ${e}`}})},getStats:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/stats",{headers:{Authorization:`Bearer ${e}`}})},getActivities:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/activities",{headers:{Authorization:`Bearer ${e}`}})},getSalesAll:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/sales-all",{headers:{Authorization:`Bearer ${e}`}})},getTimeEntriesAll:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/time-entries-all",{headers:{Authorization:`Bearer ${e}`}})},lockUser:(e,t)=>{const r=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae(`/main-admin/users/${e}/lock`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify({locked:t})})},changePlan:(e,t)=>{const r=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae(`/main-admin/users/${e}/plan`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:JSON.stringify({plan:t})})},clearData:e=>{const t=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/system/clear-data",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:JSON.stringify({type:e})})},getSubscribers:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/subscribers",{headers:{Authorization:`Bearer ${e}`}})},getSubscribersAnalytics:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/subscribers/analytics",{headers:{Authorization:`Bearer ${e}`}})},getUsersWithSubscriptions:()=>{const e=localStorage.getItem("token")||localStorage.getItem("ownerToken")||localStorage.getItem("mainAdminToken");return ae("/main-admin/users-with-subscriptions",{headers:{Authorization:`Bearer ${e}`}})}};let Yt=null,vo=new Set;function pC(){const e=ye.replace(/\/api$/,"");return`${e.startsWith("https")?"wss":"ws"}://${e.replace(/^https?:\/\//,"")}/api/ws/products`}function gC(){if(Yt&&(Yt.readyState===WebSocket.OPEN||Yt.readyState===WebSocket.CONNECTING))return;const e=K1(),t=pC()+(e?`?token=${encodeURIComponent(e)}`:"");Yt=new WebSocket(t),Yt.onopen=()=>{console.debug("Products WS connected")},Yt.onmessage=r=>{let n=null;try{n=JSON.parse(r.data)}catch{return}vo.forEach(s=>{try{s(n)}catch(i){console.error("ws callback error",i)}})},Yt.onclose=()=>{console.debug("Products WS closed"),Yt=null},Yt.onerror=r=>{console.error("Products WS error",r)}}function xC(e){if(typeof e!="function")throw new Error("subscribeProducts requires a callback");return vo.add(e),gC(),()=>{if(vo.delete(e),Yt&&vo.size===0){try{Yt.close()}catch{}Yt=null}}}const bt={get:e=>ae(e,{method:"GET"}),post:(e,t)=>ae(e,{method:"POST",body:JSON.stringify(t)}),put:(e,t)=>ae(e,{method:"PUT",body:JSON.stringify(t)}),delete:e=>ae(e,{method:"DELETE"})},Y1=N.createContext(),Oe=()=>N.useContext(Y1),yC=({children:e})=>{const[t,r]=N.useState(null),[n,s]=N.useState(!0),[i,o]=N.useState(!1),[l,c]=N.useState({});N.useEffect(()=>{u()},[]),N.useEffect(()=>{const k=()=>{const T=localStorage.getItem("user");if(T)try{const E=JSON.parse(T);r(E)}catch(E){console.warn("Failed to parse user from localStorage",E)}else r(null)};return window.addEventListener("storage",k),window.addEventListener("localStorageUpdated",k),()=>{window.removeEventListener("storage",k),window.removeEventListener("localStorageUpdated",k)}},[]);const u=async()=>{try{const k=localStorage.getItem("token"),T=localStorage.getItem("user");if(k)try{const E=await fetch(`${ye}/auth/me`,{headers:{Authorization:`Bearer ${k}`,"Content-Type":"application/json"}});if(E.ok){const $=await E.json();r($),localStorage.setItem("user",JSON.stringify($))}else throw new Error("Invalid token")}catch(E){console.warn("Auth check failed:",E),localStorage.removeItem("token"),localStorage.removeItem("user")}}catch(k){console.error("Error initializing auth:",k),localStorage.removeItem("token"),localStorage.removeItem("user"),r(null)}finally{s(!1),o(!0)}},d=async k=>{try{if(k&&k.token&&k.user)return localStorage.setItem("token",k.token),localStorage.setItem("user",JSON.stringify(k.user)),r(k.user),k;const T=await ra.login(k);if(T.token&&T.user)return localStorage.setItem("token",T.token),localStorage.setItem("user",JSON.stringify(T.user)),r(T.user),T;throw new Error("Invalid response from server")}catch(T){throw console.error("Login failed:",T),T}},f=async k=>{try{const T=await ra.signup(k);if(T.token&&T.user)return localStorage.setItem("token",T.token),localStorage.setItem("user",JSON.stringify(T.user)),r(T.user),T;throw new Error("Invalid response from server")}catch(T){throw console.error("Signup failed:",T),T}},h=async k=>{try{if(localStorage.setItem("user",JSON.stringify(k)),r(k),window.dispatchEvent(new Event("localStorageUpdated")),k&&k.id)try{await Pn.update(k.id,k)}catch(T){console.warn("Failed to persist updated user to backend",T)}return k}catch(T){throw console.error("updateUser failed:",T),T}},x=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(null),window.location.href="/auth/login"},p=()=>!!t&&!!localStorage.getItem("token"),g=k=>t&&t.role===k,m=()=>t&&t.role==="owner",y=()=>t&&(t.role==="admin"||t.role==="main-admin"),v=()=>t&&t.role==="cashier",b=(k=null)=>{const T=k||t?.role;return T==="owner"?"/main-admin":T==="admin"?"/admin":T==="cashier"?"/cashier":"/dashboard"},S=()=>t&&t.plan==="ultra",j=()=>t&&t.plan==="basic",w=()=>t&&(t.role==="admin"||t.role==="cashier"),P=()=>t&&t.role==="admin"&&t.plan==="ultra",A=()=>t&&t.role==="admin",O=()=>!0,C=()=>!0;return t?.locked?a.jsx(LockedAccount,{}):a.jsx(Y1.Provider,{value:{user:t,loading:n,isInitialized:i,appSettings:l,login:d,signup:f,updateUser:h,logout:x,isAuthenticated:p,hasRole:g,isOwner:m,isAdmin:y,isCashier:v,getDashboardUrl:b,isUltraPackage:S,isBasicPackage:j,canEditStock:w,canManageUsers:P,canViewAnalytics:A,isRealTimeProductSyncEnabled:O,isCashierUserManagementEnabled:C},children:e})};new Date().toISOString();const J1=N.createContext(),ug=()=>N.useContext(J1),bC=({children:e})=>{const{user:t}=Oe(),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState(null),[c,u]=N.useState(Date.now()),[d,f]=N.useState(!1),h=N.useCallback(async()=>{if(!localStorage.getItem("token"))return i(!1),[];try{const g=await St.getAll(),y=(Array.isArray(g)?g:[]).filter(v=>!v.pendingDelete);return n(y),l(null),window.dispatchEvent(new CustomEvent("productsSync",{detail:{products:y,timestamp:Date.now()}})),typeof window<"u"&&setTimeout(()=>{window.dispatchEvent(new Event("productUpdated"))},100),y}catch(g){return console.error("Failed to fetch products:",g),l(`Failed to load products: ${g.message}`),n([]),[]}finally{i(!1),u(Date.now())}},[]);N.useEffect(()=>{h()},[]),N.useEffect(()=>{const g=setInterval(()=>{!d&&document.visibilityState==="visible"?(console.log("ðŸ”„ Auto-refresh: Fetching latest products from backend..."),h()):d&&console.log("â¸ï¸ Auto-refresh: Skipped (user is editing)")},3e4);return()=>clearInterval(g)},[d,h]),N.useEffect(()=>{const g=()=>{console.log("ðŸ”„ Data cleared event received - forcing products refresh"),n([]),l(null),h()};return window.addEventListener("dataCleared",g),window.addEventListener("productsCleared",g),()=>{window.removeEventListener("dataCleared",g),window.removeEventListener("productsCleared",g)}},[]);const x=async()=>(i(!0),await h()),p=g=>{f(g),console.log(g?"âœï¸ Editing mode ON - auto-refresh paused":"âœ… Editing mode OFF - auto-refresh resumed")};return a.jsx(J1.Provider,{value:{products:r,loading:s,error:o,lastUpdated:c,refreshProducts:x,setEditingState:p},children:e})},Z1=N.createContext(),Q1=()=>N.useContext(Z1),vC=900*1e3,jC=({children:e})=>{const{user:t}=Oe(),[r,n]=N.useState(!1),s=N.useRef(null),i=N.useRef(Date.now()),o=N.useCallback(()=>{i.current=Date.now(),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{n(!0),console.log("ðŸ”’ Screen locked due to inactivity")},vC)},[]);N.useEffect(()=>{const d=["mousedown","keydown","click","touchstart"];return d.forEach(f=>{document.addEventListener(f,o)}),o(),()=>{d.forEach(f=>{document.removeEventListener(f,o)}),s.current&&clearTimeout(s.current)}},[o]);const l=N.useCallback(()=>{n(!0),console.log("ðŸ”’ Screen manually locked")},[]),c=N.useCallback(()=>{n(!1),o(),console.log("ðŸ”“ Screen unlocked")},[o]),u={isLocked:r,lock:l,unlock:c};return a.jsx(Z1.Provider,{value:u,children:e})};function eP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=eP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Te(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=eP(e))&&(n&&(n+=" "),n+=t);return n}var qc,iy;function Rt(){if(iy)return qc;iy=1;var e=Array.isArray;return qc=e,qc}var Uc,oy;function tP(){if(oy)return Uc;oy=1;var e=typeof Ki=="object"&&Ki&&Ki.Object===Object&&Ki;return Uc=e,Uc}var Vc,ly;function Dr(){if(ly)return Vc;ly=1;var e=tP(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Vc=r,Vc}var zc,cy;function Ai(){if(cy)return zc;cy=1;var e=Dr(),t=e.Symbol;return zc=t,zc}var Wc,uy;function wC(){if(uy)return Wc;uy=1;var e=Ai(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var d=n.call(o);return u&&(l?o[s]=c:delete o[s]),d}return Wc=i,Wc}var Hc,dy;function NC(){if(dy)return Hc;dy=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return Hc=r,Hc}var Kc,fy;function Xr(){if(fy)return Kc;fy=1;var e=Ai(),t=wC(),r=NC(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return Kc=o,Kc}var Gc,hy;function Yr(){if(hy)return Gc;hy=1;function e(t){return t!=null&&typeof t=="object"}return Gc=e,Gc}var Xc,my;function za(){if(my)return Xc;my=1;var e=Xr(),t=Yr(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return Xc=n,Xc}var Yc,py;function dg(){if(py)return Yc;py=1;var e=Rt(),t=za(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return Yc=s,Yc}var Jc,gy;function mn(){if(gy)return Jc;gy=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return Jc=e,Jc}var Zc,xy;function fg(){if(xy)return Zc;xy=1;var e=Xr(),t=mn(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==n||c==s||c==r||c==i}return Zc=o,Zc}var Qc,yy;function SC(){if(yy)return Qc;yy=1;var e=Dr(),t=e["__core-js_shared__"];return Qc=t,Qc}var eu,by;function PC(){if(by)return eu;by=1;var e=SC(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return eu=r,eu}var tu,vy;function rP(){if(vy)return tu;vy=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return tu=r,tu}var ru,jy;function AC(){if(jy)return ru;jy=1;var e=fg(),t=PC(),r=mn(),n=rP(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,d=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(h){if(!r(h)||t(h))return!1;var x=e(h)?d:i;return x.test(n(h))}return ru=f,ru}var nu,wy;function OC(){if(wy)return nu;wy=1;function e(t,r){return t?.[r]}return nu=e,nu}var au,Ny;function Hn(){if(Ny)return au;Ny=1;var e=AC(),t=OC();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return au=r,au}var su,Sy;function Gl(){if(Sy)return su;Sy=1;var e=Hn(),t=e(Object,"create");return su=t,su}var iu,Py;function TC(){if(Py)return iu;Py=1;var e=Gl();function t(){this.__data__=e?e(null):{},this.size=0}return iu=t,iu}var ou,Ay;function kC(){if(Ay)return ou;Ay=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return ou=e,ou}var lu,Oy;function CC(){if(Oy)return lu;Oy=1;var e=Gl(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return lu=s,lu}var cu,Ty;function _C(){if(Ty)return cu;Ty=1;var e=Gl(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return cu=n,cu}var uu,ky;function EC(){if(ky)return uu;ky=1;var e=Gl(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return uu=r,uu}var du,Cy;function IC(){if(Cy)return du;Cy=1;var e=TC(),t=kC(),r=CC(),n=_C(),s=EC();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,du=i,du}var fu,_y;function DC(){if(_y)return fu;_y=1;function e(){this.__data__=[],this.size=0}return fu=e,fu}var hu,Ey;function hg(){if(Ey)return hu;Ey=1;function e(t,r){return t===r||t!==t&&r!==r}return hu=e,hu}var mu,Iy;function Xl(){if(Iy)return mu;Iy=1;var e=hg();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return mu=t,mu}var pu,Dy;function RC(){if(Dy)return pu;Dy=1;var e=Xl(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return pu=n,pu}var gu,Ry;function MC(){if(Ry)return gu;Ry=1;var e=Xl();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return gu=t,gu}var xu,My;function $C(){if(My)return xu;My=1;var e=Xl();function t(r){return e(this.__data__,r)>-1}return xu=t,xu}var yu,$y;function LC(){if($y)return yu;$y=1;var e=Xl();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return yu=t,yu}var bu,Ly;function Yl(){if(Ly)return bu;Ly=1;var e=DC(),t=RC(),r=MC(),n=$C(),s=LC();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,bu=i,bu}var vu,By;function mg(){if(By)return vu;By=1;var e=Hn(),t=Dr(),r=e(t,"Map");return vu=r,vu}var ju,Fy;function BC(){if(Fy)return ju;Fy=1;var e=IC(),t=Yl(),r=mg();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return ju=n,ju}var wu,qy;function FC(){if(qy)return wu;qy=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return wu=e,wu}var Nu,Uy;function Jl(){if(Uy)return Nu;Uy=1;var e=FC();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return Nu=t,Nu}var Su,Vy;function qC(){if(Vy)return Su;Vy=1;var e=Jl();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return Su=t,Su}var Pu,zy;function UC(){if(zy)return Pu;zy=1;var e=Jl();function t(r){return e(this,r).get(r)}return Pu=t,Pu}var Au,Wy;function VC(){if(Wy)return Au;Wy=1;var e=Jl();function t(r){return e(this,r).has(r)}return Au=t,Au}var Ou,Hy;function zC(){if(Hy)return Ou;Hy=1;var e=Jl();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return Ou=t,Ou}var Tu,Ky;function pg(){if(Ky)return Tu;Ky=1;var e=BC(),t=qC(),r=UC(),n=VC(),s=zC();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,Tu=i,Tu}var ku,Gy;function nP(){if(Gy)return ku;Gy=1;var e=pg(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,ku=r,ku}var Cu,Xy;function WC(){if(Xy)return Cu;Xy=1;var e=nP(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return Cu=r,Cu}var _u,Yy;function HC(){if(Yy)return _u;Yy=1;var e=WC(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,u){i.push(c?u.replace(r,"$1"):l||o)}),i});return _u=n,_u}var Eu,Jy;function gg(){if(Jy)return Eu;Jy=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return Eu=e,Eu}var Iu,Zy;function KC(){if(Zy)return Iu;Zy=1;var e=Ai(),t=gg(),r=Rt(),n=za(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Iu=o,Iu}var Du,Qy;function aP(){if(Qy)return Du;Qy=1;var e=KC();function t(r){return r==null?"":e(r)}return Du=t,Du}var Ru,e0;function sP(){if(e0)return Ru;e0=1;var e=Rt(),t=dg(),r=HC(),n=aP();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return Ru=s,Ru}var Mu,t0;function Zl(){if(t0)return Mu;t0=1;var e=za();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return Mu=t,Mu}var $u,r0;function xg(){if(r0)return $u;r0=1;var e=sP(),t=Zl();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return $u=r,$u}var Lu,n0;function iP(){if(n0)return Lu;n0=1;var e=xg();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return Lu=t,Lu}var GC=iP();const Qt=$e(GC);var Bu,a0;function XC(){if(a0)return Bu;a0=1;function e(t){return t==null}return Bu=e,Bu}var YC=XC();const Se=$e(YC);var Fu,s0;function JC(){if(s0)return Fu;s0=1;var e=Xr(),t=Rt(),r=Yr(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return Fu=s,Fu}var ZC=JC();const Fn=$e(ZC);var QC=fg();const we=$e(QC);var e_=mn();const Wa=$e(e_);var qu={exports:{}},Ee={};var i0;function t_(){if(i0)return Ee;i0=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),p;p=Symbol.for("react.module.reference");function g(m){if(typeof m=="object"&&m!==null){var y=m.$$typeof;switch(y){case e:switch(m=m.type,m){case r:case s:case n:case u:case d:return m;default:switch(m=m&&m.$$typeof,m){case l:case o:case c:case h:case f:case i:return m;default:return y}}case t:return y}}}return Ee.ContextConsumer=o,Ee.ContextProvider=i,Ee.Element=e,Ee.ForwardRef=c,Ee.Fragment=r,Ee.Lazy=h,Ee.Memo=f,Ee.Portal=t,Ee.Profiler=s,Ee.StrictMode=n,Ee.Suspense=u,Ee.SuspenseList=d,Ee.isAsyncMode=function(){return!1},Ee.isConcurrentMode=function(){return!1},Ee.isContextConsumer=function(m){return g(m)===o},Ee.isContextProvider=function(m){return g(m)===i},Ee.isElement=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===e},Ee.isForwardRef=function(m){return g(m)===c},Ee.isFragment=function(m){return g(m)===r},Ee.isLazy=function(m){return g(m)===h},Ee.isMemo=function(m){return g(m)===f},Ee.isPortal=function(m){return g(m)===t},Ee.isProfiler=function(m){return g(m)===s},Ee.isStrictMode=function(m){return g(m)===n},Ee.isSuspense=function(m){return g(m)===u},Ee.isSuspenseList=function(m){return g(m)===d},Ee.isValidElementType=function(m){return typeof m=="string"||typeof m=="function"||m===r||m===s||m===n||m===u||m===d||m===x||typeof m=="object"&&m!==null&&(m.$$typeof===h||m.$$typeof===f||m.$$typeof===i||m.$$typeof===o||m.$$typeof===c||m.$$typeof===p||m.getModuleId!==void 0)},Ee.typeOf=g,Ee}var o0;function r_(){return o0||(o0=1,qu.exports=t_()),qu.exports}var n_=r_(),Uu,l0;function oP(){if(l0)return Uu;l0=1;var e=Xr(),t=Yr(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return Uu=n,Uu}var Vu,c0;function a_(){if(c0)return Vu;c0=1;var e=oP();function t(r){return e(r)&&r!=+r}return Vu=t,Vu}var s_=a_();const Oi=$e(s_);var i_=oP();const o_=$e(i_);var mr=function(t){return t===0?0:t>0?1:-1},An=function(t){return Fn(t)&&t.indexOf("%")===t.length-1},te=function(t){return o_(t)&&!Oi(t)},l_=function(t){return Se(t)},at=function(t){return te(t)||Fn(t)},c_=0,Ti=function(t){var r=++c_;return"".concat(t||"").concat(r)},qn=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!te(t)&&!Fn(t))return n;var i;if(An(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Oi(i)&&(i=n),s&&i>r&&(i=r),i},rn=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},u_=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},fr=function(t,r){return te(t)&&te(r)?function(n){return t+n*(r-t)}:function(){return r}};function $o(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):Qt(n,t))===r})}var d_=function(t,r){return te(t)&&te(r)?t-r:Fn(t)&&Fn(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function da(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function gm(e){"@babel/helpers - typeof";return gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gm(e)}var f_=["viewBox","children"],h_=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],u0=["points","pathLength"],zu={svg:f_,polygon:u0,polyline:u0},yg=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Lo=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(N.isValidElement(t)&&(n=t.props),!Wa(n))return null;var s={};return Object.keys(n).forEach(function(i){yg.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},m_=function(t,r,n){return function(s){return t(r,n,s),null}},Bo=function(t,r,n){if(!Wa(t)||gm(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];yg.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=m_(o,r,n))}),s},p_=["children"],g_=["children"];function d0(e,t){if(e==null)return{};var r=x_(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function x_(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xm(e){"@babel/helpers - typeof";return xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xm(e)}var f0={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Fr=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},h0=null,Wu=null,bg=function e(t){if(t===h0&&Array.isArray(Wu))return Wu;var r=[];return N.Children.forEach(t,function(n){Se(n)||(n_.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Wu=r,h0=t,r};function er(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Fr(s)}):n=[Fr(t)],bg(e).forEach(function(s){var i=Qt(s,"type.displayName")||Qt(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function qt(e,t){var r=er(e,t);return r&&r[0]}var m0=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!te(n)||n<=0||!te(s)||s<=0)},y_=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],b_=function(t){return t&&t.type&&Fn(t.type)&&y_.indexOf(t.type)>=0},v_=function(t){return t&&xm(t)==="object"&&"clipDot"in t},j_=function(t,r,n,s){var i,o=(i=zu?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!we(t)&&(s&&o.includes(r)||h_.includes(r))||n&&yg.includes(r)},Ae=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(N.isValidElement(t)&&(s=t.props),!Wa(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;j_((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},ym=function e(t,r){if(t===r)return!0;var n=N.Children.count(t);if(n!==N.Children.count(r))return!1;if(n===0)return!0;if(n===1)return p0(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!p0(i,o))return!1}return!0},p0=function(t,r){if(Se(t)&&Se(r))return!0;if(!Se(t)&&!Se(r)){var n=t.props||{},s=n.children,i=d0(n,p_),o=r.props||{},l=o.children,c=d0(o,g_);return s&&l?da(i,c)&&ym(s,l):!s&&!l?da(i,c):!1}return!1},g0=function(t,r){var n=[],s={};return bg(t).forEach(function(i,o){if(b_(i))n.push(i);else if(i){var l=Fr(i.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!s[l])){var f=u(i,l,o);n.push(f),s[l]=!0}}}),n},w_=function(t){var r=t&&t.type;return r&&f0[r]?f0[r]:null},N_=function(t,r){return bg(r).indexOf(t)},S_=["children","width","height","viewBox","className","style","title","desc"];function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bm.apply(this,arguments)}function P_(e,t){if(e==null)return{};var r=A_(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function A_(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function vm(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=P_(e,S_),d=s||{width:r,height:n,x:0,y:0},f=Te("recharts-surface",i);return _.createElement("svg",bm({},Ae(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),_.createElement("title",null,l),_.createElement("desc",null,c),t)}var O_=["children","className"];function jm(){return jm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jm.apply(this,arguments)}function T_(e,t){if(e==null)return{};var r=k_(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function k_(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ye=_.forwardRef(function(e,t){var r=e.children,n=e.className,s=T_(e,O_),i=Te("recharts-layer",n);return _.createElement("g",jm({className:i},Ae(s,!0),{ref:t}),r)}),qr=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},Hu,x0;function C_(){if(x0)return Hu;x0=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return Hu=e,Hu}var Ku,y0;function __(){if(y0)return Ku;y0=1;var e=C_();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return Ku=t,Ku}var Gu,b0;function lP(){if(b0)return Gu;b0=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(u){return l.test(u)}return Gu=c,Gu}var Xu,v0;function E_(){if(v0)return Xu;v0=1;function e(t){return t.split("")}return Xu=e,Xu}var Yu,j0;function I_(){if(j0)return Yu;j0=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",d="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",h="[\\ud800-\\udbff][\\udc00-\\udfff]",x="\\u200d",p=u+"?",g="["+i+"]?",m="(?:"+x+"(?:"+[d,f,h].join("|")+")"+g+p+")*",y=g+p+m,v="(?:"+[d+l+"?",l,f,h,o].join("|")+")",b=RegExp(c+"(?="+c+")|"+v+y,"g");function S(j){return j.match(b)||[]}return Yu=S,Yu}var Ju,w0;function D_(){if(w0)return Ju;w0=1;var e=E_(),t=lP(),r=I_();function n(s){return t(s)?r(s):e(s)}return Ju=n,Ju}var Zu,N0;function R_(){if(N0)return Zu;N0=1;var e=__(),t=lP(),r=D_(),n=aP();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[i]()+u}}return Zu=s,Zu}var Qu,S0;function M_(){if(S0)return Qu;S0=1;var e=R_(),t=e("toUpperCase");return Qu=t,Qu}var $_=M_();const Ql=$e($_);function Fe(e){return function(){return e}}const cP=Math.cos,Fo=Math.sin,jr=Math.sqrt,qo=Math.PI,ec=2*qo,wm=Math.PI,Nm=2*wm,wn=1e-6,L_=Nm-wn;function uP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function B_(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return uP;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class F_{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?uP:B_(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>wn)if(!(Math.abs(f*c-u*d)>wn)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let x=n-o,p=s-l,g=c*c+u*u,m=x*x+p*p,y=Math.sqrt(g),v=Math.sqrt(h),b=i*Math.tan((wm-Math.acos((g+h-m)/(2*y*v)))/2),S=b/v,j=b/y;Math.abs(S-1)>wn&&this._append`L${t+S*d},${r+S*f}`,this._append`A${i},${i},0,0,${+(f*x>d*p)},${this._x1=t+j*c},${this._y1=r+j*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,d=r+c,f=1^o,h=o?s-i:i-s;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>wn||Math.abs(this._y1-d)>wn)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Nm+Nm),h>L_?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>wn&&this._append`A${n},${n},0,${+(h>=wm)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function vg(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new F_(t)}function jg(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dP(e){this._context=e}dP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function tc(e){return new dP(e)}function fP(e){return e[0]}function hP(e){return e[1]}function mP(e,t){var r=Fe(!0),n=null,s=tc,i=null,o=vg(l);e=typeof e=="function"?e:e===void 0?fP:Fe(e),t=typeof t=="function"?t:t===void 0?hP:Fe(t);function l(c){var u,d=(c=jg(c)).length,f,h=!1,x;for(n==null&&(i=s(x=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(x)return i=null,x+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Fe(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Fe(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Fe(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Xi(e,t,r){var n=null,s=Fe(!0),i=null,o=tc,l=null,c=vg(u);e=typeof e=="function"?e:e===void 0?fP:Fe(+e),t=typeof t=="function"?t:Fe(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hP:Fe(+r);function u(f){var h,x,p,g=(f=jg(f)).length,m,y=!1,v,b=new Array(g),S=new Array(g);for(i==null&&(l=o(v=c())),h=0;h<=g;++h){if(!(h<g&&s(m=f[h],h,f))===y)if(y=!y)x=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=h-1;p>=x;--p)l.point(b[p],S[p]);l.lineEnd(),l.areaEnd()}y&&(b[h]=+e(m,h,f),S[h]=+t(m,h,f),l.point(n?+n(m,h,f):b[h],r?+r(m,h,f):S[h]))}if(v)return l=null,v+""||null}function d(){return mP().defined(s).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Fe(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Fe(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Fe(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Fe(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Fe(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Fe(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Fe(!!f),u):s},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class pP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function q_(e){return new pP(e,!0)}function U_(e){return new pP(e,!1)}const wg={draw(e,t){const r=jr(t/qo);e.moveTo(r,0),e.arc(0,0,r,0,ec)}},V_={draw(e,t){const r=jr(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},gP=jr(1/3),z_=gP*2,W_={draw(e,t){const r=jr(t/z_),n=r*gP;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},H_={draw(e,t){const r=jr(t),n=-r/2;e.rect(n,n,r,r)}},K_=.8908130915292852,xP=Fo(qo/10)/Fo(7*qo/10),G_=Fo(ec/10)*xP,X_=-cP(ec/10)*xP,Y_={draw(e,t){const r=jr(t*K_),n=G_*r,s=X_*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=ec*i/5,l=cP(o),c=Fo(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},ed=jr(3),J_={draw(e,t){const r=-jr(t/(ed*3));e.moveTo(0,r*2),e.lineTo(-ed*r,-r),e.lineTo(ed*r,-r),e.closePath()}},Ht=-.5,Kt=jr(3)/2,Sm=1/jr(12),Z_=(Sm/2+1)*3,Q_={draw(e,t){const r=jr(t/Z_),n=r/2,s=r*Sm,i=n,o=r*Sm+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Ht*n-Kt*s,Kt*n+Ht*s),e.lineTo(Ht*i-Kt*o,Kt*i+Ht*o),e.lineTo(Ht*l-Kt*c,Kt*l+Ht*c),e.lineTo(Ht*n+Kt*s,Ht*s-Kt*n),e.lineTo(Ht*i+Kt*o,Ht*o-Kt*i),e.lineTo(Ht*l+Kt*c,Ht*c-Kt*l),e.closePath()}};function eE(e,t){let r=null,n=vg(s);e=typeof e=="function"?e:Fe(e||wg),t=typeof t=="function"?t:Fe(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Fe(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Fe(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function Uo(){}function Vo(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function yP(e){this._context=e}yP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Vo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Vo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function tE(e){return new yP(e)}function bP(e){this._context=e}bP.prototype={areaStart:Uo,areaEnd:Uo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Vo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function rE(e){return new bP(e)}function vP(e){this._context=e}vP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Vo(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nE(e){return new vP(e)}function jP(e){this._context=e}jP.prototype={areaStart:Uo,areaEnd:Uo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function aE(e){return new jP(e)}function P0(e){return e<0?-1:1}function A0(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(P0(i)+P0(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function O0(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function td(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function zo(e){this._context=e}zo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:td(this,this._t0,O0(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,td(this,O0(this,r=A0(this,e,t)),r);break;default:td(this,this._t0,r=A0(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function wP(e){this._context=new NP(e)}(wP.prototype=Object.create(zo.prototype)).point=function(e,t){zo.prototype.point.call(this,t,e)};function NP(e){this._context=e}NP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function sE(e){return new zo(e)}function iE(e){return new wP(e)}function SP(e){this._context=e}SP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=T0(e),s=T0(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function T0(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function oE(e){return new SP(e)}function rc(e,t){this._context=e,this._t=t}rc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function lE(e){return new rc(e,.5)}function cE(e){return new rc(e,0)}function uE(e){return new rc(e,1)}function ya(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Pm(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function dE(e,t){return e[t]}function fE(e){const t=[];return t.key=e,t}function hE(){var e=Fe([]),t=Pm,r=ya,n=dE;function s(i){var o=Array.from(e.apply(this,arguments),fE),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=jg(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Fe(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Fe(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Pm:typeof i=="function"?i:Fe(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??ya,s):r},s}function mE(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}ya(e,t)}}function pE(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}ya(e,t)}}function gE(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,x=(f-h)/2,p=0;p<l;++p){var g=e[t[p]],m=g[n][1]||0,y=g[n-1][1]||0;x+=m-y}c+=f,u+=x*f}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,ya(e,t)}}function Fs(e){"@babel/helpers - typeof";return Fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fs(e)}var xE=["type","size","sizeType"];function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Am.apply(this,arguments)}function k0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function C0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?k0(Object(r),!0).forEach(function(n){yE(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yE(e,t,r){return t=bE(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bE(e){var t=vE(e,"string");return Fs(t)=="symbol"?t:t+""}function vE(e,t){if(Fs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jE(e,t){if(e==null)return{};var r=wE(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function wE(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var PP={symbolCircle:wg,symbolCross:V_,symbolDiamond:W_,symbolSquare:H_,symbolStar:Y_,symbolTriangle:J_,symbolWye:Q_},NE=Math.PI/180,SE=function(t){var r="symbol".concat(Ql(t));return PP[r]||wg},PE=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*NE;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},AE=function(t,r){PP["symbol".concat(Ql(t))]=r},Ng=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=jE(t,xE),u=C0(C0({},c),{},{type:n,size:i,sizeType:l}),d=function(){var m=SE(n),y=eE().type(m).size(PE(i,l,n));return y()},f=u.className,h=u.cx,x=u.cy,p=Ae(u,!0);return h===+h&&x===+x&&i===+i?_.createElement("path",Am({},p,{className:Te("recharts-symbols",f),transform:"translate(".concat(h,", ").concat(x,")"),d:d()})):null};Ng.registerSymbol=AE;function ba(e){"@babel/helpers - typeof";return ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ba(e)}function Om(){return Om=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Om.apply(this,arguments)}function _0(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_0(Object(r),!0).forEach(function(n){qs(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_0(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,OP(n.key),n)}}function CE(e,t,r){return t&&kE(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _E(e,t,r){return t=Wo(t),EE(e,AP()?Reflect.construct(t,r||[],Wo(e).constructor):t.apply(e,r))}function EE(e,t){if(t&&(ba(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IE(e)}function IE(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(AP=function(){return!!e})()}function Wo(e){return Wo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Wo(e)}function DE(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Tm(e,t)}function Tm(e,t){return Tm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Tm(e,t)}function qs(e,t,r){return t=OP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OP(e){var t=RE(e,"string");return ba(t)=="symbol"?t:t+""}function RE(e,t){if(ba(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ba(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gt=32,Sg=(function(e){function t(){return TE(this,t),_E(this,t,arguments)}return DE(t,e),CE(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Gt/2,o=Gt/6,l=Gt/3,c=n.inactive?s:n.color;if(n.type==="plainline")return _.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Gt,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return _.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Gt,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return _.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Gt/8,"h").concat(Gt,"v").concat(Gt*3/4,"h").concat(-Gt,"z"),className:"recharts-legend-icon"});if(_.isValidElement(n.legendIcon)){var u=OE({},n);return delete u.legendIcon,_.cloneElement(n.legendIcon,u)}return _.createElement(Ng,{fill:c,cx:i,cy:i,size:Gt,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,d={x:0,y:0,width:Gt,height:Gt},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(x,p){var g=x.formatter||c,m=Te(qs(qs({"recharts-legend-item":!0},"legend-item-".concat(p),!0),"inactive",x.inactive));if(x.type==="none")return null;var y=we(x.value)?null:x.value;qr(!we(x.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var v=x.inactive?u:x.color;return _.createElement("li",Om({className:m,style:f,key:"legend-item-".concat(p)},Bo(n.props,x,p)),_.createElement(vm,{width:o,height:o,viewBox:d,style:h},n.renderIcon(x)),_.createElement("span",{className:"recharts-legend-item-text",style:{color:v}},g?g(y,x,p):y))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return _.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(N.PureComponent);qs(Sg,"displayName","Legend");qs(Sg,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var rd,E0;function ME(){if(E0)return rd;E0=1;var e=Yl();function t(){this.__data__=new e,this.size=0}return rd=t,rd}var nd,I0;function $E(){if(I0)return nd;I0=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return nd=e,nd}var ad,D0;function LE(){if(D0)return ad;D0=1;function e(t){return this.__data__.get(t)}return ad=e,ad}var sd,R0;function BE(){if(R0)return sd;R0=1;function e(t){return this.__data__.has(t)}return sd=e,sd}var id,M0;function FE(){if(M0)return id;M0=1;var e=Yl(),t=mg(),r=pg(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<n-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return id=s,id}var od,$0;function TP(){if($0)return od;$0=1;var e=Yl(),t=ME(),r=$E(),n=LE(),s=BE(),i=FE();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,od=o,od}var ld,L0;function qE(){if(L0)return ld;L0=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return ld=t,ld}var cd,B0;function UE(){if(B0)return cd;B0=1;function e(t){return this.__data__.has(t)}return cd=e,cd}var ud,F0;function kP(){if(F0)return ud;F0=1;var e=pg(),t=qE(),r=UE();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,ud=n,ud}var dd,q0;function CP(){if(q0)return dd;q0=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return dd=e,dd}var fd,U0;function _P(){if(U0)return fd;U0=1;function e(t,r){return t.has(r)}return fd=e,fd}var hd,V0;function EP(){if(V0)return hd;V0=1;var e=kP(),t=CP(),r=_P(),n=1,s=2;function i(o,l,c,u,d,f){var h=c&n,x=o.length,p=l.length;if(x!=p&&!(h&&p>x))return!1;var g=f.get(o),m=f.get(l);if(g&&m)return g==l&&m==o;var y=-1,v=!0,b=c&s?new e:void 0;for(f.set(o,l),f.set(l,o);++y<x;){var S=o[y],j=l[y];if(u)var w=h?u(j,S,y,l,o,f):u(S,j,y,o,l,f);if(w!==void 0){if(w)continue;v=!1;break}if(b){if(!t(l,function(P,A){if(!r(b,A)&&(S===P||d(S,P,c,u,f)))return b.push(A)})){v=!1;break}}else if(!(S===j||d(S,j,c,u,f))){v=!1;break}}return f.delete(o),f.delete(l),v}return hd=i,hd}var md,z0;function VE(){if(z0)return md;z0=1;var e=Dr(),t=e.Uint8Array;return md=t,md}var pd,W0;function zE(){if(W0)return pd;W0=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return pd=e,pd}var gd,H0;function Pg(){if(H0)return gd;H0=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return gd=e,gd}var xd,K0;function WE(){if(K0)return xd;K0=1;var e=Ai(),t=VE(),r=hg(),n=EP(),s=zE(),i=Pg(),o=1,l=2,c="[object Boolean]",u="[object Date]",d="[object Error]",f="[object Map]",h="[object Number]",x="[object RegExp]",p="[object Set]",g="[object String]",m="[object Symbol]",y="[object ArrayBuffer]",v="[object DataView]",b=e?e.prototype:void 0,S=b?b.valueOf:void 0;function j(w,P,A,O,C,k,T){switch(A){case v:if(w.byteLength!=P.byteLength||w.byteOffset!=P.byteOffset)return!1;w=w.buffer,P=P.buffer;case y:return!(w.byteLength!=P.byteLength||!k(new t(w),new t(P)));case c:case u:case h:return r(+w,+P);case d:return w.name==P.name&&w.message==P.message;case x:case g:return w==P+"";case f:var E=s;case p:var $=O&o;if(E||(E=i),w.size!=P.size&&!$)return!1;var L=T.get(w);if(L)return L==P;O|=l,T.set(w,P);var q=n(E(w),E(P),O,C,k,T);return T.delete(w),q;case m:if(S)return S.call(w)==S.call(P)}return!1}return xd=j,xd}var yd,G0;function IP(){if(G0)return yd;G0=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return yd=e,yd}var bd,X0;function HE(){if(X0)return bd;X0=1;var e=IP(),t=Rt();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return bd=r,bd}var vd,Y0;function KE(){if(Y0)return vd;Y0=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return vd=e,vd}var jd,J0;function GE(){if(J0)return jd;J0=1;function e(){return[]}return jd=e,jd}var wd,Z0;function XE(){if(Z0)return wd;Z0=1;var e=KE(),t=GE(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return wd=i,wd}var Nd,Q0;function YE(){if(Q0)return Nd;Q0=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return Nd=e,Nd}var Sd,eb;function JE(){if(eb)return Sd;eb=1;var e=Xr(),t=Yr(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Sd=n,Sd}var Pd,tb;function Ag(){if(tb)return Pd;tb=1;var e=JE(),t=Yr(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return Pd=i,Pd}var Ns={exports:{}},Ad,rb;function ZE(){if(rb)return Ad;rb=1;function e(){return!1}return Ad=e,Ad}Ns.exports;var nb;function DP(){return nb||(nb=1,(function(e,t){var r=Dr(),n=ZE(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Ns,Ns.exports)),Ns.exports}var Od,ab;function Og(){if(ab)return Od;ab=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Od=r,Od}var Td,sb;function Tg(){if(sb)return Td;sb=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Td=t,Td}var kd,ib;function QE(){if(ib)return kd;ib=1;var e=Xr(),t=Tg(),r=Yr(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",d="[object Number]",f="[object Object]",h="[object RegExp]",x="[object Set]",p="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",y="[object DataView]",v="[object Float32Array]",b="[object Float64Array]",S="[object Int8Array]",j="[object Int16Array]",w="[object Int32Array]",P="[object Uint8Array]",A="[object Uint8ClampedArray]",O="[object Uint16Array]",C="[object Uint32Array]",k={};k[v]=k[b]=k[S]=k[j]=k[w]=k[P]=k[A]=k[O]=k[C]=!0,k[n]=k[s]=k[m]=k[i]=k[y]=k[o]=k[l]=k[c]=k[u]=k[d]=k[f]=k[h]=k[x]=k[p]=k[g]=!1;function T(E){return r(E)&&t(E.length)&&!!k[e(E)]}return kd=T,kd}var Cd,ob;function RP(){if(ob)return Cd;ob=1;function e(t){return function(r){return t(r)}}return Cd=e,Cd}var Ss={exports:{}};Ss.exports;var lb;function eI(){return lb||(lb=1,(function(e,t){var r=tP(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Ss,Ss.exports)),Ss.exports}var _d,cb;function MP(){if(cb)return _d;cb=1;var e=QE(),t=RP(),r=eI(),n=r&&r.isTypedArray,s=n?t(n):e;return _d=s,_d}var Ed,ub;function tI(){if(ub)return Ed;ub=1;var e=YE(),t=Ag(),r=Rt(),n=DP(),s=Og(),i=MP(),o=Object.prototype,l=o.hasOwnProperty;function c(u,d){var f=r(u),h=!f&&t(u),x=!f&&!h&&n(u),p=!f&&!h&&!x&&i(u),g=f||h||x||p,m=g?e(u.length,String):[],y=m.length;for(var v in u)(d||l.call(u,v))&&!(g&&(v=="length"||x&&(v=="offset"||v=="parent")||p&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||s(v,y)))&&m.push(v);return m}return Ed=c,Ed}var Id,db;function rI(){if(db)return Id;db=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return Id=t,Id}var Dd,fb;function $P(){if(fb)return Dd;fb=1;function e(t,r){return function(n){return t(r(n))}}return Dd=e,Dd}var Rd,hb;function nI(){if(hb)return Rd;hb=1;var e=$P(),t=e(Object.keys,Object);return Rd=t,Rd}var Md,mb;function aI(){if(mb)return Md;mb=1;var e=rI(),t=nI(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return Md=s,Md}var $d,pb;function ki(){if(pb)return $d;pb=1;var e=fg(),t=Tg();function r(n){return n!=null&&t(n.length)&&!e(n)}return $d=r,$d}var Ld,gb;function nc(){if(gb)return Ld;gb=1;var e=tI(),t=aI(),r=ki();function n(s){return r(s)?e(s):t(s)}return Ld=n,Ld}var Bd,xb;function sI(){if(xb)return Bd;xb=1;var e=HE(),t=XE(),r=nc();function n(s){return e(s,r,t)}return Bd=n,Bd}var Fd,yb;function iI(){if(yb)return Fd;yb=1;var e=sI(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,c,u,d){var f=l&t,h=e(i),x=h.length,p=e(o),g=p.length;if(x!=g&&!f)return!1;for(var m=x;m--;){var y=h[m];if(!(f?y in o:n.call(o,y)))return!1}var v=d.get(i),b=d.get(o);if(v&&b)return v==o&&b==i;var S=!0;d.set(i,o),d.set(o,i);for(var j=f;++m<x;){y=h[m];var w=i[y],P=o[y];if(c)var A=f?c(P,w,y,o,i,d):c(w,P,y,i,o,d);if(!(A===void 0?w===P||u(w,P,l,c,d):A)){S=!1;break}j||(j=y=="constructor")}if(S&&!j){var O=i.constructor,C=o.constructor;O!=C&&"constructor"in i&&"constructor"in o&&!(typeof O=="function"&&O instanceof O&&typeof C=="function"&&C instanceof C)&&(S=!1)}return d.delete(i),d.delete(o),S}return Fd=s,Fd}var qd,bb;function oI(){if(bb)return qd;bb=1;var e=Hn(),t=Dr(),r=e(t,"DataView");return qd=r,qd}var Ud,vb;function lI(){if(vb)return Ud;vb=1;var e=Hn(),t=Dr(),r=e(t,"Promise");return Ud=r,Ud}var Vd,jb;function LP(){if(jb)return Vd;jb=1;var e=Hn(),t=Dr(),r=e(t,"Set");return Vd=r,Vd}var zd,wb;function cI(){if(wb)return zd;wb=1;var e=Hn(),t=Dr(),r=e(t,"WeakMap");return zd=r,zd}var Wd,Nb;function uI(){if(Nb)return Wd;Nb=1;var e=oI(),t=mg(),r=lI(),n=LP(),s=cI(),i=Xr(),o=rP(),l="[object Map]",c="[object Object]",u="[object Promise]",d="[object Set]",f="[object WeakMap]",h="[object DataView]",x=o(e),p=o(t),g=o(r),m=o(n),y=o(s),v=i;return(e&&v(new e(new ArrayBuffer(1)))!=h||t&&v(new t)!=l||r&&v(r.resolve())!=u||n&&v(new n)!=d||s&&v(new s)!=f)&&(v=function(b){var S=i(b),j=S==c?b.constructor:void 0,w=j?o(j):"";if(w)switch(w){case x:return h;case p:return l;case g:return u;case m:return d;case y:return f}return S}),Wd=v,Wd}var Hd,Sb;function dI(){if(Sb)return Hd;Sb=1;var e=TP(),t=EP(),r=WE(),n=iI(),s=uI(),i=Rt(),o=DP(),l=MP(),c=1,u="[object Arguments]",d="[object Array]",f="[object Object]",h=Object.prototype,x=h.hasOwnProperty;function p(g,m,y,v,b,S){var j=i(g),w=i(m),P=j?d:s(g),A=w?d:s(m);P=P==u?f:P,A=A==u?f:A;var O=P==f,C=A==f,k=P==A;if(k&&o(g)){if(!o(m))return!1;j=!0,O=!1}if(k&&!O)return S||(S=new e),j||l(g)?t(g,m,y,v,b,S):r(g,m,P,y,v,b,S);if(!(y&c)){var T=O&&x.call(g,"__wrapped__"),E=C&&x.call(m,"__wrapped__");if(T||E){var $=T?g.value():g,L=E?m.value():m;return S||(S=new e),b($,L,y,v,S)}}return k?(S||(S=new e),n(g,m,y,v,b,S)):!1}return Hd=p,Hd}var Kd,Pb;function kg(){if(Pb)return Kd;Pb=1;var e=dI(),t=Yr();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return Kd=r,Kd}var Gd,Ab;function fI(){if(Ab)return Gd;Ab=1;var e=TP(),t=kg(),r=1,n=2;function s(i,o,l,c){var u=l.length,d=u,f=!c;if(i==null)return!d;for(i=Object(i);u--;){var h=l[u];if(f&&h[2]?h[1]!==i[h[0]]:!(h[0]in i))return!1}for(;++u<d;){h=l[u];var x=h[0],p=i[x],g=h[1];if(f&&h[2]){if(p===void 0&&!(x in i))return!1}else{var m=new e;if(c)var y=c(p,g,x,i,o,m);if(!(y===void 0?t(g,p,r|n,c,m):y))return!1}}return!0}return Gd=s,Gd}var Xd,Ob;function BP(){if(Ob)return Xd;Ob=1;var e=mn();function t(r){return r===r&&!e(r)}return Xd=t,Xd}var Yd,Tb;function hI(){if(Tb)return Yd;Tb=1;var e=BP(),t=nc();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return Yd=r,Yd}var Jd,kb;function FP(){if(kb)return Jd;kb=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return Jd=e,Jd}var Zd,Cb;function mI(){if(Cb)return Zd;Cb=1;var e=fI(),t=hI(),r=FP();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return Zd=n,Zd}var Qd,_b;function pI(){if(_b)return Qd;_b=1;function e(t,r){return t!=null&&r in Object(t)}return Qd=e,Qd}var ef,Eb;function gI(){if(Eb)return ef;Eb=1;var e=sP(),t=Ag(),r=Rt(),n=Og(),s=Tg(),i=Zl();function o(l,c,u){c=e(c,l);for(var d=-1,f=c.length,h=!1;++d<f;){var x=i(c[d]);if(!(h=l!=null&&u(l,x)))break;l=l[x]}return h||++d!=f?h:(f=l==null?0:l.length,!!f&&s(f)&&n(x,f)&&(r(l)||t(l)))}return ef=o,ef}var tf,Ib;function xI(){if(Ib)return tf;Ib=1;var e=pI(),t=gI();function r(n,s){return n!=null&&t(n,s,e)}return tf=r,tf}var rf,Db;function yI(){if(Db)return rf;Db=1;var e=kg(),t=iP(),r=xI(),n=dg(),s=BP(),i=FP(),o=Zl(),l=1,c=2;function u(d,f){return n(d)&&s(f)?i(o(d),f):function(h){var x=t(h,d);return x===void 0&&x===f?r(h,d):e(f,x,l|c)}}return rf=u,rf}var nf,Rb;function Ha(){if(Rb)return nf;Rb=1;function e(t){return t}return nf=e,nf}var af,Mb;function bI(){if(Mb)return af;Mb=1;function e(t){return function(r){return r?.[t]}}return af=e,af}var sf,$b;function vI(){if($b)return sf;$b=1;var e=xg();function t(r){return function(n){return e(n,r)}}return sf=t,sf}var of,Lb;function jI(){if(Lb)return of;Lb=1;var e=bI(),t=vI(),r=dg(),n=Zl();function s(i){return r(i)?e(n(i)):t(i)}return of=s,of}var lf,Bb;function pn(){if(Bb)return lf;Bb=1;var e=mI(),t=yI(),r=Ha(),n=Rt(),s=jI();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return lf=i,lf}var cf,Fb;function qP(){if(Fb)return cf;Fb=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return cf=e,cf}var uf,qb;function wI(){if(qb)return uf;qb=1;function e(t){return t!==t}return uf=e,uf}var df,Ub;function NI(){if(Ub)return df;Ub=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return df=e,df}var ff,Vb;function SI(){if(Vb)return ff;Vb=1;var e=qP(),t=wI(),r=NI();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return ff=n,ff}var hf,zb;function PI(){if(zb)return hf;zb=1;var e=SI();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return hf=t,hf}var mf,Wb;function AI(){if(Wb)return mf;Wb=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return mf=e,mf}var pf,Hb;function OI(){if(Hb)return pf;Hb=1;function e(){}return pf=e,pf}var gf,Kb;function TI(){if(Kb)return gf;Kb=1;var e=LP(),t=OI(),r=Pg(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return gf=s,gf}var xf,Gb;function kI(){if(Gb)return xf;Gb=1;var e=kP(),t=PI(),r=AI(),n=_P(),s=TI(),i=Pg(),o=200;function l(c,u,d){var f=-1,h=t,x=c.length,p=!0,g=[],m=g;if(d)p=!1,h=r;else if(x>=o){var y=u?null:s(c);if(y)return i(y);p=!1,h=n,m=new e}else m=u?[]:g;e:for(;++f<x;){var v=c[f],b=u?u(v):v;if(v=d||v!==0?v:0,p&&b===b){for(var S=m.length;S--;)if(m[S]===b)continue e;u&&m.push(b),g.push(v)}else h(m,b,d)||(m!==g&&m.push(b),g.push(v))}return g}return xf=l,xf}var yf,Xb;function CI(){if(Xb)return yf;Xb=1;var e=pn(),t=kI();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return yf=r,yf}var _I=CI();const Yb=$e(_I);function UP(e,t,r){return t===!0?Yb(e,r):we(t)?Yb(e,t):e}function va(e){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(e)}var EI=["ref"];function Jb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jb(Object(r),!0).forEach(function(n){ac(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jb(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function II(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,zP(n.key),n)}}function DI(e,t,r){return t&&Zb(e.prototype,t),r&&Zb(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function RI(e,t,r){return t=Ho(t),MI(e,VP()?Reflect.construct(t,r||[],Ho(e).constructor):t.apply(e,r))}function MI(e,t){if(t&&(va(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $I(e)}function $I(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(VP=function(){return!!e})()}function Ho(e){return Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ho(e)}function LI(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&km(e,t)}function km(e,t){return km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},km(e,t)}function ac(e,t,r){return t=zP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zP(e){var t=BI(e,"string");return va(t)=="symbol"?t:t+""}function BI(e,t){if(va(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(va(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function FI(e,t){if(e==null)return{};var r=qI(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function qI(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UI(e){return e.value}function VI(e,t){if(_.isValidElement(e))return _.cloneElement(e,t);if(typeof e=="function")return _.createElement(e,t);t.ref;var r=FI(t,EI);return _.createElement(Sg,r)}var Qb=1,Dn=(function(e){function t(){var r;II(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=RI(this,t,[].concat(s)),ac(r,"lastBoundingBox",{width:-1,height:-1}),r}return LI(t,e),DI(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>Qb||Math.abs(s.height-this.lastBoundingBox.height)>Qb)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Rr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,d=s.chartHeight,f,h;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var x=this.getBBoxSnapshot();f={left:((u||0)-x.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var p=this.getBBoxSnapshot();h={top:((d||0)-p.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Rr(Rr({},f),h)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,d=s.payload,f=Rr(Rr({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return _.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(x){n.wrapperNode=x}},VI(i,Rr(Rr({},this.props),{},{payload:UP(d,u,UI)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Rr(Rr({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&te(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(N.PureComponent);ac(Dn,"displayName","Legend");ac(Dn,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var bf,ev;function zI(){if(ev)return bf;ev=1;var e=Ai(),t=Ag(),r=Rt(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return bf=s,bf}var vf,tv;function WP(){if(tv)return vf;tv=1;var e=IP(),t=zI();function r(n,s,i,o,l){var c=-1,u=n.length;for(i||(i=t),l||(l=[]);++c<u;){var d=n[c];s>0&&i(d)?s>1?r(d,s-1,i,o,l):e(l,d):o||(l[l.length]=d)}return l}return vf=r,vf}var jf,rv;function WI(){if(rv)return jf;rv=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var u=l[t?c:++i];if(n(o[u],u,o)===!1)break}return r}}return jf=e,jf}var wf,nv;function HI(){if(nv)return wf;nv=1;var e=WI(),t=e();return wf=t,wf}var Nf,av;function HP(){if(av)return Nf;av=1;var e=HI(),t=nc();function r(n,s){return n&&e(n,s,t)}return Nf=r,Nf}var Sf,sv;function KI(){if(sv)return Sf;sv=1;var e=ki();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,c=Object(s);(n?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return Sf=t,Sf}var Pf,iv;function Cg(){if(iv)return Pf;iv=1;var e=HP(),t=KI(),r=t(e);return Pf=r,Pf}var Af,ov;function KP(){if(ov)return Af;ov=1;var e=Cg(),t=ki();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,c,u){o[++i]=s(l,c,u)}),o}return Af=r,Af}var Of,lv;function GI(){if(lv)return Of;lv=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return Of=e,Of}var Tf,cv;function XI(){if(cv)return Tf;cv=1;var e=za();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=n!==void 0,u=n===null,d=n===n,f=e(n);if(!u&&!f&&!l&&r>n||l&&c&&d&&!u&&!f||i&&c&&d||!s&&d||!o)return 1;if(!i&&!l&&!f&&r<n||f&&s&&o&&!i&&!l||u&&s&&o||!c&&o||!d)return-1}return 0}return Tf=t,Tf}var kf,uv;function YI(){if(uv)return kf;uv=1;var e=XI();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,c=o.length,u=s.length;++i<c;){var d=e(o[i],l[i]);if(d){if(i>=u)return d;var f=s[i];return d*(f=="desc"?-1:1)}}return r.index-n.index}return kf=t,kf}var Cf,dv;function JI(){if(dv)return Cf;dv=1;var e=gg(),t=xg(),r=pn(),n=KP(),s=GI(),i=RP(),o=YI(),l=Ha(),c=Rt();function u(d,f,h){f.length?f=e(f,function(g){return c(g)?function(m){return t(m,g.length===1?g[0]:g)}:g}):f=[l];var x=-1;f=e(f,i(r));var p=n(d,function(g,m,y){var v=e(f,function(b){return b(g)});return{criteria:v,index:++x,value:g}});return s(p,function(g,m){return o(g,m,h)})}return Cf=u,Cf}var _f,fv;function ZI(){if(fv)return _f;fv=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return _f=e,_f}var Ef,hv;function QI(){if(hv)return Ef;hv=1;var e=ZI(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var d=Array(s+1);++l<s;)d[l]=o[l];return d[s]=i(u),e(n,this,d)}}return Ef=r,Ef}var If,mv;function eD(){if(mv)return If;mv=1;function e(t){return function(){return t}}return If=e,If}var Df,pv;function GP(){if(pv)return Df;pv=1;var e=Hn(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return Df=t,Df}var Rf,gv;function tD(){if(gv)return Rf;gv=1;var e=eD(),t=GP(),r=Ha(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return Rf=n,Rf}var Mf,xv;function rD(){if(xv)return Mf;xv=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return Mf=n,Mf}var $f,yv;function nD(){if(yv)return $f;yv=1;var e=tD(),t=rD(),r=t(e);return $f=r,$f}var Lf,bv;function aD(){if(bv)return Lf;bv=1;var e=Ha(),t=QI(),r=nD();function n(s,i){return r(t(s,i,e),s+"")}return Lf=n,Lf}var Bf,vv;function sc(){if(vv)return Bf;vv=1;var e=hg(),t=ki(),r=Og(),n=mn();function s(i,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return Bf=s,Bf}var Ff,jv;function sD(){if(jv)return Ff;jv=1;var e=WP(),t=JI(),r=aD(),n=sc(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return Ff=s,Ff}var iD=sD();const _g=$e(iD);function Us(e){"@babel/helpers - typeof";return Us=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Us(e)}function Cm(){return Cm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cm.apply(this,arguments)}function oD(e,t){return dD(e)||uD(e,t)||cD(e,t)||lD()}function lD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cD(e,t){if(e){if(typeof e=="string")return wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wv(e,t)}}function wv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uD(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function dD(e){if(Array.isArray(e))return e}function Nv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Nv(Object(r),!0).forEach(function(n){fD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fD(e,t,r){return t=hD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hD(e){var t=mD(e,"string");return Us(t)=="symbol"?t:t+""}function mD(e,t){if(Us(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Us(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pD(e){return Array.isArray(e)&&at(e[0])&&at(e[1])?e.join(" ~ "):e}var gD=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,h=t.itemSorter,x=t.wrapperClassName,p=t.labelClassName,g=t.label,m=t.labelFormatter,y=t.accessibilityLayer,v=y===void 0?!1:y,b=function(){if(d&&d.length){var T={padding:0,margin:0},E=(h?_g(d,h):d).map(function($,L){if($.type==="none")return null;var q=qf({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),z=$.formatter||f||pD,K=$.value,G=$.name,Z=K,R=G;if(z&&Z!=null&&R!=null){var F=z(K,G,$,L,d);if(Array.isArray(F)){var H=oD(F,2);Z=H[0],R=H[1]}else Z=F}return _.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:q},at(R)?_.createElement("span",{className:"recharts-tooltip-item-name"},R):null,at(R)?_.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,_.createElement("span",{className:"recharts-tooltip-item-value"},Z),_.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return _.createElement("ul",{className:"recharts-tooltip-item-list",style:T},E)}return null},S=qf({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),j=qf({margin:0},u),w=!Se(g),P=w?g:"",A=Te("recharts-default-tooltip",x),O=Te("recharts-tooltip-label",p);w&&m&&d!==void 0&&d!==null&&(P=m(g,d));var C=v?{role:"status","aria-live":"assertive"}:{};return _.createElement("div",Cm({className:A,style:S},C),_.createElement("p",{className:O,style:j},_.isValidElement(P)?P:"".concat(P)),b())};function Vs(e){"@babel/helpers - typeof";return Vs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vs(e)}function Yi(e,t,r){return t=xD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xD(e){var t=yD(e,"string");return Vs(t)=="symbol"?t:t+""}function yD(e,t){if(Vs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ls="recharts-tooltip-wrapper",bD={visibility:"hidden"};function vD(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Te(ls,Yi(Yi(Yi(Yi({},"".concat(ls,"-right"),te(r)&&t&&te(t.x)&&r>=t.x),"".concat(ls,"-left"),te(r)&&t&&te(t.x)&&r<t.x),"".concat(ls,"-bottom"),te(n)&&t&&te(t.y)&&n>=t.y),"".concat(ls,"-top"),te(n)&&t&&te(t.y)&&n<t.y))}function Sv(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&te(i[n]))return i[n];var d=r[n]-l-s,f=r[n]+s;if(t[n])return o[n]?d:f;if(o[n]){var h=d,x=c[n];return h<x?Math.max(f,c[n]):Math.max(d,c[n])}var p=f+l,g=c[n]+u;return p>g?Math.max(d,c[n]):Math.max(f,c[n])}function jD(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function wD(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=Sv({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=Sv({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=jD({translateX:d,translateY:f,useTranslate3d:l})):u=bD,{cssProperties:u,cssClasses:vD({translateX:d,translateY:f,coordinate:r})}}function ja(e){"@babel/helpers - typeof";return ja=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ja(e)}function Pv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Av(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pv(Object(r),!0).forEach(function(n){Em(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ND(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YP(n.key),n)}}function PD(e,t,r){return t&&SD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function AD(e,t,r){return t=Ko(t),OD(e,XP()?Reflect.construct(t,r||[],Ko(e).constructor):t.apply(e,r))}function OD(e,t){if(t&&(ja(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return TD(e)}function TD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XP=function(){return!!e})()}function Ko(e){return Ko=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ko(e)}function kD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_m(e,t)}function _m(e,t){return _m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_m(e,t)}function Em(e,t,r){return t=YP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YP(e){var t=CD(e,"string");return ja(t)=="symbol"?t:t+""}function CD(e,t){if(ja(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ja(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ov=1,_D=(function(e){function t(){var r;ND(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=AD(this,t,[].concat(s)),Em(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Em(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return kD(t,e),PD(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>Ov||Math.abs(n.height-this.state.lastBoundingBox.height)>Ov)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,d=s.coordinate,f=s.hasPayload,h=s.isAnimationActive,x=s.offset,p=s.position,g=s.reverseDirection,m=s.useTranslate3d,y=s.viewBox,v=s.wrapperStyle,b=wD({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:x,position:p,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:m,viewBox:y}),S=b.cssClasses,j=b.cssProperties,w=Av(Av({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},j),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},v);return _.createElement("div",{tabIndex:-1,className:S,style:w,ref:function(A){n.wrapperNode=A}},u)}}])})(N.PureComponent),ED=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ka={isSsr:ED()};function wa(e){"@babel/helpers - typeof";return wa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wa(e)}function Tv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tv(Object(r),!0).forEach(function(n){Eg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ID(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZP(n.key),n)}}function RD(e,t,r){return t&&DD(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function MD(e,t,r){return t=Go(t),$D(e,JP()?Reflect.construct(t,r||[],Go(e).constructor):t.apply(e,r))}function $D(e,t){if(t&&(wa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return LD(e)}function LD(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JP(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JP=function(){return!!e})()}function Go(e){return Go=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Go(e)}function BD(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Im(e,t)}function Im(e,t){return Im=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Im(e,t)}function Eg(e,t,r){return t=ZP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZP(e){var t=FD(e,"string");return wa(t)=="symbol"?t:t+""}function FD(e,t){if(wa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function qD(e){return e.dataKey}function UD(e,t){return _.isValidElement(e)?_.cloneElement(e,t):typeof e=="function"?_.createElement(e,t):_.createElement(gD,t)}var Pr=(function(e){function t(){return ID(this,t),MD(this,t,arguments)}return BD(t,e),RD(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,d=s.coordinate,f=s.filterNull,h=s.isAnimationActive,x=s.offset,p=s.payload,g=s.payloadUniqBy,m=s.position,y=s.reverseDirection,v=s.useTranslate3d,b=s.viewBox,S=s.wrapperStyle,j=p??[];f&&j.length&&(j=UP(p.filter(function(P){return P.value!=null&&(P.hide!==!0||n.props.includeHidden)}),g,qD));var w=j.length>0;return _.createElement(_D,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:d,hasPayload:w,offset:x,position:m,reverseDirection:y,useTranslate3d:v,viewBox:b,wrapperStyle:S},UD(u,kv(kv({},this.props),{},{payload:j})))}}])})(N.PureComponent);Eg(Pr,"displayName","Tooltip");Eg(Pr,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ka.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Uf,Cv;function VD(){if(Cv)return Uf;Cv=1;var e=Dr(),t=function(){return e.Date.now()};return Uf=t,Uf}var Vf,_v;function zD(){if(_v)return Vf;_v=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return Vf=t,Vf}var zf,Ev;function WD(){if(Ev)return zf;Ev=1;var e=zD(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return zf=r,zf}var Wf,Iv;function QP(){if(Iv)return Wf;Iv=1;var e=WD(),t=mn(),r=za(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var d=typeof u.valueOf=="function"?u.valueOf():u;u=t(d)?d+"":d}if(typeof u!="string")return u===0?u:+u;u=e(u);var f=i.test(u);return f||o.test(u)?l(u.slice(2),f?2:8):s.test(u)?n:+u}return Wf=c,Wf}var Hf,Dv;function HD(){if(Dv)return Hf;Dv=1;var e=mn(),t=VD(),r=QP(),n="Expected a function",s=Math.max,i=Math.min;function o(l,c,u){var d,f,h,x,p,g,m=0,y=!1,v=!1,b=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,e(u)&&(y=!!u.leading,v="maxWait"in u,h=v?s(r(u.maxWait)||0,c):h,b="trailing"in u?!!u.trailing:b);function S(E){var $=d,L=f;return d=f=void 0,m=E,x=l.apply(L,$),x}function j(E){return m=E,p=setTimeout(A,c),y?S(E):x}function w(E){var $=E-g,L=E-m,q=c-$;return v?i(q,h-L):q}function P(E){var $=E-g,L=E-m;return g===void 0||$>=c||$<0||v&&L>=h}function A(){var E=t();if(P(E))return O(E);p=setTimeout(A,w(E))}function O(E){return p=void 0,b&&d?S(E):(d=f=void 0,x)}function C(){p!==void 0&&clearTimeout(p),m=0,d=g=f=p=void 0}function k(){return p===void 0?x:O(t())}function T(){var E=t(),$=P(E);if(d=arguments,f=this,g=E,$){if(p===void 0)return j(g);if(v)return clearTimeout(p),p=setTimeout(A,c),S(g)}return p===void 0&&(p=setTimeout(A,c)),x}return T.cancel=C,T.flush=k,T}return Hf=o,Hf}var Kf,Rv;function KD(){if(Rv)return Kf;Rv=1;var e=HD(),t=mn(),r="Expected a function";function n(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return Kf=n,Kf}var GD=KD();const eA=$e(GD);function zs(e){"@babel/helpers - typeof";return zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zs(e)}function Mv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ji(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mv(Object(r),!0).forEach(function(n){XD(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XD(e,t,r){return t=YD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YD(e){var t=JD(e,"string");return zs(t)=="symbol"?t:t+""}function JD(e,t){if(zs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZD(e,t){return rR(e)||tR(e,t)||eR(e,t)||QD()}function QD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eR(e,t){if(e){if(typeof e=="string")return $v(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $v(e,t)}}function $v(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tR(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function rR(e){if(Array.isArray(e))return e}var nR=N.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,d=u===void 0?0:u,f=e.minHeight,h=e.maxHeight,x=e.children,p=e.debounce,g=p===void 0?0:p,m=e.id,y=e.className,v=e.onResize,b=e.style,S=b===void 0?{}:b,j=N.useRef(null),w=N.useRef();w.current=v,N.useImperativeHandle(t,function(){return Object.defineProperty(j.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),j.current},configurable:!0})});var P=N.useState({containerWidth:s.width,containerHeight:s.height}),A=ZD(P,2),O=A[0],C=A[1],k=N.useCallback(function(E,$){C(function(L){var q=Math.round(E),z=Math.round($);return L.containerWidth===q&&L.containerHeight===z?L:{containerWidth:q,containerHeight:z}})},[]);N.useEffect(function(){var E=function(G){var Z,R=G[0].contentRect,F=R.width,H=R.height;k(F,H),(Z=w.current)===null||Z===void 0||Z.call(w,F,H)};g>0&&(E=eA(E,g,{trailing:!0,leading:!1}));var $=new ResizeObserver(E),L=j.current.getBoundingClientRect(),q=L.width,z=L.height;return k(q,z),$.observe(j.current),function(){$.disconnect()}},[k,g]);var T=N.useMemo(function(){var E=O.containerWidth,$=O.containerHeight;if(E<0||$<0)return null;qr(An(o)||An(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),qr(!r||r>0,"The aspect(%s) must be greater than zero.",r);var L=An(o)?E:o,q=An(c)?$:c;r&&r>0&&(L?q=L/r:q&&(L=q*r),h&&q>h&&(q=h)),qr(L>0||q>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,q,o,c,d,f,r);var z=!Array.isArray(x)&&Fr(x.type).endsWith("Chart");return _.Children.map(x,function(K){return _.isValidElement(K)?N.cloneElement(K,Ji({width:L,height:q},z?{style:Ji({height:"100%",width:"100%",maxHeight:q,maxWidth:L},K.props.style)}:{})):K})},[r,x,c,h,f,d,O,o]);return _.createElement("div",{id:m?"".concat(m):void 0,className:Te("recharts-responsive-container",y),style:Ji(Ji({},S),{},{width:o,height:c,minWidth:d,minHeight:f,maxHeight:h}),ref:j},T)}),tA=function(t){return null};tA.displayName="Cell";function Ws(e){"@babel/helpers - typeof";return Ws=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(e)}function Lv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lv(Object(r),!0).forEach(function(n){aR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aR(e,t,r){return t=sR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sR(e){var t=iR(e,"string");return Ws(t)=="symbol"?t:t+""}function iR(e,t){if(Ws(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ws(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Jn={widthCache:{},cacheCount:0},oR=2e3,lR={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Bv="recharts_measurement_span";function cR(e){var t=Dm({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Cs=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ka.isSsr)return{width:0,height:0};var n=cR(r),s=JSON.stringify({text:t,copyStyle:n});if(Jn.widthCache[s])return Jn.widthCache[s];try{var i=document.getElementById(Bv);i||(i=document.createElement("span"),i.setAttribute("id",Bv),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Dm(Dm({},lR),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Jn.widthCache[s]=c,++Jn.cacheCount>oR&&(Jn.cacheCount=0,Jn.widthCache={}),c}catch{return{width:0,height:0}}},uR=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Hs(e){"@babel/helpers - typeof";return Hs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hs(e)}function Xo(e,t){return mR(e)||hR(e,t)||fR(e,t)||dR()}function dR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fR(e,t){if(e){if(typeof e=="string")return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fv(e,t)}}function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hR(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function mR(e){if(Array.isArray(e))return e}function pR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xR(n.key),n)}}function gR(e,t,r){return t&&qv(e.prototype,t),r&&qv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xR(e){var t=yR(e,"string");return Hs(t)=="symbol"?t:t+""}function yR(e,t){if(Hs(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Hs(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Uv=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Vv=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,bR=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,vR=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rA={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},jR=Object.keys(rA),na="NaN";function wR(e,t){return e*rA[t]}var Zi=(function(){function e(t,r){pR(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!bR.test(r)&&(this.num=NaN,this.unit=""),jR.includes(r)&&(this.num=wR(t,r),this.unit="px")}return gR(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=vR.exec(r))!==null&&n!==void 0?n:[],i=Xo(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function nA(e){if(e.includes(na))return na;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=Uv.exec(t))!==null&&r!==void 0?r:[],s=Xo(n,4),i=s[1],o=s[2],l=s[3],c=Zi.parse(i??""),u=Zi.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return na;t=t.replace(Uv,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,h=(f=Vv.exec(t))!==null&&f!==void 0?f:[],x=Xo(h,4),p=x[1],g=x[2],m=x[3],y=Zi.parse(p??""),v=Zi.parse(m??""),b=g==="+"?y.add(v):y.subtract(v);if(b.isNaN())return na;t=t.replace(Vv,b.toString())}return t}var zv=/\(([^()]*)\)/;function NR(e){for(var t=e;t.includes("(");){var r=zv.exec(t),n=Xo(r,2),s=n[1];t=t.replace(zv,nA(s))}return t}function SR(e){var t=e.replace(/\s+/g,"");return t=NR(t),t=nA(t),t}function PR(e){try{return SR(e)}catch{return na}}function Gf(e){var t=PR(e.slice(5,-1));return t===na?"":t}var AR=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],OR=["dx","dy","angle","className","breakAll"];function Rm(){return Rm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rm.apply(this,arguments)}function Wv(e,t){if(e==null)return{};var r=TR(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function TR(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Hv(e,t){return ER(e)||_R(e,t)||CR(e,t)||kR()}function kR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function CR(e,t){if(e){if(typeof e=="string")return Kv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kv(e,t)}}function Kv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _R(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ER(e){if(Array.isArray(e))return e}var aA=/[ \f\n\r\t\v\u2028\u2029]+/,sA=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];Se(r)||(n?i=r.toString().split(""):i=r.toString().split(aA));var o=i.map(function(c){return{word:c,width:Cs(c,s).width}}),l=n?0:Cs("Â ",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},IR=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=te(o),f=l,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(q,z){var K=z.word,G=z.width,Z=q[q.length-1];if(Z&&(s==null||i||Z.width+G+n<Number(s)))Z.words.push(K),Z.width+=G+n;else{var R={words:[K],width:G};q.push(R)}return q},[])},x=h(r),p=function(L){return L.reduce(function(q,z){return q.width>z.width?q:z})};if(!d)return x;for(var g="â€¦",m=function(L){var q=f.slice(0,L),z=sA({breakAll:u,style:c,children:q+g}).wordsWithComputedWidth,K=h(z),G=K.length>o||p(K).width>Number(s);return[G,K]},y=0,v=f.length-1,b=0,S;y<=v&&b<=f.length-1;){var j=Math.floor((y+v)/2),w=j-1,P=m(w),A=Hv(P,2),O=A[0],C=A[1],k=m(j),T=Hv(k,1),E=T[0];if(!O&&!E&&(y=j+1),O&&E&&(v=j-1),!O&&E){S=C;break}b++}return S||x},Gv=function(t){var r=Se(t)?[]:t.toString().split(aA);return[{words:r}]},DR=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ka.isSsr){var c,u,d=sA({breakAll:o,children:s,style:i});if(d){var f=d.wordsWithComputedWidth,h=d.spaceWidth;c=f,u=h}else return Gv(s);return IR({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return Gv(s)},Xv="#808080",Yo=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,h=t.textAnchor,x=h===void 0?"start":h,p=t.verticalAnchor,g=p===void 0?"end":p,m=t.fill,y=m===void 0?Xv:m,v=Wv(t,AR),b=N.useMemo(function(){return DR({breakAll:v.breakAll,children:v.children,maxLines:v.maxLines,scaleToFit:f,style:v.style,width:v.width})},[v.breakAll,v.children,v.maxLines,f,v.style,v.width]),S=v.dx,j=v.dy,w=v.angle,P=v.className,A=v.breakAll,O=Wv(v,OR);if(!at(n)||!at(i))return null;var C=n+(te(S)?S:0),k=i+(te(j)?j:0),T;switch(g){case"start":T=Gf("calc(".concat(u,")"));break;case"middle":T=Gf("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:T=Gf("calc(".concat(b.length-1," * -").concat(l,")"));break}var E=[];if(f){var $=b[0].width,L=v.width;E.push("scale(".concat((te(L)?L/$:1)/$,")"))}return w&&E.push("rotate(".concat(w,", ").concat(C,", ").concat(k,")")),E.length&&(O.transform=E.join(" ")),_.createElement("text",Rm({},Ae(O,!0),{x:C,y:k,className:Te("recharts-text",P),textAnchor:x,fill:y.includes("url")?Xv:y}),b.map(function(q,z){var K=q.words.join(A?"":" ");return _.createElement("tspan",{x:C,dy:z===0?T:l,key:"".concat(K,"-").concat(z)},K)}))};function ln(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function RR(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ig(e){let t,r,n;e.length!==2?(t=ln,r=(l,c)=>ln(e(l),c),n=(l,c)=>e(l)-c):(t=e===ln||e===RR?e:MR,r=e,n=e);function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=s(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function MR(){return 0}function iA(e){return e===null?NaN:+e}function*$R(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const LR=Ig(ln),Ci=LR.right;Ig(iA).center;class Yv extends Map{constructor(t,r=qR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(Jv(this,t))}has(t){return super.has(Jv(this,t))}set(t,r){return super.set(BR(this,t),r)}delete(t){return super.delete(FR(this,t))}}function Jv({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function BR({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function FR({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function qR(e){return e!==null&&typeof e=="object"?e.valueOf():e}function UR(e=ln){if(e===ln)return oA;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function oA(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const VR=Math.sqrt(50),zR=Math.sqrt(10),WR=Math.sqrt(2);function Jo(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=VR?10:i>=zR?5:i>=WR?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Jo(e,t,r*2):[l,c,u]}function Mm(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?Jo(t,e,r):Jo(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function $m(e,t,r){return t=+t,e=+e,r=+r,Jo(e,t,r)[2]}function Lm(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?$m(t,e,r):$m(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function Zv(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Qv(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function lA(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?oA:UR(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),x=Math.max(r,Math.floor(t-u*f/c+h)),p=Math.min(n,Math.floor(t+(c-u)*f/c+h));lA(e,t,x,p,s)}const i=e[t];let o=r,l=n;for(cs(e,r,t),s(e[n],i)>0&&cs(e,r,n);o<l;){for(cs(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?cs(e,r,l):(++l,cs(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function cs(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function HR(e,t,r){if(e=Float64Array.from($R(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Qv(e);if(t>=1)return Zv(e);var n,s=(n-1)*t,i=Math.floor(s),o=Zv(lA(e,i).subarray(0,i+1)),l=Qv(e.subarray(i+1));return o+(l-o)*(s-i)}}function KR(e,t,r=iA){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function GR(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function ar(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Jr(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Bm=Symbol("implicit");function Dg(){var e=new Yv,t=[],r=[],n=Bm;function s(i){let o=e.get(i);if(o===void 0){if(n!==Bm)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new Yv;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Dg(t,r).unknown(n)},ar.apply(s,arguments),s}function Ks(){var e=Dg().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,x=s<n,p=x?s:n,g=x?n:s;i=(g-p)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),p+=(g-p-i*(h-c))*d,o=i*(1-c),l&&(p=Math.round(p),o=Math.round(o));var m=GR(h).map(function(y){return p+i*y});return r(x?m.reverse():m)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,s]=h,n=+n,s=+s,f()):[n,s]},e.rangeRound=function(h){return[n,s]=h,n=+n,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return Ks(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(d)},ar.apply(f(),arguments)}function cA(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return cA(t())},e}function _s(){return cA(Ks.apply(null,arguments).paddingInner(1))}function Rg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function uA(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function _i(){}var Gs=.7,Zo=1/Gs,fa="\\s*([+-]?\\d+)\\s*",Xs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",XR=/^#([0-9a-f]{3,8})$/,YR=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),JR=new RegExp(`^rgb\\(${Tr},${Tr},${Tr}\\)$`),ZR=new RegExp(`^rgba\\(${fa},${fa},${fa},${Xs}\\)$`),QR=new RegExp(`^rgba\\(${Tr},${Tr},${Tr},${Xs}\\)$`),eM=new RegExp(`^hsl\\(${Xs},${Tr},${Tr}\\)$`),tM=new RegExp(`^hsla\\(${Xs},${Tr},${Tr},${Xs}\\)$`),ej={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rg(_i,Ys,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:tj,formatHex:tj,formatHex8:rM,formatHsl:nM,formatRgb:rj,toString:rj});function tj(){return this.rgb().formatHex()}function rM(){return this.rgb().formatHex8()}function nM(){return dA(this).formatHsl()}function rj(){return this.rgb().formatRgb()}function Ys(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=XR.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?nj(t):r===3?new Ct(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Qi(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Qi(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=YR.exec(e))?new Ct(t[1],t[2],t[3],1):(t=JR.exec(e))?new Ct(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ZR.exec(e))?Qi(t[1],t[2],t[3],t[4]):(t=QR.exec(e))?Qi(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=eM.exec(e))?ij(t[1],t[2]/100,t[3]/100,1):(t=tM.exec(e))?ij(t[1],t[2]/100,t[3]/100,t[4]):ej.hasOwnProperty(e)?nj(ej[e]):e==="transparent"?new Ct(NaN,NaN,NaN,0):null}function nj(e){return new Ct(e>>16&255,e>>8&255,e&255,1)}function Qi(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ct(e,t,r,n)}function aM(e){return e instanceof _i||(e=Ys(e)),e?(e=e.rgb(),new Ct(e.r,e.g,e.b,e.opacity)):new Ct}function Fm(e,t,r,n){return arguments.length===1?aM(e):new Ct(e,t,r,n??1)}function Ct(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Rg(Ct,Fm,uA(_i,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Gs:Math.pow(Gs,e),new Ct(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Ct(Rn(this.r),Rn(this.g),Rn(this.b),Qo(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aj,formatHex:aj,formatHex8:sM,formatRgb:sj,toString:sj}));function aj(){return`#${On(this.r)}${On(this.g)}${On(this.b)}`}function sM(){return`#${On(this.r)}${On(this.g)}${On(this.b)}${On((isNaN(this.opacity)?1:this.opacity)*255)}`}function sj(){const e=Qo(this.opacity);return`${e===1?"rgb(":"rgba("}${Rn(this.r)}, ${Rn(this.g)}, ${Rn(this.b)}${e===1?")":`, ${e})`}`}function Qo(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function On(e){return e=Rn(e),(e<16?"0":"")+e.toString(16)}function ij(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new hr(e,t,r,n)}function dA(e){if(e instanceof hr)return new hr(e.h,e.s,e.l,e.opacity);if(e instanceof _i||(e=Ys(e)),!e)return new hr;if(e instanceof hr)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new hr(o,l,c,e.opacity)}function iM(e,t,r,n){return arguments.length===1?dA(e):new hr(e,t,r,n??1)}function hr(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Rg(hr,iM,uA(_i,{brighter(e){return e=e==null?Zo:Math.pow(Zo,e),new hr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Gs:Math.pow(Gs,e),new hr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new Ct(Xf(e>=240?e-240:e+120,s,n),Xf(e,s,n),Xf(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new hr(oj(this.h),eo(this.s),eo(this.l),Qo(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Qo(this.opacity);return`${e===1?"hsl(":"hsla("}${oj(this.h)}, ${eo(this.s)*100}%, ${eo(this.l)*100}%${e===1?")":`, ${e})`}`}}));function oj(e){return e=(e||0)%360,e<0?e+360:e}function eo(e){return Math.max(0,Math.min(1,e||0))}function Xf(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Mg=e=>()=>e;function oM(e,t){return function(r){return e+r*t}}function lM(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function cM(e){return(e=+e)==1?fA:function(t,r){return r-t?lM(t,r,e):Mg(isNaN(t)?r:t)}}function fA(e,t){var r=t-e;return r?oM(e,r):Mg(isNaN(e)?t:e)}const lj=(function e(t){var r=cM(t);function n(s,i){var o=r((s=Fm(s)).r,(i=Fm(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=fA(s.opacity,i.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=c(d),s.opacity=u(d),s+""}}return n.gamma=e,n})(1);function uM(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function dM(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function fM(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Ga(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function hM(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function el(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function mM(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Ga(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var qm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yf=new RegExp(qm.source,"g");function pM(e){return function(){return e}}function gM(e){return function(t){return e(t)+""}}function xM(e,t){var r=qm.lastIndex=Yf.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=qm.exec(e))&&(s=Yf.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:el(n,s)})),r=Yf.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?gM(c[0].x):pM(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Ga(e,t){var r=typeof t,n;return t==null||r==="boolean"?Mg(t):(r==="number"?el:r==="string"?(n=Ys(t))?(t=n,lj):xM:t instanceof Ys?lj:t instanceof Date?hM:dM(t)?uM:Array.isArray(t)?fM:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?mM:el)(e,t)}function $g(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function yM(e,t){t===void 0&&(t=e,e=Ga);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function bM(e){return function(){return e}}function tl(e){return+e}var cj=[0,1];function Pt(e){return e}function Um(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:bM(isNaN(t)?NaN:.5)}function vM(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function jM(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=Um(s,n),i=r(o,i)):(n=Um(n,s),i=r(i,o)),function(l){return i(n(l))}}function wM(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=Um(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=Ci(e,l,1,n)-1;return i[c](s[c](l))}}function Ei(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ic(){var e=cj,t=cj,r=Ga,n,s,i,o=Pt,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Pt&&(o=vM(e[0],e[h-1])),l=h>2?wM:jM,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(s((u||(u=l(t,e.map(n),el)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,tl),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=$g,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Pt,d()):o!==Pt},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,x){return n=h,s=x,d()}}function Lg(){return ic()(Pt,Pt)}function NM(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rl(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Na(e){return e=rl(Math.abs(e)),e?e[1]:NaN}function SM(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function PM(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var AM=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Js(e){if(!(t=AM.exec(e)))throw new Error("invalid format: "+e);var t;return new Bg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Js.prototype=Bg.prototype;function Bg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Bg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function OM(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var nl;function TM(e,t){var r=rl(e,t);if(!r)return nl=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(nl=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+rl(e,Math.max(0,t+i-1))[0]}function uj(e,t){var r=rl(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const dj={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:NM,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>uj(e*100,t),r:uj,s:TM,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function fj(e){return e}var hj=Array.prototype.map,mj=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function kM(e){var t=e.grouping===void 0||e.thousands===void 0?fj:SM(hj.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?fj:PM(hj.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"âˆ’":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f,h){f=Js(f);var x=f.fill,p=f.align,g=f.sign,m=f.symbol,y=f.zero,v=f.width,b=f.comma,S=f.precision,j=f.trim,w=f.type;w==="n"?(b=!0,w="g"):dj[w]||(S===void 0&&(S=12),j=!0,w="g"),(y||x==="0"&&p==="=")&&(y=!0,x="0",p="=");var P=(h&&h.prefix!==void 0?h.prefix:"")+(m==="$"?r:m==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),A=(m==="$"?n:/[%p]/.test(w)?o:"")+(h&&h.suffix!==void 0?h.suffix:""),O=dj[w],C=/[defgprs%]/.test(w);S=S===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,S)):Math.max(0,Math.min(20,S));function k(T){var E=P,$=A,L,q,z;if(w==="c")$=O(T)+$,T="";else{T=+T;var K=T<0||1/T<0;if(T=isNaN(T)?c:O(Math.abs(T),S),j&&(T=OM(T)),K&&+T==0&&g!=="+"&&(K=!1),E=(K?g==="("?g:l:g==="-"||g==="("?"":g)+E,$=(w==="s"&&!isNaN(T)&&nl!==void 0?mj[8+nl/3]:"")+$+(K&&g==="("?")":""),C){for(L=-1,q=T.length;++L<q;)if(z=T.charCodeAt(L),48>z||z>57){$=(z===46?s+T.slice(L+1):T.slice(L))+$,T=T.slice(0,L);break}}}b&&!y&&(T=t(T,1/0));var G=E.length+T.length+$.length,Z=G<v?new Array(v-G+1).join(x):"";switch(b&&y&&(T=t(Z+T,Z.length?v-$.length:1/0),Z=""),p){case"<":T=E+T+$+Z;break;case"=":T=E+Z+T+$;break;case"^":T=Z.slice(0,G=Z.length>>1)+E+T+$+Z.slice(G);break;default:T=Z+E+T+$;break}return i(T)}return k.toString=function(){return f+""},k}function d(f,h){var x=Math.max(-8,Math.min(8,Math.floor(Na(h)/3)))*3,p=Math.pow(10,-x),g=u((f=Js(f),f.type="f",f),{suffix:mj[8+x/3]});return function(m){return g(p*m)}}return{format:u,formatPrefix:d}}var to,Fg,hA;CM({thousands:",",grouping:[3],currency:["$",""]});function CM(e){return to=kM(e),Fg=to.format,hA=to.formatPrefix,to}function _M(e){return Math.max(0,-Na(Math.abs(e)))}function EM(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Na(t)/3)))*3-Na(Math.abs(e)))}function IM(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Na(t)-Na(e))+1}function mA(e,t,r,n){var s=Lm(e,t,r),i;switch(n=Js(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=EM(s,o))&&(n.precision=i),hA(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=IM(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=_M(s))&&(n.precision=i-(n.type==="%")*2);break}}return Fg(n)}function gn(e){var t=e.domain;return e.ticks=function(r){var n=t();return Mm(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return mA(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);d-- >0;){if(u=$m(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function al(){var e=Lg();return e.copy=function(){return Ei(e,al())},ar.apply(e,arguments),gn(e)}function pA(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,tl),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pA(e).unknown(t)},e=arguments.length?Array.from(e,tl):[0,1],gn(r)}function gA(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function pj(e){return Math.log(e)}function gj(e){return Math.exp(e)}function DM(e){return-Math.log(-e)}function RM(e){return-Math.exp(-e)}function MM(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $M(e){return e===10?MM:e===Math.E?Math.exp:t=>Math.pow(e,t)}function LM(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function xj(e){return(t,r)=>-e(-t,r)}function qg(e){const t=e(pj,gj),r=t.domain;let n=10,s,i;function o(){return s=LM(n),i=$M(n),r()[0]<0?(s=xj(s),i=xj(i),e(DM,RM)):e(pj,gj),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=s(u),x=s(d),p,g;const m=l==null?10:+l;let y=[];if(!(n%1)&&x-h<m){if(h=Math.floor(h),x=Math.ceil(x),u>0){for(;h<=x;++h)for(p=1;p<n;++p)if(g=h<0?p/i(-h):p*i(h),!(g<u)){if(g>d)break;y.push(g)}}else for(;h<=x;++h)for(p=n-1;p>=1;--p)if(g=h>0?p/i(-h):p*i(h),!(g<u)){if(g>d)break;y.push(g)}y.length*2<m&&(y=Mm(u,d,m))}else y=Mm(h,x,Math.min(x-h,m)).map(i);return f?y.reverse():y},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Js(c)).precision==null&&(c.trim=!0),c=Fg(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(s(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(gA(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function xA(){const e=qg(ic()).domain([1,10]);return e.copy=()=>Ei(e,xA()).base(e.base()),ar.apply(e,arguments),e}function yj(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function bj(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Ug(e){var t=1,r=e(yj(t),bj(t));return r.constant=function(n){return arguments.length?e(yj(t=+n),bj(t)):t},gn(r)}function yA(){var e=Ug(ic());return e.copy=function(){return Ei(e,yA()).constant(e.constant())},ar.apply(e,arguments)}function vj(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function BM(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function FM(e){return e<0?-e*e:e*e}function Vg(e){var t=e(Pt,Pt),r=1;function n(){return r===1?e(Pt,Pt):r===.5?e(BM,FM):e(vj(r),vj(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},gn(t)}function zg(){var e=Vg(ic());return e.copy=function(){return Ei(e,zg()).exponent(e.exponent())},ar.apply(e,arguments),e}function qM(){return zg.apply(null,arguments).exponent(.5)}function jj(e){return Math.sign(e)*e*e}function UM(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function bA(){var e=Lg(),t=[0,1],r=!1,n;function s(i){var o=UM(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(jj(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,tl)).map(jj)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return bA(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ar.apply(s,arguments),gn(s)}function vA(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=KR(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[Ci(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ln),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return vA().domain(e).range(t).unknown(n)},ar.apply(i,arguments)}function jA(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[Ci(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return jA().domain([e,t]).range(s).unknown(i)},ar.apply(gn(o),arguments)}function wA(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[Ci(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return wA().domain(e).range(t).unknown(r)},ar.apply(s,arguments)}const Jf=new Date,Zf=new Date;function st(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>st(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Jf.setTime(+i),Zf.setTime(+o),e(Jf),e(Zf),Math.floor(r(Jf,Zf))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const sl=st(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sl.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?st(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):sl);sl.range;const Mr=1e3,Jt=Mr*60,$r=Jt*60,zr=$r*24,Wg=zr*7,wj=zr*30,Qf=zr*365,Tn=st(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Mr)},(e,t)=>(t-e)/Mr,e=>e.getUTCSeconds());Tn.range;const Hg=st(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mr)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getMinutes());Hg.range;const Kg=st(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Jt)},(e,t)=>(t-e)/Jt,e=>e.getUTCMinutes());Kg.range;const Gg=st(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mr-e.getMinutes()*Jt)},(e,t)=>{e.setTime(+e+t*$r)},(e,t)=>(t-e)/$r,e=>e.getHours());Gg.range;const Xg=st(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*$r)},(e,t)=>(t-e)/$r,e=>e.getUTCHours());Xg.range;const Ii=st(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Jt)/zr,e=>e.getDate()-1);Ii.range;const oc=st(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zr,e=>e.getUTCDate()-1);oc.range;const NA=st(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zr,e=>Math.floor(e/zr));NA.range;function Kn(e){return st(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Jt)/Wg)}const lc=Kn(0),il=Kn(1),VM=Kn(2),zM=Kn(3),Sa=Kn(4),WM=Kn(5),HM=Kn(6);lc.range;il.range;VM.range;zM.range;Sa.range;WM.range;HM.range;function Gn(e){return st(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Wg)}const cc=Gn(0),ol=Gn(1),KM=Gn(2),GM=Gn(3),Pa=Gn(4),XM=Gn(5),YM=Gn(6);cc.range;ol.range;KM.range;GM.range;Pa.range;XM.range;YM.range;const Yg=st(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Yg.range;const Jg=st(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Jg.range;const Wr=st(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Wr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:st(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Wr.range;const Hr=st(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:st(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hr.range;function SA(e,t,r,n,s,i){const o=[[Tn,1,Mr],[Tn,5,5*Mr],[Tn,15,15*Mr],[Tn,30,30*Mr],[i,1,Jt],[i,5,5*Jt],[i,15,15*Jt],[i,30,30*Jt],[s,1,$r],[s,3,3*$r],[s,6,6*$r],[s,12,12*$r],[n,1,zr],[n,2,2*zr],[r,1,Wg],[t,1,wj],[t,3,3*wj],[e,1,Qf]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const x=f&&typeof f.range=="function"?f:c(u,d,f),p=x?x.range(u,+d+1):[];return h?p.reverse():p}function c(u,d,f){const h=Math.abs(d-u)/f,x=Ig(([,,m])=>m).right(o,h);if(x===o.length)return e.every(Lm(u/Qf,d/Qf,f));if(x===0)return sl.every(Math.max(Lm(u,d,f),1));const[p,g]=o[h/o[x-1][2]<o[x][2]/h?x-1:x];return p.every(g)}return[l,c]}const[JM,ZM]=SA(Hr,Jg,cc,NA,Xg,Kg),[QM,e6]=SA(Wr,Yg,lc,Ii,Gg,Hg);function eh(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function th(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function us(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function t6(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=ds(s),d=fs(s),f=ds(i),h=fs(i),x=ds(o),p=fs(o),g=ds(l),m=fs(l),y=ds(c),v=fs(c),b={a:z,A:K,b:G,B:Z,c:null,d:Tj,e:Tj,f:S6,g:D6,G:M6,H:j6,I:w6,j:N6,L:PA,m:P6,M:A6,p:R,q:F,Q:_j,s:Ej,S:O6,u:T6,U:k6,V:C6,w:_6,W:E6,x:null,X:null,y:I6,Y:R6,Z:$6,"%":Cj},S={a:H,A:re,b:M,B:J,c:null,d:kj,e:kj,f:q6,g:J6,G:Q6,H:L6,I:B6,j:F6,L:OA,m:U6,M:V6,p:Q,q:de,Q:_j,s:Ej,S:z6,u:W6,U:H6,V:K6,w:G6,W:X6,x:null,X:null,y:Y6,Y:Z6,Z:e$,"%":Cj},j={a:C,A:k,b:T,B:E,c:$,d:Aj,e:Aj,f:x6,g:Pj,G:Sj,H:Oj,I:Oj,j:h6,L:g6,m:f6,M:m6,p:O,q:d6,Q:b6,s:v6,S:p6,u:i6,U:o6,V:l6,w:s6,W:c6,x:L,X:q,y:Pj,Y:Sj,Z:u6,"%":y6};b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),S.x=w(r,S),S.X=w(n,S),S.c=w(t,S);function w(V,ie){return function(ce){var U=[],Ce=-1,be=0,Ve=V.length,Le,et,mt;for(ce instanceof Date||(ce=new Date(+ce));++Ce<Ve;)V.charCodeAt(Ce)===37&&(U.push(V.slice(be,Ce)),(et=Nj[Le=V.charAt(++Ce)])!=null?Le=V.charAt(++Ce):et=Le==="e"?" ":"0",(mt=ie[Le])&&(Le=mt(ce,et)),U.push(Le),be=Ce+1);return U.push(V.slice(be,Ce)),U.join("")}}function P(V,ie){return function(ce){var U=us(1900,void 0,1),Ce=A(U,V,ce+="",0),be,Ve;if(Ce!=ce.length)return null;if("Q"in U)return new Date(U.Q);if("s"in U)return new Date(U.s*1e3+("L"in U?U.L:0));if(ie&&!("Z"in U)&&(U.Z=0),"p"in U&&(U.H=U.H%12+U.p*12),U.m===void 0&&(U.m="q"in U?U.q:0),"V"in U){if(U.V<1||U.V>53)return null;"w"in U||(U.w=1),"Z"in U?(be=th(us(U.y,0,1)),Ve=be.getUTCDay(),be=Ve>4||Ve===0?ol.ceil(be):ol(be),be=oc.offset(be,(U.V-1)*7),U.y=be.getUTCFullYear(),U.m=be.getUTCMonth(),U.d=be.getUTCDate()+(U.w+6)%7):(be=eh(us(U.y,0,1)),Ve=be.getDay(),be=Ve>4||Ve===0?il.ceil(be):il(be),be=Ii.offset(be,(U.V-1)*7),U.y=be.getFullYear(),U.m=be.getMonth(),U.d=be.getDate()+(U.w+6)%7)}else("W"in U||"U"in U)&&("w"in U||(U.w="u"in U?U.u%7:"W"in U?1:0),Ve="Z"in U?th(us(U.y,0,1)).getUTCDay():eh(us(U.y,0,1)).getDay(),U.m=0,U.d="W"in U?(U.w+6)%7+U.W*7-(Ve+5)%7:U.w+U.U*7-(Ve+6)%7);return"Z"in U?(U.H+=U.Z/100|0,U.M+=U.Z%100,th(U)):eh(U)}}function A(V,ie,ce,U){for(var Ce=0,be=ie.length,Ve=ce.length,Le,et;Ce<be;){if(U>=Ve)return-1;if(Le=ie.charCodeAt(Ce++),Le===37){if(Le=ie.charAt(Ce++),et=j[Le in Nj?ie.charAt(Ce++):Le],!et||(U=et(V,ce,U))<0)return-1}else if(Le!=ce.charCodeAt(U++))return-1}return U}function O(V,ie,ce){var U=u.exec(ie.slice(ce));return U?(V.p=d.get(U[0].toLowerCase()),ce+U[0].length):-1}function C(V,ie,ce){var U=x.exec(ie.slice(ce));return U?(V.w=p.get(U[0].toLowerCase()),ce+U[0].length):-1}function k(V,ie,ce){var U=f.exec(ie.slice(ce));return U?(V.w=h.get(U[0].toLowerCase()),ce+U[0].length):-1}function T(V,ie,ce){var U=y.exec(ie.slice(ce));return U?(V.m=v.get(U[0].toLowerCase()),ce+U[0].length):-1}function E(V,ie,ce){var U=g.exec(ie.slice(ce));return U?(V.m=m.get(U[0].toLowerCase()),ce+U[0].length):-1}function $(V,ie,ce){return A(V,t,ie,ce)}function L(V,ie,ce){return A(V,r,ie,ce)}function q(V,ie,ce){return A(V,n,ie,ce)}function z(V){return o[V.getDay()]}function K(V){return i[V.getDay()]}function G(V){return c[V.getMonth()]}function Z(V){return l[V.getMonth()]}function R(V){return s[+(V.getHours()>=12)]}function F(V){return 1+~~(V.getMonth()/3)}function H(V){return o[V.getUTCDay()]}function re(V){return i[V.getUTCDay()]}function M(V){return c[V.getUTCMonth()]}function J(V){return l[V.getUTCMonth()]}function Q(V){return s[+(V.getUTCHours()>=12)]}function de(V){return 1+~~(V.getUTCMonth()/3)}return{format:function(V){var ie=w(V+="",b);return ie.toString=function(){return V},ie},parse:function(V){var ie=P(V+="",!1);return ie.toString=function(){return V},ie},utcFormat:function(V){var ie=w(V+="",S);return ie.toString=function(){return V},ie},utcParse:function(V){var ie=P(V+="",!0);return ie.toString=function(){return V},ie}}}var Nj={"-":"",_:" ",0:"0"},ct=/^\s*\d+/,r6=/^%/,n6=/[\\^$*+?|[\]().{}]/g;function ke(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function a6(e){return e.replace(n6,"\\$&")}function ds(e){return new RegExp("^(?:"+e.map(a6).join("|")+")","i")}function fs(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function s6(e,t,r){var n=ct.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function i6(e,t,r){var n=ct.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function o6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function l6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function c6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function Sj(e,t,r){var n=ct.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function Pj(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function u6(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function d6(e,t,r){var n=ct.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function f6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Aj(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function h6(e,t,r){var n=ct.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Oj(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function m6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function p6(e,t,r){var n=ct.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function g6(e,t,r){var n=ct.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function x6(e,t,r){var n=ct.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function y6(e,t,r){var n=r6.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function b6(e,t,r){var n=ct.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function v6(e,t,r){var n=ct.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Tj(e,t){return ke(e.getDate(),t,2)}function j6(e,t){return ke(e.getHours(),t,2)}function w6(e,t){return ke(e.getHours()%12||12,t,2)}function N6(e,t){return ke(1+Ii.count(Wr(e),e),t,3)}function PA(e,t){return ke(e.getMilliseconds(),t,3)}function S6(e,t){return PA(e,t)+"000"}function P6(e,t){return ke(e.getMonth()+1,t,2)}function A6(e,t){return ke(e.getMinutes(),t,2)}function O6(e,t){return ke(e.getSeconds(),t,2)}function T6(e){var t=e.getDay();return t===0?7:t}function k6(e,t){return ke(lc.count(Wr(e)-1,e),t,2)}function AA(e){var t=e.getDay();return t>=4||t===0?Sa(e):Sa.ceil(e)}function C6(e,t){return e=AA(e),ke(Sa.count(Wr(e),e)+(Wr(e).getDay()===4),t,2)}function _6(e){return e.getDay()}function E6(e,t){return ke(il.count(Wr(e)-1,e),t,2)}function I6(e,t){return ke(e.getFullYear()%100,t,2)}function D6(e,t){return e=AA(e),ke(e.getFullYear()%100,t,2)}function R6(e,t){return ke(e.getFullYear()%1e4,t,4)}function M6(e,t){var r=e.getDay();return e=r>=4||r===0?Sa(e):Sa.ceil(e),ke(e.getFullYear()%1e4,t,4)}function $6(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ke(t/60|0,"0",2)+ke(t%60,"0",2)}function kj(e,t){return ke(e.getUTCDate(),t,2)}function L6(e,t){return ke(e.getUTCHours(),t,2)}function B6(e,t){return ke(e.getUTCHours()%12||12,t,2)}function F6(e,t){return ke(1+oc.count(Hr(e),e),t,3)}function OA(e,t){return ke(e.getUTCMilliseconds(),t,3)}function q6(e,t){return OA(e,t)+"000"}function U6(e,t){return ke(e.getUTCMonth()+1,t,2)}function V6(e,t){return ke(e.getUTCMinutes(),t,2)}function z6(e,t){return ke(e.getUTCSeconds(),t,2)}function W6(e){var t=e.getUTCDay();return t===0?7:t}function H6(e,t){return ke(cc.count(Hr(e)-1,e),t,2)}function TA(e){var t=e.getUTCDay();return t>=4||t===0?Pa(e):Pa.ceil(e)}function K6(e,t){return e=TA(e),ke(Pa.count(Hr(e),e)+(Hr(e).getUTCDay()===4),t,2)}function G6(e){return e.getUTCDay()}function X6(e,t){return ke(ol.count(Hr(e)-1,e),t,2)}function Y6(e,t){return ke(e.getUTCFullYear()%100,t,2)}function J6(e,t){return e=TA(e),ke(e.getUTCFullYear()%100,t,2)}function Z6(e,t){return ke(e.getUTCFullYear()%1e4,t,4)}function Q6(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Pa(e):Pa.ceil(e),ke(e.getUTCFullYear()%1e4,t,4)}function e$(){return"+0000"}function Cj(){return"%"}function _j(e){return+e}function Ej(e){return Math.floor(+e/1e3)}var Zn,kA,CA;t$({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function t$(e){return Zn=t6(e),kA=Zn.format,Zn.parse,CA=Zn.utcFormat,Zn.utcParse,Zn}function r$(e){return new Date(e)}function n$(e){return e instanceof Date?+e:+new Date(+e)}function Zg(e,t,r,n,s,i,o,l,c,u){var d=Lg(),f=d.invert,h=d.domain,x=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),S=u("%Y");function j(w){return(c(w)<w?x:l(w)<w?p:o(w)<w?g:i(w)<w?m:n(w)<w?s(w)<w?y:v:r(w)<w?b:S)(w)}return d.invert=function(w){return new Date(f(w))},d.domain=function(w){return arguments.length?h(Array.from(w,n$)):h().map(r$)},d.ticks=function(w){var P=h();return e(P[0],P[P.length-1],w??10)},d.tickFormat=function(w,P){return P==null?j:u(P)},d.nice=function(w){var P=h();return(!w||typeof w.range!="function")&&(w=t(P[0],P[P.length-1],w??10)),w?h(gA(P,w)):d},d.copy=function(){return Ei(d,Zg(e,t,r,n,s,i,o,l,c,u))},d}function a$(){return ar.apply(Zg(QM,e6,Wr,Yg,lc,Ii,Gg,Hg,Tn,kA).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function s$(){return ar.apply(Zg(JM,ZM,Hr,Jg,cc,oc,Xg,Kg,Tn,CA).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function uc(){var e=0,t=1,r,n,s,i,o=Pt,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var x,p;return arguments.length?([x,p]=h,o=f(x,p),u):[o(0),o(1)]}}return u.range=d(Ga),u.rangeRound=d($g),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),s=r===n?0:1/(n-r),u}}function xn(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function _A(){var e=gn(uc()(Pt));return e.copy=function(){return xn(e,_A())},Jr.apply(e,arguments)}function EA(){var e=qg(uc()).domain([1,10]);return e.copy=function(){return xn(e,EA()).base(e.base())},Jr.apply(e,arguments)}function IA(){var e=Ug(uc());return e.copy=function(){return xn(e,IA()).constant(e.constant())},Jr.apply(e,arguments)}function Qg(){var e=Vg(uc());return e.copy=function(){return xn(e,Qg()).exponent(e.exponent())},Jr.apply(e,arguments)}function i$(){return Qg.apply(null,arguments).exponent(.5)}function DA(){var e=[],t=Pt;function r(n){if(n!=null&&!isNaN(n=+n))return t((Ci(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ln),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>HR(e,i/n))},r.copy=function(){return DA(t).domain(e)},Jr.apply(r,arguments)}function dc(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=Pt,d,f=!1,h;function x(g){return isNaN(g=+g)?h:(g=.5+((g=+d(g))-i)*(n*g<n*i?l:c),u(f?Math.max(0,Math.min(1,g)):g))}x.domain=function(g){return arguments.length?([e,t,r]=g,s=d(e=+e),i=d(t=+t),o=d(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,x):[e,t,r]},x.clamp=function(g){return arguments.length?(f=!!g,x):f},x.interpolator=function(g){return arguments.length?(u=g,x):u};function p(g){return function(m){var y,v,b;return arguments.length?([y,v,b]=m,u=yM(g,[y,v,b]),x):[u(0),u(.5),u(1)]}}return x.range=p(Ga),x.rangeRound=p($g),x.unknown=function(g){return arguments.length?(h=g,x):h},function(g){return d=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,x}}function RA(){var e=gn(dc()(Pt));return e.copy=function(){return xn(e,RA())},Jr.apply(e,arguments)}function MA(){var e=qg(dc()).domain([.1,1,10]);return e.copy=function(){return xn(e,MA()).base(e.base())},Jr.apply(e,arguments)}function $A(){var e=Ug(dc());return e.copy=function(){return xn(e,$A()).constant(e.constant())},Jr.apply(e,arguments)}function ex(){var e=Vg(dc());return e.copy=function(){return xn(e,ex()).exponent(e.exponent())},Jr.apply(e,arguments)}function o$(){return ex.apply(null,arguments).exponent(.5)}const Ij=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Ks,scaleDiverging:RA,scaleDivergingLog:MA,scaleDivergingPow:ex,scaleDivergingSqrt:o$,scaleDivergingSymlog:$A,scaleIdentity:pA,scaleImplicit:Bm,scaleLinear:al,scaleLog:xA,scaleOrdinal:Dg,scalePoint:_s,scalePow:zg,scaleQuantile:vA,scaleQuantize:jA,scaleRadial:bA,scaleSequential:_A,scaleSequentialLog:EA,scaleSequentialPow:Qg,scaleSequentialQuantile:DA,scaleSequentialSqrt:i$,scaleSequentialSymlog:IA,scaleSqrt:qM,scaleSymlog:yA,scaleThreshold:wA,scaleTime:a$,scaleUtc:s$,tickFormat:mA},Symbol.toStringTag,{value:"Module"}));var rh,Dj;function LA(){if(Dj)return rh;Dj=1;var e=za();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=n(l);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,d=l}return d}return rh=t,rh}var nh,Rj;function l$(){if(Rj)return nh;Rj=1;function e(t,r){return t>r}return nh=e,nh}var ah,Mj;function c$(){if(Mj)return ah;Mj=1;var e=LA(),t=l$(),r=Ha();function n(s){return s&&s.length?e(s,r,t):void 0}return ah=n,ah}var u$=c$();const fc=$e(u$);var sh,$j;function d$(){if($j)return sh;$j=1;function e(t,r){return t<r}return sh=e,sh}var ih,Lj;function f$(){if(Lj)return ih;Lj=1;var e=LA(),t=d$(),r=Ha();function n(s){return s&&s.length?e(s,r,t):void 0}return ih=n,ih}var h$=f$();const hc=$e(h$);var oh,Bj;function m$(){if(Bj)return oh;Bj=1;var e=gg(),t=pn(),r=KP(),n=Rt();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return oh=s,oh}var lh,Fj;function p$(){if(Fj)return lh;Fj=1;var e=WP(),t=m$();function r(n,s){return e(t(n,s),1)}return lh=r,lh}var g$=p$();const x$=$e(g$);var ch,qj;function y$(){if(qj)return ch;qj=1;var e=kg();function t(r,n){return e(r,n)}return ch=t,ch}var b$=y$();const mc=$e(b$);var Xa=1e9,v$={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},rx,Ue=!0,rr="[DecimalError] ",Mn=rr+"Invalid argument: ",tx=rr+"Exponent out of range: ",Ya=Math.floor,Nn=Math.pow,j$=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Vt,lt=1e7,qe=7,BA=9007199254740991,ll=Ya(BA/qe),se={};se.absoluteValue=se.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};se.comparedTo=se.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};se.decimalPlaces=se.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*qe;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};se.dividedBy=se.div=function(e){return Ur(this,new this.constructor(e))};se.dividedToIntegerBy=se.idiv=function(e){var t=this,r=t.constructor;return Me(Ur(t,new r(e),0,1),r.precision)};se.equals=se.eq=function(e){return!this.cmp(e)};se.exponent=function(){return Qe(this)};se.greaterThan=se.gt=function(e){return this.cmp(e)>0};se.greaterThanOrEqualTo=se.gte=function(e){return this.cmp(e)>=0};se.isInteger=se.isint=function(){return this.e>this.d.length-2};se.isNegative=se.isneg=function(){return this.s<0};se.isPositive=se.ispos=function(){return this.s>0};se.isZero=function(){return this.s===0};se.lessThan=se.lt=function(e){return this.cmp(e)<0};se.lessThanOrEqualTo=se.lte=function(e){return this.cmp(e)<1};se.logarithm=se.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Vt))throw Error(rr+"NaN");if(r.s<1)throw Error(rr+(r.s?"NaN":"-Infinity"));return r.eq(Vt)?new n(0):(Ue=!1,t=Ur(Zs(r,i),Zs(e,i),i),Ue=!0,Me(t,s))};se.minus=se.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?UA(t,e):FA(t,(e.s=-e.s,e))};se.modulo=se.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(rr+"NaN");return r.s?(Ue=!1,t=Ur(r,e,0,1).times(e),Ue=!0,r.minus(t)):Me(new n(r),s)};se.naturalExponential=se.exp=function(){return qA(this)};se.naturalLogarithm=se.ln=function(){return Zs(this)};se.negated=se.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};se.plus=se.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?FA(t,e):UA(t,(e.s=-e.s,e))};se.precision=se.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Mn+e);if(t=Qe(s)+1,n=s.d.length-1,r=n*qe+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};se.squareRoot=se.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(rr+"NaN")}for(e=Qe(l),Ue=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Ar(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Ya((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Ur(l,i,o+2)).times(.5),Ar(i.d).slice(0,o)===(t=Ar(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(Me(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return Ue=!0,Me(n,r)};se.times=se.mul=function(e){var t,r,n,s,i,o,l,c,u,d=this,f=d.constructor,h=d.d,x=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=x.length,c<u&&(i=h,h=x,x=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+x[n]*h[s-n-1]+t,i[s--]=l%lt|0,t=l/lt|0;i[s]=(i[s]+t)%lt|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ue?Me(e,f.precision):e};se.toDecimalPlaces=se.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Er(e,0,Xa),t===void 0?t=n.rounding:Er(t,0,8),Me(r,e+Qe(r)+1,t))};se.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Un(n,!0):(Er(e,0,Xa),t===void 0?t=s.rounding:Er(t,0,8),n=Me(new s(n),e+1,t),r=Un(n,!0,e+1)),r};se.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Un(s):(Er(e,0,Xa),t===void 0?t=i.rounding:Er(t,0,8),n=Me(new i(s),e+Qe(s)+1,t),r=Un(n.abs(),!1,e+Qe(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};se.toInteger=se.toint=function(){var e=this,t=e.constructor;return Me(new t(e),Qe(e)+1,t.rounding)};se.toNumber=function(){return+this};se.toPower=se.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Vt);if(l=new c(l),!l.s){if(e.s<1)throw Error(rr+"Infinity");return l}if(l.eq(Vt))return l;if(n=c.precision,e.eq(Vt))return Me(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=BA){for(s=new c(Vt),t=Math.ceil(n/qe+4),Ue=!1;r%2&&(s=s.times(l),Vj(s.d,t)),r=Ya(r/2),r!==0;)l=l.times(l),Vj(l.d,t);return Ue=!0,e.s<0?new c(Vt).div(s):Me(s,n)}}else if(i<0)throw Error(rr+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ue=!1,s=e.times(Zs(l,n+u)),Ue=!0,s=qA(s),s.s=i,s};se.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Qe(s),n=Un(s,r<=i.toExpNeg||r>=i.toExpPos)):(Er(e,1,Xa),t===void 0?t=i.rounding:Er(t,0,8),s=Me(new i(s),e,t),r=Qe(s),n=Un(s,e<=r||r<=i.toExpNeg,e)),n};se.toSignificantDigits=se.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Er(e,1,Xa),t===void 0?t=n.rounding:Er(t,0,8)),Me(new n(r),e,t)};se.toString=se.valueOf=se.val=se.toJSON=se[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Qe(e),r=e.constructor;return Un(e,t<=r.toExpNeg||t>=r.toExpPos)};function FA(e,t){var r,n,s,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),Ue?Me(t,f):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(f/qe),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/lt|0,c[i]%=lt;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ue?Me(t,f):t}function Er(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Mn+e)}function Ar(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=qe-n.length,r&&(i+=tn(r)),i+=n;o=e[t],n=o+"",r=qe-n.length,r&&(i+=tn(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Ur=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%lt|0,o=i/lt|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*lt+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,d,f,h,x,p,g,m,y,v,b,S,j,w,P,A,O=n.constructor,C=n.s==s.s?1:-1,k=n.d,T=s.d;if(!n.s)return new O(n);if(!s.s)throw Error(rr+"Division by zero");for(c=n.e-s.e,P=T.length,j=k.length,x=new O(C),p=x.d=[],u=0;T[u]==(k[u]||0);)++u;if(T[u]>(k[u]||0)&&--c,i==null?v=i=O.precision:o?v=i+(Qe(n)-Qe(s))+1:v=i,v<0)return new O(0);if(v=v/qe+2|0,u=0,P==1)for(d=0,T=T[0],v++;(u<j||d)&&v--;u++)b=d*lt+(k[u]||0),p[u]=b/T|0,d=b%T|0;else{for(d=lt/(T[0]+1)|0,d>1&&(T=e(T,d),k=e(k,d),P=T.length,j=k.length),S=P,g=k.slice(0,P),m=g.length;m<P;)g[m++]=0;A=T.slice(),A.unshift(0),w=T[0],T[1]>=lt/2&&++w;do d=0,l=t(T,g,P,m),l<0?(y=g[0],P!=m&&(y=y*lt+(g[1]||0)),d=y/w|0,d>1?(d>=lt&&(d=lt-1),f=e(T,d),h=f.length,m=g.length,l=t(f,g,h,m),l==1&&(d--,r(f,P<h?A:T,h))):(d==0&&(l=d=1),f=T.slice()),h=f.length,h<m&&f.unshift(0),r(g,f,m),l==-1&&(m=g.length,l=t(T,g,P,m),l<1&&(d++,r(g,P<m?A:T,m))),m=g.length):l===0&&(d++,g=[0]),p[u++]=d,l&&g[0]?g[m++]=k[S]||0:(g=[k[S]],m=1);while((S++<j||g[0]!==void 0)&&v--)}return p[0]||p.shift(),x.e=c,Me(x,o?i+Qe(x)+1:i)}})();function qA(e,t){var r,n,s,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Qe(e)>16)throw Error(tx+Qe(e));if(!e.s)return new d(Vt);for(Ue=!1,l=f,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Nn(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new d(Vt),d.precision=l;;){if(s=Me(s.times(e),l),r=r.times(++c),o=i.plus(Ur(s,r,l)),Ar(o.d).slice(0,l)===Ar(i.d).slice(0,l)){for(;u--;)i=Me(i.times(i),l);return d.precision=f,t==null?(Ue=!0,Me(i,f)):i}i=o}}function Qe(e){for(var t=e.e*qe,r=e.d[0];r>=10;r/=10)t++;return t}function uh(e,t,r){if(t>e.LN10.sd())throw Ue=!0,r&&(e.precision=r),Error(rr+"LN10 precision limit exceeded");return Me(new e(e.LN10),t)}function tn(e){for(var t="";e--;)t+="0";return t}function Zs(e,t){var r,n,s,i,o,l,c,u,d,f=1,h=10,x=e,p=x.d,g=x.constructor,m=g.precision;if(x.s<1)throw Error(rr+(x.s?"NaN":"-Infinity"));if(x.eq(Vt))return new g(0);if(t==null?(Ue=!1,u=m):u=t,x.eq(10))return t==null&&(Ue=!0),uh(g,u);if(u+=h,g.precision=u,r=Ar(p),n=r.charAt(0),i=Qe(x),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)x=x.times(e),r=Ar(x.d),n=r.charAt(0),f++;i=Qe(x),n>1?(x=new g("0."+r),i++):x=new g(n+"."+r.slice(1))}else return c=uh(g,u+2,m).times(i+""),x=Zs(new g(n+"."+r.slice(1)),u-h).plus(c),g.precision=m,t==null?(Ue=!0,Me(x,m)):x;for(l=o=x=Ur(x.minus(Vt),x.plus(Vt),u),d=Me(x.times(x),u),s=3;;){if(o=Me(o.times(d),u),c=l.plus(Ur(o,new g(s),u)),Ar(c.d).slice(0,u)===Ar(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(uh(g,u+2,m).times(i+""))),l=Ur(l,new g(f),u),g.precision=m,t==null?(Ue=!0,Me(l,m)):l;l=c,s+=2}}function Uj(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Ya(r/qe),e.d=[],n=(r+1)%qe,r<0&&(n+=qe),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=qe;n<s;)e.d.push(+t.slice(n,n+=qe));t=t.slice(n),n=qe-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),Ue&&(e.e>ll||e.e<-ll))throw Error(tx+r)}else e.s=0,e.e=0,e.d=[0];return e}function Me(e,t,r){var n,s,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=qe,s=t,u=f[d=0];else{if(d=Math.ceil((n+1)/qe),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=qe,s=n-qe+o}if(r!==void 0&&(i=Nn(10,o-s-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/Nn(10,o-s):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Qe(e),f.length=1,t=t-i-1,f[0]=Nn(10,(qe-t%qe)%qe),e.e=Ya(-t/qe)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Nn(10,qe-n),f[d]=s>0?(u/Nn(10,o-s)%Nn(10,s)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==lt&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=lt)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if(Ue&&(e.e>ll||e.e<-ll))throw Error(tx+Qe(e));return e}function UA(e,t){var r,n,s,i,o,l,c,u,d,f,h=e.constructor,x=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),Ue?Me(t,x):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),s=Math.max(Math.ceil(x/qe),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,d=s<l,d&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){d=c[s]<f[s];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=lt-1;--c[i],c[s]+=lt}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,Ue?Me(t,x):t):new h(0)}function Un(e,t,r){var n,s=Qe(e),i=Ar(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+tn(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+tn(-s-1)+i,r&&(n=r-o)>0&&(i+=tn(n))):s>=o?(i+=tn(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+tn(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=tn(n))),e.s<0?"-"+i:i}function Vj(e,t){if(e.length>t)return e.length=t,!0}function VA(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Mn+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return Uj(o,i.toString())}else if(typeof i!="string")throw Error(Mn+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,j$.test(i))Uj(o,i);else throw Error(Mn+i)}if(s.prototype=se,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=VA,s.config=s.set=w$,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function w$(e){if(!e||typeof e!="object")throw Error(rr+"Object expected");var t,r,n,s=["precision",1,Xa,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Ya(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Mn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Mn+r+": "+n);return this}var rx=VA(v$);Vt=new rx(1);const De=rx;function N$(e){return O$(e)||A$(e)||P$(e)||S$()}function S$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function P$(e,t){if(e){if(typeof e=="string")return Vm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vm(e,t)}}function A$(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function O$(e){if(Array.isArray(e))return Vm(e)}function Vm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T$=function(t){return t},zA={},WA=function(t){return t===zA},zj=function(t){return function r(){return arguments.length===0||arguments.length===1&&WA(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},k$=function e(t,r){return t===1?r:zj(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==zA}).length;return o>=t?r.apply(void 0,s):e(t-o,zj(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=s.map(function(f){return WA(f)?c.shift():f});return r.apply(void 0,N$(d).concat(c))}))})},pc=function(t){return k$(t.length,t)},zm=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},C$=pc(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),_$=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return T$;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},Wm=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},HA=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function E$(e){var t;return e===0?t=1:t=Math.floor(new De(e).abs().log(10).toNumber())+1,t}function I$(e,t,r){for(var n=new De(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var D$=pc(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),R$=pc(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),M$=pc(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const gc={rangeStep:I$,getDigitCount:E$,interpolateNumber:D$,uninterpolateNumber:R$,uninterpolateTruncation:M$};function Hm(e){return B$(e)||L$(e)||KA(e)||$$()}function $$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function L$(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function B$(e){if(Array.isArray(e))return Km(e)}function Qs(e,t){return U$(e)||q$(e,t)||KA(e,t)||F$()}function F$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function KA(e,t){if(e){if(typeof e=="string")return Km(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Km(e,t)}}function Km(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function q$(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function U$(e){if(Array.isArray(e))return e}function GA(e){var t=Qs(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function XA(e,t,r){if(e.lte(0))return new De(0);var n=gc.getDigitCount(e.toNumber()),s=new De(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new De(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new De(Math.ceil(c))}function V$(e,t,r){var n=1,s=new De(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new De(10).pow(gc.getDigitCount(e)-1),s=new De(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new De(Math.floor(e)))}else e===0?s=new De(Math.floor((t-1)/2)):r||(s=new De(Math.floor(e)));var o=Math.floor((t-1)/2),l=_$(C$(function(c){return s.add(new De(c-o).mul(n)).toNumber()}),zm);return l(0,t)}function YA(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new De(0),tickMin:new De(0),tickMax:new De(0)};var i=XA(new De(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new De(0):(o=new De(e).add(t).div(2),o=o.sub(new De(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new De(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?YA(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new De(l).mul(i)),tickMax:o.add(new De(c).mul(i))})}function z$(e){var t=Qs(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=GA([r,n]),c=Qs(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(Hm(zm(0,s-1).map(function(){return 1/0}))):[].concat(Hm(zm(0,s-1).map(function(){return-1/0})),[d]);return r>n?Wm(f):f}if(u===d)return V$(u,s,i);var h=YA(u,d,o,i),x=h.step,p=h.tickMin,g=h.tickMax,m=gc.rangeStep(p,g.add(new De(.1).mul(x)),x);return r>n?Wm(m):m}function W$(e,t){var r=Qs(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=GA([n,s]),l=Qs(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var d=Math.max(t,2),f=XA(new De(u).sub(c).div(d-1),i,0),h=[].concat(Hm(gc.rangeStep(new De(c),new De(u).sub(new De(.99).mul(f)),f)),[u]);return n>s?Wm(h):h}var H$=HA(z$),K$=HA(W$),G$="Invariant failed";function Vn(e,t){throw new Error(G$)}var X$=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Aa(e){"@babel/helpers - typeof";return Aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aa(e)}function cl(){return cl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cl.apply(this,arguments)}function Y$(e,t){return e3(e)||Q$(e,t)||Z$(e,t)||J$()}function J$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z$(e,t){if(e){if(typeof e=="string")return Wj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Wj(e,t)}}function Wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q$(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function e3(e){if(Array.isArray(e))return e}function t3(e,t){if(e==null)return{};var r=r3(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function r3(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function n3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QA(n.key),n)}}function s3(e,t,r){return t&&a3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function i3(e,t,r){return t=ul(t),o3(e,JA()?Reflect.construct(t,r||[],ul(e).constructor):t.apply(e,r))}function o3(e,t){if(t&&(Aa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return l3(e)}function l3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JA(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JA=function(){return!!e})()}function ul(e){return ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ul(e)}function c3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gm(e,t)}function Gm(e,t){return Gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gm(e,t)}function ZA(e,t,r){return t=QA(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QA(e){var t=u3(e,"string");return Aa(t)=="symbol"?t:t+""}function u3(e,t){if(Aa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Aa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Di=(function(e){function t(){return n3(this,t),i3(this,t,arguments)}return c3(t,e),s3(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,h=t3(n,X$),x=Ae(h,!1);this.props.direction==="x"&&d.type!=="number"&&Vn();var p=c.map(function(g){var m=u(g,l),y=m.x,v=m.y,b=m.value,S=m.errorVal;if(!S)return null;var j=[],w,P;if(Array.isArray(S)){var A=Y$(S,2);w=A[0],P=A[1]}else w=P=S;if(i==="vertical"){var O=d.scale,C=v+s,k=C+o,T=C-o,E=O(b-w),$=O(b+P);j.push({x1:$,y1:k,x2:$,y2:T}),j.push({x1:E,y1:C,x2:$,y2:C}),j.push({x1:E,y1:k,x2:E,y2:T})}else if(i==="horizontal"){var L=f.scale,q=y+s,z=q-o,K=q+o,G=L(b-w),Z=L(b+P);j.push({x1:z,y1:Z,x2:K,y2:Z}),j.push({x1:q,y1:G,x2:q,y2:Z}),j.push({x1:z,y1:G,x2:K,y2:G})}return _.createElement(Ye,cl({className:"recharts-errorBar",key:"bar-".concat(j.map(function(R){return"".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))},x),j.map(function(R){return _.createElement("line",cl({},R,{key:"line-".concat(R.x1,"-").concat(R.x2,"-").concat(R.y1,"-").concat(R.y2)}))}))});return _.createElement(Ye,{className:"recharts-errorBars"},p)}}])})(_.Component);ZA(Di,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});ZA(Di,"displayName","ErrorBar");function ei(e){"@babel/helpers - typeof";return ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ei(e)}function Hj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vn(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hj(Object(r),!0).forEach(function(n){d3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d3(e,t,r){return t=f3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f3(e){var t=h3(e,"string");return ei(t)=="symbol"?t:t+""}function h3(e,t){if(ei(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ei(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eO=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=qt(r,Dn);if(!o)return null;var l=Dn.defaultProps,c=l!==void 0?vn(vn({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(d,f){var h=f.item,x=f.props,p=x.sectors||x.data||[];return d.concat(p.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):u=(n||[]).map(function(d){var f=d.item,h=f.type.defaultProps,x=h!==void 0?vn(vn({},h),f.props):{},p=x.dataKey,g=x.name,m=x.legendType,y=x.hide;return{inactive:y,dataKey:p,type:c.iconType||m||"square",color:nx(f),value:g||p,payload:x}}),vn(vn(vn({},c),Dn.getWithHeight(o,s)),{},{payload:u,item:o})};function ti(e){"@babel/helpers - typeof";return ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ti(e)}function Kj(e){return x3(e)||g3(e)||p3(e)||m3()}function m3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function p3(e,t){if(e){if(typeof e=="string")return Xm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Xm(e,t)}}function g3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function x3(e){if(Array.isArray(e))return Xm(e)}function Xm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Gj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gj(Object(r),!0).forEach(function(n){ha(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gj(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ha(e,t,r){return t=y3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y3(e){var t=b3(e,"string");return ti(t)=="symbol"?t:t+""}function b3(e,t){if(ti(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ti(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zt(e,t,r){return Se(e)||Se(t)?r:at(t)?Qt(e,t,r):we(t)?t(e):r}function Es(e,t,r,n){var s=x$(e,function(l){return zt(l,t)});if(r==="number"){var i=s.filter(function(l){return te(l)||parseFloat(l)});return i.length?[hc(i),fc(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Se(l)}):s;return o.map(function(l){return at(l)||l instanceof Date?l:""})}var v3=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var d=u>0?s[u-1].coordinate:s[l-1].coordinate,f=s[u].coordinate,h=u>=l-1?s[0].coordinate:s[u+1].coordinate,x=void 0;if(mr(f-d)!==mr(h-f)){var p=[];if(mr(h-f)===mr(c[1]-c[0])){x=h;var g=f+c[1]-c[0];p[0]=Math.min(g,(g+d)/2),p[1]=Math.max(g,(g+d)/2)}else{x=d;var m=h+c[1]-c[0];p[0]=Math.min(f,(m+f)/2),p[1]=Math.max(f,(m+f)/2)}var y=[Math.min(f,(x+f)/2),Math.max(f,(x+f)/2)];if(t>y[0]&&t<=y[1]||t>=p[0]&&t<=p[1]){o=s[u].index;break}}else{var v=Math.min(d,h),b=Math.max(d,h);if(t>(v+f)/2&&t<=(b+f)/2){o=s[u].index;break}}}else for(var S=0;S<l;S++)if(S===0&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S>0&&S<l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2&&t<=(n[S].coordinate+n[S+1].coordinate)/2||S===l-1&&t>(n[S].coordinate+n[S-1].coordinate)/2){o=n[S].index;break}return o},nx=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Ke(Ke({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},j3=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var d=i[l[c]].stackGroups,f=Object.keys(d),h=0,x=f.length;h<x;h++){var p=d[f[h]],g=p.items,m=p.cateAxisId,y=g.filter(function(P){return Fr(P.type).indexOf("Bar")>=0});if(y&&y.length){var v=y[0].type.defaultProps,b=v!==void 0?Ke(Ke({},v),y[0].props):y[0].props,S=b.barSize,j=b[m];o[j]||(o[j]=[]);var w=Se(S)?r:S;o[j].push({item:y[0],stackList:y.slice(1),barSize:Se(w)?void 0:qn(w,n,0)})}}return o},w3=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=qn(r,s,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var h=!1,x=s/c,p=o.reduce(function(S,j){return S+j.barSize||0},0);p+=(c-1)*u,p>=s&&(p-=(c-1)*u,u=0),p>=s&&x>0&&(h=!0,x*=.9,p=c*x);var g=(s-p)/2>>0,m={offset:g-u,size:0};d=o.reduce(function(S,j){var w={item:j.item,position:{offset:m.offset+m.size+u,size:h?x:j.barSize}},P=[].concat(Kj(S),[w]);return m=P[P.length-1].position,j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){P.push({item:A,position:m})}),P},f)}else{var y=qn(n,s,0,!0);s-2*y-(c-1)*u<=0&&(u=0);var v=(s-2*y-(c-1)*u)/c;v>1&&(v>>=0);var b=l===+l?Math.min(v,l):v;d=o.reduce(function(S,j,w){var P=[].concat(Kj(S),[{item:j.item,position:{offset:y+(v+u)*w+(v-b)/2,size:b}}]);return j.stackList&&j.stackList.length&&j.stackList.forEach(function(A){P.push({item:A,position:P[P.length-1].position})}),P},f)}return d},N3=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=eO({children:i,legendWidth:c});if(u){var d=s||{},f=d.width,h=d.height,x=u.align,p=u.verticalAlign,g=u.layout;if((g==="vertical"||g==="horizontal"&&p==="middle")&&x!=="center"&&te(t[x]))return Ke(Ke({},t),{},ha({},x,t[x]+(f||0)));if((g==="horizontal"||g==="vertical"&&x==="center")&&p!=="middle"&&te(t[p]))return Ke(Ke({},t),{},ha({},p,t[p]+(h||0)))}return t},S3=function(t,r,n){return Se(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},tO=function(t,r,n,s,i){var o=r.props.children,l=er(o,Di).filter(function(u){return S3(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=zt(d,n);if(Se(f))return u;var h=Array.isArray(f)?[hc(f),fc(f)]:[f,f],x=c.reduce(function(p,g){var m=zt(d,g,0),y=h[0]-Math.abs(Array.isArray(m)?m[0]:m),v=h[1]+Math.abs(Array.isArray(m)?m[1]:m);return[Math.min(y,p[0]),Math.max(v,p[1])]},[1/0,-1/0]);return[Math.min(x[0],u[0]),Math.max(x[1],u[1])]},[1/0,-1/0])}return null},P3=function(t,r,n,s,i){var o=r.map(function(l){return tO(t,l,n,i,s)}).filter(function(l){return!Se(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},rO=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&tO(t,c,u,s)||Es(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},nO=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},aO=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Lr=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?mr(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var h=i?i.indexOf(f):f;return{coordinate:s(h)+u,value:f,offset:u}});return d.filter(function(f){return!Oi(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,h){return{coordinate:s(f)+u,value:f,index:h,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+u,value:f,offset:u}}):s.domain().map(function(f,h){return{coordinate:s(f)+u,value:i?i[f]:f,index:h,offset:u}})},dh=new WeakMap,ro=function(t,r){if(typeof r!="function")return t;dh.has(t)||dh.set(t,new WeakMap);var n=dh.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},A3=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Ks(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:al(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:_s(),realScaleType:"point"}:i==="category"?{scale:Ks(),realScaleType:"band"}:{scale:al(),realScaleType:"linear"};if(Fn(s)){var c="scale".concat(Ql(s));return{scale:(Ij[c]||_s)(),realScaleType:Ij[c]?c:"point"}}return we(s)?{scale:s}:{scale:_s(),realScaleType:"point"}},Xj=1e-4,O3=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-Xj,o=Math.max(s[0],s[1])+Xj,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},T3=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},k3=function(t,r){if(!r||r.length!==2||!te(r[0])||!te(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!te(t[0])||t[0]<n)&&(i[0]=n),(!te(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},C3=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Oi(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},_3=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Oi(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},E3={sign:C3,expand:mE,none:ya,silhouette:pE,wiggle:gE,positive:_3},I3=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=E3[n],o=hE().keys(s).value(function(l,c){return+zt(l,c,0)}).order(Pm).offset(i);return o(t)},D3=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,h){var x,p=(x=h.type)!==null&&x!==void 0&&x.defaultProps?Ke(Ke({},h.type.defaultProps),h.props):h.props,g=p.stackId,m=p.hide;if(m)return f;var y=p[n],v=f[y]||{hasStack:!1,stackGroups:{}};if(at(g)){var b=v.stackGroups[g]||{numericAxisId:n,cateAxisId:s,items:[]};b.items.push(h),v.hasStack=!0,v.stackGroups[g]=b}else v.stackGroups[Ti("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[h]};return Ke(Ke({},f),{},ha({},y,v))},c),d={};return Object.keys(u).reduce(function(f,h){var x=u[h];if(x.hasStack){var p={};x.stackGroups=Object.keys(x.stackGroups).reduce(function(g,m){var y=x.stackGroups[m];return Ke(Ke({},g),{},ha({},m,{numericAxisId:n,cateAxisId:s,items:y.items,stackedData:I3(t,y.items,i)}))},p)}return Ke(Ke({},f),{},ha({},h,x))},d)},R3=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=H$(u,i,l);return t.domain([hc(d),fc(d)]),{niceTicks:d}}if(i&&s==="number"){var f=t.domain(),h=K$(f,i,l);return{niceTicks:h}}return null};function Yj(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Se(s[t.dataKey])){var l=$o(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=zt(s,Se(o)?t.dataKey:o);return Se(c)?null:t.scale(c)}var Jj=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=zt(o,r.dataKey,r.domain[l]);return Se(c)?null:r.scale(c)-i/2+s},M3=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},$3=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Ke(Ke({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(at(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},L3=function(t){return t.reduce(function(r,n){return[hc(n.concat([r[0]]).filter(te)),fc(n.concat([r[1]]).filter(te))]},[1/0,-1/0])},sO=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,d){var f=L3(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},Zj=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Qj=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ym=function(t,r,n){if(we(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(te(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(Zj.test(t[0])){var i=+Zj.exec(t[0])[1];s[0]=r[0]-i}else we(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(te(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(Qj.test(t[1])){var o=+Qj.exec(t[1])[1];s[1]=r[1]+o}else we(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},dl=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=_g(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],d=i[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},ew=function(t,r,n){return!t||!t.length||mc(t,Qt(n,"type.defaultProps.domain"))?r:t},iO=function(t,r){var n=t.type.defaultProps?Ke(Ke({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return Ke(Ke({},Ae(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:nx(t),value:zt(r,s),type:c,payload:r,chartType:u,hide:d})};function ri(e){"@babel/helpers - typeof";return ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ri(e)}function tw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tw(Object(r),!0).forEach(function(n){B3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function B3(e,t,r){return t=F3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F3(e){var t=q3(e,"string");return ri(t)=="symbol"?t:t+""}function q3(e,t){if(ri(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ri(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fl=Math.PI/180,U3=function(t){return t*180/Math.PI},ht=function(t,r,n,s){return{x:t+Math.cos(-fl*s)*n,y:r+Math.sin(-fl*s)*n}},V3=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},z3=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=V3({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:U3(u),angleInRadian:u}},W3=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},H3=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},nw=function(t,r){var n=t.x,s=t.y,i=z3({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=W3(r),f=d.startAngle,h=d.endAngle,x=l,p;if(f<=h){for(;x>h;)x-=360;for(;x<f;)x+=360;p=x>=f&&x<=h}else{for(;x>f;)x-=360;for(;x<h;)x+=360;p=x>=h&&x<=f}return p?rw(rw({},r),{},{radius:o,angle:H3(x,r)}):null};function ni(e){"@babel/helpers - typeof";return ni=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ni(e)}var K3=["offset"];function G3(e){return Z3(e)||J3(e)||Y3(e)||X3()}function X3(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y3(e,t){if(e){if(typeof e=="string")return Jm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Jm(e,t)}}function J3(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Z3(e){if(Array.isArray(e))return Jm(e)}function Jm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Q3(e,t){if(e==null)return{};var r=e4(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function e4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function aw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aw(Object(r),!0).forEach(function(n){t4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t4(e,t,r){return t=r4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r4(e){var t=n4(e,"string");return ni(t)=="symbol"?t:t+""}function n4(e,t){if(ni(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ni(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ai(){return ai=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ai.apply(this,arguments)}var a4=function(t){var r=t.value,n=t.formatter,s=Se(t.children)?r:t.children;return we(n)?n(s):s},s4=function(t,r){var n=mr(r-t),s=Math.min(Math.abs(r-t),360);return n*s},i4=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,d=c.cy,f=c.innerRadius,h=c.outerRadius,x=c.startAngle,p=c.endAngle,g=c.clockWise,m=(f+h)/2,y=s4(x,p),v=y>=0?1:-1,b,S;s==="insideStart"?(b=x+v*o,S=g):s==="insideEnd"?(b=p-v*o,S=!g):s==="end"&&(b=p+v*o,S=g),S=y<=0?S:!S;var j=ht(u,d,m,b),w=ht(u,d,m,b+(S?1:-1)*359),P="M".concat(j.x,",").concat(j.y,`
    A`).concat(m,",").concat(m,",0,1,").concat(S?0:1,`,
    `).concat(w.x,",").concat(w.y),A=Se(t.id)?Ti("recharts-radial-line-"):t.id;return _.createElement("text",ai({},n,{dominantBaseline:"central",className:Te("recharts-radial-bar-label",l)}),_.createElement("defs",null,_.createElement("path",{id:A,d:P})),_.createElement("textPath",{xlinkHref:"#".concat(A)},r))},o4=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,d=i.startAngle,f=i.endAngle,h=(d+f)/2;if(s==="outside"){var x=ht(o,l,u+n,h),p=x.x,g=x.y;return{x:p,y:g,textAnchor:p>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var m=(c+u)/2,y=ht(o,l,m,h),v=y.x,b=y.y;return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},l4=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,h=f*s,x=f>0?"end":"start",p=f>0?"start":"end",g=u>=0?1:-1,m=g*s,y=g>0?"end":"start",v=g>0?"start":"end";if(i==="top"){var b={x:l+u/2,y:c-f*s,textAnchor:"middle",verticalAnchor:x};return rt(rt({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var S={x:l+u/2,y:c+d+h,textAnchor:"middle",verticalAnchor:p};return rt(rt({},S),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(i==="left"){var j={x:l-m,y:c+d/2,textAnchor:y,verticalAnchor:"middle"};return rt(rt({},j),n?{width:Math.max(j.x-n.x,0),height:d}:{})}if(i==="right"){var w={x:l+u+m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"};return rt(rt({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:d}:{})}var P=n?{width:u,height:d}:{};return i==="insideLeft"?rt({x:l+m,y:c+d/2,textAnchor:v,verticalAnchor:"middle"},P):i==="insideRight"?rt({x:l+u-m,y:c+d/2,textAnchor:y,verticalAnchor:"middle"},P):i==="insideTop"?rt({x:l+u/2,y:c+h,textAnchor:"middle",verticalAnchor:p},P):i==="insideBottom"?rt({x:l+u/2,y:c+d-h,textAnchor:"middle",verticalAnchor:x},P):i==="insideTopLeft"?rt({x:l+m,y:c+h,textAnchor:v,verticalAnchor:p},P):i==="insideTopRight"?rt({x:l+u-m,y:c+h,textAnchor:y,verticalAnchor:p},P):i==="insideBottomLeft"?rt({x:l+m,y:c+d-h,textAnchor:v,verticalAnchor:x},P):i==="insideBottomRight"?rt({x:l+u-m,y:c+d-h,textAnchor:y,verticalAnchor:x},P):Wa(i)&&(te(i.x)||An(i.x))&&(te(i.y)||An(i.y))?rt({x:l+qn(i.x,u),y:c+qn(i.y,d),textAnchor:"end",verticalAnchor:"end"},P):rt({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},P)},c4=function(t){return"cx"in t&&te(t.cx)};function gt(e){var t=e.offset,r=t===void 0?5:t,n=Q3(e,K3),s=rt({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,d=s.className,f=d===void 0?"":d,h=s.textBreakAll;if(!i||Se(l)&&Se(c)&&!N.isValidElement(u)&&!we(u))return null;if(N.isValidElement(u))return N.cloneElement(u,s);var x;if(we(u)){if(x=N.createElement(u,s),N.isValidElement(x))return x}else x=a4(s);var p=c4(i),g=Ae(s,!0);if(p&&(o==="insideStart"||o==="insideEnd"||o==="end"))return i4(s,x,g);var m=p?o4(s):l4(s);return _.createElement(Yo,ai({className:Te("recharts-label",f)},g,m,{breakAll:h}),x)}gt.displayName="Label";var oO=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,h=t.y,x=t.top,p=t.left,g=t.width,m=t.height,y=t.clockWise,v=t.labelViewBox;if(v)return v;if(te(g)&&te(m)){if(te(f)&&te(h))return{x:f,y:h,width:g,height:m};if(te(x)&&te(p))return{x,y:p,width:g,height:m}}return te(f)&&te(h)?{x:f,y:h,width:0,height:0}:te(r)&&te(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:y}:t.viewBox?t.viewBox:{}},u4=function(t,r){return t?t===!0?_.createElement(gt,{key:"label-implicit",viewBox:r}):at(t)?_.createElement(gt,{key:"label-implicit",viewBox:r,value:t}):N.isValidElement(t)?t.type===gt?N.cloneElement(t,{key:"label-implicit",viewBox:r}):_.createElement(gt,{key:"label-implicit",content:t,viewBox:r}):we(t)?_.createElement(gt,{key:"label-implicit",content:t,viewBox:r}):Wa(t)?_.createElement(gt,ai({viewBox:r},t,{key:"label-implicit"})):null:null},d4=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=oO(t),o=er(s,gt).map(function(c,u){return N.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=u4(t.label,r||i);return[l].concat(G3(o))};gt.parseViewBox=oO;gt.renderCallByParent=d4;var fh,sw;function f4(){if(sw)return fh;sw=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return fh=e,fh}var h4=f4();const m4=$e(h4);function si(e){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(e)}var p4=["valueAccessor"],g4=["data","dataKey","clockWise","id","textBreakAll"];function x4(e){return j4(e)||v4(e)||b4(e)||y4()}function y4(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b4(e,t){if(e){if(typeof e=="string")return Zm(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zm(e,t)}}function v4(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function j4(e){if(Array.isArray(e))return Zm(e)}function Zm(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hl.apply(this,arguments)}function iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ow(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iw(Object(r),!0).forEach(function(n){w4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w4(e,t,r){return t=N4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N4(e){var t=S4(e,"string");return si(t)=="symbol"?t:t+""}function S4(e,t){if(si(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(si(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lw(e,t){if(e==null)return{};var r=P4(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function P4(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var A4=function(t){return Array.isArray(t.value)?m4(t.value):t.value};function cn(e){var t=e.valueAccessor,r=t===void 0?A4:t,n=lw(e,p4),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=lw(n,g4);return!s||!s.length?null:_.createElement(Ye,{className:"recharts-label-list"},s.map(function(d,f){var h=Se(i)?r(d,f):zt(d&&d.payload,i),x=Se(l)?{}:{id:"".concat(l,"-").concat(f)};return _.createElement(gt,hl({},Ae(d,!0),u,x,{parentViewBox:d.parentViewBox,value:h,textBreakAll:c,viewBox:gt.parseViewBox(Se(o)?d:ow(ow({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}cn.displayName="LabelList";function O4(e,t){return e?e===!0?_.createElement(cn,{key:"labelList-implicit",data:t}):_.isValidElement(e)||we(e)?_.createElement(cn,{key:"labelList-implicit",data:t,content:e}):Wa(e)?_.createElement(cn,hl({data:t},e,{key:"labelList-implicit"})):null:null}function T4(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=er(n,cn).map(function(o,l){return N.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=O4(e.label,t);return[i].concat(x4(s))}cn.renderCallByParent=T4;function ii(e){"@babel/helpers - typeof";return ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ii(e)}function Qm(){return Qm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qm.apply(this,arguments)}function cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cw(Object(r),!0).forEach(function(n){k4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k4(e,t,r){return t=C4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C4(e){var t=_4(e,"string");return ii(t)=="symbol"?t:t+""}function _4(e,t){if(ii(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ii(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var E4=function(t,r){var n=mr(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},no=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+s,f=Math.asin(c/d)/fl,h=u?i:i+o*f,x=ht(r,n,d,h),p=ht(r,n,s,h),g=u?i-o*f:i,m=ht(r,n,d*Math.cos(f*fl),g);return{center:x,circleTangency:p,lineTangency:m,theta:f}},lO=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=E4(o,l),u=o+c,d=ht(r,n,i,o),f=ht(r,n,i,u),h="M ".concat(d.x,",").concat(d.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var x=ht(r,n,s,o),p=ht(r,n,s,u);h+="L ".concat(p.x,",").concat(p.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(x.x,",").concat(x.y," Z")}else h+="L ".concat(r,",").concat(n," Z");return h},I4=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=mr(d-u),h=no({cx:r,cy:n,radius:i,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),x=h.circleTangency,p=h.lineTangency,g=h.theta,m=no({cx:r,cy:n,radius:i,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),y=m.circleTangency,v=m.lineTangency,b=m.theta,S=c?Math.abs(u-d):Math.abs(u-d)-g-b;if(S<0)return l?"M ".concat(p.x,",").concat(p.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):lO({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:d});var j="M ".concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(x.x,",").concat(x.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(S>180),",").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
  `);if(s>0){var w=no({cx:r,cy:n,radius:s,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),P=w.circleTangency,A=w.lineTangency,O=w.theta,C=no({cx:r,cy:n,radius:s,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),k=C.circleTangency,T=C.lineTangency,E=C.theta,$=c?Math.abs(u-d):Math.abs(u-d)-O-E;if($<0&&o===0)return"".concat(j,"L").concat(r,",").concat(n,"Z");j+="L".concat(T.x,",").concat(T.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(k.x,",").concat(k.y,`
      A`).concat(s,",").concat(s,",0,").concat(+($>180),",").concat(+(f>0),",").concat(P.x,",").concat(P.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else j+="L".concat(r,",").concat(n,"Z");return j},D4={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},cO=function(t){var r=uw(uw({},D4),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,h=r.className;if(o<i||d===f)return null;var x=Te("recharts-sector",h),p=o-i,g=qn(l,p,0,!0),m;return g>0&&Math.abs(d-f)<360?m=I4({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,p/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):m=lO({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:d,endAngle:f}),_.createElement("path",Qm({},Ae(r,!0),{className:x,d:m,role:"img"}))};function oi(e){"@babel/helpers - typeof";return oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oi(e)}function ep(){return ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ep.apply(this,arguments)}function dw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function fw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dw(Object(r),!0).forEach(function(n){R4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function R4(e,t,r){return t=M4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M4(e){var t=$4(e,"string");return oi(t)=="symbol"?t:t+""}function $4(e,t){if(oi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hw={curveBasisClosed:rE,curveBasisOpen:nE,curveBasis:tE,curveBumpX:q_,curveBumpY:U_,curveLinearClosed:aE,curveLinear:tc,curveMonotoneX:sE,curveMonotoneY:iE,curveNatural:oE,curveStep:lE,curveStepAfter:uE,curveStepBefore:cE},ao=function(t){return t.x===+t.x&&t.y===+t.y},hs=function(t){return t.x},ms=function(t){return t.y},L4=function(t,r){if(we(t))return t;var n="curve".concat(Ql(t));return(n==="curveMonotone"||n==="curveBump")&&r?hw["".concat(n).concat(r==="vertical"?"Y":"X")]:hw[n]||tc},B4=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=L4(n,l),f=u?i.filter(function(g){return ao(g)}):i,h;if(Array.isArray(o)){var x=u?o.filter(function(g){return ao(g)}):o,p=f.map(function(g,m){return fw(fw({},g),{},{base:x[m]})});return l==="vertical"?h=Xi().y(ms).x1(hs).x0(function(g){return g.base.x}):h=Xi().x(hs).y1(ms).y0(function(g){return g.base.y}),h.defined(ao).curve(d),h(p)}return l==="vertical"&&te(o)?h=Xi().y(ms).x1(hs).x0(o):te(o)?h=Xi().x(hs).y1(ms).y0(o):h=mP().x(hs).y(ms),h.defined(ao).curve(d),h(f)},tp=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?B4(t):s;return N.createElement("path",ep({},Ae(t,!1),Lo(t),{className:Te("recharts-curve",r),d:o,ref:i}))},hh={exports:{}},mh,mw;function F4(){if(mw)return mh;mw=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return mh=e,mh}var ph,pw;function q4(){if(pw)return ph;pw=1;var e=F4();function t(){}function r(){}return r.resetWarningCache=t,ph=function(){function n(o,l,c,u,d,f){if(f!==e){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},ph}var gw;function U4(){return gw||(gw=1,hh.exports=q4()()),hh.exports}var V4=U4();const Ie=$e(V4),{getOwnPropertyNames:z4,getOwnPropertySymbols:W4}=Object,{hasOwnProperty:H4}=Object.prototype;function gh(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function so(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function K4(e){return e?.[Symbol.toStringTag]}function xw(e){return z4(e).concat(W4(e))}const G4=Object.hasOwn||((e,t)=>H4.call(e,t));function Xn(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const X4="__v",Y4="__o",J4="_owner",{getOwnPropertyDescriptor:yw,keys:bw}=Object;function Z4(e,t){return e.byteLength===t.byteLength&&ml(new Uint8Array(e),new Uint8Array(t))}function Q4(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function e5(e,t){return e.byteLength===t.byteLength&&ml(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function t5(e,t){return Xn(e.getTime(),t.getTime())}function r5(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function n5(e,t){return e===t}function vw(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let d=!1,f=0;for(;(l=u.next())&&!l.done;){if(s[f]){f++;continue}const h=o.value,x=l.value;if(r.equals(h[0],x[0],c,f,e,t,r)&&r.equals(h[1],x[1],h[0],x[0],e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1;c++}return!0}const a5=Xn;function s5(e,t,r){const n=bw(e);let s=n.length;if(bw(t).length!==s)return!1;for(;s-- >0;)if(!uO(e,t,r,n[s]))return!1;return!0}function ps(e,t,r){const n=xw(e);let s=n.length;if(xw(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!uO(e,t,r,i)||(o=yw(e,i),l=yw(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function i5(e,t){return Xn(e.valueOf(),t.valueOf())}function o5(e,t){return e.source===t.source&&e.flags===t.flags}function jw(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,d=0;for(;(l=c.next())&&!l.done;){if(!s[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[d]=!0;break}d++}if(!u)return!1}return!0}function ml(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function l5(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function uO(e,t,r,n){return(n===J4||n===Y4||n===X4)&&(e.$$typeof||t.$$typeof)?!0:G4(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const c5="[object ArrayBuffer]",u5="[object Arguments]",d5="[object Boolean]",f5="[object DataView]",h5="[object Date]",m5="[object Error]",p5="[object Map]",g5="[object Number]",x5="[object Object]",y5="[object RegExp]",b5="[object Set]",v5="[object String]",j5={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},w5="[object URL]",N5=Object.prototype.toString;function S5({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:d,areSetsEqual:f,areTypedArraysEqual:h,areUrlsEqual:x,unknownTagComparators:p}){return function(m,y,v){if(m===y)return!0;if(m==null||y==null)return!1;const b=typeof m;if(b!==typeof y)return!1;if(b!=="object")return b==="number"?l(m,y,v):b==="function"?i(m,y,v):!1;const S=m.constructor;if(S!==y.constructor)return!1;if(S===Object)return c(m,y,v);if(Array.isArray(m))return t(m,y,v);if(S===Date)return n(m,y,v);if(S===RegExp)return d(m,y,v);if(S===Map)return o(m,y,v);if(S===Set)return f(m,y,v);const j=N5.call(m);if(j===h5)return n(m,y,v);if(j===y5)return d(m,y,v);if(j===p5)return o(m,y,v);if(j===b5)return f(m,y,v);if(j===x5)return typeof m.then!="function"&&typeof y.then!="function"&&c(m,y,v);if(j===w5)return x(m,y,v);if(j===m5)return s(m,y,v);if(j===u5)return c(m,y,v);if(j5[j])return h(m,y,v);if(j===c5)return e(m,y,v);if(j===f5)return r(m,y,v);if(j===d5||j===g5||j===v5)return u(m,y,v);if(p){let w=p[j];if(!w){const P=K4(m);P&&(w=p[P])}if(w)return w(m,y,v)}return!1}}function P5({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Z4,areArraysEqual:r?ps:Q4,areDataViewsEqual:e5,areDatesEqual:t5,areErrorsEqual:r5,areFunctionsEqual:n5,areMapsEqual:r?gh(vw,ps):vw,areNumbersEqual:a5,areObjectsEqual:r?ps:s5,arePrimitiveWrappersEqual:i5,areRegExpsEqual:o5,areSetsEqual:r?gh(jw,ps):jw,areTypedArraysEqual:r?gh(ml,ps):ml,areUrlsEqual:l5,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=so(n.areArraysEqual),i=so(n.areMapsEqual),o=so(n.areObjectsEqual),l=so(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function A5(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function O5({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:d}=r();return t(l,c,{cache:u,equals:n,meta:d,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const T5=yn();yn({strict:!0});yn({circular:!0});yn({circular:!0,strict:!0});yn({createInternalComparator:()=>Xn});yn({strict:!0,createInternalComparator:()=>Xn});yn({circular:!0,createInternalComparator:()=>Xn});yn({circular:!0,createInternalComparator:()=>Xn,strict:!0});function yn(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=P5(e),o=S5(i),l=r?r(o):A5(o);return O5({circular:t,comparator:o,createState:n,equals:l,strict:s})}function k5(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function ww(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):k5(s)};requestAnimationFrame(n)}function rp(e){"@babel/helpers - typeof";return rp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rp(e)}function C5(e){return D5(e)||I5(e)||E5(e)||_5()}function _5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E5(e,t){if(e){if(typeof e=="string")return Nw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nw(e,t)}}function Nw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function D5(e){if(Array.isArray(e))return e}function R5(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=C5(o),c=l[0],u=l.slice(1);if(typeof c=="number"){ww(s.bind(null,u),c);return}s(c),ww(s.bind(null,u));return}rp(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function li(e){"@babel/helpers - typeof";return li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(e)}function Sw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sw(Object(r),!0).forEach(function(n){dO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dO(e,t,r){return t=M5(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M5(e){var t=$5(e,"string");return li(t)==="symbol"?t:String(t)}function $5(e,t){if(li(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(li(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var L5=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},B5=function(t){return t},F5=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Is=function(t,r){return Object.keys(r).reduce(function(n,s){return Pw(Pw({},n),{},dO({},s,t(s,r[s])))},{})},Aw=function(t,r,n){return t.map(function(s){return"".concat(F5(s)," ").concat(r,"ms ").concat(n)}).join(",")};function q5(e,t){return z5(e)||V5(e,t)||fO(e,t)||U5()}function U5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V5(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function z5(e){if(Array.isArray(e))return e}function W5(e){return G5(e)||K5(e)||fO(e)||H5()}function H5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fO(e,t){if(e){if(typeof e=="string")return np(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return np(e,t)}}function K5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function G5(e){if(Array.isArray(e))return np(e)}function np(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var pl=1e-4,hO=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},mO=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},Ow=function(t,r){return function(n){var s=hO(t,r);return mO(s,n)}},X5=function(t,r){return function(n){var s=hO(t,r),i=[].concat(W5(s.map(function(o,l){return o*l}).slice(1)),[0]);return mO(i,n)}},Tw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(m){return parseFloat(m)}),d=q5(u,4);s=d[0],i=d[1],o=d[2],l=d[3]}}}var f=Ow(s,o),h=Ow(i,l),x=X5(s,o),p=function(y){return y>1?1:y<0?0:y},g=function(y){for(var v=y>1?1:y,b=v,S=0;S<8;++S){var j=f(b)-v,w=x(b);if(Math.abs(j-v)<pl||w<pl)return h(b);b=p(b-j/w)}return h(b)};return g.isStepper=!1,g},Y5=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(d,f,h){var x=-(d-f)*n,p=h*i,g=h+(x-p)*l/1e3,m=h*l/1e3+d;return Math.abs(m-f)<pl&&Math.abs(g)<pl?[f,0]:[m,g]};return c.isStepper=!0,c.dt=l,c},J5=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Tw(s);case"spring":return Y5();default:if(s.split("(")[0]==="cubic-bezier")return Tw(s)}return typeof s=="function"?s:null};function ci(e){"@babel/helpers - typeof";return ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(e)}function kw(e){return eL(e)||Q5(e)||pO(e)||Z5()}function Z5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q5(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function eL(e){if(Array.isArray(e))return sp(e)}function Cw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cw(Object(r),!0).forEach(function(n){ap(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ap(e,t,r){return t=tL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tL(e){var t=rL(e,"string");return ci(t)==="symbol"?t:String(t)}function rL(e,t){if(ci(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ci(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nL(e,t){return iL(e)||sL(e,t)||pO(e,t)||aL()}function aL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pO(e,t){if(e){if(typeof e=="string")return sp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sp(e,t)}}function sp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function sL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function iL(e){if(Array.isArray(e))return e}var gl=function(t,r,n){return t+(r-t)*n},ip=function(t){var r=t.from,n=t.to;return r!==n},oL=function e(t,r,n){var s=Is(function(i,o){if(ip(o)){var l=t(o.from,o.to,o.velocity),c=nL(l,2),u=c[0],d=c[1];return dt(dt({},o),{},{from:u,velocity:d})}return o},r);return n<1?Is(function(i,o){return ip(o)?dt(dt({},o),{},{velocity:gl(o.velocity,s[i].velocity,n),from:gl(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const lL=(function(e,t,r,n,s){var i=L5(e,t),o=i.reduce(function(m,y){return dt(dt({},m),{},ap({},y,[e[y],t[y]]))},{}),l=i.reduce(function(m,y){return dt(dt({},m),{},ap({},y,{from:e[y],velocity:0,to:t[y]}))},{}),c=-1,u,d,f=function(){return null},h=function(){return Is(function(y,v){return v.from},l)},x=function(){return!Object.values(l).filter(ip).length},p=function(y){u||(u=y);var v=y-u,b=v/r.dt;l=oL(r,l,b),s(dt(dt(dt({},e),t),h())),u=y,x()||(c=requestAnimationFrame(f))},g=function(y){d||(d=y);var v=(y-d)/n,b=Is(function(j,w){return gl.apply(void 0,kw(w).concat([r(v)]))},o);if(s(dt(dt(dt({},e),t),b)),v<1)c=requestAnimationFrame(f);else{var S=Is(function(j,w){return gl.apply(void 0,kw(w).concat([r(1)]))},o);s(dt(dt(dt({},e),t),S))}};return f=r.isStepper?p:g,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Oa(e){"@babel/helpers - typeof";return Oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oa(e)}var cL=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function uL(e,t){if(e==null)return{};var r=dL(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dL(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function xh(e){return pL(e)||mL(e)||hL(e)||fL()}function fL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hL(e,t){if(e){if(typeof e=="string")return op(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return op(e,t)}}function mL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pL(e){if(Array.isArray(e))return op(e)}function op(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function or(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(r),!0).forEach(function(n){Ps(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_w(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ps(e,t,r){return t=gO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,gO(n.key),n)}}function yL(e,t,r){return t&&xL(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gO(e){var t=bL(e,"string");return Oa(t)==="symbol"?t:String(t)}function bL(e,t){if(Oa(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Oa(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vL(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lp(e,t)}function lp(e,t){return lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},lp(e,t)}function jL(e){var t=wL();return function(){var n=xl(e),s;if(t){var i=xl(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return cp(this,s)}}function cp(e,t){if(t&&(Oa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return up(e)}function up(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wL(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xl(e){return xl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},xl(e)}var Kr=(function(e){vL(r,e);var t=jL(r);function r(n,s){var i;gL(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,h=o.children,x=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(up(i)),i.changeStyle=i.changeStyle.bind(up(i)),!l||x<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:d}),cp(i);if(f&&f.length)i.state={style:f[0].style};else if(u){if(typeof h=="function")return i.state={style:u},cp(i);i.state={style:c?Ps({},c,u):u}}else i.state={style:{}};return i}return yL(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,d=i.to,f=i.from,h=this.state.style;if(l){if(!o){var x={style:c?Ps({},c,d):d};this.state&&h&&(c&&h[c]!==d||!c&&h!==d)&&this.setState(x);return}if(!(T5(s.to,d)&&s.canBegin&&s.isActive)){var p=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=p||u?f:s.to;if(this.state&&h){var m={style:c?Ps({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(m)}this.runAnimation(or(or({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,d=s.begin,f=s.onAnimationEnd,h=s.onAnimationStart,x=lL(o,l,J5(u),c,this.changeStyle),p=function(){i.stopJSAnimation=x()};this.manager.start([h,d,p,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],d=u.style,f=u.duration,h=f===void 0?0:f,x=function(g,m,y){if(y===0)return g;var v=m.duration,b=m.easing,S=b===void 0?"ease":b,j=m.style,w=m.properties,P=m.onAnimationEnd,A=y>0?o[y-1]:m,O=w||Object.keys(j);if(typeof S=="function"||S==="spring")return[].concat(xh(g),[i.runJSAnimation.bind(i,{from:A.style,to:j,duration:v,easing:S}),v]);var C=Aw(O,v,S),k=or(or(or({},A.style),j),{},{transition:C});return[].concat(xh(g),[k,v,P]).filter(B5)};return this.manager.start([c].concat(xh(o.reduce(x,[d,Math.max(h,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=R5());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,d=s.onAnimationStart,f=s.onAnimationEnd,h=s.steps,x=s.children,p=this.manager;if(this.unSubscribe=p.subscribe(this.handleStyleChange),typeof u=="function"||typeof x=="function"||u==="spring"){this.runJSAnimation(s);return}if(h.length>1){this.runStepAnimation(s);return}var g=l?Ps({},l,c):c,m=Aw(Object.keys(g),o,u);p.start([d,i,or(or({},g),{},{transition:m}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=uL(s,cL),u=N.Children.count(i),d=this.state.style;if(typeof i=="function")return i(d);if(!l||u===0||o<=0)return i;var f=function(x){var p=x.props,g=p.style,m=g===void 0?{}:g,y=p.className,v=N.cloneElement(x,or(or({},c),{},{style:or(or({},m),d),className:y}));return v};return u===1?f(N.Children.only(i)):_.createElement("div",null,N.Children.map(i,function(h){return f(h)}))}}]),r})(N.PureComponent);Kr.displayName="Animate";Kr.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Kr.propTypes={from:Ie.oneOfType([Ie.object,Ie.string]),to:Ie.oneOfType([Ie.object,Ie.string]),attributeName:Ie.string,duration:Ie.number,begin:Ie.number,easing:Ie.oneOfType([Ie.string,Ie.func]),steps:Ie.arrayOf(Ie.shape({duration:Ie.number.isRequired,style:Ie.object.isRequired,easing:Ie.oneOfType([Ie.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ie.func]),properties:Ie.arrayOf("string"),onAnimationEnd:Ie.func})),children:Ie.oneOfType([Ie.node,Ie.func]),isActive:Ie.bool,canBegin:Ie.bool,onAnimationEnd:Ie.func,shouldReAnimate:Ie.bool,onAnimationStart:Ie.func,onAnimationReStart:Ie.func};function ui(e){"@babel/helpers - typeof";return ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ui(e)}function yl(){return yl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yl.apply(this,arguments)}function NL(e,t){return OL(e)||AL(e,t)||PL(e,t)||SL()}function SL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PL(e,t){if(e){if(typeof e=="string")return Ew(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ew(e,t)}}function Ew(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function OL(e){if(Array.isArray(e))return e}function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Dw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iw(Object(r),!0).forEach(function(n){TL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TL(e,t,r){return t=kL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kL(e){var t=CL(e,"string");return ui(t)=="symbol"?t:t+""}function CL(e,t){if(ui(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ui(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Rw=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,d;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],h=0,x=4;h<x;h++)f[h]=i[h]>o?o:i[h];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+s-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+s)),d+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*f[3])),d+="Z"}else if(o>0&&i===+i&&i>0){var p=Math.min(o,i);d="M ".concat(t,",").concat(r+l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+c*p,",").concat(r,`
            L `).concat(t+n-c*p,",").concat(r,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*p,`
            L `).concat(t+n,",").concat(r+s-l*p,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t+n-c*p,",").concat(r+s,`
            L `).concat(t+c*p,",").concat(r+s,`
            A `).concat(p,",").concat(p,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*p," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return d},_L=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),d=Math.max(i,i+l),f=Math.min(o,o+c),h=Math.max(o,o+c);return n>=u&&n<=d&&s>=f&&s<=h}return!1},EL={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},ax=function(t){var r=Dw(Dw({},EL),t),n=N.useRef(),s=N.useState(-1),i=NL(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var S=n.current.getTotalLength();S&&l(S)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,h=r.radius,x=r.className,p=r.animationEasing,g=r.animationDuration,m=r.animationBegin,y=r.isAnimationActive,v=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=Te("recharts-rectangle",x);return v?_.createElement(Kr,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:g,animationEasing:p,isActive:v},function(S){var j=S.width,w=S.height,P=S.x,A=S.y;return _.createElement(Kr,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,isActive:y,easing:p},_.createElement("path",yl({},Ae(r,!0),{className:b,d:Rw(P,A,j,w,h),ref:n})))}):_.createElement("path",yl({},Ae(r,!0),{className:b,d:Rw(c,u,d,f,h)}))};function dp(){return dp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},dp.apply(this,arguments)}var sx=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=Te("recharts-dot",i);return r===+r&&n===+n&&s===+s?N.createElement("circle",dp({},Ae(t,!1),Lo(t),{className:o,cx:r,cy:n,r:s})):null};function di(e){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(e)}var IL=["x","y","top","left","width","height","className"];function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fp.apply(this,arguments)}function Mw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mw(Object(r),!0).forEach(function(n){RL(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RL(e,t,r){return t=ML(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ML(e){var t=$L(e,"string");return di(t)=="symbol"?t:t+""}function $L(e,t){if(di(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LL(e,t){if(e==null)return{};var r=BL(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var FL=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},qL=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,h=t.height,x=h===void 0?0:h,p=t.className,g=LL(t,IL),m=DL({x:n,y:i,top:l,left:u,width:f,height:x},g);return!te(n)||!te(i)||!te(f)||!te(x)||!te(l)||!te(u)?null:_.createElement("path",fp({},Ae(m,!0),{className:Te("recharts-cross",p),d:FL(n,i,f,x,l,u)}))},yh,$w;function UL(){if($w)return yh;$w=1;var e=$P(),t=e(Object.getPrototypeOf,Object);return yh=t,yh}var bh,Lw;function VL(){if(Lw)return bh;Lw=1;var e=Xr(),t=UL(),r=Yr(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function u(d){if(!r(d)||e(d)!=n)return!1;var f=t(d);if(f===null)return!0;var h=l.call(f,"constructor")&&f.constructor;return typeof h=="function"&&h instanceof h&&o.call(h)==c}return bh=u,bh}var zL=VL();const WL=$e(zL);var vh,Bw;function HL(){if(Bw)return vh;Bw=1;var e=Xr(),t=Yr(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return vh=n,vh}var KL=HL();const GL=$e(KL);function fi(e){"@babel/helpers - typeof";return fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fi(e)}function bl(){return bl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bl.apply(this,arguments)}function XL(e,t){return QL(e)||ZL(e,t)||JL(e,t)||YL()}function YL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JL(e,t){if(e){if(typeof e=="string")return Fw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fw(e,t)}}function Fw(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ZL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function QL(e){if(Array.isArray(e))return e}function qw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Uw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qw(Object(r),!0).forEach(function(n){eB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function eB(e,t,r){return t=tB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tB(e){var t=rB(e,"string");return fi(t)=="symbol"?t:t+""}function rB(e,t){if(fi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vw=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},nB={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aB=function(t){var r=Uw(Uw({},nB),t),n=N.useRef(),s=N.useState(-1),i=XL(s,2),o=i[0],l=i[1];N.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,h=r.height,x=r.className,p=r.animationEasing,g=r.animationDuration,m=r.animationBegin,y=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||h!==+h||d===0&&f===0||h===0)return null;var v=Te("recharts-trapezoid",x);return y?_.createElement(Kr,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:h,x:c,y:u},duration:g,animationEasing:p,isActive:y},function(b){var S=b.upperWidth,j=b.lowerWidth,w=b.height,P=b.x,A=b.y;return _.createElement(Kr,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:g,easing:p},_.createElement("path",bl({},Ae(r,!0),{className:v,d:Vw(P,A,S,j,w),ref:n})))}):_.createElement("g",null,_.createElement("path",bl({},Ae(r,!0),{className:v,d:Vw(c,u,d,f,h)})))},sB=["option","shapeType","propTransformer","activeClassName","isActive"];function hi(e){"@babel/helpers - typeof";return hi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hi(e)}function iB(e,t){if(e==null)return{};var r=oB(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zw(Object(r),!0).forEach(function(n){lB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lB(e,t,r){return t=cB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cB(e){var t=uB(e,"string");return hi(t)=="symbol"?t:t+""}function uB(e,t){if(hi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(hi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dB(e,t){return vl(vl({},t),e)}function fB(e,t){return e==="symbols"}function Ww(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return _.createElement(ax,r);case"trapezoid":return _.createElement(aB,r);case"sector":return _.createElement(cO,r);case"symbols":if(fB(t))return _.createElement(Ng,r);break;default:return null}}function hB(e){return N.isValidElement(e)?e.props:e}function mB(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?dB:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=iB(e,sB),u;if(N.isValidElement(t))u=N.cloneElement(t,vl(vl({},c),hB(t)));else if(we(t))u=t(c);else if(WL(t)&&!GL(t)){var d=s(t,c);u=_.createElement(Ww,{shapeType:r,elementProps:d})}else{var f=c;u=_.createElement(Ww,{shapeType:r,elementProps:f})}return l?_.createElement(Ye,{className:o},u):u}function xc(e,t){return t!=null&&"trapezoids"in e.props}function yc(e,t){return t!=null&&"sectors"in e.props}function mi(e,t){return t!=null&&"points"in e.props}function pB(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function gB(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function xB(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function yB(e,t){var r;return xc(e,t)?r=pB:yc(e,t)?r=gB:mi(e,t)&&(r=xB),r}function bB(e,t){var r;return xc(e,t)?r="trapezoids":yc(e,t)?r="sectors":mi(e,t)&&(r="points"),r}function vB(e,t){if(xc(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(yc(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return mi(e,t)?t.payload:{}}function jB(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=bB(r,t),i=vB(r,t),o=n.filter(function(c,u){var d=mc(i,c),f=r.props[s].filter(function(p){var g=yB(r,t);return g(p,t)}),h=r.props[s].indexOf(f[f.length-1]),x=u===h;return d&&x}),l=n.indexOf(o[o.length-1]);return l}var jh,Hw;function wB(){if(Hw)return jh;Hw=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,c=t(e((s-n)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=i;return u}return jh=r,jh}var wh,Kw;function xO(){if(Kw)return wh;Kw=1;var e=QP(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return wh=n,wh}var Nh,Gw;function NB(){if(Gw)return Nh;Gw=1;var e=wB(),t=sc(),r=xO();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return Nh=n,Nh}var Sh,Xw;function SB(){if(Xw)return Sh;Xw=1;var e=NB(),t=e();return Sh=t,Sh}var PB=SB();const jl=$e(PB);function pi(e){"@babel/helpers - typeof";return pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pi(e)}function Yw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Jw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yw(Object(r),!0).forEach(function(n){yO(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yO(e,t,r){return t=AB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function AB(e){var t=OB(e,"string");return pi(t)=="symbol"?t:t+""}function OB(e,t){if(pi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(pi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TB=["Webkit","Moz","O","ms"],kB=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=TB.reduce(function(i,o){return Jw(Jw({},i),{},yO({},o+n,r))},{});return s[t]=r,s};function Ta(e){"@babel/helpers - typeof";return Ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ta(e)}function wl(){return wl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wl.apply(this,arguments)}function Zw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ph(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zw(Object(r),!0).forEach(function(n){Ft(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zw(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,vO(n.key),n)}}function _B(e,t,r){return t&&Qw(e.prototype,t),r&&Qw(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function EB(e,t,r){return t=Nl(t),IB(e,bO()?Reflect.construct(t,r||[],Nl(e).constructor):t.apply(e,r))}function IB(e,t){if(t&&(Ta(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return DB(e)}function DB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(bO=function(){return!!e})()}function Nl(e){return Nl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nl(e)}function RB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hp(e,t)}function hp(e,t){return hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},hp(e,t)}function Ft(e,t,r){return t=vO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vO(e){var t=MB(e,"string");return Ta(t)=="symbol"?t:t+""}function MB(e,t){if(Ta(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ta(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $B=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=_s().domain(jl(0,c)).range([i,i+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:d}},eN=function(t){return t.changedTouches&&!!t.changedTouches.length},ka=(function(e){function t(r){var n;return CB(this,t),n=EB(this,t,[r]),Ft(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),Ft(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),Ft(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),Ft(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ft(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ft(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ft(n,"handleSlideDragStart",function(s){var i=eN(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return RB(t,e),_B(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(s,i),h=Math.max(s,i),x=t.getIndexInRange(o,f),p=t.getIndexInRange(o,h);return{startIndex:x-x%c,endIndex:p===d?d:p-p%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=zt(i[n],l,n);return we(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,h=c.startIndex,x=c.endIndex,p=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,u+d-f-l,u+d-f-o):g<0&&(g=Math.max(g,u-o,u-l));var m=this.getIndex({startX:o+g,endX:l+g});(m.startIndex!==h||m.endIndex!==x)&&p&&p(m),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=eN(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],d=this.props,f=d.x,h=d.width,x=d.travellerWidth,p=d.onChange,g=d.gap,m=d.data,y={startX:this.state.startX,endX:this.state.endX},v=n.pageX-i;v>0?v=Math.min(v,f+h-x-u):v<0&&(v=Math.max(v,f-u)),y[o]=u+v;var b=this.getIndex(y),S=b.startIndex,j=b.endIndex,w=function(){var A=m.length-1;return o==="startX"&&(l>c?S%g===0:j%g===0)||l<c&&j===A||o==="endX"&&(l>c?j%g===0:S%g===0)||l>c&&j===A};this.setState(Ft(Ft({},o,u+v),"brushMoveStartX",n.pageX),function(){p&&w()&&p(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[s],f=l.indexOf(d);if(f!==-1){var h=f+n;if(!(h===-1||h>=l.length)){var x=l[h];s==="startX"&&x>=u||s==="endX"&&x<=c||this.setState(Ft({},s,x),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return _.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=N.Children.only(u);return f?_.cloneElement(f,{x:s,y:i,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,h=c.traveller,x=c.ariaLabel,p=c.data,g=c.startIndex,m=c.endIndex,y=Math.max(n,this.props.x),v=Ph(Ph({},Ae(this.props,!1)),{},{x:y,y:u,width:d,height:f}),b=x||"Min value: ".concat((i=p[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=p[m])===null||o===void 0?void 0:o.name);return _.createElement(Ye,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(j){["ArrowLeft","ArrowRight"].includes(j.key)&&(j.preventDefault(),j.stopPropagation(),l.handleTravellerMoveKeyboard(j.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,v))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,d=Math.min(n,s)+u,f=Math.max(Math.abs(s-n)-u,0);return _.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,h=d.endX,x=5,p={pointerEvents:"none",fill:u};return _.createElement(Ye,{className:"recharts-brush-texts"},_.createElement(Yo,wl({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,h)-x,y:o+l/2},p),this.getTextOfTick(s)),_.createElement(Yo,wl({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,h)+c+x,y:o+l/2},p),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,h=this.state,x=h.startX,p=h.endX,g=h.isTextActive,m=h.isSlideMoving,y=h.isTravellerMoving,v=h.isTravellerFocused;if(!s||!s.length||!te(l)||!te(c)||!te(u)||!te(d)||u<=0||d<=0)return null;var b=Te("recharts-brush",i),S=_.Children.count(o)===1,j=kB("userSelect","none");return _.createElement(Ye,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:j},this.renderBackground(),S&&this.renderPanorama(),this.renderSlide(x,p),this.renderTravellerLayer(x,"startX"),this.renderTravellerLayer(p,"endX"),(g||m||y||v||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return _.createElement(_.Fragment,null,_.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),_.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),_.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return _.isValidElement(n)?i=_.cloneElement(n,s):we(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return Ph({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?$B({data:i,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var h=s.scale.domain().map(function(x){return s.scale(x)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])})(N.PureComponent);Ft(ka,"displayName","Brush");Ft(ka,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Ah,tN;function LB(){if(tN)return Ah;tN=1;var e=Cg();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return Ah=t,Ah}var Oh,rN;function BB(){if(rN)return Oh;rN=1;var e=CP(),t=pn(),r=LB(),n=Rt(),s=sc();function i(o,l,c){var u=n(o)?e:r;return c&&s(o,l,c)&&(l=void 0),u(o,t(l,3))}return Oh=i,Oh}var FB=BB();const qB=$e(FB);var kr=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},Th,nN;function UB(){if(nN)return Th;nN=1;var e=GP();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return Th=t,Th}var kh,aN;function VB(){if(aN)return kh;aN=1;var e=UB(),t=HP(),r=pn();function n(s,i){var o={};return i=r(i,3),t(s,function(l,c,u){e(o,c,i(l,c,u))}),o}return kh=n,kh}var zB=VB();const WB=$e(zB);var Ch,sN;function HB(){if(sN)return Ch;sN=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return Ch=e,Ch}var _h,iN;function KB(){if(iN)return _h;iN=1;var e=Cg();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return _h=t,_h}var Eh,oN;function GB(){if(oN)return Eh;oN=1;var e=HB(),t=KB(),r=pn(),n=Rt(),s=sc();function i(o,l,c){var u=n(o)?e:t;return c&&s(o,l,c)&&(l=void 0),u(o,r(l,3))}return Eh=i,Eh}var XB=GB();const jO=$e(XB);var YB=["x","y"];function gi(e){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(e)}function mp(){return mp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mp.apply(this,arguments)}function lN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lN(Object(r),!0).forEach(function(n){JB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JB(e,t,r){return t=ZB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZB(e){var t=QB(e,"string");return gi(t)=="symbol"?t:t+""}function QB(e,t){if(gi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eF(e,t){if(e==null)return{};var r=tF(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function tF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rF(e,t){var r=e.x,n=e.y,s=eF(e,YB),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),d=parseInt(u,10),f="".concat(t.width||s.width),h=parseInt(f,10);return gs(gs(gs(gs(gs({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:h,name:t.name,radius:t.radius})}function cN(e){return _.createElement(mB,mp({shapeType:"rectangle",propTransformer:rF,activeClassName:"recharts-active-bar"},e))}var nF=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=te(n)||l_(n);return i?t(n,s):(i||Vn(),r)}},aF=["value","background"],wO;function Ca(e){"@babel/helpers - typeof";return Ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ca(e)}function sF(e,t){if(e==null)return{};var r=iF(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function iF(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Sl(){return Sl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sl.apply(this,arguments)}function uN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uN(Object(r),!0).forEach(function(n){an(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,SO(n.key),n)}}function lF(e,t,r){return t&&dN(e.prototype,t),r&&dN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function cF(e,t,r){return t=Pl(t),uF(e,NO()?Reflect.construct(t,r||[],Pl(e).constructor):t.apply(e,r))}function uF(e,t){if(t&&(Ca(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dF(e)}function dF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function NO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(NO=function(){return!!e})()}function Pl(e){return Pl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Pl(e)}function fF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pp(e,t)}function pp(e,t){return pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},pp(e,t)}function an(e,t,r){return t=SO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SO(e){var t=hF(e,"string");return Ca(t)=="symbol"?t:t+""}function hF(e,t){if(Ca(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ca(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ri=(function(e){function t(){var r;oF(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=cF(this,t,[].concat(s)),an(r,"state",{isAnimationFinished:!1}),an(r,"id",Ti("recharts-bar-")),an(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),an(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return fF(t,e),lF(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,d=Ae(this.props,!1);return n&&n.map(function(f,h){var x=h===c,p=x?u:o,g=Je(Je(Je({},d),f),{},{isActive:x,option:p,index:h,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return _.createElement(Ye,Sl({className:"recharts-bar-rectangle"},Bo(s.props,f,h),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(h)}),_.createElement(cN,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,d=s.animationEasing,f=s.animationId,h=this.state.prevData;return _.createElement(Kr,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(x){var p=x.t,g=i.map(function(m,y){var v=h&&h[y];if(v){var b=fr(v.x,m.x),S=fr(v.y,m.y),j=fr(v.width,m.width),w=fr(v.height,m.height);return Je(Je({},m),{},{x:b(p),y:S(p),width:j(p),height:w(p)})}if(o==="horizontal"){var P=fr(0,m.height),A=P(p);return Je(Je({},m),{},{y:m.y+m.height-A,height:A})}var O=fr(0,m.width),C=O(p);return Je(Je({},m),{},{width:C})});return _.createElement(Ye,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!mc(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Ae(this.props.background,!1);return i.map(function(u,d){u.value;var f=u.background,h=sF(u,aF);if(!f)return null;var x=Je(Je(Je(Je(Je({},h),{},{fill:"#eee"},f),c),Bo(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return _.createElement(cN,Sl({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},x))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=er(d,Di);if(!f)return null;var h=u==="vertical"?o[0].height/2:o[0].width/2,x=function(m,y){var v=Array.isArray(m.value)?m.value[1]:m.value;return{x:m.x,y:m.y,value:v,errorVal:zt(m,y)}},p={clipPath:n?"url(#clipPath-".concat(s,")"):null};return _.createElement(Ye,p,f.map(function(g){return _.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:h,dataPointFormatter:x})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,h=n.height,x=n.isAnimationActive,p=n.background,g=n.id;if(s||!i||!i.length)return null;var m=this.state.isAnimationFinished,y=Te("recharts-bar",o),v=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,S=v||b,j=Se(g)?this.id:g;return _.createElement(Ye,{className:y},v||b?_.createElement("defs",null,_.createElement("clipPath",{id:"clipPath-".concat(j)},_.createElement("rect",{x:v?u:u-f/2,y:b?d:d-h/2,width:v?f:f*2,height:b?h:h*2}))):null,_.createElement(Ye,{className:"recharts-bar-rectangles",clipPath:S?"url(#clipPath-".concat(j,")"):null},p?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(S,j),(!x||m)&&cn.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(N.PureComponent);wO=Ri;an(Ri,"displayName","Bar");an(Ri,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ka.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});an(Ri,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,x=T3(n,r);if(!x)return null;var p=t.layout,g=r.type.defaultProps,m=g!==void 0?Je(Je({},g),r.props):r.props,y=m.dataKey,v=m.children,b=m.minPointSize,S=p==="horizontal"?o:i,j=u?S.scale.domain():null,w=M3({numericAxis:S}),P=er(v,tA),A=f.map(function(O,C){var k,T,E,$,L,q;u?k=k3(u[d+C],j):(k=zt(O,y),Array.isArray(k)||(k=[w,k]));var z=nF(b,wO.defaultProps.minPointSize)(k[1],C);if(p==="horizontal"){var K,G=[o.scale(k[0]),o.scale(k[1])],Z=G[0],R=G[1];T=Jj({axis:i,ticks:l,bandSize:s,offset:x.offset,entry:O,index:C}),E=(K=R??Z)!==null&&K!==void 0?K:void 0,$=x.size;var F=Z-R;if(L=Number.isNaN(F)?0:F,q={x:T,y:o.y,width:$,height:o.height},Math.abs(z)>0&&Math.abs(L)<Math.abs(z)){var H=mr(L||z)*(Math.abs(z)-Math.abs(L));E-=H,L+=H}}else{var re=[i.scale(k[0]),i.scale(k[1])],M=re[0],J=re[1];if(T=M,E=Jj({axis:o,ticks:c,bandSize:s,offset:x.offset,entry:O,index:C}),$=J-M,L=x.size,q={x:i.x,y:E,width:i.width,height:L},Math.abs(z)>0&&Math.abs($)<Math.abs(z)){var Q=mr($||z)*(Math.abs(z)-Math.abs($));$+=Q}}return Je(Je(Je({},O),{},{x:T,y:E,width:$,height:L,value:u?k:k[1],payload:O,background:q},P&&P[C]&&P[C].props),{},{tooltipPayload:[iO(r,O)],tooltipPosition:{x:T+$/2,y:E+L/2}})});return Je({data:A,layout:p},h)});function xi(e){"@babel/helpers - typeof";return xi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xi(e)}function mF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,PO(n.key),n)}}function pF(e,t,r){return t&&fN(e.prototype,t),r&&fN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function hN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hN(Object(r),!0).forEach(function(n){bc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bc(e,t,r){return t=PO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function PO(e){var t=gF(e,"string");return xi(t)=="symbol"?t:t+""}function gF(e,t){if(xi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xF=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},h=!!qt(u,Ri);return d.reduce(function(x,p){var g=r[p],m=g.orientation,y=g.domain,v=g.padding,b=v===void 0?{}:v,S=g.mirror,j=g.reversed,w="".concat(m).concat(S?"Mirror":""),P,A,O,C,k;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var T=y[1]-y[0],E=1/0,$=g.categoricalDomain.sort(d_);if($.forEach(function(re,M){M>0&&(E=Math.min((re||0)-($[M-1]||0),E))}),Number.isFinite(E)){var L=E/T,q=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(P=L*q/2),g.padding==="no-gap"){var z=qn(t.barCategoryGap,L*q),K=L*q/2;P=K-z-(K-z)/q*z}}}s==="xAxis"?A=[n.left+(b.left||0)+(P||0),n.left+n.width-(b.right||0)-(P||0)]:s==="yAxis"?A=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(P||0),n.top+n.height-(b.bottom||0)-(P||0)]:A=g.range,j&&(A=[A[1],A[0]]);var G=A3(g,i,h),Z=G.scale,R=G.realScaleType;Z.domain(y).range(A),O3(Z);var F=R3(Z,ur(ur({},g),{},{realScaleType:R}));s==="xAxis"?(k=m==="top"&&!S||m==="bottom"&&S,O=n.left,C=f[w]-k*g.height):s==="yAxis"&&(k=m==="left"&&!S||m==="right"&&S,O=f[w]-k*g.width,C=n.top);var H=ur(ur(ur({},g),F),{},{realScaleType:R,x:O,y:C,scale:Z,width:s==="xAxis"?n.width:g.width,height:s==="yAxis"?n.height:g.height});return H.bandSize=dl(H,F),!g.hide&&s==="xAxis"?f[w]+=(k?-1:1)*H.height:g.hide||(f[w]+=(k?-1:1)*H.width),ur(ur({},x),{},bc({},p,H))},{})},AO=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},yF=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return AO({x:r,y:n},{x:s,y:i})},OO=(function(){function e(t){mF(this,e),this.scale=t}return pF(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();bc(OO,"EPS",1e-4);var ix=function(t){var r=Object.keys(t).reduce(function(n,s){return ur(ur({},n),{},bc({},s,OO.create(t[s])))},{});return ur(ur({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return WB(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return jO(s,function(i,o){return r[o].isInRange(i)})}})};function bF(e){return(e%180+180)%180}var vF=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bF(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Ih,mN;function jF(){if(mN)return Ih;mN=1;var e=pn(),t=ki(),r=nc();function n(s){return function(i,o,l){var c=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(f){return u(c[f],f,c)}}var d=s(i,o,l);return d>-1?c[u?i[d]:d]:void 0}}return Ih=n,Ih}var Dh,pN;function wF(){if(pN)return Dh;pN=1;var e=xO();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return Dh=t,Dh}var Rh,gN;function NF(){if(gN)return Rh;gN=1;var e=qP(),t=pn(),r=wF(),n=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),e(i,t(o,3),u)}return Rh=s,Rh}var Mh,xN;function SF(){if(xN)return Mh;xN=1;var e=jF(),t=NF(),r=e(t);return Mh=r,Mh}var PF=SF();const AF=$e(PF);var OF=nP();const TF=$e(OF);var kF=TF(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),ox=N.createContext(void 0),lx=N.createContext(void 0),TO=N.createContext(void 0),kO=N.createContext({}),CO=N.createContext(void 0),_O=N.createContext(0),EO=N.createContext(0),yN=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=kF(i);return _.createElement(ox.Provider,{value:n},_.createElement(lx.Provider,{value:s},_.createElement(kO.Provider,{value:i},_.createElement(TO.Provider,{value:d},_.createElement(CO.Provider,{value:o},_.createElement(_O.Provider,{value:u},_.createElement(EO.Provider,{value:c},l)))))))},CF=function(){return N.useContext(CO)},IO=function(t){var r=N.useContext(ox);r==null&&Vn();var n=r[t];return n==null&&Vn(),n},_F=function(){var t=N.useContext(ox);return rn(t)},EF=function(){var t=N.useContext(lx),r=AF(t,function(n){return jO(n.domain,Number.isFinite)});return r||rn(t)},DO=function(t){var r=N.useContext(lx);r==null&&Vn();var n=r[t];return n==null&&Vn(),n},IF=function(){var t=N.useContext(TO);return t},DF=function(){return N.useContext(kO)},cx=function(){return N.useContext(EO)},ux=function(){return N.useContext(_O)};function _a(e){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}function RF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,MO(n.key),n)}}function $F(e,t,r){return t&&MF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function LF(e,t,r){return t=Al(t),BF(e,RO()?Reflect.construct(t,r||[],Al(e).constructor):t.apply(e,r))}function BF(e,t){if(t&&(_a(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return FF(e)}function FF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function RO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(RO=function(){return!!e})()}function Al(e){return Al=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Al(e)}function qF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gp(e,t)}function gp(e,t){return gp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},gp(e,t)}function bN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(r),!0).forEach(function(n){dx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dx(e,t,r){return t=MO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MO(e){var t=UF(e,"string");return _a(t)=="symbol"?t:t+""}function UF(e,t){if(_a(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_a(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function VF(e,t){return KF(e)||HF(e,t)||WF(e,t)||zF()}function zF(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WF(e,t){if(e){if(typeof e=="string")return jN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jN(e,t)}}function jN(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function HF(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function KF(e){if(Array.isArray(e))return e}function xp(){return xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xp.apply(this,arguments)}var GF=function(t,r){var n;return _.isValidElement(t)?n=_.cloneElement(t,r):we(t)?n=t(r):n=_.createElement("line",xp({},r,{className:"recharts-reference-line-line"})),n},XF=function(t,r,n,s,i,o,l,c,u){var d=i.x,f=i.y,h=i.width,x=i.height;if(n){var p=u.y,g=t.y.apply(p,{position:o});if(kr(u,"discard")&&!t.y.isInRange(g))return null;var m=[{x:d+h,y:g},{x:d,y:g}];return c==="left"?m.reverse():m}if(r){var y=u.x,v=t.x.apply(y,{position:o});if(kr(u,"discard")&&!t.x.isInRange(v))return null;var b=[{x:v,y:f+x},{x:v,y:f}];return l==="top"?b.reverse():b}if(s){var S=u.segment,j=S.map(function(w){return t.apply(w,{position:o})});return kr(u,"discard")&&qB(j,function(w){return!t.isInRange(w)})?null:j}return null};function YF(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=CF(),d=IO(s),f=DO(i),h=IF();if(!u||!h)return null;qr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var x=ix({x:d.scale,y:f.scale}),p=at(t),g=at(r),m=n&&n.length===2,y=XF(x,p,g,m,h,e.position,d.orientation,f.orientation,e);if(!y)return null;var v=VF(y,2),b=v[0],S=b.x,j=b.y,w=v[1],P=w.x,A=w.y,O=kr(e,"hidden")?"url(#".concat(u,")"):void 0,C=vN(vN({clipPath:O},Ae(e,!0)),{},{x1:S,y1:j,x2:P,y2:A});return _.createElement(Ye,{className:Te("recharts-reference-line",l)},GF(o,C),gt.renderCallByParent(e,yF({x1:S,y1:j,x2:P,y2:A})))}var fx=(function(e){function t(){return RF(this,t),LF(this,t,arguments)}return qF(t,e),$F(t,[{key:"render",value:function(){return _.createElement(YF,this.props)}}])})(_.Component);dx(fx,"displayName","ReferenceLine");dx(fx,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function yp(){return yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yp.apply(this,arguments)}function Ea(e){"@babel/helpers - typeof";return Ea=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ea(e)}function wN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function NN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wN(Object(r),!0).forEach(function(n){vc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ZF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LO(n.key),n)}}function QF(e,t,r){return t&&ZF(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eq(e,t,r){return t=Ol(t),tq(e,$O()?Reflect.construct(t,r||[],Ol(e).constructor):t.apply(e,r))}function tq(e,t){if(t&&(Ea(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rq(e)}function rq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $O(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($O=function(){return!!e})()}function Ol(e){return Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ol(e)}function nq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bp(e,t)}function bp(e,t){return bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},bp(e,t)}function vc(e,t,r){return t=LO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LO(e){var t=aq(e,"string");return Ea(t)=="symbol"?t:t+""}function aq(e,t){if(Ea(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ea(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sq=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=ix({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return kr(t,"discard")&&!o.isInRange(l)?null:l},jc=(function(e){function t(){return JF(this,t),eq(this,t,arguments)}return nq(t,e),QF(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=at(s),d=at(i);if(qr(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=sq(this.props);if(!f)return null;var h=f.x,x=f.y,p=this.props,g=p.shape,m=p.className,y=kr(this.props,"hidden")?"url(#".concat(c,")"):void 0,v=NN(NN({clipPath:y},Ae(this.props,!0)),{},{cx:h,cy:x});return _.createElement(Ye,{className:Te("recharts-reference-dot",m)},t.renderDot(g,v),gt.renderCallByParent(this.props,{x:h-o,y:x-o,width:2*o,height:2*o}))}}])})(_.Component);vc(jc,"displayName","ReferenceDot");vc(jc,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});vc(jc,"renderDot",function(e,t){var r;return _.isValidElement(e)?r=_.cloneElement(e,t):we(e)?r=e(t):r=_.createElement(sx,yp({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vp.apply(this,arguments)}function Ia(e){"@babel/helpers - typeof";return Ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ia(e)}function SN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SN(Object(r),!0).forEach(function(n){wc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FO(n.key),n)}}function lq(e,t,r){return t&&oq(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cq(e,t,r){return t=Tl(t),uq(e,BO()?Reflect.construct(t,r||[],Tl(e).constructor):t.apply(e,r))}function uq(e,t){if(t&&(Ia(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dq(e)}function dq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(BO=function(){return!!e})()}function Tl(e){return Tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Tl(e)}function fq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jp(e,t)}function jp(e,t){return jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},jp(e,t)}function wc(e,t,r){return t=FO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FO(e){var t=hq(e,"string");return Ia(t)=="symbol"?t:t+""}function hq(e,t){if(Ia(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ia(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var mq=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,d=i.xAxis,f=i.yAxis;if(!d||!f)return null;var h=ix({x:d.scale,y:f.scale}),x={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(c,{position:"start"}):h.y.rangeMin},p={x:r?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:s?h.y.apply(u,{position:"end"}):h.y.rangeMax};return kr(i,"discard")&&(!h.isInRange(x)||!h.isInRange(p))?null:AO(x,p)},Nc=(function(e){function t(){return iq(this,t),cq(this,t,arguments)}return fq(t,e),lq(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;qr(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=at(s),h=at(i),x=at(o),p=at(l),g=this.props.shape;if(!f&&!h&&!x&&!p&&!g)return null;var m=mq(f,h,x,p,this.props);if(!m&&!g)return null;var y=kr(this.props,"hidden")?"url(#".concat(d,")"):void 0;return _.createElement(Ye,{className:Te("recharts-reference-area",c)},t.renderRect(g,PN(PN({clipPath:y},Ae(this.props,!0)),m)),gt.renderCallByParent(this.props,m))}}])})(_.Component);wc(Nc,"displayName","ReferenceArea");wc(Nc,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});wc(Nc,"renderRect",function(e,t){var r;return _.isValidElement(e)?r=_.cloneElement(e,t):we(e)?r=e(t):r=_.createElement(ax,vp({},t,{className:"recharts-reference-area-rect"})),r});function qO(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function pq(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return vF(n,r)}function gq(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function kl(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function xq(e,t){return qO(e,t+1)}function yq(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var p=n?.[c];if(p===void 0)return{v:qO(n,u)};var g=c,m,y=function(){return m===void 0&&(m=r(p,g)),m},v=p.coordinate,b=c===0||kl(e,v,y,d,l);b||(c=0,d=o,u+=1),b&&(d=v+e*(y()/2+s),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function yi(e){"@babel/helpers - typeof";return yi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yi(e)}function AN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AN(Object(r),!0).forEach(function(n){bq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bq(e,t,r){return t=vq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function vq(e){var t=jq(e,"string");return yi(t)=="symbol"?t:t+""}function jq(e,t){if(yi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wq(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(h){var x=i[h],p,g=function(){return p===void 0&&(p=r(x,h)),p};if(h===o-1){var m=e*(x.coordinate+e*g()/2-c);i[h]=x=pt(pt({},x),{},{tickCoord:m>0?x.coordinate-m*e:x.coordinate})}else i[h]=x=pt(pt({},x),{},{tickCoord:x.coordinate});var y=kl(e,x.tickCoord,g,l,c);y&&(c=x.tickCoord-e*(g()/2+s),i[h]=pt(pt({},x),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return i}function Nq(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);o[l-1]=d=pt(pt({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate});var x=kl(e,d.tickCoord,function(){return f},c,u);x&&(u=d.tickCoord-e*(f/2+s),o[l-1]=pt(pt({},d),{},{isShow:!0}))}for(var p=i?l-1:l,g=function(v){var b=o[v],S,j=function(){return S===void 0&&(S=r(b,v)),S};if(v===0){var w=e*(b.coordinate-e*j()/2-c);o[v]=b=pt(pt({},b),{},{tickCoord:w<0?b.coordinate-w*e:b.coordinate})}else o[v]=b=pt(pt({},b),{},{tickCoord:b.coordinate});var P=kl(e,b.tickCoord,j,c,u);P&&(c=b.tickCoord+e*(j()/2+s),o[v]=pt(pt({},b),{},{isShow:!0}))},m=0;m<p;m++)g(m);return o}function hx(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!s||!s.length||!n)return[];if(te(c)||Ka.isSsr)return xq(s,typeof c=="number"&&te(c)?c:0);var h=[],x=l==="top"||l==="bottom"?"width":"height",p=d&&x==="width"?Cs(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(b,S){var j=we(u)?u(b.value,S):b.value;return x==="width"?pq(Cs(j,{fontSize:t,letterSpacing:r}),p,f):Cs(j,{fontSize:t,letterSpacing:r})[x]},m=s.length>=2?mr(s[1].coordinate-s[0].coordinate):1,y=gq(i,m,x);return c==="equidistantPreserveStart"?yq(m,y,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Nq(m,y,g,s,o,c==="preserveStartEnd"):h=wq(m,y,g,s,o),h.filter(function(v){return v.isShow}))}var Sq=["viewBox"],Pq=["viewBox"],Aq=["ticks"];function Da(e){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(e)}function aa(){return aa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},aa.apply(this,arguments)}function ON(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ON(Object(r),!0).forEach(function(n){mx(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ON(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $h(e,t){if(e==null)return{};var r=Oq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Oq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tq(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VO(n.key),n)}}function kq(e,t,r){return t&&TN(e.prototype,t),r&&TN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cq(e,t,r){return t=Cl(t),_q(e,UO()?Reflect.construct(t,r||[],Cl(e).constructor):t.apply(e,r))}function _q(e,t){if(t&&(Da(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eq(e)}function Eq(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function UO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(UO=function(){return!!e})()}function Cl(e){return Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Cl(e)}function Iq(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wp(e,t)}function wp(e,t){return wp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},wp(e,t)}function mx(e,t,r){return t=VO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VO(e){var t=Dq(e,"string");return Da(t)=="symbol"?t:t+""}function Dq(e,t){if(Da(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Da(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ja=(function(e){function t(r){var n;return Tq(this,t),n=Cq(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return Iq(t,e),kq(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=$h(n,Sq),l=this.props,c=l.viewBox,u=$h(l,Pq);return!da(i,c)||!da(o,u)||!da(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,d=s.tickSize,f=s.mirror,h=s.tickMargin,x,p,g,m,y,v,b=f?-1:1,S=n.tickSize||d,j=te(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":x=p=n.coordinate,m=o+ +!f*c,g=m-b*S,v=g-b*h,y=j;break;case"left":g=m=n.coordinate,p=i+ +!f*l,x=p-b*S,y=x-b*h,v=j;break;case"right":g=m=n.coordinate,p=i+ +f*l,x=p+b*S,y=x+b*h,v=j;break;default:x=p=n.coordinate,m=o+ +f*c,g=m+b*S,v=g+b*h,y=j;break}return{line:{x1:x,y1:g,x2:p,y2:m},tick:{x:y,y:v}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=tt(tt(tt({},Ae(this.props,!1)),Ae(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!u||c==="bottom"&&u);f=tt(tt({},f),{},{x1:s,y1:i+h*l,x2:s+o,y2:i+h*l})}else{var x=+(c==="left"&&!u||c==="right"&&u);f=tt(tt({},f),{},{x1:s+x*o,y1:i,x2:s+x*o,y2:i+l})}return _.createElement("line",aa({},f,{className:Te("recharts-cartesian-axis-line",Qt(d,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,h=l.unit,x=hx(tt(tt({},this.props),{},{ticks:n}),s,i),p=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),m=Ae(this.props,!1),y=Ae(d,!1),v=tt(tt({},m),{},{fill:"none"},Ae(c,!1)),b=x.map(function(S,j){var w=o.getTickLineCoord(S),P=w.line,A=w.tick,O=tt(tt(tt(tt({textAnchor:p,verticalAnchor:g},m),{},{stroke:"none",fill:u},y),A),{},{index:j,payload:S,visibleTicksCount:x.length,tickFormatter:f});return _.createElement(Ye,aa({className:"recharts-cartesian-axis-tick",key:"tick-".concat(S.value,"-").concat(S.coordinate,"-").concat(S.tickCoord)},Bo(o.props,S,j)),c&&_.createElement("line",aa({},v,P,{className:Te("recharts-cartesian-axis-tick-line",Qt(c,"className"))})),d&&t.renderTickItem(d,O,"".concat(we(f)?f(S.value,j):S.value).concat(h||"")))});return _.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,d=s.hide;if(d)return null;var f=this.props,h=f.ticks,x=$h(f,Aq),p=h;return we(c)&&(p=h&&h.length>0?c(this.props):c(x)),o<=0||l<=0||!p||!p.length?null:_.createElement(Ye,{className:Te("recharts-cartesian-axis",u),ref:function(m){n.layerReference=m}},i&&this.renderAxisLine(),this.renderTicks(p,this.state.fontSize,this.state.letterSpacing),gt.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=Te(s.className,"recharts-cartesian-axis-tick-value");return _.isValidElement(n)?o=_.cloneElement(n,tt(tt({},s),{},{className:l})):we(n)?o=n(tt(tt({},s),{},{className:l})):o=_.createElement(Yo,aa({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(N.Component);mx(Ja,"displayName","CartesianAxis");mx(Ja,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Rq=["x1","y1","x2","y2","key"],Mq=["offset"];function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}function kN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kN(Object(r),!0).forEach(function(n){$q(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $q(e,t,r){return t=Lq(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lq(e){var t=Bq(e,"string");return zn(t)=="symbol"?t:t+""}function Bq(e,t){if(zn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kn(){return kn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kn.apply(this,arguments)}function CN(e,t){if(e==null)return{};var r=Fq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Fq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var qq=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return _.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function zO(e,t){var r;if(_.isValidElement(e))r=_.cloneElement(e,t);else if(we(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=CN(t,Rq),u=Ae(c,!1);u.offset;var d=CN(u,Mq);r=_.createElement("line",kn({},d,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function Uq(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=xt(xt({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return zO(s,u)});return _.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Vq(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=xt(xt({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return zO(s,u)});return _.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function zq(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(h){return Math.round(h+s-s)}).sort(function(h,x){return h-x});s!==d[0]&&d.unshift(0);var f=d.map(function(h,x){var p=!d[x+1],g=p?s+o-h:d[x+1]-h;if(g<=0)return null;var m=x%t.length;return _.createElement("rect",{key:"react-".concat(x),y:h,x:n,height:g,width:i,stroke:"none",fill:t[m],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function Wq(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(h){return Math.round(h+i-i)}).sort(function(h,x){return h-x});i!==d[0]&&d.unshift(0);var f=d.map(function(h,x){var p=!d[x+1],g=p?i+l-h:d[x+1]-h;if(g<=0)return null;var m=x%n.length;return _.createElement("rect",{key:"react-".concat(x),x:h,y:o,width:g,height:c,stroke:"none",fill:n[m],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return _.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var Hq=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return aO(hx(xt(xt(xt({},Ja.defaultProps),n),{},{ticks:Lr(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Kq=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return aO(hx(xt(xt(xt({},Ja.defaultProps),n),{},{ticks:Lr(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Qn={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function WO(e){var t,r,n,s,i,o,l=cx(),c=ux(),u=DF(),d=xt(xt({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Qn.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Qn.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Qn.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Qn.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Qn.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Qn.verticalFill,x:te(e.x)?e.x:u.left,y:te(e.y)?e.y:u.top,width:te(e.width)?e.width:u.width,height:te(e.height)?e.height:u.height}),f=d.x,h=d.y,x=d.width,p=d.height,g=d.syncWithTicks,m=d.horizontalValues,y=d.verticalValues,v=_F(),b=EF();if(!te(x)||x<=0||!te(p)||p<=0||!te(f)||f!==+f||!te(h)||h!==+h)return null;var S=d.verticalCoordinatesGenerator||Hq,j=d.horizontalCoordinatesGenerator||Kq,w=d.horizontalPoints,P=d.verticalPoints;if((!w||!w.length)&&we(j)){var A=m&&m.length,O=j({yAxis:b?xt(xt({},b),{},{ticks:A?m:b.ticks}):void 0,width:l,height:c,offset:u},A?!0:g);qr(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(zn(O),"]")),Array.isArray(O)&&(w=O)}if((!P||!P.length)&&we(S)){var C=y&&y.length,k=S({xAxis:v?xt(xt({},v),{},{ticks:C?y:v.ticks}):void 0,width:l,height:c,offset:u},C?!0:g);qr(Array.isArray(k),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(zn(k),"]")),Array.isArray(k)&&(P=k)}return _.createElement("g",{className:"recharts-cartesian-grid"},_.createElement(qq,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),_.createElement(Uq,kn({},d,{offset:u,horizontalPoints:w,xAxis:v,yAxis:b})),_.createElement(Vq,kn({},d,{offset:u,verticalPoints:P,xAxis:v,yAxis:b})),_.createElement(zq,kn({},d,{horizontalPoints:w})),_.createElement(Wq,kn({},d,{verticalPoints:P})))}WO.displayName="CartesianGrid";var Gq=["type","layout","connectNulls","ref"],Xq=["key"];function Ra(e){"@babel/helpers - typeof";return Ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ra(e)}function _N(e,t){if(e==null)return{};var r=Yq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Yq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ds(){return Ds=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ds.apply(this,arguments)}function EN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Bt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EN(Object(r),!0).forEach(function(n){dr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ea(e){return e8(e)||Qq(e)||Zq(e)||Jq()}function Jq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zq(e,t){if(e){if(typeof e=="string")return Np(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Np(e,t)}}function Qq(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e8(e){if(Array.isArray(e))return Np(e)}function Np(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KO(n.key),n)}}function r8(e,t,r){return t&&IN(e.prototype,t),r&&IN(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function n8(e,t,r){return t=_l(t),a8(e,HO()?Reflect.construct(t,r||[],_l(e).constructor):t.apply(e,r))}function a8(e,t){if(t&&(Ra(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return s8(e)}function s8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(HO=function(){return!!e})()}function _l(e){return _l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_l(e)}function i8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Sp(e,t)}function Sp(e,t){return Sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Sp(e,t)}function dr(e,t,r){return t=KO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KO(e){var t=o8(e,"string");return Ra(t)=="symbol"?t:t+""}function o8(e,t){if(Ra(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ra(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ma=(function(e){function t(){var r;t8(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=n8(this,t,[].concat(s)),dr(r,"state",{isAnimationFinished:!0,totalLength:0}),dr(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),dr(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(y,v){return y+v});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,h=l-o,x=[],p=0,g=0;p<c.length;g+=c[p],++p)if(g+c[p]>f){x=[].concat(ea(c.slice(0,p)),[f-g]);break}var m=x.length%2===0?[0,h]:[h];return[].concat(ea(t.repeat(c,d)),ea(x),m).map(function(y){return"".concat(y,"px")}).join(", ")}),dr(r,"id",Ti("recharts-line-")),dr(r,"pathRef",function(o){r.mainCurve=o}),dr(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),dr(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return i8(t,e),r8(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.points,l=i.xAxis,c=i.yAxis,u=i.layout,d=i.children,f=er(d,Di);if(!f)return null;var h=function(g,m){return{x:g.x,y:g.y,value:g.value,errorVal:zt(g.payload,m)}},x={clipPath:n?"url(#clipPath-".concat(s,")"):null};return _.createElement(Ye,x,f.map(function(p){return _.cloneElement(p,{key:"bar-".concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:h})}))}},{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=Ae(this.props,!1),h=Ae(c,!0),x=u.map(function(g,m){var y=Bt(Bt(Bt({key:"dot-".concat(m),r:3},f),h),{},{index:m,cx:g.x,cy:g.y,value:g.value,dataKey:d,payload:g.payload,points:u});return t.renderDotItem(c,y)}),p={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return _.createElement(Ye,Ds({className:"recharts-line-dots",key:"dots"},p),x)}},{key:"renderCurveStatically",value:function(n,s,i,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=_N(l,Gq),h=Bt(Bt(Bt({},Ae(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(i,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return _.createElement(tp,Ds({},h,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,x=o.animationId,p=o.animateNewValues,g=o.width,m=o.height,y=this.state,v=y.prevPoints,b=y.totalLength;return _.createElement(Kr,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"line-".concat(x),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(S){var j=S.t;if(v){var w=v.length/l.length,P=l.map(function(T,E){var $=Math.floor(E*w);if(v[$]){var L=v[$],q=fr(L.x,T.x),z=fr(L.y,T.y);return Bt(Bt({},T),{},{x:q(j),y:z(j)})}if(p){var K=fr(g*2,T.x),G=fr(m/2,T.y);return Bt(Bt({},T),{},{x:K(j),y:G(j)})}return Bt(Bt({},T),{},{x:T.x,y:T.y})});return i.renderCurveStatically(P,n,s)}var A=fr(0,b),O=A(j),C;if(c){var k="".concat(c).split(/[,\s]+/gim).map(function(T){return parseFloat(T)});C=i.getStrokeDasharray(O,b,k)}else C=i.generateSimpleStrokeDasharray(b,O);return i.renderCurveStatically(l,n,s,{strokeDasharray:C})})}},{key:"renderCurve",value:function(n,s){var i=this.props,o=i.points,l=i.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!mc(u,o))?this.renderCurveWithAnimation(n,s):this.renderCurveStatically(o,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.xAxis,d=s.yAxis,f=s.top,h=s.left,x=s.width,p=s.height,g=s.isAnimationActive,m=s.id;if(i||!l||!l.length)return null;var y=this.state.isAnimationFinished,v=l.length===1,b=Te("recharts-line",c),S=u&&u.allowDataOverflow,j=d&&d.allowDataOverflow,w=S||j,P=Se(m)?this.id:m,A=(n=Ae(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=A.r,C=O===void 0?3:O,k=A.strokeWidth,T=k===void 0?2:k,E=v_(o)?o:{},$=E.clipDot,L=$===void 0?!0:$,q=C*2+T;return _.createElement(Ye,{className:b},S||j?_.createElement("defs",null,_.createElement("clipPath",{id:"clipPath-".concat(P)},_.createElement("rect",{x:S?h:h-x/2,y:j?f:f-p/2,width:S?x:x*2,height:j?p:p*2})),!L&&_.createElement("clipPath",{id:"clipPath-dots-".concat(P)},_.createElement("rect",{x:h-q/2,y:f-q/2,width:x+q,height:p+q}))):null,!v&&this.renderCurve(w,P),this.renderErrorBar(w,P),(v||o)&&this.renderDots(w,L,P),(!g||y)&&cn.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:s.curPoints}:n.points!==s.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,s){for(var i=n.length%2!==0?[].concat(ea(n),[0]):n,o=[],l=0;l<s;++l)o=[].concat(ea(o),ea(i));return o}},{key:"renderDotItem",value:function(n,s){var i;if(_.isValidElement(n))i=_.cloneElement(n,s);else if(we(n))i=n(s);else{var o=s.key,l=_N(s,Xq),c=Te("recharts-line-dot",typeof n!="boolean"?n.className:"");i=_.createElement(sx,Ds({key:o},l,{className:c}))}return i}}])})(N.PureComponent);dr(Ma,"displayName","Line");dr(Ma,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Ka.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});dr(Ma,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,s=e.xAxisTicks,i=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(h,x){var p=zt(h,o);return d==="horizontal"?{x:Yj({axis:r,ticks:s,bandSize:l,entry:h,index:x}),y:Se(p)?null:n.scale(p),value:p,payload:h}:{x:Se(p)?null:r.scale(p),y:Yj({axis:n,ticks:i,bandSize:l,entry:h,index:x}),value:p,payload:h}});return Bt({points:f,layout:d},u)});function $a(e){"@babel/helpers - typeof";return $a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$a(e)}function l8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YO(n.key),n)}}function u8(e,t,r){return t&&c8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function d8(e,t,r){return t=El(t),f8(e,GO()?Reflect.construct(t,r||[],El(e).constructor):t.apply(e,r))}function f8(e,t){if(t&&($a(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h8(e)}function h8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GO=function(){return!!e})()}function El(e){return El=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},El(e)}function m8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pp(e,t)}function Pp(e,t){return Pp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Pp(e,t)}function XO(e,t,r){return t=YO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YO(e){var t=p8(e,"string");return $a(t)=="symbol"?t:t+""}function p8(e,t){if($a(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if($a(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Ap(){return Ap=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ap.apply(this,arguments)}function g8(e){var t=e.xAxisId,r=cx(),n=ux(),s=IO(t);return s==null?null:N.createElement(Ja,Ap({},s,{className:Te("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Lr(o,!0)}}))}var Sc=(function(e){function t(){return l8(this,t),d8(this,t,arguments)}return m8(t,e),u8(t,[{key:"render",value:function(){return N.createElement(g8,this.props)}}])})(N.Component);XO(Sc,"displayName","XAxis");XO(Sc,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function La(e){"@babel/helpers - typeof";return La=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},La(e)}function x8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,QO(n.key),n)}}function b8(e,t,r){return t&&y8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function v8(e,t,r){return t=Il(t),j8(e,JO()?Reflect.construct(t,r||[],Il(e).constructor):t.apply(e,r))}function j8(e,t){if(t&&(La(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w8(e)}function w8(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JO(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JO=function(){return!!e})()}function Il(e){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Il(e)}function N8(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Op(e,t)}function Op(e,t){return Op=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Op(e,t)}function ZO(e,t,r){return t=QO(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QO(e){var t=S8(e,"string");return La(t)=="symbol"?t:t+""}function S8(e,t){if(La(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(La(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Tp(){return Tp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tp.apply(this,arguments)}var P8=function(t){var r=t.yAxisId,n=cx(),s=ux(),i=DO(r);return i==null?null:N.createElement(Ja,Tp({},i,{className:Te("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Lr(l,!0)}}))},Pc=(function(e){function t(){return x8(this,t),v8(this,t,arguments)}return N8(t,e),b8(t,[{key:"render",value:function(){return N.createElement(P8,this.props)}}])})(N.Component);ZO(Pc,"displayName","YAxis");ZO(Pc,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function DN(e){return k8(e)||T8(e)||O8(e)||A8()}function A8(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O8(e,t){if(e){if(typeof e=="string")return kp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kp(e,t)}}function T8(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k8(e){if(Array.isArray(e))return kp(e)}function kp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Cp=function(t,r,n,s,i){var o=er(t,fx),l=er(t,jc),c=[].concat(DN(o),DN(l)),u=er(t,Nc),d="".concat(s,"Id"),f=s[0],h=r;if(c.length&&(h=c.reduce(function(g,m){if(m.props[d]===n&&kr(m.props,"extendDomain")&&te(m.props[f])){var y=m.props[f];return[Math.min(g[0],y),Math.max(g[1],y)]}return g},h)),u.length){var x="".concat(f,"1"),p="".concat(f,"2");h=u.reduce(function(g,m){if(m.props[d]===n&&kr(m.props,"extendDomain")&&te(m.props[x])&&te(m.props[p])){var y=m.props[x],v=m.props[p];return[Math.min(g[0],y,v),Math.max(g[1],y,v)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,m){return te(m)?[Math.min(g[0],m),Math.max(g[1],m)]:g},h)),h},Lh={exports:{}},RN;function C8(){return RN||(RN=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var x=new s(d,f||c,h),p=r?r+u:u;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],x]:c._events[p].push(x):(c._events[p]=x,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,x=f.length,p=new Array(x);h<x;h++)p[h]=f[h].fn;return p},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,x,p){var g=r?r+u:u;if(!this._events[g])return!1;var m=this._events[g],y=arguments.length,v,b;if(m.fn){switch(m.once&&this.removeListener(u,m.fn,void 0,!0),y){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,d),!0;case 3:return m.fn.call(m.context,d,f),!0;case 4:return m.fn.call(m.context,d,f,h),!0;case 5:return m.fn.call(m.context,d,f,h,x),!0;case 6:return m.fn.call(m.context,d,f,h,x,p),!0}for(b=1,v=new Array(y-1);b<y;b++)v[b-1]=arguments[b];m.fn.apply(m.context,v)}else{var S=m.length,j;for(b=0;b<S;b++)switch(m[b].once&&this.removeListener(u,m[b].fn,void 0,!0),y){case 1:m[b].fn.call(m[b].context);break;case 2:m[b].fn.call(m[b].context,d);break;case 3:m[b].fn.call(m[b].context,d,f);break;case 4:m[b].fn.call(m[b].context,d,f,h);break;default:if(!v)for(j=1,v=new Array(y-1);j<y;j++)v[j-1]=arguments[j];m[b].fn.apply(m[b].context,v)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var x=r?r+u:u;if(!this._events[x])return this;if(!d)return o(this,x),this;var p=this._events[x];if(p.fn)p.fn===d&&(!h||p.once)&&(!f||p.context===f)&&o(this,x);else{for(var g=0,m=[],y=p.length;g<y;g++)(p[g].fn!==d||h&&!p[g].once||f&&p[g].context!==f)&&m.push(p[g]);m.length?this._events[x]=m.length===1?m[0]:m:o(this,x)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(Lh)),Lh.exports}var _8=C8();const E8=$e(_8);var Bh=new E8,Fh="recharts.syncMouseEvents";function bi(e){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(e)}function I8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,eT(n.key),n)}}function R8(e,t,r){return t&&D8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qh(e,t,r){return t=eT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eT(e){var t=M8(e,"string");return bi(t)=="symbol"?t:t+""}function M8(e,t){if(bi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $8=(function(){function e(){I8(this,e),qh(this,"activeIndex",0),qh(this,"coordinateList",[]),qh(this,"layout","horizontal")}return R8(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,h=r.mouseHandlerCallback,x=h===void 0?null:h;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=x??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=i+c+u,h=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:h})}}}])})();function L8(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&te(n)&&te(s))return!0}return!1}function B8(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function tT(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=ht(t,r,n,s),l=ht(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function F8(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,h=ht(l,c,u,f),x=ht(l,c,d,f);n=h.x,s=h.y,i=x.x,o=x.y}else return tT(t);return[{x:n,y:s},{x:i,y:o}]}function vi(e){"@babel/helpers - typeof";return vi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vi(e)}function MN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MN(Object(r),!0).forEach(function(n){q8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function q8(e,t,r){return t=U8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U8(e){var t=V8(e,"string");return vi(t)=="symbol"?t:t+""}function V8(e,t){if(vi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function z8(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,h=e.chartName,x=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!x||!i||!o||h!=="ScatterChart"&&s!=="axis")return null;var p,g=tp;if(h==="ScatterChart")p=o,g=qL;else if(h==="BarChart")p=B8(f,o,c,d),g=ax;else if(f==="radial"){var m=tT(o),y=m.cx,v=m.cy,b=m.radius,S=m.startAngle,j=m.endAngle;p={cx:y,cy:v,startAngle:S,endAngle:j,innerRadius:b,outerRadius:b},g=cO}else p={points:F8(f,o,c)},g=tp;var w=io(io(io(io({stroke:"#ccc",pointerEvents:"none"},c),p),Ae(x,!1)),{},{payload:l,payloadIndex:u,className:Te("recharts-tooltip-cursor",x.className)});return N.isValidElement(x)?N.cloneElement(x,w):N.createElement(g,w)}var W8=["item"],H8=["children","className","width","height","style","compact","title","desc"];function Ba(e){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ba(e)}function sa(){return sa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sa.apply(this,arguments)}function $N(e,t){return X8(e)||G8(e,t)||nT(e,t)||K8()}function K8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function G8(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,s=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function X8(e){if(Array.isArray(e))return e}function LN(e,t){if(e==null)return{};var r=Y8(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y8(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function J8(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z8(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aT(n.key),n)}}function Q8(e,t,r){return t&&Z8(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function eU(e,t,r){return t=Dl(t),tU(e,rT()?Reflect.construct(t,r||[],Dl(e).constructor):t.apply(e,r))}function tU(e,t){if(t&&(Ba(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rU(e)}function rU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rT(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rT=function(){return!!e})()}function Dl(e){return Dl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dl(e)}function nU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_p(e,t)}function _p(e,t){return _p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_p(e,t)}function Fa(e){return iU(e)||sU(e)||nT(e)||aU()}function aU(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nT(e,t){if(e){if(typeof e=="string")return Ep(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ep(e,t)}}function sU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function iU(e){if(Array.isArray(e))return Ep(e)}function Ep(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){he(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function he(e,t,r){return t=aT(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aT(e){var t=oU(e,"string");return Ba(t)=="symbol"?t:t+""}function oU(e,t){if(Ba(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ba(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lU={xAxis:["bottom","top"],yAxis:["left","right"]},cU={width:"100%",height:"100%"},sT={x:0,y:0};function oo(e){return e}var uU=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},dU=function(t,r,n,s){var i=r.find(function(d){return d&&d.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return W(W(W({},s),ht(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return W(W(W({},s),ht(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return sT},Ac=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Fa(l),Fa(u)):l},[]);return o.length>0?o:t&&t.length&&te(s)&&te(i)?t.slice(s,i+1):[]};function iT(e){return e==="number"?[0,"auto"]:void 0}var Ip=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Ac(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var x=f===void 0?l:f;h=$o(x,o.dataKey,s)}else h=f&&f[n]||l[n];return h?[].concat(Fa(c),[iO(u,h)]):c},[])},FN=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=uU(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=v3(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,h=Ip(t,r,d,f),x=dU(n,l,d,i);return{activeTooltipIndex:d,activeLabel:f,activePayload:h,activeCoordinate:x}}return null},fU=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=t.stackOffset,x=nO(d,i);return n.reduce(function(p,g){var m,y=g.type.defaultProps!==void 0?W(W({},g.type.defaultProps),g.props):g.props,v=y.type,b=y.dataKey,S=y.allowDataOverflow,j=y.allowDuplicatedCategory,w=y.scale,P=y.ticks,A=y.includeHidden,O=y[o];if(p[O])return p;var C=Ac(t.data,{graphicalItems:s.filter(function(F){var H,re=o in F.props?F.props[o]:(H=F.type.defaultProps)===null||H===void 0?void 0:H[o];return re===O}),dataStartIndex:c,dataEndIndex:u}),k=C.length,T,E,$;L8(y.domain,S,v)&&(T=Ym(y.domain,null,S),x&&(v==="number"||w!=="auto")&&($=Es(C,b,"category")));var L=iT(v);if(!T||T.length===0){var q,z=(q=y.domain)!==null&&q!==void 0?q:L;if(b){if(T=Es(C,b,v),v==="category"&&x){var K=u_(T);j&&K?(E=T,T=jl(0,k)):j||(T=ew(z,T,g).reduce(function(F,H){return F.indexOf(H)>=0?F:[].concat(Fa(F),[H])},[]))}else if(v==="category")j?T=T.filter(function(F){return F!==""&&!Se(F)}):T=ew(z,T,g).reduce(function(F,H){return F.indexOf(H)>=0||H===""||Se(H)?F:[].concat(Fa(F),[H])},[]);else if(v==="number"){var G=P3(C,s.filter(function(F){var H,re,M=o in F.props?F.props[o]:(H=F.type.defaultProps)===null||H===void 0?void 0:H[o],J="hide"in F.props?F.props.hide:(re=F.type.defaultProps)===null||re===void 0?void 0:re.hide;return M===O&&(A||!J)}),b,i,d);G&&(T=G)}x&&(v==="number"||w!=="auto")&&($=Es(C,b,"category"))}else x?T=jl(0,k):l&&l[O]&&l[O].hasStack&&v==="number"?T=h==="expand"?[0,1]:sO(l[O].stackGroups,c,u):T=rO(C,s.filter(function(F){var H=o in F.props?F.props[o]:F.type.defaultProps[o],re="hide"in F.props?F.props.hide:F.type.defaultProps.hide;return H===O&&(A||!re)}),v,d,!0);if(v==="number")T=Cp(f,T,O,i,P),z&&(T=Ym(z,T,S));else if(v==="category"&&z){var Z=z,R=T.every(function(F){return Z.indexOf(F)>=0});R&&(T=Z)}}return W(W({},p),{},he({},O,W(W({},y),{},{axisType:i,domain:T,categoricalDomain:$,duplicateDomain:E,originalDomain:(m=y.domain)!==null&&m!==void 0?m:L,isCategorical:x,layout:d})))},{})},hU=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,h=Ac(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),x=h.length,p=nO(d,i),g=-1;return n.reduce(function(m,y){var v=y.type.defaultProps!==void 0?W(W({},y.type.defaultProps),y.props):y.props,b=v[o],S=iT("number");if(!m[b]){g++;var j;return p?j=jl(0,x):l&&l[b]&&l[b].hasStack?(j=sO(l[b].stackGroups,c,u),j=Cp(f,j,b,i)):(j=Ym(S,rO(h,n.filter(function(w){var P,A,O=o in w.props?w.props[o]:(P=w.type.defaultProps)===null||P===void 0?void 0:P[o],C="hide"in w.props?w.props.hide:(A=w.type.defaultProps)===null||A===void 0?void 0:A.hide;return O===b&&!C}),"number",d),s.defaultProps.allowDataOverflow),j=Cp(f,j,b,i)),W(W({},m),{},he({},b,W(W({axisType:i},s.defaultProps),{},{hide:!0,orientation:Qt(lU,"".concat(i,".").concat(g%2),null),domain:j,originalDomain:S,isCategorical:p,layout:d})))}return m},{})},mU=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(s,"Id"),h=er(d,i),x={};return h&&h.length?x=fU(t,{axes:h,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(x=hU(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),x},pU=function(t){var r=rn(t),n=Lr(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:_g(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:dl(r,n)}},qN=function(t){var r=t.children,n=t.defaultShowTooltip,s=qt(r,ka),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},gU=function(t){return!t||!t.length?!1:t.some(function(r){var n=Fr(r&&r.type);return n&&n.indexOf("Bar")>=0})},UN=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},xU=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,h=n.margin||{},x=qt(f,ka),p=qt(f,Dn),g=Object.keys(c).reduce(function(j,w){var P=c[w],A=P.orientation;return!P.mirror&&!P.hide?W(W({},j),{},he({},A,j[A]+P.width)):j},{left:h.left||0,right:h.right||0}),m=Object.keys(o).reduce(function(j,w){var P=o[w],A=P.orientation;return!P.mirror&&!P.hide?W(W({},j),{},he({},A,Qt(j,"".concat(A))+P.height)):j},{top:h.top||0,bottom:h.bottom||0}),y=W(W({},m),g),v=y.bottom;x&&(y.bottom+=x.props.height||ka.defaultProps.height),p&&r&&(y=N3(y,s,n,r));var b=u-y.left-y.right,S=d-y.top-y.bottom;return W(W({brushBottom:v},y),{},{width:Math.max(b,0),height:Math.max(S,0)})},yU=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},bU=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,h=function(y,v){var b=v.graphicalItems,S=v.stackGroups,j=v.offset,w=v.updateId,P=v.dataStartIndex,A=v.dataEndIndex,O=y.barSize,C=y.layout,k=y.barGap,T=y.barCategoryGap,E=y.maxBarSize,$=UN(C),L=$.numericAxisName,q=$.cateAxisName,z=gU(b),K=[];return b.forEach(function(G,Z){var R=Ac(y.data,{graphicalItems:[G],dataStartIndex:P,dataEndIndex:A}),F=G.type.defaultProps!==void 0?W(W({},G.type.defaultProps),G.props):G.props,H=F.dataKey,re=F.maxBarSize,M=F["".concat(L,"Id")],J=F["".concat(q,"Id")],Q={},de=c.reduce(function($t,Wt){var Yn=v["".concat(Wt.axisType,"Map")],rs=F["".concat(Wt.axisType,"Id")];Yn&&Yn[rs]||Wt.axisType==="zAxis"||Vn();var ns=Yn[rs];return W(W({},$t),{},he(he({},Wt.axisType,ns),"".concat(Wt.axisType,"Ticks"),Lr(ns)))},Q),V=de[q],ie=de["".concat(q,"Ticks")],ce=S&&S[M]&&S[M].hasStack&&$3(G,S[M].stackGroups),U=Fr(G.type).indexOf("Bar")>=0,Ce=dl(V,ie),be=[],Ve=z&&j3({barSize:O,stackGroups:S,totalSize:yU(de,q)});if(U){var Le,et,mt=Se(re)?E:re,Mt=(Le=(et=dl(V,ie,!0))!==null&&et!==void 0?et:mt)!==null&&Le!==void 0?Le:0;be=w3({barGap:k,barCategoryGap:T,bandSize:Mt!==Ce?Mt:Ce,sizeList:Ve[J],maxBarSize:mt}),Mt!==Ce&&(be=be.map(function($t){return W(W({},$t),{},{position:W(W({},$t.position),{},{offset:$t.position.offset-Mt/2})})}))}var sr=G&&G.type&&G.type.getComposedData;sr&&K.push({props:W(W({},sr(W(W({},de),{},{displayedData:R,props:y,dataKey:H,item:G,bandSize:Ce,barPosition:be,offset:j,stackedData:ce,layout:C,dataStartIndex:P,dataEndIndex:A}))),{},he(he(he({key:G.key||"item-".concat(Z)},L,de[L]),q,de[q]),"animationId",w)),childIndex:N_(G,y.children),item:G})}),K},x=function(y,v){var b=y.props,S=y.dataStartIndex,j=y.dataEndIndex,w=y.updateId;if(!m0({props:b}))return null;var P=b.children,A=b.layout,O=b.stackOffset,C=b.data,k=b.reverseStackOrder,T=UN(A),E=T.numericAxisName,$=T.cateAxisName,L=er(P,n),q=D3(C,L,"".concat(E,"Id"),"".concat($,"Id"),O,k),z=c.reduce(function(F,H){var re="".concat(H.axisType,"Map");return W(W({},F),{},he({},re,mU(b,W(W({},H),{},{graphicalItems:L,stackGroups:H.axisType===E&&q,dataStartIndex:S,dataEndIndex:j}))))},{}),K=xU(W(W({},z),{},{props:b,graphicalItems:L}),v?.legendBBox);Object.keys(z).forEach(function(F){z[F]=d(b,z[F],K,F.replace("Map",""),r)});var G=z["".concat($,"Map")],Z=pU(G),R=h(b,W(W({},z),{},{dataStartIndex:S,dataEndIndex:j,updateId:w,graphicalItems:L,stackGroups:q,offset:K}));return W(W({formattedGraphicalItems:R,graphicalItems:L,offset:K,stackGroups:q},Z),z)},p=(function(m){function y(v){var b,S,j;return J8(this,y),j=eU(this,y,[v]),he(j,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),he(j,"accessibilityManager",new $8),he(j,"handleLegendBBoxUpdate",function(w){if(w){var P=j.state,A=P.dataStartIndex,O=P.dataEndIndex,C=P.updateId;j.setState(W({legendBBox:w},x({props:j.props,dataStartIndex:A,dataEndIndex:O,updateId:C},W(W({},j.state),{},{legendBBox:w}))))}}),he(j,"handleReceiveSyncEvent",function(w,P,A){if(j.props.syncId===w){if(A===j.eventEmitterSymbol&&typeof j.props.syncMethod!="function")return;j.applySyncEvent(P)}}),he(j,"handleBrushChange",function(w){var P=w.startIndex,A=w.endIndex;if(P!==j.state.dataStartIndex||A!==j.state.dataEndIndex){var O=j.state.updateId;j.setState(function(){return W({dataStartIndex:P,dataEndIndex:A},x({props:j.props,dataStartIndex:P,dataEndIndex:A,updateId:O},j.state))}),j.triggerSyncEvent({dataStartIndex:P,dataEndIndex:A})}}),he(j,"handleMouseEnter",function(w){var P=j.getMouseInfo(w);if(P){var A=W(W({},P),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var O=j.props.onMouseEnter;we(O)&&O(A,w)}}),he(j,"triggeredAfterMouseMove",function(w){var P=j.getMouseInfo(w),A=P?W(W({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};j.setState(A),j.triggerSyncEvent(A);var O=j.props.onMouseMove;we(O)&&O(A,w)}),he(j,"handleItemMouseEnter",function(w){j.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),he(j,"handleItemMouseLeave",function(){j.setState(function(){return{isTooltipActive:!1}})}),he(j,"handleMouseMove",function(w){w.persist(),j.throttleTriggeredAfterMouseMove(w)}),he(j,"handleMouseLeave",function(w){j.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};j.setState(P),j.triggerSyncEvent(P);var A=j.props.onMouseLeave;we(A)&&A(P,w)}),he(j,"handleOuterEvent",function(w){var P=w_(w),A=Qt(j.props,"".concat(P));if(P&&we(A)){var O,C;/.*touch.*/i.test(P)?C=j.getMouseInfo(w.changedTouches[0]):C=j.getMouseInfo(w),A((O=C)!==null&&O!==void 0?O:{},w)}}),he(j,"handleClick",function(w){var P=j.getMouseInfo(w);if(P){var A=W(W({},P),{},{isTooltipActive:!0});j.setState(A),j.triggerSyncEvent(A);var O=j.props.onClick;we(O)&&O(A,w)}}),he(j,"handleMouseDown",function(w){var P=j.props.onMouseDown;if(we(P)){var A=j.getMouseInfo(w);P(A,w)}}),he(j,"handleMouseUp",function(w){var P=j.props.onMouseUp;if(we(P)){var A=j.getMouseInfo(w);P(A,w)}}),he(j,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),he(j,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.handleMouseDown(w.changedTouches[0])}),he(j,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&j.handleMouseUp(w.changedTouches[0])}),he(j,"handleDoubleClick",function(w){var P=j.props.onDoubleClick;if(we(P)){var A=j.getMouseInfo(w);P(A,w)}}),he(j,"handleContextMenu",function(w){var P=j.props.onContextMenu;if(we(P)){var A=j.getMouseInfo(w);P(A,w)}}),he(j,"triggerSyncEvent",function(w){j.props.syncId!==void 0&&Bh.emit(Fh,j.props.syncId,w,j.eventEmitterSymbol)}),he(j,"applySyncEvent",function(w){var P=j.props,A=P.layout,O=P.syncMethod,C=j.state.updateId,k=w.dataStartIndex,T=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)j.setState(W({dataStartIndex:k,dataEndIndex:T},x({props:j.props,dataStartIndex:k,dataEndIndex:T,updateId:C},j.state)));else if(w.activeTooltipIndex!==void 0){var E=w.chartX,$=w.chartY,L=w.activeTooltipIndex,q=j.state,z=q.offset,K=q.tooltipTicks;if(!z)return;if(typeof O=="function")L=O(K,w);else if(O==="value"){L=-1;for(var G=0;G<K.length;G++)if(K[G].value===w.activeLabel){L=G;break}}var Z=W(W({},z),{},{x:z.left,y:z.top}),R=Math.min(E,Z.x+Z.width),F=Math.min($,Z.y+Z.height),H=K[L]&&K[L].value,re=Ip(j.state,j.props.data,L),M=K[L]?{x:A==="horizontal"?K[L].coordinate:R,y:A==="horizontal"?F:K[L].coordinate}:sT;j.setState(W(W({},w),{},{activeLabel:H,activeCoordinate:M,activePayload:re,activeTooltipIndex:L}))}else j.setState(w)}),he(j,"renderCursor",function(w){var P,A=j.state,O=A.isTooltipActive,C=A.activeCoordinate,k=A.activePayload,T=A.offset,E=A.activeTooltipIndex,$=A.tooltipAxisBandSize,L=j.getTooltipEventType(),q=(P=w.props.active)!==null&&P!==void 0?P:O,z=j.props.layout,K=w.key||"_recharts-cursor";return _.createElement(z8,{key:K,activeCoordinate:C,activePayload:k,activeTooltipIndex:E,chartName:r,element:w,isActive:q,layout:z,offset:T,tooltipAxisBandSize:$,tooltipEventType:L})}),he(j,"renderPolarAxis",function(w,P,A){var O=Qt(w,"type.axisType"),C=Qt(j.state,"".concat(O,"Map")),k=w.type.defaultProps,T=k!==void 0?W(W({},k),w.props):w.props,E=C&&C[T["".concat(O,"Id")]];return N.cloneElement(w,W(W({},E),{},{className:Te(O,E.className),key:w.key||"".concat(P,"-").concat(A),ticks:Lr(E,!0)}))}),he(j,"renderPolarGrid",function(w){var P=w.props,A=P.radialLines,O=P.polarAngles,C=P.polarRadius,k=j.state,T=k.radiusAxisMap,E=k.angleAxisMap,$=rn(T),L=rn(E),q=L.cx,z=L.cy,K=L.innerRadius,G=L.outerRadius;return N.cloneElement(w,{polarAngles:Array.isArray(O)?O:Lr(L,!0).map(function(Z){return Z.coordinate}),polarRadius:Array.isArray(C)?C:Lr($,!0).map(function(Z){return Z.coordinate}),cx:q,cy:z,innerRadius:K,outerRadius:G,key:w.key||"polar-grid",radialLines:A})}),he(j,"renderLegend",function(){var w=j.state.formattedGraphicalItems,P=j.props,A=P.children,O=P.width,C=P.height,k=j.props.margin||{},T=O-(k.left||0)-(k.right||0),E=eO({children:A,formattedGraphicalItems:w,legendWidth:T,legendContent:u});if(!E)return null;var $=E.item,L=LN(E,W8);return N.cloneElement($,W(W({},L),{},{chartWidth:O,chartHeight:C,margin:k,onBBoxUpdate:j.handleLegendBBoxUpdate}))}),he(j,"renderTooltip",function(){var w,P=j.props,A=P.children,O=P.accessibilityLayer,C=qt(A,Pr);if(!C)return null;var k=j.state,T=k.isTooltipActive,E=k.activeCoordinate,$=k.activePayload,L=k.activeLabel,q=k.offset,z=(w=C.props.active)!==null&&w!==void 0?w:T;return N.cloneElement(C,{viewBox:W(W({},q),{},{x:q.left,y:q.top}),active:z,label:L,payload:z?$:[],coordinate:E,accessibilityLayer:O})}),he(j,"renderBrush",function(w){var P=j.props,A=P.margin,O=P.data,C=j.state,k=C.offset,T=C.dataStartIndex,E=C.dataEndIndex,$=C.updateId;return N.cloneElement(w,{key:w.key||"_recharts-brush",onChange:ro(j.handleBrushChange,w.props.onChange),data:O,x:te(w.props.x)?w.props.x:k.left,y:te(w.props.y)?w.props.y:k.top+k.height+k.brushBottom-(A.bottom||0),width:te(w.props.width)?w.props.width:k.width,startIndex:T,endIndex:E,updateId:"brush-".concat($)})}),he(j,"renderReferenceElement",function(w,P,A){if(!w)return null;var O=j,C=O.clipPathId,k=j.state,T=k.xAxisMap,E=k.yAxisMap,$=k.offset,L=w.type.defaultProps||{},q=w.props,z=q.xAxisId,K=z===void 0?L.xAxisId:z,G=q.yAxisId,Z=G===void 0?L.yAxisId:G;return N.cloneElement(w,{key:w.key||"".concat(P,"-").concat(A),xAxis:T[K],yAxis:E[Z],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:C})}),he(j,"renderActivePoints",function(w){var P=w.item,A=w.activePoint,O=w.basePoint,C=w.childIndex,k=w.isRange,T=[],E=P.props.key,$=P.item.type.defaultProps!==void 0?W(W({},P.item.type.defaultProps),P.item.props):P.item.props,L=$.activeDot,q=$.dataKey,z=W(W({index:C,dataKey:q,cx:A.x,cy:A.y,r:4,fill:nx(P.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Ae(L,!1)),Lo(L));return T.push(y.renderActiveDot(L,z,"".concat(E,"-activePoint-").concat(C))),O?T.push(y.renderActiveDot(L,W(W({},z),{},{cx:O.x,cy:O.y}),"".concat(E,"-basePoint-").concat(C))):k&&T.push(null),T}),he(j,"renderGraphicChild",function(w,P,A){var O=j.filterFormatItem(w,P,A);if(!O)return null;var C=j.getTooltipEventType(),k=j.state,T=k.isTooltipActive,E=k.tooltipAxis,$=k.activeTooltipIndex,L=k.activeLabel,q=j.props.children,z=qt(q,Pr),K=O.props,G=K.points,Z=K.isRange,R=K.baseLine,F=O.item.type.defaultProps!==void 0?W(W({},O.item.type.defaultProps),O.item.props):O.item.props,H=F.activeDot,re=F.hide,M=F.activeBar,J=F.activeShape,Q=!!(!re&&T&&z&&(H||M||J)),de={};C!=="axis"&&z&&z.props.trigger==="click"?de={onClick:ro(j.handleItemMouseEnter,w.props.onClick)}:C!=="axis"&&(de={onMouseLeave:ro(j.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:ro(j.handleItemMouseEnter,w.props.onMouseEnter)});var V=N.cloneElement(w,W(W({},O.props),de));function ie(Wt){return typeof E.dataKey=="function"?E.dataKey(Wt.payload):null}if(Q)if($>=0){var ce,U;if(E.dataKey&&!E.allowDuplicatedCategory){var Ce=typeof E.dataKey=="function"?ie:"payload.".concat(E.dataKey.toString());ce=$o(G,Ce,L),U=Z&&R&&$o(R,Ce,L)}else ce=G?.[$],U=Z&&R&&R[$];if(J||M){var be=w.props.activeIndex!==void 0?w.props.activeIndex:$;return[N.cloneElement(w,W(W(W({},O.props),de),{},{activeIndex:be})),null,null]}if(!Se(ce))return[V].concat(Fa(j.renderActivePoints({item:O,activePoint:ce,basePoint:U,childIndex:$,isRange:Z})))}else{var Ve,Le=(Ve=j.getItemByXY(j.state.activeCoordinate))!==null&&Ve!==void 0?Ve:{graphicalItem:V},et=Le.graphicalItem,mt=et.item,Mt=mt===void 0?w:mt,sr=et.childIndex,$t=W(W(W({},O.props),de),{},{activeIndex:sr});return[N.cloneElement(Mt,$t),null,null]}return Z?[V,null,null]:[V,null]}),he(j,"renderCustomized",function(w,P,A){return N.cloneElement(w,W(W({key:"recharts-customized-".concat(A)},j.props),j.state))}),he(j,"renderMap",{CartesianGrid:{handler:oo,once:!0},ReferenceArea:{handler:j.renderReferenceElement},ReferenceLine:{handler:oo},ReferenceDot:{handler:j.renderReferenceElement},XAxis:{handler:oo},YAxis:{handler:oo},Brush:{handler:j.renderBrush,once:!0},Bar:{handler:j.renderGraphicChild},Line:{handler:j.renderGraphicChild},Area:{handler:j.renderGraphicChild},Radar:{handler:j.renderGraphicChild},RadialBar:{handler:j.renderGraphicChild},Scatter:{handler:j.renderGraphicChild},Pie:{handler:j.renderGraphicChild},Funnel:{handler:j.renderGraphicChild},Tooltip:{handler:j.renderCursor,once:!0},PolarGrid:{handler:j.renderPolarGrid,once:!0},PolarAngleAxis:{handler:j.renderPolarAxis},PolarRadiusAxis:{handler:j.renderPolarAxis},Customized:{handler:j.renderCustomized}}),j.clipPathId="".concat((b=v.id)!==null&&b!==void 0?b:Ti("recharts"),"-clip"),j.throttleTriggeredAfterMouseMove=eA(j.triggeredAfterMouseMove,(S=v.throttleDelay)!==null&&S!==void 0?S:1e3/60),j.state={},j}return nU(y,m),Q8(y,[{key:"componentDidMount",value:function(){var b,S;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,S=b.children,j=b.data,w=b.height,P=b.layout,A=qt(S,Pr);if(A){var O=A.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,k=Ip(this.state,j,O,C),T=this.state.tooltipTicks[O].coordinate,E=(this.state.offset.top+w)/2,$=P==="horizontal",L=$?{x:T,y:E}:{y:T,x:E},q=this.state.formattedGraphicalItems.find(function(K){var G=K.item;return G.type.name==="Scatter"});q&&(L=W(W({},L),q.props.points[O].tooltipPosition),k=q.props.points[O].tooltipPayload);var z={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:C,activePayload:k,activeCoordinate:L};this.setState(z),this.renderCursor(A),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,S){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==S.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var j,w;this.accessibilityManager.setDetails({offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){ym([qt(b.children,Pr)],[qt(this.props.children,Pr)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=qt(this.props.children,Pr);if(b&&typeof b.props.shared=="boolean"){var S=b.props.shared?"axis":"item";return l.indexOf(S)>=0?S:i}return i}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var S=this.container,j=S.getBoundingClientRect(),w=uR(j),P={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},A=j.width/S.offsetWidth||1,O=this.inRange(P.chartX,P.chartY,A);if(!O)return null;var C=this.state,k=C.xAxisMap,T=C.yAxisMap,E=this.getTooltipEventType(),$=FN(this.state,this.props.data,this.props.layout,O);if(E!=="axis"&&k&&T){var L=rn(k).scale,q=rn(T).scale,z=L&&L.invert?L.invert(P.chartX):null,K=q&&q.invert?q.invert(P.chartY):null;return W(W({},P),{},{xValue:z,yValue:K},$)}return $?W(W({},P),$):null}},{key:"inRange",value:function(b,S){var j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,P=b/j,A=S/j;if(w==="horizontal"||w==="vertical"){var O=this.state.offset,C=P>=O.left&&P<=O.left+O.width&&A>=O.top&&A<=O.top+O.height;return C?{x:P,y:A}:null}var k=this.state,T=k.angleAxisMap,E=k.radiusAxisMap;if(T&&E){var $=rn(T);return nw({x:P,y:A},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,S=this.getTooltipEventType(),j=qt(b,Pr),w={};j&&S==="axis"&&(j.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var P=Lo(this.props,this.handleOuterEvent);return W(W({},P),w)}},{key:"addListener",value:function(){Bh.on(Fh,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Bh.removeListener(Fh,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,S,j){for(var w=this.state.formattedGraphicalItems,P=0,A=w.length;P<A;P++){var O=w[P];if(O.item===b||O.props.key===b.key||S===Fr(O.item.type)&&j===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,S=this.state.offset,j=S.left,w=S.top,P=S.height,A=S.width;return _.createElement("defs",null,_.createElement("clipPath",{id:b},_.createElement("rect",{x:j,y:w,height:P,width:A})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(S,j){var w=$N(j,2),P=w[0],A=w[1];return W(W({},S),{},he({},P,A.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(S,j){var w=$N(j,2),P=w[0],A=w[1];return W(W({},S),{},he({},P,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var S;return(S=this.state.xAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getYScaleByAxisId",value:function(b){var S;return(S=this.state.yAxisMap)===null||S===void 0||(S=S[b])===null||S===void 0?void 0:S.scale}},{key:"getItemByXY",value:function(b){var S=this.state,j=S.formattedGraphicalItems,w=S.activeItem;if(j&&j.length)for(var P=0,A=j.length;P<A;P++){var O=j[P],C=O.props,k=O.item,T=k.type.defaultProps!==void 0?W(W({},k.type.defaultProps),k.props):k.props,E=Fr(k.type);if(E==="Bar"){var $=(C.data||[]).find(function(K){return _L(b,K)});if($)return{graphicalItem:O,payload:$}}else if(E==="RadialBar"){var L=(C.data||[]).find(function(K){return nw(b,K)});if(L)return{graphicalItem:O,payload:L}}else if(xc(O,w)||yc(O,w)||mi(O,w)){var q=jB({graphicalItem:O,activeTooltipItem:w,itemData:T.data}),z=T.activeIndex===void 0?q:T.activeIndex;return{graphicalItem:W(W({},O),{},{childIndex:z}),payload:mi(O,w)?T.data[q]:O.props.data[q]}}}return null}},{key:"render",value:function(){var b=this;if(!m0(this))return null;var S=this.props,j=S.children,w=S.className,P=S.width,A=S.height,O=S.style,C=S.compact,k=S.title,T=S.desc,E=LN(S,H8),$=Ae(E,!1);if(C)return _.createElement(yN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_.createElement(vm,sa({},$,{width:P,height:A,title:k,desc:T}),this.renderClipPath(),g0(j,this.renderMap)));if(this.props.accessibilityLayer){var L,q;$.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,$.role=(q=this.props.role)!==null&&q!==void 0?q:"application",$.onKeyDown=function(K){b.accessibilityManager.keyboardEvent(K)},$.onFocus=function(){b.accessibilityManager.focus()}}var z=this.parseEventsOfWrapper();return _.createElement(yN,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},_.createElement("div",sa({className:Te("recharts-wrapper",w),style:W({position:"relative",cursor:"default",width:P,height:A},O)},z,{ref:function(G){b.container=G}}),_.createElement(vm,sa({},$,{width:P,height:A,title:k,desc:T,style:cU}),this.renderClipPath(),g0(j,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(N.Component);he(p,"displayName",r),he(p,"defaultProps",W({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),he(p,"getDerivedStateFromProps",function(m,y){var v=m.dataKey,b=m.data,S=m.children,j=m.width,w=m.height,P=m.layout,A=m.stackOffset,O=m.margin,C=y.dataStartIndex,k=y.dataEndIndex;if(y.updateId===void 0){var T=qN(m);return W(W(W({},T),{},{updateId:0},x(W(W({props:m},T),{},{updateId:0}),y)),{},{prevDataKey:v,prevData:b,prevWidth:j,prevHeight:w,prevLayout:P,prevStackOffset:A,prevMargin:O,prevChildren:S})}if(v!==y.prevDataKey||b!==y.prevData||j!==y.prevWidth||w!==y.prevHeight||P!==y.prevLayout||A!==y.prevStackOffset||!da(O,y.prevMargin)){var E=qN(m),$={chartX:y.chartX,chartY:y.chartY,isTooltipActive:y.isTooltipActive},L=W(W({},FN(y,b,P)),{},{updateId:y.updateId+1}),q=W(W(W({},E),$),L);return W(W(W({},q),x(W({props:m},q),y)),{},{prevDataKey:v,prevData:b,prevWidth:j,prevHeight:w,prevLayout:P,prevStackOffset:A,prevMargin:O,prevChildren:S})}if(!ym(S,y.prevChildren)){var z,K,G,Z,R=qt(S,ka),F=R&&(z=(K=R.props)===null||K===void 0?void 0:K.startIndex)!==null&&z!==void 0?z:C,H=R&&(G=(Z=R.props)===null||Z===void 0?void 0:Z.endIndex)!==null&&G!==void 0?G:k,re=F!==C||H!==k,M=!Se(b),J=M&&!re?y.updateId:y.updateId+1;return W(W({updateId:J},x(W(W({props:m},y),{},{updateId:J,dataStartIndex:F,dataEndIndex:H}),y)),{},{prevChildren:S,dataStartIndex:F,dataEndIndex:H})}return null}),he(p,"renderActiveDot",function(m,y,v){var b;return N.isValidElement(m)?b=N.cloneElement(m,y):we(m)?b=m(y):b=_.createElement(sx,y),_.createElement(Ye,{className:"recharts-active-dot",key:v},b)});var g=N.forwardRef(function(y,v){return _.createElement(p,sa({},y,{ref:v}))});return g.displayName=p.displayName,g},vU=bU({chartName:"LineChart",GraphicalChild:Ma,axisComponents:[{axisType:"xAxis",AxisComp:Sc},{axisType:"yAxis",AxisComp:Pc}],formatAxisMap:xF});function oT(e,t){return function(){return e.apply(t,arguments)}}const{toString:jU}=Object.prototype,{getPrototypeOf:px}=Object,{iterator:Oc,toStringTag:lT}=Symbol,Tc=(e=>t=>{const r=jU.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),wr=e=>(e=e.toLowerCase(),t=>Tc(t)===e),kc=e=>t=>typeof t===e,{isArray:Za}=Array,qa=kc("undefined");function Mi(e){return e!==null&&!qa(e)&&e.constructor!==null&&!qa(e.constructor)&&_t(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cT=wr("ArrayBuffer");function wU(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&cT(e.buffer),t}const NU=kc("string"),_t=kc("function"),uT=kc("number"),$i=e=>e!==null&&typeof e=="object",SU=e=>e===!0||e===!1,jo=e=>{if(Tc(e)!=="object")return!1;const t=px(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(lT in e)&&!(Oc in e)},PU=e=>{if(!$i(e)||Mi(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},AU=wr("Date"),OU=wr("File"),TU=wr("Blob"),kU=wr("FileList"),CU=e=>$i(e)&&_t(e.pipe),_U=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||_t(e.append)&&((t=Tc(e))==="formdata"||t==="object"&&_t(e.toString)&&e.toString()==="[object FormData]"))},EU=wr("URLSearchParams"),[IU,DU,RU,MU]=["ReadableStream","Request","Response","Headers"].map(wr),$U=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Li(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,s;if(typeof e!="object"&&(e=[e]),Za(e))for(n=0,s=e.length;n<s;n++)t.call(null,e[n],n,e);else{if(Mi(e))return;const i=r?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(n=0;n<o;n++)l=i[n],t.call(null,e[l],l,e)}}function dT(e,t){if(Mi(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n=r.length,s;for(;n-- >0;)if(s=r[n],t===s.toLowerCase())return s;return null}const Cn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,fT=e=>!qa(e)&&e!==Cn;function Dp(){const{caseless:e,skipUndefined:t}=fT(this)&&this||{},r={},n=(s,i)=>{const o=e&&dT(r,i)||i;jo(r[o])&&jo(s)?r[o]=Dp(r[o],s):jo(s)?r[o]=Dp({},s):Za(s)?r[o]=s.slice():(!t||!qa(s))&&(r[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Li(arguments[s],n);return r}const LU=(e,t,r,{allOwnKeys:n}={})=>(Li(t,(s,i)=>{r&&_t(s)?Object.defineProperty(e,i,{value:oT(s,r),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),e),BU=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),FU=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},qU=(e,t,r,n)=>{let s,i,o;const l={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],(!n||n(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=r!==!1&&px(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},UU=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},VU=e=>{if(!e)return null;if(Za(e))return e;let t=e.length;if(!uT(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},zU=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&px(Uint8Array)),WU=(e,t)=>{const n=(e&&e[Oc]).call(e);let s;for(;(s=n.next())&&!s.done;){const i=s.value;t.call(e,i[0],i[1])}},HU=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},KU=wr("HTMLFormElement"),GU=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,s){return n.toUpperCase()+s}),VN=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),XU=wr("RegExp"),hT=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Li(r,(s,i)=>{let o;(o=t(s,i,e))!==!1&&(n[i]=o||s)}),Object.defineProperties(e,n)},YU=e=>{hT(e,(t,r)=>{if(_t(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(_t(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},JU=(e,t)=>{const r={},n=s=>{s.forEach(i=>{r[i]=!0})};return Za(e)?n(e):n(String(e).split(t)),r},ZU=()=>{},QU=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function eV(e){return!!(e&&_t(e.append)&&e[lT]==="FormData"&&e[Oc])}const tV=e=>{const t=new Array(10),r=(n,s)=>{if($i(n)){if(t.indexOf(n)>=0)return;if(Mi(n))return n;if(!("toJSON"in n)){t[s]=n;const i=Za(n)?[]:{};return Li(n,(o,l)=>{const c=r(o,s+1);!qa(c)&&(i[l]=c)}),t[s]=void 0,i}}return n};return r(e,0)},rV=wr("AsyncFunction"),nV=e=>e&&($i(e)||_t(e))&&_t(e.then)&&_t(e.catch),mT=((e,t)=>e?setImmediate:t?((r,n)=>(Cn.addEventListener("message",({source:s,data:i})=>{s===Cn&&i===r&&n.length&&n.shift()()},!1),s=>{n.push(s),Cn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",_t(Cn.postMessage)),aV=typeof queueMicrotask<"u"?queueMicrotask.bind(Cn):typeof process<"u"&&process.nextTick||mT,sV=e=>e!=null&&_t(e[Oc]),B={isArray:Za,isArrayBuffer:cT,isBuffer:Mi,isFormData:_U,isArrayBufferView:wU,isString:NU,isNumber:uT,isBoolean:SU,isObject:$i,isPlainObject:jo,isEmptyObject:PU,isReadableStream:IU,isRequest:DU,isResponse:RU,isHeaders:MU,isUndefined:qa,isDate:AU,isFile:OU,isBlob:TU,isRegExp:XU,isFunction:_t,isStream:CU,isURLSearchParams:EU,isTypedArray:zU,isFileList:kU,forEach:Li,merge:Dp,extend:LU,trim:$U,stripBOM:BU,inherits:FU,toFlatObject:qU,kindOf:Tc,kindOfTest:wr,endsWith:UU,toArray:VU,forEachEntry:WU,matchAll:HU,isHTMLForm:KU,hasOwnProperty:VN,hasOwnProp:VN,reduceDescriptors:hT,freezeMethods:YU,toObjectSet:JU,toCamelCase:GU,noop:ZU,toFiniteNumber:QU,findKey:dT,global:Cn,isContextDefined:fT,isSpecCompliantForm:eV,toJSONObject:tV,isAsyncFn:rV,isThenable:nV,setImmediate:mT,asap:aV,isIterable:sV};let me=class pT extends Error{static from(t,r,n,s,i,o){const l=new pT(t.message,r||t.code,n,s,i);return l.cause=t,l.name=t.name,o&&Object.assign(l,o),l}constructor(t,r,n,s,i){super(t),this.name="AxiosError",this.isAxiosError=!0,r&&(this.code=r),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:B.toJSONObject(this.config),code:this.code,status:this.status}}};me.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";me.ERR_BAD_OPTION="ERR_BAD_OPTION";me.ECONNABORTED="ECONNABORTED";me.ETIMEDOUT="ETIMEDOUT";me.ERR_NETWORK="ERR_NETWORK";me.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";me.ERR_DEPRECATED="ERR_DEPRECATED";me.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";me.ERR_BAD_REQUEST="ERR_BAD_REQUEST";me.ERR_CANCELED="ERR_CANCELED";me.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";me.ERR_INVALID_URL="ERR_INVALID_URL";const iV=null;function Rp(e){return B.isPlainObject(e)||B.isArray(e)}function gT(e){return B.endsWith(e,"[]")?e.slice(0,-2):e}function zN(e,t,r){return e?e.concat(t).map(function(s,i){return s=gT(s),!r&&i?"["+s+"]":s}).join(r?".":""):t}function oV(e){return B.isArray(e)&&!e.some(Rp)}const lV=B.toFlatObject(B,{},null,function(t){return/^is[A-Z]/.test(t)});function Cc(e,t,r){if(!B.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=B.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,m){return!B.isUndefined(m[g])});const n=r.metaTokens,s=r.visitor||d,i=r.dots,o=r.indexes,c=(r.Blob||typeof Blob<"u"&&Blob)&&B.isSpecCompliantForm(t);if(!B.isFunction(s))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(B.isDate(p))return p.toISOString();if(B.isBoolean(p))return p.toString();if(!c&&B.isBlob(p))throw new me("Blob is not supported. Use a Buffer instead.");return B.isArrayBuffer(p)||B.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function d(p,g,m){let y=p;if(p&&!m&&typeof p=="object"){if(B.endsWith(g,"{}"))g=n?g:g.slice(0,-2),p=JSON.stringify(p);else if(B.isArray(p)&&oV(p)||(B.isFileList(p)||B.endsWith(g,"[]"))&&(y=B.toArray(p)))return g=gT(g),y.forEach(function(b,S){!(B.isUndefined(b)||b===null)&&t.append(o===!0?zN([g],S,i):o===null?g:g+"[]",u(b))}),!1}return Rp(p)?!0:(t.append(zN(m,g,i),u(p)),!1)}const f=[],h=Object.assign(lV,{defaultVisitor:d,convertValue:u,isVisitable:Rp});function x(p,g){if(!B.isUndefined(p)){if(f.indexOf(p)!==-1)throw Error("Circular reference detected in "+g.join("."));f.push(p),B.forEach(p,function(y,v){(!(B.isUndefined(y)||y===null)&&s.call(t,y,B.isString(v)?v.trim():v,g,h))===!0&&x(y,g?g.concat(v):[v])}),f.pop()}}if(!B.isObject(e))throw new TypeError("data must be an object");return x(e),t}function WN(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function gx(e,t){this._pairs=[],e&&Cc(e,this,t)}const xT=gx.prototype;xT.append=function(t,r){this._pairs.push([t,r])};xT.toString=function(t){const r=t?function(n){return t.call(this,n,WN)}:WN;return this._pairs.map(function(s){return r(s[0])+"="+r(s[1])},"").join("&")};function cV(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function yT(e,t,r){if(!t)return e;const n=r&&r.encode||cV,s=B.isFunction(r)?{serialize:r}:r,i=s&&s.serialize;let o;if(i?o=i(t,s):o=B.isURLSearchParams(t)?t.toString():new gx(t,s).toString(n),o){const l=e.indexOf("#");l!==-1&&(e=e.slice(0,l)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class HN{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){B.forEach(this.handlers,function(n){n!==null&&t(n)})}}const bT={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},uV=typeof URLSearchParams<"u"?URLSearchParams:gx,dV=typeof FormData<"u"?FormData:null,fV=typeof Blob<"u"?Blob:null,hV={isBrowser:!0,classes:{URLSearchParams:uV,FormData:dV,Blob:fV},protocols:["http","https","file","blob","url","data"]},xx=typeof window<"u"&&typeof document<"u",Mp=typeof navigator=="object"&&navigator||void 0,mV=xx&&(!Mp||["ReactNative","NativeScript","NS"].indexOf(Mp.product)<0),pV=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",gV=xx&&window.location.href||"http://localhost",xV=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xx,hasStandardBrowserEnv:mV,hasStandardBrowserWebWorkerEnv:pV,navigator:Mp,origin:gV},Symbol.toStringTag,{value:"Module"})),yt={...xV,...hV};function yV(e,t){return Cc(e,new yt.classes.URLSearchParams,{visitor:function(r,n,s,i){return yt.isNode&&B.isBuffer(r)?(this.append(n,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function bV(e){return B.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function vV(e){const t={},r=Object.keys(e);let n;const s=r.length;let i;for(n=0;n<s;n++)i=r[n],t[i]=e[i];return t}function vT(e){function t(r,n,s,i){let o=r[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=r.length;return o=!o&&B.isArray(s)?s.length:o,c?(B.hasOwnProp(s,o)?s[o]=[s[o],n]:s[o]=n,!l):((!s[o]||!B.isObject(s[o]))&&(s[o]=[]),t(r,n,s[o],i)&&B.isArray(s[o])&&(s[o]=vV(s[o])),!l)}if(B.isFormData(e)&&B.isFunction(e.entries)){const r={};return B.forEachEntry(e,(n,s)=>{t(bV(n),s,r,0)}),r}return null}function jV(e,t,r){if(B.isString(e))try{return(t||JSON.parse)(e),B.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const Bi={transitional:bT,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,i=B.isObject(t);if(i&&B.isHTMLForm(t)&&(t=new FormData(t)),B.isFormData(t))return s?JSON.stringify(vT(t)):t;if(B.isArrayBuffer(t)||B.isBuffer(t)||B.isStream(t)||B.isFile(t)||B.isBlob(t)||B.isReadableStream(t))return t;if(B.isArrayBufferView(t))return t.buffer;if(B.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yV(t,this.formSerializer).toString();if((l=B.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Cc(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||s?(r.setContentType("application/json",!1),jV(t)):t}],transformResponse:[function(t){const r=this.transitional||Bi.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(B.isResponse(t)||B.isReadableStream(t))return t;if(t&&B.isString(t)&&(n&&!this.responseType||s)){const o=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?me.from(l,me.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:yt.classes.FormData,Blob:yt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};B.forEach(["delete","get","head","post","put","patch"],e=>{Bi.headers[e]={}});const wV=B.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),NV=e=>{const t={};let r,n,s;return e&&e.split(`
`).forEach(function(o){s=o.indexOf(":"),r=o.substring(0,s).trim().toLowerCase(),n=o.substring(s+1).trim(),!(!r||t[r]&&wV[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},KN=Symbol("internals");function xs(e){return e&&String(e).trim().toLowerCase()}function wo(e){return e===!1||e==null?e:B.isArray(e)?e.map(wo):String(e)}function SV(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const PV=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Uh(e,t,r,n,s){if(B.isFunction(n))return n.call(this,t,r);if(s&&(t=r),!!B.isString(t)){if(B.isString(n))return t.indexOf(n)!==-1;if(B.isRegExp(n))return n.test(t)}}function AV(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function OV(e,t){const r=B.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(s,i,o){return this[n].call(this,t,s,i,o)},configurable:!0})})}let Et=class{constructor(t){t&&this.set(t)}set(t,r,n){const s=this;function i(l,c,u){const d=xs(c);if(!d)throw new Error("header name must be a non-empty string");const f=B.findKey(s,d);(!f||s[f]===void 0||u===!0||u===void 0&&s[f]!==!1)&&(s[f||c]=wo(l))}const o=(l,c)=>B.forEach(l,(u,d)=>i(u,d,c));if(B.isPlainObject(t)||t instanceof this.constructor)o(t,r);else if(B.isString(t)&&(t=t.trim())&&!PV(t))o(NV(t),r);else if(B.isObject(t)&&B.isIterable(t)){let l={},c,u;for(const d of t){if(!B.isArray(d))throw TypeError("Object iterator must return a key-value pair");l[u=d[0]]=(c=l[u])?B.isArray(c)?[...c,d[1]]:[c,d[1]]:d[1]}o(l,r)}else t!=null&&i(r,t,n);return this}get(t,r){if(t=xs(t),t){const n=B.findKey(this,t);if(n){const s=this[n];if(!r)return s;if(r===!0)return SV(s);if(B.isFunction(r))return r.call(this,s,n);if(B.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=xs(t),t){const n=B.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Uh(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let s=!1;function i(o){if(o=xs(o),o){const l=B.findKey(n,o);l&&(!r||Uh(n,n[l],l,r))&&(delete n[l],s=!0)}}return B.isArray(t)?t.forEach(i):i(t),s}clear(t){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const i=r[n];(!t||Uh(this,this[i],i,t,!0))&&(delete this[i],s=!0)}return s}normalize(t){const r=this,n={};return B.forEach(this,(s,i)=>{const o=B.findKey(n,i);if(o){r[o]=wo(s),delete r[i];return}const l=t?AV(i):String(i).trim();l!==i&&delete r[i],r[l]=wo(s),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return B.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=t&&B.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(s=>n.set(s)),n}static accessor(t){const n=(this[KN]=this[KN]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=xs(o);n[l]||(OV(s,o),n[l]=!0)}return B.isArray(t)?t.forEach(i):i(t),this}};Et.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);B.reduceDescriptors(Et.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});B.freezeMethods(Et);function Vh(e,t){const r=this||Bi,n=t||r,s=Et.from(n.headers);let i=n.data;return B.forEach(e,function(l){i=l.call(r,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function jT(e){return!!(e&&e.__CANCEL__)}let Fi=class extends me{constructor(t,r,n){super(t??"canceled",me.ERR_CANCELED,r,n),this.name="CanceledError",this.__CANCEL__=!0}};function wT(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new me("Request failed with status code "+r.status,[me.ERR_BAD_REQUEST,me.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function TV(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function kV(e,t){e=e||10;const r=new Array(e),n=new Array(e);let s=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const u=Date.now(),d=n[i];o||(o=u),r[s]=c,n[s]=u;let f=i,h=0;for(;f!==s;)h+=r[f++],f=f%e;if(s=(s+1)%e,s===i&&(i=(i+1)%e),u-o<t)return;const x=d&&u-d;return x?Math.round(h*1e3/x):void 0}}function CV(e,t){let r=0,n=1e3/t,s,i;const o=(u,d=Date.now())=>{r=d,s=null,i&&(clearTimeout(i),i=null),e(...u)};return[(...u)=>{const d=Date.now(),f=d-r;f>=n?o(u,d):(s=u,i||(i=setTimeout(()=>{i=null,o(s)},n-f)))},()=>s&&o(s)]}const Rl=(e,t,r=3)=>{let n=0;const s=kV(50,250);return CV(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-n,u=s(c),d=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&d?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(f)},r)},GN=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},XN=e=>(...t)=>B.asap(()=>e(...t)),_V=yt.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,yt.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(yt.origin),yt.navigator&&/(msie|trident)/i.test(yt.navigator.userAgent)):()=>!0,EV=yt.hasStandardBrowserEnv?{write(e,t,r,n,s,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];B.isNumber(r)&&l.push(`expires=${new Date(r).toUTCString()}`),B.isString(n)&&l.push(`path=${n}`),B.isString(s)&&l.push(`domain=${s}`),i===!0&&l.push("secure"),B.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function IV(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function DV(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function NT(e,t,r){let n=!IV(t);return e&&(n||r==!1)?DV(e,t):t}const YN=e=>e instanceof Et?{...e}:e;function Wn(e,t){t=t||{};const r={};function n(u,d,f,h){return B.isPlainObject(u)&&B.isPlainObject(d)?B.merge.call({caseless:h},u,d):B.isPlainObject(d)?B.merge({},d):B.isArray(d)?d.slice():d}function s(u,d,f,h){if(B.isUndefined(d)){if(!B.isUndefined(u))return n(void 0,u,f,h)}else return n(u,d,f,h)}function i(u,d){if(!B.isUndefined(d))return n(void 0,d)}function o(u,d){if(B.isUndefined(d)){if(!B.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function l(u,d,f){if(f in t)return n(u,d);if(f in e)return n(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,d,f)=>s(YN(u),YN(d),f,!0)};return B.forEach(Object.keys({...e,...t}),function(d){const f=c[d]||s,h=f(e[d],t[d],d);B.isUndefined(h)&&f!==l||(r[d]=h)}),r}const ST=e=>{const t=Wn({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Et.from(o),t.url=yT(NT(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),B.isFormData(r)){if(yt.hasStandardBrowserEnv||yt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(B.isFunction(r.getHeaders)){const c=r.getHeaders(),u=["content-type","content-length"];Object.entries(c).forEach(([d,f])=>{u.includes(d.toLowerCase())&&o.set(d,f)})}}if(yt.hasStandardBrowserEnv&&(n&&B.isFunction(n)&&(n=n(t)),n||n!==!1&&_V(t.url))){const c=s&&i&&EV.read(i);c&&o.set(s,c)}return t},RV=typeof XMLHttpRequest<"u",MV=RV&&function(e){return new Promise(function(r,n){const s=ST(e);let i=s.data;const o=Et.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=s,d,f,h,x,p;function g(){x&&x(),p&&p(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let m=new XMLHttpRequest;m.open(s.method.toUpperCase(),s.url,!0),m.timeout=s.timeout;function y(){if(!m)return;const b=Et.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:b,config:e,request:m};wT(function(P){r(P),g()},function(P){n(P),g()},j),m=null}"onloadend"in m?m.onloadend=y:m.onreadystatechange=function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(y)},m.onabort=function(){m&&(n(new me("Request aborted",me.ECONNABORTED,e,m)),m=null)},m.onerror=function(S){const j=S&&S.message?S.message:"Network Error",w=new me(j,me.ERR_NETWORK,e,m);w.event=S||null,n(w),m=null},m.ontimeout=function(){let S=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const j=s.transitional||bT;s.timeoutErrorMessage&&(S=s.timeoutErrorMessage),n(new me(S,j.clarifyTimeoutError?me.ETIMEDOUT:me.ECONNABORTED,e,m)),m=null},i===void 0&&o.setContentType(null),"setRequestHeader"in m&&B.forEach(o.toJSON(),function(S,j){m.setRequestHeader(j,S)}),B.isUndefined(s.withCredentials)||(m.withCredentials=!!s.withCredentials),l&&l!=="json"&&(m.responseType=s.responseType),u&&([h,p]=Rl(u,!0),m.addEventListener("progress",h)),c&&m.upload&&([f,x]=Rl(c),m.upload.addEventListener("progress",f),m.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(d=b=>{m&&(n(!b||b.type?new Fi(null,e,m):b),m.abort(),m=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));const v=TV(s.url);if(v&&yt.protocols.indexOf(v)===-1){n(new me("Unsupported protocol "+v+":",me.ERR_BAD_REQUEST,e));return}m.send(i||null)})},$V=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,s;const i=function(u){if(!s){s=!0,l();const d=u instanceof Error?u:this.reason;n.abort(d instanceof me?d:new Fi(d instanceof Error?d.message:d))}};let o=t&&setTimeout(()=>{o=null,i(new me(`timeout of ${t}ms exceeded`,me.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),e=null)};e.forEach(u=>u.addEventListener("abort",i));const{signal:c}=n;return c.unsubscribe=()=>B.asap(l),c}},LV=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,s;for(;n<r;)s=n+t,yield e.slice(n,s),n=s},BV=async function*(e,t){for await(const r of FV(e))yield*LV(r,t)},FV=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},JN=(e,t,r,n)=>{const s=BV(e,t);let i=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:d}=await s.next();if(u){l(),c.close();return}let f=d.byteLength;if(r){let h=i+=f;r(h)}c.enqueue(new Uint8Array(d))}catch(u){throw l(u),u}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},ZN=64*1024,{isFunction:lo}=B,qV=(({Request:e,Response:t})=>({Request:e,Response:t}))(B.global),{ReadableStream:QN,TextEncoder:eS}=B.global,tS=(e,...t)=>{try{return!!e(...t)}catch{return!1}},UV=e=>{e=B.merge.call({skipUndefined:!0},qV,e);const{fetch:t,Request:r,Response:n}=e,s=t?lo(t):typeof fetch=="function",i=lo(r),o=lo(n);if(!s)return!1;const l=s&&lo(QN),c=s&&(typeof eS=="function"?(p=>g=>p.encode(g))(new eS):async p=>new Uint8Array(await new r(p).arrayBuffer())),u=i&&l&&tS(()=>{let p=!1;const g=new r(yt.origin,{body:new QN,method:"POST",get duplex(){return p=!0,"half"}}).headers.has("Content-Type");return p&&!g}),d=o&&l&&tS(()=>B.isReadableStream(new n("").body)),f={stream:d&&(p=>p.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(p=>{!f[p]&&(f[p]=(g,m)=>{let y=g&&g[p];if(y)return y.call(g);throw new me(`Response type '${p}' is not supported`,me.ERR_NOT_SUPPORT,m)})});const h=async p=>{if(p==null)return 0;if(B.isBlob(p))return p.size;if(B.isSpecCompliantForm(p))return(await new r(yt.origin,{method:"POST",body:p}).arrayBuffer()).byteLength;if(B.isArrayBufferView(p)||B.isArrayBuffer(p))return p.byteLength;if(B.isURLSearchParams(p)&&(p=p+""),B.isString(p))return(await c(p)).byteLength},x=async(p,g)=>{const m=B.toFiniteNumber(p.getContentLength());return m??h(g)};return async p=>{let{url:g,method:m,data:y,signal:v,cancelToken:b,timeout:S,onDownloadProgress:j,onUploadProgress:w,responseType:P,headers:A,withCredentials:O="same-origin",fetchOptions:C}=ST(p),k=t||fetch;P=P?(P+"").toLowerCase():"text";let T=$V([v,b&&b.toAbortSignal()],S),E=null;const $=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let L;try{if(w&&u&&m!=="get"&&m!=="head"&&(L=await x(A,y))!==0){let R=new r(g,{method:"POST",body:y,duplex:"half"}),F;if(B.isFormData(y)&&(F=R.headers.get("content-type"))&&A.setContentType(F),R.body){const[H,re]=GN(L,Rl(XN(w)));y=JN(R.body,ZN,H,re)}}B.isString(O)||(O=O?"include":"omit");const q=i&&"credentials"in r.prototype,z={...C,signal:T,method:m.toUpperCase(),headers:A.normalize().toJSON(),body:y,duplex:"half",credentials:q?O:void 0};E=i&&new r(g,z);let K=await(i?k(E,C):k(g,z));const G=d&&(P==="stream"||P==="response");if(d&&(j||G&&$)){const R={};["status","statusText","headers"].forEach(M=>{R[M]=K[M]});const F=B.toFiniteNumber(K.headers.get("content-length")),[H,re]=j&&GN(F,Rl(XN(j),!0))||[];K=new n(JN(K.body,ZN,H,()=>{re&&re(),$&&$()}),R)}P=P||"text";let Z=await f[B.findKey(f,P)||"text"](K,p);return!G&&$&&$(),await new Promise((R,F)=>{wT(R,F,{data:Z,headers:Et.from(K.headers),status:K.status,statusText:K.statusText,config:p,request:E})})}catch(q){throw $&&$(),q&&q.name==="TypeError"&&/Load failed|fetch/i.test(q.message)?Object.assign(new me("Network Error",me.ERR_NETWORK,p,E),{cause:q.cause||q}):me.from(q,q&&q.code,p,E)}}},VV=new Map,PT=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:s}=t,i=[n,s,r];let o=i.length,l=o,c,u,d=VV;for(;l--;)c=i[l],u=d.get(c),u===void 0&&d.set(c,u=l?new Map:UV(t)),d=u;return u};PT();const yx={http:iV,xhr:MV,fetch:{get:PT}};B.forEach(yx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const rS=e=>`- ${e}`,zV=e=>B.isFunction(e)||e===null||e===!1;function WV(e,t){e=B.isArray(e)?e:[e];const{length:r}=e;let n,s;const i={};for(let o=0;o<r;o++){n=e[o];let l;if(s=n,!zV(n)&&(s=yx[(l=String(n)).toLowerCase()],s===void 0))throw new me(`Unknown adapter '${l}'`);if(s&&(B.isFunction(s)||(s=s.get(t))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,u])=>`adapter ${c} `+(u===!1?"is not supported by the environment":"is not available in the build"));let l=r?o.length>1?`since :
`+o.map(rS).join(`
`):" "+rS(o[0]):"as no adapter specified";throw new me("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const AT={getAdapter:WV,adapters:yx};function zh(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fi(null,e)}function nS(e){return zh(e),e.headers=Et.from(e.headers),e.data=Vh.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),AT.getAdapter(e.adapter||Bi.adapter,e)(e).then(function(n){return zh(e),n.data=Vh.call(e,e.transformResponse,n),n.headers=Et.from(n.headers),n},function(n){return jT(n)||(zh(e),n&&n.response&&(n.response.data=Vh.call(e,e.transformResponse,n.response),n.response.headers=Et.from(n.response.headers))),Promise.reject(n)})}const OT="1.13.4",_c={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{_c[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const aS={};_c.transitional=function(t,r,n){function s(i,o){return"[Axios v"+OT+"] Transitional option '"+i+"'"+o+(n?". "+n:"")}return(i,o,l)=>{if(t===!1)throw new me(s(o," has been removed"+(r?" in "+r:"")),me.ERR_DEPRECATED);return r&&!aS[o]&&(aS[o]=!0,console.warn(s(o," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,o,l):!0}};_c.spelling=function(t){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function HV(e,t,r){if(typeof e!="object")throw new me("options must be an object",me.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let s=n.length;for(;s-- >0;){const i=n[s],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new me("option "+i+" must be "+c,me.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new me("Unknown option "+i,me.ERR_BAD_OPTION)}}const No={assertOptions:HV,validators:_c},Sr=No.validators;let $n=class{constructor(t){this.defaults=t||{},this.interceptors={request:new HN,response:new HN}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=Wn(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:i}=r;n!==void 0&&No.assertOptions(n,{silentJSONParsing:Sr.transitional(Sr.boolean),forcedJSONParsing:Sr.transitional(Sr.boolean),clarifyTimeoutError:Sr.transitional(Sr.boolean)},!1),s!=null&&(B.isFunction(s)?r.paramsSerializer={serialize:s}:No.assertOptions(s,{encode:Sr.function,serialize:Sr.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),No.assertOptions(r,{baseUrl:Sr.spelling("baseURL"),withXsrfToken:Sr.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&B.merge(i.common,i[r.method]);i&&B.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),r.headers=Et.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(r)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const u=[];this.interceptors.response.forEach(function(g){u.push(g.fulfilled,g.rejected)});let d,f=0,h;if(!c){const p=[nS.bind(this),void 0];for(p.unshift(...l),p.push(...u),h=p.length,d=Promise.resolve(r);f<h;)d=d.then(p[f++],p[f++]);return d}h=l.length;let x=r;for(;f<h;){const p=l[f++],g=l[f++];try{x=p(x)}catch(m){g.call(this,m);break}}try{d=nS.call(this,x)}catch(p){return Promise.reject(p)}for(f=0,h=u.length;f<h;)d=d.then(u[f++],u[f++]);return d}getUri(t){t=Wn(this.defaults,t);const r=NT(t.baseURL,t.url,t.allowAbsoluteUrls);return yT(r,t.params,t.paramsSerializer)}};B.forEach(["delete","get","head","options"],function(t){$n.prototype[t]=function(r,n){return this.request(Wn(n||{},{method:t,url:r,data:(n||{}).data}))}});B.forEach(["post","put","patch"],function(t){function r(n){return function(i,o,l){return this.request(Wn(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}$n.prototype[t]=r(),$n.prototype[t+"Form"]=r(!0)});let KV=class TT{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const n=this;this.promise.then(s=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](s);n._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{n.subscribe(l),i=l}).then(s);return o.cancel=function(){n.unsubscribe(i)},o},t(function(i,o,l){n.reason||(n.reason=new Fi(i,o,l),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new TT(function(s){t=s}),cancel:t}}};function GV(e){return function(r){return e.apply(null,r)}}function XV(e){return B.isObject(e)&&e.isAxiosError===!0}const $p={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries($p).forEach(([e,t])=>{$p[t]=e});function kT(e){const t=new $n(e),r=oT($n.prototype.request,t);return B.extend(r,$n.prototype,t,{allOwnKeys:!0}),B.extend(r,t,null,{allOwnKeys:!0}),r.create=function(s){return kT(Wn(e,s))},r}const We=kT(Bi);We.Axios=$n;We.CanceledError=Fi;We.CancelToken=KV;We.isCancel=jT;We.VERSION=OT;We.toFormData=Cc;We.AxiosError=me;We.Cancel=We.CanceledError;We.all=function(t){return Promise.all(t)};We.spread=GV;We.isAxiosError=XV;We.mergeConfig=Wn;We.AxiosHeaders=Et;We.formToJSON=e=>vT(B.isHTMLForm(e)?new FormData(e):e);We.getAdapter=AT.getAdapter;We.HttpStatusCode=$p;We.default=We;const{Axios:vG,AxiosError:jG,CanceledError:wG,isCancel:NG,CancelToken:SG,VERSION:PG,all:AG,Cancel:OG,isAxiosError:TG,spread:kG,toFormData:CG,AxiosHeaders:_G,HttpStatusCode:EG,formToJSON:IG,getAdapter:DG,mergeConfig:RG}=We,YV="http://localhost:5000";function CT({periods:e=4}){const[t,r]=N.useState([]),[n,s]=N.useState(!0),[i,o]=N.useState(null);N.useEffect(()=>{l()},[e]);const l=async()=>{try{s(!0),o(null);const c=localStorage.getItem("token");if(!c)throw new Error("Please login to view AI forecasts");const u=await We.get(`${YV}/api/ai/forecast?periods=${e}`,{headers:{Authorization:`Bearer ${c}`}}),d=u.data?.data||u.data;if(!d||!d.labels||!d.revenue)throw new Error("Invalid forecast data received");const f=d.labels.map((h,x)=>({name:h,revenue:d.revenue[x]||0,profit:d.profit[x]||0}));r(f)}catch(c){console.error("Forecast fetch error:",c);let u="Failed to load forecast";c.response?.status===401?u="Please login to view AI forecasts":c.response?.status===403?u=c.response?.data?.message||"AI features require Pro plan":c.response?.status===500?u="AI service temporarily unavailable. Using fallback mode.":c.message?u=c.message:c.response?.data?.message&&(u=c.response.data.message),o(u)}finally{s(!1)}};return n?a.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"ðŸ¤– Generating AI forecast..."}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Analyzing sales patterns..."})]}):i?a.jsxs("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 rounded-lg p-6 border border-orange-200",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-semibold text-orange-900 mb-1",children:"AI Forecast Unavailable"}),a.jsx("p",{className:"text-sm text-orange-700 mb-3",children:i}),a.jsx("button",{onClick:l,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition text-sm font-medium",children:"ðŸ”„ Retry"})]})]}),a.jsxs("div",{className:"mt-4 text-xs text-orange-600 bg-orange-100 rounded p-2",children:[a.jsx("strong",{children:"Note:"})," AI forecasting requires OpenAI API key. The system will use basic predictions if the API is unavailable."]})]}):t.length?a.jsxs("div",{className:"ai-charts-container",children:[a.jsxs("div",{className:"ai-charts-header",children:[a.jsx("h3",{children:"ðŸ“ˆ AI Sales Forecast"}),a.jsx("button",{onClick:l,className:"refresh-btn",title:"Refresh forecast",children:"ðŸ”„"})]}),a.jsx(nR,{width:"100%",height:300,children:a.jsxs(vU,{data:t,children:[a.jsx(WO,{strokeDasharray:"3 3"}),a.jsx(Sc,{dataKey:"name"}),a.jsx(Pc,{}),a.jsx(Pr,{formatter:c=>`$${c.toFixed(2)}`,labelStyle:{color:"#333"}}),a.jsx(Dn,{}),a.jsx(Ma,{type:"monotone",dataKey:"revenue",stroke:"#2196F3",strokeWidth:2,name:"Revenue",activeDot:{r:6}}),a.jsx(Ma,{type:"monotone",dataKey:"profit",stroke:"#4CAF50",strokeWidth:2,name:"Profit",activeDot:{r:6}})]})}),a.jsxs("div",{className:"ai-charts-summary",children:[a.jsxs("div",{className:"summary-card",children:[a.jsx("span",{className:"summary-label",children:"Projected Revenue"}),a.jsxs("span",{className:"summary-value revenue",children:["$",t[t.length-1]?.revenue.toFixed(2)]})]}),a.jsxs("div",{className:"summary-card",children:[a.jsx("span",{className:"summary-label",children:"Projected Profit"}),a.jsxs("span",{className:"summary-value profit",children:["$",t[t.length-1]?.profit.toFixed(2)]})]})]})]}):a.jsx("div",{className:"ai-charts-empty",children:a.jsx("p",{children:"No forecast data available"})})}function JV(){const[e,t]=N.useState({stats:{totalSales:0,totalExpenses:0,profit:0,grossProfit:0,netProfit:0,totalCOGS:0,dailySales:0,weeklySales:0,productCount:0},recentSales:[]}),[r,n]=N.useState(!0),[s,i]=N.useState(null);N.useEffect(()=>{o()},[]);const o=async()=>{try{i(null);const[u,d]=await Promise.all([X1.get(),Kl.getAll()]),f={totalSales:u?.totalSales||0,totalExpenses:u?.totalExpenses||0,profit:u?.profit||0,grossProfit:u?.grossProfit||0,netProfit:u?.netProfit||0,totalCOGS:u?.totalCOGS||0,dailySales:u?.dailySales||0,weeklySales:u?.weeklySales||0,productCount:u?.productCount||0},h=Array.isArray(d)?d:[];t({stats:f,recentSales:h.slice(-10).reverse()})}catch(u){console.error("Failed to load data:",u),i(u.message),t({stats:{totalSales:0,totalExpenses:0,profit:0,grossProfit:0,netProfit:0,totalCOGS:0,dailySales:0,weeklySales:0,productCount:0},recentSales:[]})}finally{n(!1)}};if(r)return a.jsx("div",{className:"flex items-center justify-center h-full",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(s&&e.stats.totalSales===0&&e.recentSales.length===0)return a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[a.jsx(un,{className:"w-12 h-12 text-red-400 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Unable to Load Dashboard"}),a.jsx("p",{className:"text-red-600 mb-4",children:s}),a.jsx("button",{onClick:o,className:"btn-primary",children:"Retry"})]})});const l=[{label:"Total Sales",value:`KSH ${e.stats.totalSales?.toLocaleString()||0}`,icon:Dt,color:"from-green-500 to-emerald-600",change:"+12.5%"},{label:"Gross Profit",value:`KSH ${e.stats.grossProfit?.toLocaleString()||0}`,icon:ft,color:"from-blue-500 to-indigo-600",change:"+8.2%"},{label:"Total COGS",value:`KSH ${e.stats.totalCOGS?.toLocaleString()||0}`,icon:jt,color:"from-orange-500 to-red-600",change:"+5.1%"},{label:"Net Profit",value:`KSH ${e.stats.netProfit?.toLocaleString()||0}`,icon:ft,color:"from-purple-500 to-pink-600",change:"+15.3%"}],c=[{label:"Daily Sales",value:`KSH ${e.stats.dailySales?.toLocaleString()||0}`,icon:D1,color:"bg-blue-50 text-blue-600"},{label:"Weekly Sales",value:`KSH ${e.stats.weeklySales?.toLocaleString()||0}`,icon:ft,color:"bg-green-50 text-green-600"},{label:"Total Expenses",value:`KSH ${e.stats.totalExpenses?.toLocaleString()||0}`,icon:Eo,color:"bg-red-50 text-red-600"},{label:"Products",value:e.stats.productCount||0,icon:jt,color:"bg-purple-50 text-purple-600"}];return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(l||[]).map((u,d)=>{const f=u?.icon;return f?a.jsxs("div",{className:`card bg-gradient-to-br ${u.color} text-white border-0 shadow-lg hover:shadow-xl transition-all transform hover:scale-105`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center",children:a.jsx(f,{className:"w-6 h-6"})}),a.jsx("span",{className:"text-sm font-semibold bg-white/20 px-2 py-1 rounded-full",children:u.change})]}),a.jsx("p",{className:"text-sm text-white/80 mb-1",children:u.label}),a.jsx("p",{className:"text-2xl font-bold",children:u.value})]},d):null})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:(c||[]).map((u,d)=>{const f=u?.icon;return f?a.jsx("div",{className:"card",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-xl ${u.color} flex items-center justify-center`,children:a.jsx(f,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:u.label}),a.jsx("p",{className:"text-xl font-bold text-gray-900",children:u.value})]})]})},d):null})}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Recent Sales"}),a.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"View All"})]}),!e.recentSales||e.recentSales.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(un,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No sales yet"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"COGS"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Profit"})]})}),a.jsx("tbody",{children:(e.recentSales||[]).map(u=>u?a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:u.createdAt?new Date(u.createdAt).toLocaleString():"N/A"}),a.jsxs("td",{className:"px-4 py-3 text-sm",children:[Array.isArray(u.items)?u.items.length:0," items"]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-success",children:u.paymentMethod||"N/A"})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",u.total?.toLocaleString()||0]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-orange-600",children:["KSH ",u.cogs?.toLocaleString()||0]}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-blue-600",children:["KSH ",u.profit?.toLocaleString()||0]})]},u.id||Math.random()):null)})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"ðŸ¤– AI Sales Forecast"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Predictive analytics for upcoming periods"})]}),a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-semibold",children:"AI POWERED"})]}),a.jsx(CT,{periods:4})]}),"    "]})}const bx=N.createContext({});function dn(e){const t=N.useRef(null);return t.current===null&&(t.current=e()),t.current}const _T=typeof window<"u",Ec=_T?N.useLayoutEffect:N.useEffect,Ic=N.createContext(null);function vx(e,t){e.indexOf(t)===-1&&e.push(t)}function jx(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const br=(e,t,r)=>r>t?t:r<e?e:r;let ji=()=>{};const Gr={},ET=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function IT(e){return typeof e=="object"&&e!==null}const DT=e=>/^0[^.\s]+$/u.test(e);function wx(e){let t;return()=>(t===void 0&&(t=e()),t)}const It=e=>e,ZV=(e,t)=>r=>t(e(r)),qi=(...e)=>e.reduce(ZV),Ua=(e,t,r)=>{const n=t-e;return n===0?1:(r-e)/n};class Nx{constructor(){this.subscriptions=[]}add(t){return vx(this.subscriptions,t),()=>jx(this.subscriptions,t)}notify(t,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(t,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Vr=e=>e*1e3,Zt=e=>e/1e3;function Sx(e,t){return t?e*(1e3/t):0}const RT=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e,QV=1e-7,ez=12;function tz(e,t,r,n,s){let i,o,l=0;do o=t+(r-t)/2,i=RT(o,n,s)-e,i>0?r=o:t=o;while(Math.abs(i)>QV&&++l<ez);return o}function Ui(e,t,r,n){if(e===t&&r===n)return It;const s=i=>tz(i,0,1,e,r);return i=>i===0||i===1?i:RT(s(i),t,n)}const MT=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,$T=e=>t=>1-e(1-t),LT=Ui(.33,1.53,.69,.99),Px=$T(LT),BT=MT(Px),FT=e=>(e*=2)<1?.5*Px(e):.5*(2-Math.pow(2,-10*(e-1))),Ax=e=>1-Math.sin(Math.acos(e)),qT=$T(Ax),UT=MT(Ax),rz=Ui(.42,0,1,1),nz=Ui(0,0,.58,1),VT=Ui(.42,0,.58,1),az=e=>Array.isArray(e)&&typeof e[0]!="number",zT=e=>Array.isArray(e)&&typeof e[0]=="number",sz={linear:It,easeIn:rz,easeInOut:VT,easeOut:nz,circIn:Ax,circInOut:UT,circOut:qT,backIn:Px,backInOut:BT,backOut:LT,anticipate:FT},iz=e=>typeof e=="string",sS=e=>{if(zT(e)){ji(e.length===4);const[t,r,n,s]=e;return Ui(t,r,n,s)}else if(iz(e))return sz[e];return e},co=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function oz(e,t){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){o.has(d)&&(u.schedule(d),e()),d(l)}const u={schedule:(d,f=!1,h=!1)=>{const p=h&&s?r:n;return f&&o.add(d),p.has(d)||p.add(d),d},cancel:d=>{n.delete(d),o.delete(d)},process:d=>{if(l=d,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,u.process(d))}};return u}const lz=40;function WT(e,t){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=co.reduce((b,S)=>(b[S]=oz(i),b),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:d,update:f,preRender:h,render:x,postRender:p}=o,g=()=>{const b=Gr.useManualTiming?s.timestamp:performance.now();r=!1,Gr.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,lz),1)),s.timestamp=b,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),f.process(s),h.process(s),x.process(s),p.process(s),s.isProcessing=!1,r&&t&&(n=!1,e(g))},m=()=>{r=!0,n=!0,s.isProcessing||e(g)};return{schedule:co.reduce((b,S)=>{const j=o[S];return b[S]=(w,P=!1,A=!1)=>(r||m(),j.schedule(w,P,A)),b},{}),cancel:b=>{for(let S=0;S<co.length;S++)o[co[S]].cancel(b)},state:s,steps:o}}const{schedule:_e,cancel:nr,state:ot,steps:Wh}=WT(typeof requestAnimationFrame<"u"?requestAnimationFrame:It,!0);let So;function cz(){So=void 0}const At={now:()=>(So===void 0&&At.set(ot.isProcessing||Gr.useManualTiming?ot.timestamp:performance.now()),So),set:e=>{So=e,queueMicrotask(cz)}},HT=e=>t=>typeof t=="string"&&t.startsWith(e),KT=HT("--"),uz=HT("var(--"),Ox=e=>uz(e)?dz.test(e.split("/*")[0].trim()):!1,dz=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function iS(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Qa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wi={...Qa,transform:e=>br(0,1,e)},uo={...Qa,default:1},Rs=e=>Math.round(e*1e5)/1e5,Tx=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fz(e){return e==null}const hz=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,kx=(e,t)=>r=>!!(typeof r=="string"&&hz.test(r)&&r.startsWith(e)||t&&!fz(r)&&Object.prototype.hasOwnProperty.call(r,t)),GT=(e,t,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,l]=n.match(Tx);return{[e]:parseFloat(s),[t]:parseFloat(i),[r]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},mz=e=>br(0,255,e),Hh={...Qa,transform:e=>Math.round(mz(e))},_n={test:kx("rgb","red"),parse:GT("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+Hh.transform(e)+", "+Hh.transform(t)+", "+Hh.transform(r)+", "+Rs(wi.transform(n))+")"};function pz(e){let t="",r="",n="",s="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),s=e.substring(4,5),t+=t,r+=r,n+=n,s+=s),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const Lp={test:kx("#"),parse:pz,transform:_n.transform},Vi=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),en=Vi("deg"),Cr=Vi("%"),oe=Vi("px"),gz=Vi("vh"),xz=Vi("vw"),oS={...Cr,parse:e=>Cr.parse(e)/100,transform:e=>Cr.transform(e*100)},ia={test:kx("hsl","hue"),parse:GT("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+Cr.transform(Rs(t))+", "+Cr.transform(Rs(r))+", "+Rs(wi.transform(n))+")"},Ze={test:e=>_n.test(e)||Lp.test(e)||ia.test(e),parse:e=>_n.test(e)?_n.parse(e):ia.test(e)?ia.parse(e):Lp.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?_n.transform(e):ia.transform(e),getAnimatableNone:e=>{const t=Ze.parse(e);return t.alpha=0,Ze.transform(t)}},yz=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function bz(e){return isNaN(e)&&typeof e=="string"&&(e.match(Tx)?.length||0)+(e.match(yz)?.length||0)>0}const XT="number",YT="color",vz="var",jz="var(",lS="${}",wz=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ni(e){const t=e.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const l=t.replace(wz,c=>(Ze.test(c)?(n.color.push(i),s.push(YT),r.push(Ze.parse(c))):c.startsWith(jz)?(n.var.push(i),s.push(vz),r.push(c)):(n.number.push(i),s.push(XT),r.push(parseFloat(c))),++i,lS)).split(lS);return{values:r,split:l,indexes:n,types:s}}function JT(e){return Ni(e).values}function ZT(e){const{split:t,types:r}=Ni(e),n=t.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=t[o],s[o]!==void 0){const l=r[o];l===XT?i+=Rs(s[o]):l===YT?i+=Ze.transform(s[o]):i+=s[o]}return i}}const Nz=e=>typeof e=="number"?0:Ze.test(e)?Ze.getAnimatableNone(e):e;function Sz(e){const t=JT(e);return ZT(e)(t.map(Nz))}const fn={test:bz,parse:JT,createTransformer:ZT,getAnimatableNone:Sz};function Kh(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+(t-e)*6*r:r<1/2?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function Pz({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,t/=100,r/=100;let s=0,i=0,o=0;if(!t)s=i=o=r;else{const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l;s=Kh(c,l,e+1/3),i=Kh(c,l,e),o=Kh(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function Ml(e,t){return r=>r>0?t:e}const ze=(e,t,r)=>e+(t-e)*r,Gh=(e,t,r)=>{const n=e*e,s=r*(t*t-n)+n;return s<0?0:Math.sqrt(s)},Az=[Lp,_n,ia],Oz=e=>Az.find(t=>t.test(e));function cS(e){const t=Oz(e);if(!t)return!1;let r=t.parse(e);return t===ia&&(r=Pz(r)),r}const uS=(e,t)=>{const r=cS(e),n=cS(t);if(!r||!n)return Ml(e,t);const s={...r};return i=>(s.red=Gh(r.red,n.red,i),s.green=Gh(r.green,n.green,i),s.blue=Gh(r.blue,n.blue,i),s.alpha=ze(r.alpha,n.alpha,i),_n.transform(s))},Bp=new Set(["none","hidden"]);function Tz(e,t){return Bp.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}function kz(e,t){return r=>ze(e,t,r)}function Cx(e){return typeof e=="number"?kz:typeof e=="string"?Ox(e)?Ml:Ze.test(e)?uS:Ez:Array.isArray(e)?QT:typeof e=="object"?Ze.test(e)?uS:Cz:Ml}function QT(e,t){const r=[...e],n=r.length,s=e.map((i,o)=>Cx(i)(i,t[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Cz(e,t){const r={...e,...t},n={};for(const s in r)e[s]!==void 0&&t[s]!==void 0&&(n[s]=Cx(e[s])(e[s],t[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function _z(e,t){const r=[],n={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const i=t.types[s],o=e.indexes[i][n[i]],l=e.values[o]??0;r[s]=l,n[i]++}return r}const Ez=(e,t)=>{const r=fn.createTransformer(t),n=Ni(e),s=Ni(t);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?Bp.has(e)&&!s.values.length||Bp.has(t)&&!n.values.length?Tz(e,t):qi(QT(_z(n,s),s.values),r):Ml(e,t)};function e2(e,t,r){return typeof e=="number"&&typeof t=="number"&&typeof r=="number"?ze(e,t,r):Cx(e)(e,t)}const Iz=e=>{const t=({timestamp:r})=>e(r);return{start:(r=!0)=>_e.update(t,r),stop:()=>nr(t),now:()=>ot.isProcessing?ot.timestamp:At.now()}},t2=(e,t,r=10)=>{let n="";const s=Math.max(Math.round(t/r),2);for(let i=0;i<s;i++)n+=Math.round(e(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},$l=2e4;function _x(e){let t=0;const r=50;let n=e.next(t);for(;!n.done&&t<$l;)t+=r,n=e.next(t);return t>=$l?1/0:t}function Dz(e,t=100,r){const n=r({...e,keyframes:[0,t]}),s=Math.min(_x(n),$l);return{type:"keyframes",ease:i=>n.next(s*i).value/t,duration:Zt(s)}}const Rz=5;function r2(e,t,r){const n=Math.max(t-Rz,0);return Sx(r-e(n),t-n)}const He={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Xh=.001;function Mz({duration:e=He.duration,bounce:t=He.bounce,velocity:r=He.velocity,mass:n=He.mass}){let s,i,o=1-t;o=br(He.minDamping,He.maxDamping,o),e=br(He.minDuration,He.maxDuration,Zt(e)),o<1?(s=u=>{const d=u*o,f=d*e,h=d-r,x=Fp(u,o),p=Math.exp(-f);return Xh-h/x*p},i=u=>{const f=u*o*e,h=f*r+r,x=Math.pow(o,2)*Math.pow(u,2)*e,p=Math.exp(-f),g=Fp(Math.pow(u,2),o);return(-s(u)+Xh>0?-1:1)*((h-x)*p)/g}):(s=u=>{const d=Math.exp(-u*e),f=(u-r)*e+1;return-Xh+d*f},i=u=>{const d=Math.exp(-u*e),f=(r-u)*(e*e);return d*f});const l=5/e,c=Lz(s,i,l);if(e=Vr(e),isNaN(c))return{stiffness:He.stiffness,damping:He.damping,duration:e};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:e}}}const $z=12;function Lz(e,t,r){let n=r;for(let s=1;s<$z;s++)n=n-e(n)/t(n);return n}function Fp(e,t){return e*Math.sqrt(1-t*t)}const Bz=["duration","bounce"],Fz=["stiffness","damping","mass"];function dS(e,t){return t.some(r=>e[r]!==void 0)}function qz(e){let t={velocity:He.velocity,stiffness:He.stiffness,damping:He.damping,mass:He.mass,isResolvedFromDuration:!1,...e};if(!dS(e,Fz)&&dS(e,Bz))if(e.visualDuration){const r=e.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*br(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:He.mass,stiffness:s,damping:i}}else{const r=Mz(e);t={...t,...r,mass:He.mass},t.isResolvedFromDuration=!0}return t}function Ll(e=He.visualDuration,t=He.bounce){const r=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],l={done:!1,value:i},{stiffness:c,damping:u,mass:d,duration:f,velocity:h,isResolvedFromDuration:x}=qz({...r,velocity:-Zt(r.velocity||0)}),p=h||0,g=u/(2*Math.sqrt(c*d)),m=o-i,y=Zt(Math.sqrt(c/d)),v=Math.abs(m)<5;n||(n=v?He.restSpeed.granular:He.restSpeed.default),s||(s=v?He.restDelta.granular:He.restDelta.default);let b;if(g<1){const j=Fp(y,g);b=w=>{const P=Math.exp(-g*y*w);return o-P*((p+g*y*m)/j*Math.sin(j*w)+m*Math.cos(j*w))}}else if(g===1)b=j=>o-Math.exp(-y*j)*(m+(p+y*m)*j);else{const j=y*Math.sqrt(g*g-1);b=w=>{const P=Math.exp(-g*y*w),A=Math.min(j*w,300);return o-P*((p+g*y*m)*Math.sinh(A)+j*m*Math.cosh(A))/j}}const S={calculatedDuration:x&&f||null,next:j=>{const w=b(j);if(x)l.done=j>=f;else{let P=j===0?p:0;g<1&&(P=j===0?Vr(p):r2(b,j,w));const A=Math.abs(P)<=n,O=Math.abs(o-w)<=s;l.done=A&&O}return l.value=l.done?o:w,l},toString:()=>{const j=Math.min(_x(S),$l),w=t2(P=>S.next(j*P).value,j,30);return j+"ms "+w},toTransition:()=>{}};return S}Ll.applyToOptions=e=>{const t=Dz(e,100,Ll);return e.ease=t.ease,e.duration=Vr(t.duration),e.type="keyframes",e};function qp({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:d}){const f=e[0],h={done:!1,value:f},x=A=>l!==void 0&&A<l||c!==void 0&&A>c,p=A=>l===void 0?c:c===void 0||Math.abs(l-A)<Math.abs(c-A)?l:c;let g=r*t;const m=f+g,y=o===void 0?m:o(m);y!==m&&(g=y-f);const v=A=>-g*Math.exp(-A/n),b=A=>y+v(A),S=A=>{const O=v(A),C=b(A);h.done=Math.abs(O)<=u,h.value=h.done?y:C};let j,w;const P=A=>{x(h.value)&&(j=A,w=Ll({keyframes:[h.value,p(h.value)],velocity:r2(b,A,h.value),damping:s,stiffness:i,restDelta:u,restSpeed:d}))};return P(0),{calculatedDuration:null,next:A=>{let O=!1;return!w&&j===void 0&&(O=!0,S(A),P(A)),j!==void 0&&A>=j?w.next(A-j):(!O&&S(A),h)}}}function Uz(e,t,r){const n=[],s=r||Gr.mix||e2,i=e.length-1;for(let o=0;o<i;o++){let l=s(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||It:t;l=qi(c,l)}n.push(l)}return n}function Ex(e,t,{clamp:r=!0,ease:n,mixer:s}={}){const i=e.length;if(ji(i===t.length),i===1)return()=>t[0];if(i===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Uz(t,n,s),c=l.length,u=d=>{if(o&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const h=Ua(e[f],e[f+1],d);return l[f](h)};return r?d=>u(br(e[0],e[i-1],d)):u}function Vz(e,t){const r=e[e.length-1];for(let n=1;n<=t;n++){const s=Ua(0,t,n);e.push(ze(r,1,s))}}function n2(e){const t=[0];return Vz(t,e.length-1),t}function zz(e,t){return e.map(r=>r*t)}function Wz(e,t){return e.map(()=>t||VT).splice(0,e.length-1)}function Ms({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){const s=az(n)?n.map(sS):sS(n),i={done:!1,value:t[0]},o=zz(r&&r.length===t.length?r:n2(t),e),l=Ex(o,t,{ease:Array.isArray(s)?s:Wz(t,s)});return{calculatedDuration:e,next:c=>(i.value=l(c),i.done=c>=e,i)}}const Hz=e=>e!==null;function Ix(e,{repeat:t,repeatType:r="loop"},n,s=1){const i=e.filter(Hz),l=s<0||t&&r!=="loop"&&t%2===1?0:i.length-1;return!l||n===void 0?i[l]:n}const Kz={decay:qp,inertia:qp,tween:Ms,keyframes:Ms,spring:Ll};function a2(e){typeof e.type=="string"&&(e.type=Kz[e.type])}class Dx{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,r){return this.finished.then(t,r)}}const Gz=e=>e/100;class Rx extends Dx{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:r}=this.options;r&&r.updatedAt!==At.now()&&this.tick(At.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;a2(t);const{type:r=Ms,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=t;let{keyframes:l}=t;const c=r||Ms;c!==Ms&&typeof l[0]!="number"&&(this.mixKeyframes=qi(Gz,e2(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});i==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=_x(u));const{calculatedDuration:d}=u;this.calculatedDuration=d,this.resolvedDuration=d+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=u}updateTime(t){const r=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(t,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:u=0,keyframes:d,repeat:f,repeatType:h,repeatDelay:x,type:p,onUpdate:g,finalKeyframe:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),r?this.currentTime=t:this.updateTime(t);const y=this.currentTime-u*(this.playbackSpeed>=0?1:-1),v=this.playbackSpeed>=0?y<0:y>s;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,S=n;if(f){const A=Math.min(this.currentTime,s)/l;let O=Math.floor(A),C=A%1;!C&&A>=1&&(C=1),C===1&&O--,O=Math.min(O,f+1),!!(O%2)&&(h==="reverse"?(C=1-C,x&&(C-=x/l)):h==="mirror"&&(S=o)),b=br(0,1,C)*l}const j=v?{done:!1,value:d[0]}:S.next(b);i&&(j.value=i(j.value));let{done:w}=j;!v&&c!==null&&(w=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const P=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return P&&p!==qp&&(j.value=Ix(d,this.options,m,this.speed)),g&&g(j.value),P&&this.finish(),j}then(t,r){return this.finished.then(t,r)}get duration(){return Zt(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zt(t)}get time(){return Zt(this.currentTime)}set time(t){t=Vr(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(At.now());const r=this.playbackSpeed!==t;this.playbackSpeed=t,r&&(this.time=Zt(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=Iz,startTime:r}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(At.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Xz(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const En=e=>e*180/Math.PI,Up=e=>{const t=En(Math.atan2(e[1],e[0]));return Vp(t)},Yz={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Up,rotateZ:Up,skewX:e=>En(Math.atan(e[1])),skewY:e=>En(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Vp=e=>(e=e%360,e<0&&(e+=360),e),fS=Up,hS=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),mS=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Jz={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:hS,scaleY:mS,scale:e=>(hS(e)+mS(e))/2,rotateX:e=>Vp(En(Math.atan2(e[6],e[5]))),rotateY:e=>Vp(En(Math.atan2(-e[2],e[0]))),rotateZ:fS,rotate:fS,skewX:e=>En(Math.atan(e[4])),skewY:e=>En(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function zp(e){return e.includes("scale")?1:0}function Wp(e,t){if(!e||e==="none")return zp(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=Jz,s=r;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=Yz,s=l}if(!s)return zp(t);const i=n[t],o=s[1].split(",").map(Qz);return typeof i=="function"?i(o):o[i]}const Zz=(e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Wp(r,t)};function Qz(e){return parseFloat(e.trim())}const es=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ts=new Set(es),pS=e=>e===Qa||e===oe,eW=new Set(["x","y","z"]),tW=es.filter(e=>!eW.has(e));function rW(e){const t=[];return tW.forEach(r=>{const n=e.getValue(r);n!==void 0&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t}const sn={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Wp(t,"x"),y:(e,{transform:t})=>Wp(t,"y")};sn.translateX=sn.x;sn.translateY=sn.y;const Ln=new Set;let Hp=!1,Kp=!1,Gp=!1;function s2(){if(Kp){const e=Array.from(Ln).filter(n=>n.needsMeasurement),t=new Set(e.map(n=>n.element)),r=new Map;t.forEach(n=>{const s=rW(n);s.length&&(r.set(n,s),n.render())}),e.forEach(n=>n.measureInitialState()),t.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{n.getValue(i)?.set(o)})}),e.forEach(n=>n.measureEndState()),e.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}Kp=!1,Hp=!1,Ln.forEach(e=>e.complete(Gp)),Ln.clear()}function i2(){Ln.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Kp=!0)})}function nW(){Gp=!0,i2(),s2(),Gp=!1}class Mx{constructor(t,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Ln.add(this),Hp||(Hp=!0,_e.read(i2),_e.resolveKeyframes(s2))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:r,element:n,motionValue:s}=this;if(t[0]===null){const i=s?.get(),o=t[t.length-1];if(i!==void 0)t[0]=i;else if(n&&r){const l=n.readValue(r,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),s&&i===void 0&&s.set(t[0])}Xz(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ln.delete(this)}cancel(){this.state==="scheduled"&&(Ln.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const aW=e=>e.startsWith("--");function sW(e,t,r){aW(t)?e.style.setProperty(t,r):e.style[t]=r}const o2=wx(()=>window.ScrollTimeline!==void 0),iW={};function oW(e,t){const r=wx(e);return()=>iW[t]??r()}const l2=oW(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),As=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,gS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:As([0,.65,.55,1]),circOut:As([.55,0,1,.45]),backIn:As([.31,.01,.66,-.59]),backOut:As([.33,1.53,.69,.99])};function c2(e,t){if(e)return typeof e=="function"?l2()?t2(e,t):"ease-out":zT(e)?As(e):Array.isArray(e)?e.map(r=>c2(r,t)||gS.easeOut):gS[e]}function lW(e,t,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:l="easeOut",times:c}={},u=void 0){const d={[t]:r};c&&(d.offset=c);const f=c2(l,s);Array.isArray(f)&&(d.easing=f);const h={delay:n,duration:s,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return u&&(h.pseudoElement=u),e.animate(d,h)}function u2(e){return typeof e=="function"&&"applyToOptions"in e}function cW({type:e,...t}){return u2(e)&&l2()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uW extends Dx{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=t,ji(typeof t.type!="string");const u=cW(t);this.animation=lW(r,n,s,u,i),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const d=Ix(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):sW(r,n,d),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Zt(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Zt(t)}get time(){return Zt(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=Vr(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:r}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&o2()?(this.animation.timeline=t,It):r(this)}}const d2={anticipate:FT,backInOut:BT,circInOut:UT};function dW(e){return e in d2}function fW(e){typeof e.ease=="string"&&dW(e.ease)&&(e.ease=d2[e.ease])}const Yh=10;class hW extends uW{constructor(t){fW(t),a2(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(t!==void 0){r.set(t);return}const l=new Rx({...o,autoplay:!1}),c=Math.max(Yh,At.now()-this.startTime),u=br(0,Yh,c-Yh);r.setWithVelocity(l.sample(Math.max(0,c-u)).value,l.sample(c).value,u),l.stop()}}const xS=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(fn.test(e)||e==="0")&&!e.startsWith("url("));function mW(e){const t=e[0];if(e.length===1)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}function pW(e,t,r,n){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const i=e[e.length-1],o=xS(s,t),l=xS(i,t);return!o||!l?!1:mW(e)||(r==="spring"||u2(r))&&n}function Xp(e){e.duration=0,e.type="keyframes"}const gW=new Set(["opacity","clipPath","filter","transform"]),xW=wx(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yW(e){const{motionValue:t,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return xW()&&r&&gW.has(r)&&(r!=="transform"||!u)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const bW=40;class vW extends Dx{constructor({autoplay:t=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:l,name:c,motionValue:u,element:d,...f}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=At.now();const h={autoplay:t,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:u,element:d,...f},x=d?.KeyframeResolver||Mx;this.keyframeResolver=new x(l,(p,g,m)=>this.onKeyframesResolved(p,g,h,!m),c,u,d),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:l,delay:c,isHandoff:u,onUpdate:d}=n;this.resolvedAt=At.now(),pW(t,i,o,l)||((Gr.instantAnimations||!c)&&d?.(Ix(t,n,r)),t[0]=t[t.length-1],Xp(n),n.repeat=0);const h={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>bW?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:t},x=!u&&yW(h),p=h.motionValue?.owner?.current,g=x?new hW({...h,element:p}):new Rx(h);g.finished.then(()=>{this.notifyFinished()}).catch(It),this.pendingTimeline&&(this.stopTimeline=g.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=g}get finished(){return this._animation?this.animation.finished:this._finished}then(t,r){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),nW()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function f2(e,t,r,n=0,s=1){const i=Array.from(e).sort((u,d)=>u.sortNodePosition(d)).indexOf(t),o=e.size,l=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:l-i*n}const jW=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wW(e){const t=jW.exec(e);if(!t)return[,];const[,r,n,s]=t;return[`--${r??n}`,s]}function h2(e,t,r=1){const[n,s]=wW(e);if(!n)return;const i=window.getComputedStyle(t).getPropertyValue(n);if(i){const o=i.trim();return ET(o)?parseFloat(o):o}return Ox(s)?h2(s,t,r+1):s}const NW={type:"spring",stiffness:500,damping:25,restSpeed:10},SW=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),PW={type:"keyframes",duration:.8},AW={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},OW=(e,{keyframes:t})=>t.length>2?PW:ts.has(e)?e.startsWith("scale")?SW(t[1]):NW:AW,TW=e=>e!==null;function kW(e,{repeat:t,repeatType:r="loop"},n){const s=e.filter(TW),i=t&&r!=="loop"&&t%2===1?0:s.length-1;return s[i]}function $x(e,t){return e?.[t]??e?.default??e}function CW({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const Lx=(e,t,r,n={},s,i)=>o=>{const l=$x(n,e)||{},c=l.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Vr(c);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:h=>{t.set(h),l.onUpdate&&l.onUpdate(h)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:i?void 0:s};CW(l)||Object.assign(d,OW(e,d)),d.duration&&(d.duration=Vr(d.duration)),d.repeatDelay&&(d.repeatDelay=Vr(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(Xp(d),d.delay===0&&(f=!0)),(Gr.instantAnimations||Gr.skipAnimations)&&(f=!0,Xp(d),d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!i&&t.get()!==void 0){const h=kW(d.keyframes,l);if(h!==void 0){_e.update(()=>{d.onUpdate(h),d.onComplete()});return}}return l.isSync?new Rx(d):new vW(d)};function yS(e){const t=[{},{}];return e?.values.forEach((r,n)=>{t[0][n]=r.get(),t[1][n]=r.getVelocity()}),t}function Bx(e,t,r,n){if(typeof t=="function"){const[s,i]=yS(n);t=t(r!==void 0?r:e.custom,s,i)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,i]=yS(n);t=t(r!==void 0?r:e.custom,s,i)}return t}function ma(e,t,r){const n=e.getProps();return Bx(n,t,r!==void 0?r:n.custom,e)}const m2=new Set(["width","height","top","left","right","bottom",...es]),bS=30,_W=e=>!isNaN(parseFloat(e)),$s={current:void 0};class EW{constructor(t,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{const s=At.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const i of this.dependents)i.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=r.owner}setCurrent(t){this.current=t,this.updatedAt=At.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=_W(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,r){this.events[t]||(this.events[t]=new Nx);const n=this.events[t].add(r);return t==="change"?()=>{n(),_e.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,r){this.passiveEffect=t,this.stopPassiveEffect=r}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-n}jump(t,r=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return $s.current&&$s.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=At.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>bS)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,bS);return Sx(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(t){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=t(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function pr(e,t){return new EW(e,t)}const Yp=e=>Array.isArray(e);function IW(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,pr(r))}function DW(e){return Yp(e)?e[e.length-1]||0:e}function RW(e,t){const r=ma(e,t);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const l=DW(i[o]);IW(e,o,l)}}const vt=e=>!!(e&&e.getVelocity);function MW(e){return!!(vt(e)&&e.add)}function Jp(e,t){const r=e.getValue("willChange");if(MW(r))return r.add(t);if(!r&&Gr.WillChange){const n=new Gr.WillChange("auto");e.addValue("willChange",n),n.add(t)}}function Fx(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const $W="framerAppearId",p2="data-"+Fx($W);function g2(e){return e.props[p2]}function LW({protectedKeys:e,needsAnimating:t},r){const n=e.hasOwnProperty(r)&&t[r]!==!0;return t[r]=!1,n}function x2(e,t,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=e.getDefaultTransition(),transitionEnd:o,...l}=t;n&&(i=n);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const d in l){const f=e.getValue(d,e.latestValues[d]??null),h=l[d];if(h===void 0||u&&LW(u,d))continue;const x={delay:r,...$x(i||{},d)},p=f.get();if(p!==void 0&&!f.isAnimating&&!Array.isArray(h)&&h===p&&!x.velocity)continue;let g=!1;if(window.MotionHandoffAnimation){const y=g2(e);if(y){const v=window.MotionHandoffAnimation(y,d,_e);v!==null&&(x.startTime=v,g=!0)}}Jp(e,d),f.start(Lx(d,f,h,e.shouldReduceMotion&&m2.has(d)?{type:!1}:x,e,g));const m=f.animation;m&&c.push(m)}return o&&Promise.all(c).then(()=>{_e.update(()=>{o&&RW(e,o)})}),c}function Zp(e,t,r={}){const n=ma(e,t,r.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(x2(e,n,r)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:d,staggerDirection:f}=s;return BW(e,t,c,u,d,f,r)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function BW(e,t,r=0,n=0,s=0,i=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(Zp(c,t,{...o,delay:r+(typeof n=="function"?0:n)+f2(e.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function FW(e,t,r={}){e.notify("AnimationStart",t);let n;if(Array.isArray(t)){const s=t.map(i=>Zp(e,i,r));n=Promise.all(s)}else if(typeof t=="string")n=Zp(e,t,r);else{const s=typeof t=="function"?ma(e,t,r.custom):t;n=Promise.all(x2(e,s,r))}return n.then(()=>{e.notify("AnimationComplete",t)})}const qW={test:e=>e==="auto",parse:e=>e},y2=e=>t=>t.test(e),b2=[Qa,oe,Cr,en,xz,gz,qW],vS=e=>b2.find(y2(e));function UW(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||DT(e):!0}const VW=new Set(["brightness","contrast","saturate","opacity"]);function zW(e){const[t,r]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[n]=r.match(Tx)||[];if(!n)return e;const s=r.replace(n,"");let i=VW.has(t)?1:0;return n!==r&&(i*=100),t+"("+i+s+")"}const WW=/\b([a-z-]*)\(.*?\)/gu,Qp={...fn,getAnimatableNone:e=>{const t=e.match(WW);return t?t.map(zW).join(" "):e}},jS={...Qa,transform:Math.round},HW={rotate:en,rotateX:en,rotateY:en,rotateZ:en,scale:uo,scaleX:uo,scaleY:uo,scaleZ:uo,skew:en,skewX:en,skewY:en,distance:oe,translateX:oe,translateY:oe,translateZ:oe,x:oe,y:oe,z:oe,perspective:oe,transformPerspective:oe,opacity:wi,originX:oS,originY:oS,originZ:oe},qx={borderWidth:oe,borderTopWidth:oe,borderRightWidth:oe,borderBottomWidth:oe,borderLeftWidth:oe,borderRadius:oe,borderTopLeftRadius:oe,borderTopRightRadius:oe,borderBottomRightRadius:oe,borderBottomLeftRadius:oe,width:oe,maxWidth:oe,height:oe,maxHeight:oe,top:oe,right:oe,bottom:oe,left:oe,inset:oe,insetBlock:oe,insetBlockStart:oe,insetBlockEnd:oe,insetInline:oe,insetInlineStart:oe,insetInlineEnd:oe,padding:oe,paddingTop:oe,paddingRight:oe,paddingBottom:oe,paddingLeft:oe,paddingBlock:oe,paddingBlockStart:oe,paddingBlockEnd:oe,paddingInline:oe,paddingInlineStart:oe,paddingInlineEnd:oe,margin:oe,marginTop:oe,marginRight:oe,marginBottom:oe,marginLeft:oe,marginBlock:oe,marginBlockStart:oe,marginBlockEnd:oe,marginInline:oe,marginInlineStart:oe,marginInlineEnd:oe,fontSize:oe,backgroundPositionX:oe,backgroundPositionY:oe,...HW,zIndex:jS,fillOpacity:wi,strokeOpacity:wi,numOctaves:jS},KW={...qx,color:Ze,backgroundColor:Ze,outlineColor:Ze,fill:Ze,stroke:Ze,borderColor:Ze,borderTopColor:Ze,borderRightColor:Ze,borderBottomColor:Ze,borderLeftColor:Ze,filter:Qp,WebkitFilter:Qp},v2=e=>KW[e];function j2(e,t){let r=v2(e);return r!==Qp&&(r=fn),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const GW=new Set(["auto","none","0"]);function XW(e,t,r){let n=0,s;for(;n<e.length&&!s;){const i=e[n];typeof i=="string"&&!GW.has(i)&&Ni(i).values.length&&(s=e[n]),n++}if(s&&r)for(const i of t)e[i]=j2(r,s)}class YW extends Mx{constructor(t,r,n,s,i){super(t,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let d=0;d<t.length;d++){let f=t[d];if(typeof f=="string"&&(f=f.trim(),Ox(f))){const h=h2(f,r.current);h!==void 0&&(t[d]=h),d===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!m2.has(n)||t.length!==2)return;const[s,i]=t,o=vS(s),l=vS(i),c=iS(s),u=iS(i);if(c!==u&&sn[n]){this.needsMeasurement=!0;return}if(o!==l)if(pS(o)&&pS(l))for(let d=0;d<t.length;d++){const f=t[d];typeof f=="string"&&(t[d]=parseFloat(f))}else sn[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:r}=this,n=[];for(let s=0;s<t.length;s++)(t[s]===null||UW(t[s]))&&n.push(s);n.length&&XW(t,n,r)}measureInitialState(){const{element:t,unresolvedKeyframes:r,name:n}=this;if(!t||!t.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=sn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&t.getValue(n,s).jump(s,!1)}measureEndState(){const{element:t,name:r,unresolvedKeyframes:n}=this;if(!t||!t.current)return;const s=t.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=sn[r](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function w2(e,t,r){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(n=>n!=null)}const N2=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Bl(e){return IT(e)&&"offsetHeight"in e}const{schedule:Ux}=WT(queueMicrotask,!1),cr={x:!1,y:!1};function S2(){return cr.x||cr.y}function JW(e){return e==="x"||e==="y"?cr[e]?null:(cr[e]=!0,()=>{cr[e]=!1}):cr.x||cr.y?null:(cr.x=cr.y=!0,()=>{cr.x=cr.y=!1})}function P2(e,t){const r=w2(e),n=new AbortController,s={passive:!0,...t,signal:n.signal};return[r,s,()=>n.abort()]}function wS(e){return!(e.pointerType==="touch"||S2())}function ZW(e,t,r={}){const[n,s,i]=P2(e,r),o=l=>{if(!wS(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const d=f=>{wS(f)&&(u(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,s)};return n.forEach(l=>{l.addEventListener("pointerenter",o,s)}),i}const A2=(e,t)=>t?e===t?!0:A2(e,t.parentElement):!1,Vx=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,QW=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function O2(e){return QW.has(e.tagName)||e.isContentEditable===!0}const Po=new WeakSet;function NS(e){return t=>{t.key==="Enter"&&e(t)}}function Jh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const e7=(e,t)=>{const r=e.currentTarget;if(!r)return;const n=NS(()=>{if(Po.has(r))return;Jh(r,"down");const s=NS(()=>{Jh(r,"up")}),i=()=>Jh(r,"cancel");r.addEventListener("keyup",s,t),r.addEventListener("blur",i,t)});r.addEventListener("keydown",n,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),t)};function SS(e){return Vx(e)&&!S2()}function t7(e,t,r={}){const[n,s,i]=P2(e,r),o=l=>{const c=l.currentTarget;if(!SS(l))return;Po.add(c);const u=t(c,l),d=(x,p)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",h),Po.has(c)&&Po.delete(c),SS(x)&&typeof u=="function"&&u(x,{success:p})},f=x=>{d(x,c===window||c===document||r.useGlobalTarget||A2(c,x.target))},h=x=>{d(x,!1)};window.addEventListener("pointerup",f,s),window.addEventListener("pointercancel",h,s)};return n.forEach(l=>{(r.useGlobalTarget?window:l).addEventListener("pointerdown",o,s),Bl(l)&&(l.addEventListener("focus",u=>e7(u,s)),!O2(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),i}function zx(e){return IT(e)&&"ownerSVGElement"in e}const Ao=new WeakMap;let Oo;const T2=(e,t,r)=>(n,s)=>s&&s[0]?s[0][e+"Size"]:zx(n)&&"getBBox"in n?n.getBBox()[t]:n[r],r7=T2("inline","width","offsetWidth"),n7=T2("block","height","offsetHeight");function a7({target:e,borderBoxSize:t}){Ao.get(e)?.forEach(r=>{r(e,{get width(){return r7(e,t)},get height(){return n7(e,t)}})})}function s7(e){e.forEach(a7)}function i7(){typeof ResizeObserver>"u"||(Oo=new ResizeObserver(s7))}function o7(e,t){Oo||i7();const r=w2(e);return r.forEach(n=>{let s=Ao.get(n);s||(s=new Set,Ao.set(n,s)),s.add(t),Oo?.observe(n)}),()=>{r.forEach(n=>{const s=Ao.get(n);s?.delete(t),s?.size||Oo?.unobserve(n)})}}const To=new Set;let oa;function l7(){oa=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};To.forEach(t=>t(e))},window.addEventListener("resize",oa)}function c7(e){return To.add(e),oa||l7(),()=>{To.delete(e),!To.size&&typeof oa=="function"&&(window.removeEventListener("resize",oa),oa=void 0)}}function u7(e,t){return typeof e=="function"?c7(e):o7(e,t)}function k2(e,t){let r;const n=()=>{const{currentTime:s}=t,o=(s===null?0:s.value)/100;r!==o&&e(o),r=o};return _e.preUpdate(n,!0),()=>nr(n)}function d7(e){return zx(e)&&e.tagName==="svg"}function f7(...e){const t=!Array.isArray(e[0]),r=t?0:-1,n=e[0+r],s=e[1+r],i=e[2+r],o=e[3+r],l=Ex(s,i,o);return t?l(n):l}const h7=[...b2,Ze,fn],m7=e=>h7.find(y2(e)),PS=()=>({translate:0,scale:1,origin:0,originPoint:0}),la=()=>({x:PS(),y:PS()}),AS=()=>({min:0,max:0}),nt=()=>({x:AS(),y:AS()}),eg={current:null},C2={current:!1},p7=typeof window<"u";function g7(){if(C2.current=!0,!!p7)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>eg.current=e.matches;e.addEventListener("change",t),t()}else eg.current=!1}const x7=new WeakMap;function Dc(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Si(e){return typeof e=="string"||Array.isArray(e)}const Wx=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Hx=["initial",...Wx];function Rc(e){return Dc(e.animate)||Hx.some(t=>Si(e[t]))}function _2(e){return!!(Rc(e)||e.variants)}function y7(e,t,r){for(const n in t){const s=t[n],i=r[n];if(vt(s))e.addValue(n,s);else if(vt(i))e.addValue(n,pr(s,{owner:e}));else if(i!==s)if(e.hasValue(n)){const o=e.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=e.getStaticValue(n);e.addValue(n,pr(o!==void 0?o:s,{owner:e}))}}for(const n in r)t[n]===void 0&&e.removeValue(n);return t}const OS=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Fl={};function E2(e){Fl=e}function b7(){return Fl}class v7{scrapeMotionValuesFromProps(t,r,n){return{}}constructor({parent:t,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Mx,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=At.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,_e.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=r,this.presenceContext=n,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!i,this.isControllingVariants=Rc(r),this.isVariantNode=_2(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(r,{},this);for(const h in f){const x=f[h];c[h]!==void 0&&vt(x)&&x.set(c[h])}}mount(t){this.current=t,x7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((r,n)=>this.bindToMotionValue(n,r)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(C2.current||g7(),this.shouldReduceMotion=eg.current),this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),nr(this.notifyUpdate),nr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const r=this.features[t];r&&(r.unmount(),r.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,r){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const n=ts.has(t);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&_e.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;typeof window<"u"&&window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,r)),this.valueSubscriptions.set(t,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Fl){const r=Fl[t];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[t]&&s&&n(this.props)&&(this.features[t]=new s(this)),this.features[t]){const i=this.features[t];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,r){this.latestValues[t]=r}update(t,r){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<OS.length;n++){const s=OS[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=t[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=y7(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(t),()=>r.variantChildren.delete(t)}addValue(t,r){const n=this.values.get(t);r!==n&&(n&&this.removeValue(t),this.bindToMotionValue(t,r),this.values.set(t,r),this.latestValues[t]=r.get())}removeValue(t){this.values.delete(t);const r=this.valueSubscriptions.get(t);r&&(r(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,r){if(this.props.values&&this.props.values[t])return this.props.values[t];let n=this.values.get(t);return n===void 0&&r!==void 0&&(n=pr(r===null?void 0:r,{owner:this}),this.addValue(t,n)),n}readValue(t,r){let n=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return n!=null&&(typeof n=="string"&&(ET(n)||DT(n))?n=parseFloat(n):!m7(n)&&fn.test(r)&&(n=j2(t,r)),this.setBaseTarget(t,vt(n)?n.get():n)),vt(n)?n.get():n}setBaseTarget(t,r){this.baseTarget[t]=r}getBaseTarget(t){const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const i=Bx(this.props,r,this.presenceContext?.custom);i&&(n=i[t])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!vt(s)?s:this.initialValues[t]!==void 0&&n===void 0?void 0:this.baseTarget[t]}on(t,r){return this.events[t]||(this.events[t]=new Nx),this.events[t].add(r)}notify(t,...r){this.events[t]&&this.events[t].notify(...r)}scheduleRenderMicrotask(){Ux.render(this.render)}}class I2 extends v7{constructor(){super(...arguments),this.KeyframeResolver=YW}sortInstanceNodePosition(t,r){return t.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(t,r){const n=t.style;return n?n[r]:void 0}removeValueFromRenderState(t,{vars:r,style:n}){delete r[t],delete n[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;vt(t)&&(this.childSubscription=t.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}class bn{constructor(t){this.isMounted=!1,this.node=t}update(){}}function D2({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function j7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function w7(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function Zh(e){return e===void 0||e===1}function tg({scale:e,scaleX:t,scaleY:r}){return!Zh(e)||!Zh(t)||!Zh(r)}function Sn(e){return tg(e)||R2(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function R2(e){return TS(e.x)||TS(e.y)}function TS(e){return e&&e!=="0%"}function ql(e,t,r){const n=e-r,s=t*n;return r+s}function kS(e,t,r,n,s){return s!==void 0&&(e=ql(e,s,n)),ql(e,r,n)+t}function rg(e,t=0,r=1,n,s){e.min=kS(e.min,t,r,n,s),e.max=kS(e.max,t,r,n,s)}function M2(e,{x:t,y:r}){rg(e.x,t.translate,t.scale,t.originPoint),rg(e.y,r.translate,r.scale,r.originPoint)}const CS=.999999999999,_S=1.0000000000001;function N7(e,t,r,n=!1){const s=r.length;if(!s)return;t.x=t.y=1;let i,o;for(let l=0;l<s;l++){i=r[l],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&ua(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,M2(e,o)),n&&Sn(i.latestValues)&&ua(e,i.latestValues))}t.x<_S&&t.x>CS&&(t.x=1),t.y<_S&&t.y>CS&&(t.y=1)}function ca(e,t){e.min=e.min+t,e.max=e.max+t}function ES(e,t,r,n,s=.5){const i=ze(e.min,e.max,s);rg(e,t,r,i,n)}function ua(e,t){ES(e.x,t.x,t.scaleX,t.scale,t.originX),ES(e.y,t.y,t.scaleY,t.scale,t.originY)}function $2(e,t){return D2(w7(e.getBoundingClientRect(),t))}function S7(e,t,r){const n=$2(e,r),{scroll:s}=t;return s&&(ca(n.x,s.offset.x),ca(n.y,s.offset.y)),n}const P7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},A7=es.length;function O7(e,t,r){let n="",s=!0;for(let i=0;i<A7;i++){const o=es[i],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number")c=l===(o.startsWith("scale")?1:0);else{const u=parseFloat(l);c=o.startsWith("scale")?u===1:u===0}if(!c||r){const u=N2(l,qx[o]);if(!c){s=!1;const d=P7[o]||o;n+=`${d}(${u}) `}r&&(t[o]=u)}}return n=n.trim(),r?n=r(t,s?"":n):s&&(n="none"),n}function Kx(e,t,r){const{style:n,vars:s,transformOrigin:i}=e;let o=!1,l=!1;for(const c in t){const u=t[c];if(ts.has(c)){o=!0;continue}else if(KT(c)){s[c]=u;continue}else{const d=N2(u,qx[c]);c.startsWith("origin")?(l=!0,i[c]=d):n[c]=d}}if(t.transform||(o||r?n.transform=O7(t,e.transform,r):n.transform&&(n.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=i;n.transformOrigin=`${c} ${u} ${d}`}}function L2(e,{style:t,vars:r},n,s){const i=e.style;let o;for(o in t)i[o]=t[o];s?.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function IS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ys={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(oe.test(e))e=parseFloat(e);else return e;const r=IS(e,t.target.x),n=IS(e,t.target.y);return`${r}% ${n}%`}},T7={correct:(e,{treeScale:t,projectionDelta:r})=>{const n=e,s=fn.parse(e);if(s.length>5)return n;const i=fn.createTransformer(e),o=typeof s[0]!="number"?1:0,l=r.x.scale*t.x,c=r.y.scale*t.y;s[0+o]/=l,s[1+o]/=c;const u=ze(l,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=u),typeof s[3+o]=="number"&&(s[3+o]/=u),i(s)}},ng={borderRadius:{...ys,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:ys,borderTopRightRadius:ys,borderBottomLeftRadius:ys,borderBottomRightRadius:ys,boxShadow:T7};function B2(e,{layout:t,layoutId:r}){return ts.has(e)||e.startsWith("origin")||(t||r!==void 0)&&(!!ng[e]||e==="opacity")}function Gx(e,t,r){const n=e.style,s=t?.style,i={};if(!n)return i;for(const o in n)(vt(n[o])||s&&vt(s[o])||B2(o,e)||r?.getValue(o)?.liveStyle!==void 0)&&(i[o]=n[o]);return i}function k7(e){return window.getComputedStyle(e)}class C7 extends I2{constructor(){super(...arguments),this.type="html",this.renderInstance=L2}readValueFromInstance(t,r){if(ts.has(r))return this.projection?.isProjecting?zp(r):Zz(t,r);{const n=k7(t),s=(KT(r)?n.getPropertyValue(r):n[r])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:r}){return $2(t,r)}build(t,r,n){Kx(t,r,n.transformTemplate)}scrapeMotionValuesFromProps(t,r,n){return Gx(t,r,n)}}const _7={offset:"stroke-dashoffset",array:"stroke-dasharray"},E7={offset:"strokeDashoffset",array:"strokeDasharray"};function I7(e,t,r=1,n=0,s=!0){e.pathLength=1;const i=s?_7:E7;e[i.offset]=`${-n}`,e[i.array]=`${t} ${r}`}const D7=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function F2(e,{attrX:t,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...l},c,u,d){if(Kx(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:h}=e;f.transform&&(h.transform=f.transform,delete f.transform),(h.transform||f.transformOrigin)&&(h.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),h.transform&&(h.transformBox=d?.transformBox??"fill-box",delete f.transformBox);for(const x of D7)f[x]!==void 0&&(h[x]=f[x],delete f[x]);t!==void 0&&(f.x=t),r!==void 0&&(f.y=r),n!==void 0&&(f.scale=n),s!==void 0&&I7(f,s,i,o,!1)}const q2=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),U2=e=>typeof e=="string"&&e.toLowerCase()==="svg";function R7(e,t,r,n){L2(e,t,void 0,n);for(const s in t.attrs)e.setAttribute(q2.has(s)?s:Fx(s),t.attrs[s])}function V2(e,t,r){const n=Gx(e,t,r);for(const s in e)if(vt(e[s])||vt(t[s])){const i=es.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=e[s]}return n}class M7 extends I2{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nt}getBaseTargetFromProps(t,r){return t[r]}readValueFromInstance(t,r){if(ts.has(r)){const n=v2(r);return n&&n.default||0}return r=q2.has(r)?r:Fx(r),t.getAttribute(r)}scrapeMotionValuesFromProps(t,r,n){return V2(t,r,n)}build(t,r,n){F2(t,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(t,r,n,s){R7(t,r,n,s)}mount(t){this.isSVGTag=U2(t.tagName),super.mount(t)}}const $7=Hx.length;function z2(e){if(!e)return;if(!e.isControllingVariants){const r=e.parent?z2(e.parent)||{}:{};return e.props.initial!==void 0&&(r.initial=e.props.initial),r}const t={};for(let r=0;r<$7;r++){const n=Hx[r],s=e.props[n];(Si(s)||s===!1)&&(t[n]=s)}return t}function W2(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}const L7=[...Wx].reverse(),B7=Wx.length;function F7(e){return t=>Promise.all(t.map(({animation:r,options:n})=>FW(e,r,n)))}function q7(e){let t=F7(e),r=DS(),n=!0;const s=c=>(u,d)=>{const f=ma(e,d,c==="exit"?e.presenceContext?.custom:void 0);if(f){const{transition:h,transitionEnd:x,...p}=f;u={...u,...p,...x}}return u};function i(c){t=c(e)}function o(c){const{props:u}=e,d=z2(e.parent)||{},f=[],h=new Set;let x={},p=1/0;for(let m=0;m<B7;m++){const y=L7[m],v=r[y],b=u[y]!==void 0?u[y]:d[y],S=Si(b),j=y===c?v.isActive:null;j===!1&&(p=m);let w=b===d[y]&&b!==u[y]&&S;if(w&&n&&e.manuallyAnimateOnMount&&(w=!1),v.protectedKeys={...x},!v.isActive&&j===null||!b&&!v.prevProp||Dc(b)||typeof b=="boolean")continue;const P=U7(v.prevProp,b);let A=P||y===c&&v.isActive&&!w&&S||m>p&&S,O=!1;const C=Array.isArray(b)?b:[b];let k=C.reduce(s(y),{});j===!1&&(k={});const{prevResolvedValues:T={}}=v,E={...T,...k},$=z=>{A=!0,h.has(z)&&(O=!0,h.delete(z)),v.needsAnimating[z]=!0;const K=e.getValue(z);K&&(K.liveStyle=!1)};for(const z in E){const K=k[z],G=T[z];if(x.hasOwnProperty(z))continue;let Z=!1;Yp(K)&&Yp(G)?Z=!W2(K,G):Z=K!==G,Z?K!=null?$(z):h.add(z):K!==void 0&&h.has(z)?$(z):v.protectedKeys[z]=!0}v.prevProp=b,v.prevResolvedValues=k,v.isActive&&(x={...x,...k}),n&&e.blockInitialAnimation&&(A=!1);const L=w&&P;A&&(!L||O)&&f.push(...C.map(z=>{const K={type:y};if(typeof z=="string"&&n&&!L&&e.manuallyAnimateOnMount&&e.parent){const{parent:G}=e,Z=ma(G,z);if(G.enteringChildren&&Z){const{delayChildren:R}=Z.transition||{};K.delay=f2(G.enteringChildren,e,R)}}return{animation:z,options:K}}))}if(h.size){const m={};if(typeof u.initial!="boolean"){const y=ma(e,Array.isArray(u.initial)?u.initial[0]:u.initial);y&&y.transition&&(m.transition=y.transition)}h.forEach(y=>{const v=e.getBaseTarget(y),b=e.getValue(y);b&&(b.liveStyle=!0),m[y]=v??null}),f.push({animation:m})}let g=!!f.length;return n&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(g=!1),n=!1,g?t(f):Promise.resolve()}function l(c,u){if(r[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(f=>f.animationState?.setActive(c,u)),r[c].isActive=u;const d=o(c);for(const f in r)r[f].protectedKeys={};return d}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>r,reset:()=>{r=DS()}}}function U7(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!W2(t,e):!1}function jn(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function DS(){return{animate:jn(!0),whileInView:jn(),whileHover:jn(),whileTap:jn(),whileDrag:jn(),whileFocus:jn(),exit:jn()}}function RS(e,t){e.min=t.min,e.max=t.max}function lr(e,t){RS(e.x,t.x),RS(e.y,t.y)}function MS(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const H2=1e-4,V7=1-H2,z7=1+H2,K2=.01,W7=0-K2,H7=0+K2;function Ot(e){return e.max-e.min}function K7(e,t,r){return Math.abs(e-t)<=r}function $S(e,t,r,n=.5){e.origin=n,e.originPoint=ze(t.min,t.max,e.origin),e.scale=Ot(r)/Ot(t),e.translate=ze(r.min,r.max,e.origin)-e.originPoint,(e.scale>=V7&&e.scale<=z7||isNaN(e.scale))&&(e.scale=1),(e.translate>=W7&&e.translate<=H7||isNaN(e.translate))&&(e.translate=0)}function Ls(e,t,r,n){$S(e.x,t.x,r.x,n?n.originX:void 0),$S(e.y,t.y,r.y,n?n.originY:void 0)}function LS(e,t,r){e.min=r.min+t.min,e.max=e.min+Ot(t)}function G7(e,t,r){LS(e.x,t.x,r.x),LS(e.y,t.y,r.y)}function BS(e,t,r){e.min=t.min-r.min,e.max=e.min+Ot(t)}function Ul(e,t,r){BS(e.x,t.x,r.x),BS(e.y,t.y,r.y)}function FS(e,t,r,n,s){return e-=t,e=ql(e,1/r,n),s!==void 0&&(e=ql(e,1/s,n)),e}function X7(e,t=0,r=1,n=.5,s,i=e,o=e){if(Cr.test(t)&&(t=parseFloat(t),t=ze(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=ze(i.min,i.max,n);e===i&&(l-=t),e.min=FS(e.min,t,r,l,s),e.max=FS(e.max,t,r,l,s)}function qS(e,t,[r,n,s],i,o){X7(e,t[r],t[n],t[s],t.scale,i,o)}const Y7=["x","scaleX","originX"],J7=["y","scaleY","originY"];function US(e,t,r,n){qS(e.x,t,Y7,r?r.x:void 0,n?n.x:void 0),qS(e.y,t,J7,r?r.y:void 0,n?n.y:void 0)}function VS(e){return e.translate===0&&e.scale===1}function G2(e){return VS(e.x)&&VS(e.y)}function zS(e,t){return e.min===t.min&&e.max===t.max}function Z7(e,t){return zS(e.x,t.x)&&zS(e.y,t.y)}function WS(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function X2(e,t){return WS(e.x,t.x)&&WS(e.y,t.y)}function HS(e){return Ot(e.x)/Ot(e.y)}function KS(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function Xt(e){return[e("x"),e("y")]}function Q7(e,t,r){let n="";const s=e.x.translate/t.x,i=e.y.translate/t.y,o=r?.z||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(t.x!==1||t.y!==1)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:h,skewX:x,skewY:p}=r;u&&(n=`perspective(${u}px) ${n}`),d&&(n+=`rotate(${d}deg) `),f&&(n+=`rotateX(${f}deg) `),h&&(n+=`rotateY(${h}deg) `),x&&(n+=`skewX(${x}deg) `),p&&(n+=`skewY(${p}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(n+=`scale(${l}, ${c})`),n||"none"}const Y2=["TopLeft","TopRight","BottomLeft","BottomRight"],eH=Y2.length,GS=e=>typeof e=="string"?parseFloat(e):e,XS=e=>typeof e=="number"||oe.test(e);function tH(e,t,r,n,s,i){s?(e.opacity=ze(0,r.opacity??1,rH(n)),e.opacityExit=ze(t.opacity??1,0,nH(n))):i&&(e.opacity=ze(t.opacity??1,r.opacity??1,n));for(let o=0;o<eH;o++){const l=`border${Y2[o]}Radius`;let c=YS(t,l),u=YS(r,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||XS(c)===XS(u)?(e[l]=Math.max(ze(GS(c),GS(u),n),0),(Cr.test(u)||Cr.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||r.rotate)&&(e.rotate=ze(t.rotate||0,r.rotate||0,n))}function YS(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const rH=J2(0,.5,qT),nH=J2(.5,.95,It);function J2(e,t,r){return n=>n<e?0:n>t?1:r(Ua(e,t,n))}function aH(e,t,r){const n=vt(e)?e:pr(e);return n.start(Lx("",n,t,r)),n.animation}function Pi(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}const sH=(e,t)=>e.depth-t.depth;class iH{constructor(){this.children=[],this.isDirty=!1}add(t){vx(this.children,t),this.isDirty=!0}remove(t){jx(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sH),this.isDirty=!1,this.children.forEach(t)}}function oH(e,t){const r=At.now(),n=({timestamp:s})=>{const i=s-r;i>=t&&(nr(n),e(i-t))};return _e.setup(n,!0),()=>nr(n)}function ko(e){return vt(e)?e.get():e}class lH{constructor(){this.members=[]}add(t){vx(this.members,t),t.scheduleRender()}remove(t){if(jx(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(t){const r=this.members.findIndex(s=>t===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(t,r){const n=this.lead;if(t!==n&&(this.prevLead=n,this.lead=t,t.show(),n)){n.instance&&n.scheduleRender(),t.scheduleRender();const s=n.options.layoutDependency,i=t.options.layoutDependency;s!==void 0&&i!==void 0&&s===i||(t.resumeFrom=n,r&&(t.resumeFrom.preserveOpacity=!0),n.snapshot&&(t.snapshot=n.snapshot,t.snapshot.latestValues=n.animationValues||n.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0));const{crossfade:l}=t.options;l===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:r,resumingFrom:n}=t;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const Co={hasAnimatedSinceResize:!0,hasEverUpdated:!1},Qh=["","X","Y","Z"],cH=1e3;let uH=0;function em(e,t,r,n){const{latestValues:s}=t;s[e]&&(r[e]=s[e],t.setStaticValue(e,0),n&&(n[e]=0))}function Z2(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=g2(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",_e,!(s||i))}const{parent:n}=e;n&&!n.hasCheckedOptimisedAppear&&Z2(n)}function Q2({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},l=t?.()){this.id=uH++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(hH),this.nodes.forEach(xH),this.nodes.forEach(yH),this.nodes.forEach(mH)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new iH)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Nx),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=zx(o)&&!d7(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,f=0;const h=()=>this.root.updateBlockedByResize=!1;_e.read(()=>{f=window.innerWidth}),e(o,()=>{const x=window.innerWidth;x!==f&&(f=x,this.root.updateBlockedByResize=!0,d&&d(),d=oH(h,250),Co.hasAnimatedSinceResize&&(Co.hasAnimatedSinceResize=!1,this.nodes.forEach(QS)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:h,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||u.getDefaultTransition()||NH,{onLayoutAnimationStart:g,onLayoutAnimationComplete:m}=u.getProps(),y=!this.targetLayout||!X2(this.targetLayout,x),v=!f&&h;if(this.options.layoutRoot||this.resumeFrom||v||f&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...$x(p,"layout"),onPlay:g,onComplete:m};(u.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,v)}else f||QS(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),nr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bH),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Z2(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(JS);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(ZS);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gH),this.nodes.forEach(dH),this.nodes.forEach(fH)):this.nodes.forEach(ZS),this.clearAllSnapshots();const l=At.now();ot.delta=br(0,1e3/60,l-ot.timestamp),ot.timestamp=l,ot.isProcessing=!0,Wh.update.process(ot),Wh.preRender.process(ot),Wh.render.process(ot),ot.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Ux.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pH),this.sharedNodes.forEach(vH)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_e.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_e.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Ot(this.snapshot.measuredBox.x)&&!Ot(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=nt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!G2(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;o&&this.instance&&(l||Sn(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),SH(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return nt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(PH))){const{scroll:u}=this.root;u&&(ca(l.x,u.offset.x),ca(l.y,u.offset.y))}return l}removeElementScroll(o){const l=nt();if(lr(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:d,options:f}=u;u!==this.root&&d&&f.layoutScroll&&(d.wasRoot&&lr(l,o),ca(l.x,d.offset.x),ca(l.y,d.offset.y))}return l}applyTransform(o,l=!1){const c=nt();lr(c,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&ua(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Sn(d.latestValues)&&ua(c,d.latestValues)}return Sn(this.latestValues)&&ua(c,this.latestValues),c}removeTransform(o){const l=nt();lr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Sn(u.latestValues))continue;tg(u.latestValues)&&u.updateSnapshot();const d=nt(),f=u.measurePageBox();lr(d,f),US(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Sn(this.latestValues)&&US(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ot.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!this.layout||!(d||f))return;this.resolvedRelativeTargetAt=ot.timestamp;const h=this.getClosestProjectingParent();h&&this.linkedParentVersion!==h.layoutVersion&&!h.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(h&&h.layout?this.createRelativeTarget(h,this.layout.layoutBox,h.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nt(),this.targetWithTransforms=nt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),G7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):lr(this.target,this.layout.layoutBox),M2(this.target,this.targetDelta)):lr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,h&&!!h.resumingFrom==!!this.resumingFrom&&!h.options.layoutScroll&&h.target&&this.animationProgress!==1?this.createRelativeTarget(h,this.target,h.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||tg(this.parent.latestValues)||R2(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(o,l,c){this.relativeParent=o,this.linkedParentVersion=o.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nt(),this.relativeTargetOrigin=nt(),Ul(this.relativeTargetOrigin,l,c),lr(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ot.timestamp&&(c=!1),c)return;const{layout:u,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||d))return;lr(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,h=this.treeScale.y;N7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=nt());const{target:x}=o;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(MS(this.prevProjectionDelta.x,this.projectionDelta.x),MS(this.prevProjectionDelta.y,this.projectionDelta.y)),Ls(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==h||!KS(this.projectionDelta.x,this.prevProjectionDelta.x)||!KS(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=la(),this.projectionDelta=la(),this.projectionDeltaWithTransform=la()}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},f=la();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const h=nt(),x=c?c.source:void 0,p=this.layout?this.layout.source:void 0,g=x!==p,m=this.getStack(),y=!m||m.members.length<=1,v=!!(g&&!y&&this.options.crossfade===!0&&!this.path.some(wH));this.animationProgress=0;let b;this.mixTargetDelta=S=>{const j=S/1e3;e1(f.x,o.x,j),e1(f.y,o.y,j),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ul(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),jH(this.relativeTarget,this.relativeTargetOrigin,h,j),b&&Z7(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=nt()),lr(b,this.relativeTarget)),g&&(this.animationValues=d,tH(d,u,this.latestValues,j,v,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(nr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_e.update(()=>{Co.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=pr(0)),this.currentAnimation=aH(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cH),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&ek(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||nt();const f=Ot(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+f;const h=Ot(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+h}lr(l,c),ua(l,d),Ls(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new lH),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&em("z",o,u,this.animationValues);for(let d=0;d<Qh.length;d++)em(`rotate${Qh[d]}`,o,u,this.animationValues),em(`skew${Qh[d]}`,o,u,this.animationValues);o.render();for(const d in u)o.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=ko(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=ko(l?.pointerEvents)||""),this.hasProjected&&!Sn(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const d=u.animationValues||u.latestValues;this.applyTransformsToTarget();let f=Q7(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),o.transform=f;const{x:h,y:x}=this.projectionDelta;o.transformOrigin=`${h.origin*100}% ${x.origin*100}% 0`,u.animationValues?o.opacity=u===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:o.opacity=u===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const p in ng){if(d[p]===void 0)continue;const{correct:g,applyTo:m,isCSSVariable:y}=ng[p],v=f==="none"?d[p]:g(d[p],u);if(m){const b=m.length;for(let S=0;S<b;S++)o[m[S]]=v}else y?this.options.visualElement.renderState.vars[p]=v:o[p]=v}this.options.layoutId&&(o.pointerEvents=u===this?ko(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(JS),this.root.sharedNodes.clear()}}}function dH(e){e.updateLayout()}function fH(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:n}=e.layout,{animationType:s}=e.options,i=t.source!==e.layout.source;s==="size"?Xt(d=>{const f=i?t.measuredBox[d]:t.layoutBox[d],h=Ot(f);f.min=r[d].min,f.max=f.min+h}):ek(s,t.layoutBox,r)&&Xt(d=>{const f=i?t.measuredBox[d]:t.layoutBox[d],h=Ot(r[d]);f.max=f.min+h,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[d].max=e.relativeTarget[d].min+h)});const o=la();Ls(o,r,t.layoutBox);const l=la();i?Ls(l,e.applyTransform(n,!0),t.measuredBox):Ls(l,r,t.layoutBox);const c=!G2(o);let u=!1;if(!e.resumeFrom){const d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:h}=d;if(f&&h){const x=nt();Ul(x,t.layoutBox,f.layoutBox);const p=nt();Ul(p,r,h.layoutBox),X2(x,p)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=p,e.relativeTargetOrigin=x,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function hH(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function mH(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pH(e){e.clearSnapshot()}function JS(e){e.clearMeasurements()}function ZS(e){e.isLayoutDirty=!1}function gH(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function QS(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function xH(e){e.resolveTargetDelta()}function yH(e){e.calcProjection()}function bH(e){e.resetSkewAndRotation()}function vH(e){e.removeLeadSnapshot()}function e1(e,t,r){e.translate=ze(t.translate,0,r),e.scale=ze(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function t1(e,t,r,n){e.min=ze(t.min,r.min,n),e.max=ze(t.max,r.max,n)}function jH(e,t,r,n){t1(e.x,t.x,r.x,n),t1(e.y,t.y,r.y,n)}function wH(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const NH={duration:.45,ease:[.4,0,.1,1]},r1=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),n1=r1("applewebkit/")&&!r1("chrome/")?Math.round:It;function a1(e){e.min=n1(e.min),e.max=n1(e.max)}function SH(e){a1(e.x),a1(e.y)}function ek(e,t,r){return e==="position"||e==="preserve-aspect"&&!K7(HS(t),HS(r),.2)}function PH(e){return e!==e.root&&e.scroll?.wasRoot}const AH=Q2({attachResizeListener:(e,t)=>Pi(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),tm={current:void 0},tk=Q2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tm.current){const e=new AH({});e.mount(window),e.setOptions({layoutScroll:!0}),tm.current=e}return tm.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),Mc=N.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function s1(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function OH(...e){return t=>{let r=!1;const n=e.map(s=>{const i=s1(s,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let s=0;s<n.length;s++){const i=n[s];typeof i=="function"?i():s1(e[s],null)}}}}function TH(...e){return N.useCallback(OH(...e),e)}class kH extends N.Component{getSnapshotBeforeUpdate(t){const r=this.props.childRef.current;if(r&&t.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=Bl(n)&&n.offsetWidth||0,i=Bl(n)&&n.offsetHeight||0,o=this.props.sizeRef.current;o.height=r.offsetHeight||0,o.width=r.offsetWidth||0,o.top=r.offsetTop,o.left=r.offsetLeft,o.right=s-o.width-o.left,o.bottom=i-o.height-o.top}return null}componentDidUpdate(){}render(){return this.props.children}}function CH({children:e,isPresent:t,anchorX:r,anchorY:n,root:s}){const i=N.useId(),o=N.useRef(null),l=N.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:c}=N.useContext(Mc),u=e.props?.ref??e?.ref,d=TH(o,u);return N.useInsertionEffect(()=>{const{width:f,height:h,top:x,left:p,right:g,bottom:m}=l.current;if(t||!o.current||!f||!h)return;const y=r==="left"?`left: ${p}`:`right: ${g}`,v=n==="bottom"?`bottom: ${m}`:`top: ${x}`;o.current.dataset.motionPopId=i;const b=document.createElement("style");c&&(b.nonce=c);const S=s??document.head;return S.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${y}px !important;
            ${v}px !important;
          }
        `),()=>{S.contains(b)&&S.removeChild(b)}},[t]),a.jsx(kH,{isPresent:t,childRef:o,sizeRef:l,children:N.cloneElement(e,{ref:d})})}const _H=({children:e,initial:t,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:l,anchorY:c,root:u})=>{const d=dn(EH),f=N.useId();let h=!0,x=N.useMemo(()=>(h=!1,{id:f,initial:t,isPresent:r,custom:s,onExitComplete:p=>{d.set(p,!0);for(const g of d.values())if(!g)return;n&&n()},register:p=>(d.set(p,!1),()=>d.delete(p))}),[r,d,n]);return i&&h&&(x={...x}),N.useMemo(()=>{d.forEach((p,g)=>d.set(g,!1))},[r]),N.useEffect(()=>{!r&&!d.size&&n&&n()},[r]),o==="popLayout"&&(e=a.jsx(CH,{isPresent:r,anchorX:l,anchorY:c,root:u,children:e})),a.jsx(Ic.Provider,{value:x,children:e})};function EH(){return new Map}function rk(e=!0){const t=N.useContext(Ic);if(t===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=t,i=N.useId();N.useEffect(()=>{if(e)return s(i)},[e]);const o=N.useCallback(()=>e&&n&&n(i),[i,n,e]);return!r&&n?[!1,o]:[!0]}const fo=e=>e.key||"";function i1(e){const t=[];return N.Children.forEach(e,r=>{N.isValidElement(r)&&t.push(r)}),t}const nk=({children:e,custom:t,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:l="left",anchorY:c="top",root:u})=>{const[d,f]=rk(o),h=N.useMemo(()=>i1(e),[e]),x=o&&!d?[]:h.map(fo),p=N.useRef(!0),g=N.useRef(h),m=dn(()=>new Map),y=N.useRef(new Set),[v,b]=N.useState(h),[S,j]=N.useState(h);Ec(()=>{p.current=!1,g.current=h;for(let A=0;A<S.length;A++){const O=fo(S[A]);x.includes(O)?(m.delete(O),y.current.delete(O)):m.get(O)!==!0&&m.set(O,!1)}},[S,x.length,x.join("-")]);const w=[];if(h!==v){let A=[...h];for(let O=0;O<S.length;O++){const C=S[O],k=fo(C);x.includes(k)||(A.splice(O,0,C),w.push(C))}return i==="wait"&&w.length&&(A=w),j(i1(A)),b(h),null}const{forceRender:P}=N.useContext(bx);return a.jsx(a.Fragment,{children:S.map(A=>{const O=fo(A),C=o&&!d?!1:h===S||x.includes(O),k=()=>{if(y.current.has(O))return;if(y.current.add(O),m.has(O))m.set(O,!0);else return;let T=!0;m.forEach(E=>{E||(T=!1)}),T&&(P?.(),j(g.current),o&&f?.(),n&&n())};return a.jsx(_H,{isPresent:C,initial:!p.current||r?void 0:!1,custom:t,presenceAffectsLayout:s,mode:i,root:u,onExitComplete:C?void 0:k,anchorX:l,anchorY:c,children:A},O)})})},ak=N.createContext({strict:!1}),o1={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let l1=!1;function IH(){if(l1)return;const e={};for(const t in o1)e[t]={isEnabled:r=>o1[t].some(n=>!!r[n])};E2(e),l1=!0}function sk(){return IH(),b7()}function DH(e){const t=sk();for(const r in e)t[r]={...t[r],...e[r]};E2(t)}const RH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Vl(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||RH.has(e)}let ik=e=>!Vl(e);function MH(e){typeof e=="function"&&(ik=t=>t.startsWith("on")?!Vl(t):e(t))}try{MH(require("@emotion/is-prop-valid").default)}catch{}function $H(e,t,r){const n={};for(const s in e)s==="values"&&typeof e.values=="object"||(ik(s)||r===!0&&Vl(s)||!t&&!Vl(s)||e.draggable&&s.startsWith("onDrag"))&&(n[s]=e[s]);return n}const $c=N.createContext({});function LH(e,t){if(Rc(e)){const{initial:r,animate:n}=e;return{initial:r===!1||Si(r)?r:void 0,animate:Si(n)?n:void 0}}return e.inherit!==!1?t:{}}function BH(e){const{initial:t,animate:r}=LH(e,N.useContext($c));return N.useMemo(()=>({initial:t,animate:r}),[c1(t),c1(r)])}function c1(e){return Array.isArray(e)?e.join(" "):e}const Xx=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ok(e,t,r){for(const n in t)!vt(t[n])&&!B2(n,r)&&(e[n]=t[n])}function FH({transformTemplate:e},t){return N.useMemo(()=>{const r=Xx();return Kx(r,t,e),Object.assign({},r.vars,r.style)},[t])}function qH(e,t){const r=e.style||{},n={};return ok(n,r,e),Object.assign(n,FH(e,t)),n}function UH(e,t){const r={},n=qH(e,t);return e.drag&&e.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=n,r}const lk=()=>({...Xx(),attrs:{}});function VH(e,t,r,n){const s=N.useMemo(()=>{const i=lk();return F2(i,t,U2(n),e.transformTemplate,e.style),{...i.attrs,style:{...i.style}}},[t]);if(e.style){const i={};ok(i,e.style,e),s.style={...i,...s.style}}return s}const zH=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Yx(e){return typeof e!="string"||e.includes("-")?!1:!!(zH.indexOf(e)>-1||/[A-Z]/u.test(e))}function WH(e,t,r,{latestValues:n},s,i=!1,o){const c=(o??Yx(e)?VH:UH)(t,n,s,e),u=$H(t,typeof e=="string",i),d=e!==N.Fragment?{...u,...c,ref:r}:{},{children:f}=t,h=N.useMemo(()=>vt(f)?f.get():f,[f]);return N.createElement(e,{...d,children:h})}function HH({scrapeMotionValuesFromProps:e,createRenderState:t},r,n,s){return{latestValues:KH(r,n,s,e),renderState:t()}}function KH(e,t,r,n){const s={},i=n(e,{});for(const h in i)s[h]=ko(i[h]);let{initial:o,animate:l}=e;const c=Rc(e),u=_2(e);t&&u&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let d=r?r.initial===!1:!1;d=d||o===!1;const f=d?l:o;if(f&&typeof f!="boolean"&&!Dc(f)){const h=Array.isArray(f)?f:[f];for(let x=0;x<h.length;x++){const p=Bx(e,h[x]);if(p){const{transitionEnd:g,transition:m,...y}=p;for(const v in y){let b=y[v];if(Array.isArray(b)){const S=d?b.length-1:0;b=b[S]}b!==null&&(s[v]=b)}for(const v in g)s[v]=g[v]}}}return s}const ck=e=>(t,r)=>{const n=N.useContext($c),s=N.useContext(Ic),i=()=>HH(e,t,n,s);return r?i():dn(i)},GH=ck({scrapeMotionValuesFromProps:Gx,createRenderState:Xx}),XH=ck({scrapeMotionValuesFromProps:V2,createRenderState:lk}),YH=Symbol.for("motionComponentSymbol");function JH(e,t,r){const n=N.useRef(r);N.useInsertionEffect(()=>{n.current=r});const s=N.useRef(null);return N.useCallback(i=>{i&&e.onMount?.(i),t&&(i?t.mount(i):t.unmount());const o=n.current;if(typeof o=="function")if(i){const l=o(i);typeof l=="function"&&(s.current=l)}else s.current?(s.current(),s.current=null):o(i);else o&&(o.current=i)},[t])}const uk=N.createContext({});function Os(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function ZH(e,t,r,n,s,i){const{visualElement:o}=N.useContext($c),l=N.useContext(ak),c=N.useContext(Ic),u=N.useContext(Mc).reducedMotion,d=N.useRef(null),f=N.useRef(!1);n=n||l.renderer,!d.current&&n&&(d.current=n(e,{visualState:t,parent:o,props:r,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u,isSVG:i}),f.current&&d.current&&(d.current.manuallyAnimateOnMount=!0));const h=d.current,x=N.useContext(uk);h&&!h.projection&&s&&(h.type==="html"||h.type==="svg")&&QH(d.current,r,s,x);const p=N.useRef(!1);N.useInsertionEffect(()=>{h&&p.current&&h.update(r,c)});const g=r[p2],m=N.useRef(!!g&&!window.MotionHandoffIsComplete?.(g)&&window.MotionHasOptimisedAnimation?.(g));return Ec(()=>{f.current=!0,h&&(p.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),m.current&&h.animationState&&h.animationState.animateChanges())}),N.useEffect(()=>{h&&(!m.current&&h.animationState&&h.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(g)}),m.current=!1),h.enteringChildren=void 0)}),h}function QH(e,t,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:dk(e.parent)),e.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||l&&Os(l),visualElement:e,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:d,layoutScroll:c,layoutRoot:u})}function dk(e){if(e)return e.options.allowProjection!==!1?e.projection:dk(e.parent)}function rm(e,{forwardMotionProps:t=!1,type:r}={},n,s){n&&DH(n);const i=r?r==="svg":Yx(e),o=i?XH:GH;function l(u,d){let f;const h={...N.useContext(Mc),...u,layoutId:e9(u)},{isStatic:x}=h,p=BH(u),g=o(u,x);if(!x&&_T){t9();const m=r9(h);f=m.MeasureLayout,p.visualElement=ZH(e,g,h,s,m.ProjectionNode,i)}return a.jsxs($c.Provider,{value:p,children:[f&&p.visualElement?a.jsx(f,{visualElement:p.visualElement,...h}):null,WH(e,u,JH(g,p.visualElement,d),g,x,t,i)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=N.forwardRef(l);return c[YH]=e,c}function e9({layoutId:e}){const t=N.useContext(bx).id;return t&&e!==void 0?t+"-"+e:e}function t9(e,t){N.useContext(ak).strict}function r9(e){const t=sk(),{drag:r,layout:n}=t;if(!r&&!n)return{};const s={...r,...n};return{MeasureLayout:r?.isEnabled(e)||n?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function n9(e,t){if(typeof Proxy>"u")return rm;const r=new Map,n=(i,o)=>rm(i,o,e,t),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,rm(o,void 0,e,t)),r.get(o))})}const a9=(e,t)=>t.isSVG??Yx(e)?new M7(t):new C7(t,{allowProjection:e!==N.Fragment});class s9 extends bn{constructor(t){super(t),t.animationState||(t.animationState=q7(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Dc(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:r}=this.node.prevProps||{};t!==r&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let i9=0;class o9 extends bn{constructor(){super(...arguments),this.id=i9++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===n)return;const s=this.node.animationState.setActive("exit",!t);r&&!t&&s.then(()=>{r(this.id)})}mount(){const{register:t,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const l9={animation:{Feature:s9},exit:{Feature:o9}};function zi(e){return{point:{x:e.pageX,y:e.pageY}}}const c9=e=>t=>Vx(t)&&e(t,zi(t));function Bs(e,t,r,n){return Pi(e,t,c9(r),n)}const fk=({current:e})=>e?e.ownerDocument.defaultView:null,u1=(e,t)=>Math.abs(e-t);function u9(e,t){const r=u1(e.x,t.x),n=u1(e.y,t.y);return Math.sqrt(r**2+n**2)}const d1=new Set(["auto","scroll"]);class hk{constructor(t,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3,element:l}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=x=>{this.handleScroll(x.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=am(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=u9(x.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!g)return;const{point:m}=x,{timestamp:y}=ot;this.history.push({...m,timestamp:y});const{onStart:v,onMove:b}=this.handlers;p||(v&&v(this.lastMoveEvent,x),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,x)},this.handlePointerMove=(x,p)=>{this.lastMoveEvent=x,this.lastMoveEventInfo=nm(p,this.transformPagePoint),_e.update(this.updatePoint,!0)},this.handlePointerUp=(x,p)=>{this.end();const{onEnd:g,onSessionEnd:m,resumeAnimation:y}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=am(x.type==="pointercancel"?this.lastMoveEventInfo:nm(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(x,v),m&&m(x,v)},!Vx(t))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const c=zi(t),u=nm(c,this.transformPagePoint),{point:d}=u,{timestamp:f}=ot;this.history=[{...d,timestamp:f}];const{onSessionStart:h}=r;h&&h(t,am(u,this.history)),this.removeListeners=qi(Bs(this.contextWindow,"pointermove",this.handlePointerMove),Bs(this.contextWindow,"pointerup",this.handlePointerUp),Bs(this.contextWindow,"pointercancel",this.handlePointerUp)),l&&this.startScrollTracking(l)}startScrollTracking(t){let r=t.parentElement;for(;r;){const n=getComputedStyle(r);(d1.has(n.overflowX)||d1.has(n.overflowY))&&this.scrollPositions.set(r,{x:r.scrollLeft,y:r.scrollTop}),r=r.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const r=this.scrollPositions.get(t);if(!r)return;const n=t===window,s=n?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},i={x:s.x-r.x,y:s.y-r.y};i.x===0&&i.y===0||(n?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=i.x,this.lastMoveEventInfo.point.y+=i.y):this.history.length>0&&(this.history[0].x-=i.x,this.history[0].y-=i.y),this.scrollPositions.set(t,s),_e.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),nr(this.updatePoint)}}function nm(e,t){return t?{point:t(e.point)}:e}function f1(e,t){return{x:e.x-t.x,y:e.y-t.y}}function am({point:e},t){return{point:e,delta:f1(e,mk(t)),offset:f1(e,d9(t)),velocity:f9(t,.1)}}function d9(e){return e[0]}function mk(e){return e[e.length-1]}function f9(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null;const s=mk(e);for(;r>=0&&(n=e[r],!(s.timestamp-n.timestamp>Vr(t)));)r--;if(!n)return{x:0,y:0};const i=Zt(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function h9(e,{min:t,max:r},n){return t!==void 0&&e<t?e=n?ze(t,e,n.min):Math.max(e,t):r!==void 0&&e>r&&(e=n?ze(r,e,n.max):Math.min(e,r)),e}function h1(e,t,r){return{min:t!==void 0?e.min+t:void 0,max:r!==void 0?e.max+r-(e.max-e.min):void 0}}function m9(e,{top:t,left:r,bottom:n,right:s}){return{x:h1(e.x,r,s),y:h1(e.y,t,n)}}function m1(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function p9(e,t){return{x:m1(e.x,t.x),y:m1(e.y,t.y)}}function g9(e,t){let r=.5;const n=Ot(e),s=Ot(t);return s>n?r=Ua(t.min,t.max-n,e.min):n>s&&(r=Ua(e.min,e.max-s,t.min)),br(0,1,r)}function x9(e,t){const r={};return t.min!==void 0&&(r.min=t.min-e.min),t.max!==void 0&&(r.max=t.max-e.min),r}const ag=.35;function y9(e=ag){return e===!1?e=0:e===!0&&(e=ag),{x:p1(e,"left","right"),y:p1(e,"top","bottom")}}function p1(e,t,r){return{min:g1(e,t),max:g1(e,r)}}function g1(e,t){return typeof e=="number"?e:e[t]||0}const b9=new WeakMap;class v9{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=f=>{r?(this.stopAnimation(),this.snapToCursor(zi(f).point)):this.pauseAnimation()},o=(f,h)=>{this.stopAnimation();const{drag:x,dragPropagation:p,onDragStart:g}=this.getProps();if(x&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=JW(x),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=h,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xt(y=>{let v=this.getAxisMotionValue(y).get()||0;if(Cr.test(v)){const{projection:b}=this.visualElement;if(b&&b.layout){const S=b.layout.layoutBox[y];S&&(v=Ot(S)*(parseFloat(v)/100))}}this.originPoint[y]=v}),g&&_e.postRender(()=>g(f,h)),Jp(this.visualElement,"transform");const{animationState:m}=this.visualElement;m&&m.setActive("whileDrag",!0)},l=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h;const{dragPropagation:x,dragDirectionLock:p,onDirectionLock:g,onDrag:m}=this.getProps();if(!x&&!this.openDragLock)return;const{offset:y}=h;if(p&&this.currentDirection===null){this.currentDirection=j9(y),this.currentDirection!==null&&g&&g(this.currentDirection);return}this.updateAxis("x",h.point,y),this.updateAxis("y",h.point,y),this.visualElement.render(),m&&m(f,h)},c=(f,h)=>{this.latestPointerEvent=f,this.latestPanInfo=h,this.stop(f,h),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>Xt(f=>this.getAnimationState(f)==="paused"&&this.getAxisMotionValue(f).animation?.play()),{dragSnapToOrigin:d}=this.getProps();this.panSession=new hk(t,{onSessionStart:i,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:n,contextWindow:fk(this.visualElement),element:this.visualElement.current})}stop(t,r){const n=t||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&_e.postRender(()=>l(n,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:r}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,r,n){const{drag:s}=this.getProps();if(!n||!ho(t,s,this.currentDirection))return;const i=this.getAxisMotionValue(t);let o=this.originPoint[t]+n[t];this.constraints&&this.constraints[t]&&(o=h9(o,this.constraints[t],this.elastic[t])),i.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Os(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&n?this.constraints=m9(n.layoutBox,t):this.constraints=!1,this.elastic=y9(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Xt(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=x9(n.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!Os(t))return!1;const n=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=S7(n,s.root,this.visualElement.getTransformPagePoint());let o=p9(s.layout.layoutBox,i);if(r){const l=r(j7(o));this.hasMutatedConstraints=!!l,l&&(o=D2(l))}return o}startAnimation(t){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Xt(d=>{if(!ho(d,r,this.currentDirection))return;let f=c&&c[d]||{};o&&(f={min:0,max:0});const h=s?200:1e6,x=s?40:1e7,p={type:"inertia",velocity:n?t[d]:0,bounceStiffness:h,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,p)});return Promise.all(u).then(l)}startAxisValueAnimation(t,r){const n=this.getAxisMotionValue(t);return Jp(this.visualElement,t),n.start(Lx(t,n,0,r,this.visualElement,!1))}stopAnimation(){Xt(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Xt(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const r=`_drag${t.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(t,(n.initial?n.initial[t]:void 0)||0)}snapToCursor(t){Xt(r=>{const{drag:n}=this.getProps();if(!ho(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:l}=s.layout.layoutBox[r],c=i.get()||0;i.set(t[r]-ze(o,l,.5)+c)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!Os(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Xt(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();s[o]=g9({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xt(o=>{if(!ho(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(ze(c,u,s[o]))})}addListeners(){if(!this.visualElement.current)return;b9.set(this.visualElement,this);const t=this.visualElement.current,r=Bs(t,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps(),f=c.target,h=f!==t&&O2(f);u&&d&&!h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();Os(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_e.read(n);const o=Pi(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Xt(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=ag,dragMomentum:l=!0}=t;return{...t,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function ho(e,t,r){return(t===!0||t===e)&&(r===null||r===e)}function j9(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}class w9 extends bn{constructor(t){super(t),this.removeGroupControls=It,this.removeListeners=It,this.controls=new v9(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||It}update(){const{dragControls:t}=this.node.getProps(),{dragControls:r}=this.node.prevProps||{};t!==r&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const x1=e=>(t,r)=>{e&&_e.postRender(()=>e(t,r))};class N9 extends bn{constructor(){super(...arguments),this.removePointerDownListener=It}onPointerDown(t){this.session=new hk(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:fk(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:x1(t),onStart:x1(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&_e.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=Bs(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let sm=!1;class S9 extends N.Component{componentDidMount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=t;i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),sm&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),Co.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,t.layoutDependency!==r&&o.setOptions({...o.options,layoutDependency:r}),sm=!0,s||t.layoutDependency!==r||r===void 0||t.isPresent!==i?o.willUpdate():this.safeToRemove(),t.isPresent!==i&&(i?o.promote():o.relegate()||_e.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),Ux.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=t;sm=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function pk(e){const[t,r]=rk(),n=N.useContext(bx);return a.jsx(S9,{...e,layoutGroup:n,switchLayoutGroup:N.useContext(uk),isPresent:t,safeToRemove:r})}const P9={pan:{Feature:N9},drag:{Feature:w9,ProjectionNode:tk,MeasureLayout:pk}};function y1(e,t,r){const{props:n}=e;e.animationState&&n.whileHover&&e.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&_e.postRender(()=>i(t,zi(t)))}class A9 extends bn{mount(){const{current:t}=this.node;t&&(this.unmount=ZW(t,(r,n)=>(y1(this.node,n,"Start"),s=>y1(this.node,s,"End"))))}unmount(){}}class O9 extends bn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qi(Pi(this.node.current,"focus",()=>this.onFocus()),Pi(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function b1(e,t,r){const{props:n}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&n.whileTap&&e.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&_e.postRender(()=>i(t,zi(t)))}class T9 extends bn{mount(){const{current:t}=this.node;t&&(this.unmount=t7(t,(r,n)=>(b1(this.node,n,"Start"),(s,{success:i})=>b1(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const sg=new WeakMap,im=new WeakMap,k9=e=>{const t=sg.get(e.target);t&&t(e)},C9=e=>{e.forEach(k9)};function _9({root:e,...t}){const r=e||document;im.has(r)||im.set(r,{});const n=im.get(r),s=JSON.stringify(t);return n[s]||(n[s]=new IntersectionObserver(C9,{root:e,...t})),n[s]}function E9(e,t,r){const n=_9(t);return sg.set(e,r),n.observe(e),()=>{sg.delete(e),n.unobserve(e)}}const I9={some:0,all:1};class D9 extends bn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=t,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:I9[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),h=u?d:f;h&&h(c)};return E9(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:r}=this.node;["amount","margin","root"].some(R9(t,r))&&this.startObserver()}unmount(){}}function R9({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}const M9={inView:{Feature:D9},tap:{Feature:T9},focus:{Feature:O9},hover:{Feature:A9}},$9={layout:{ProjectionNode:tk,MeasureLayout:pk}},L9={...l9,...M9,...P9,...$9},ee=n9(L9,a9),B9=50,v1=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),F9=()=>({time:0,x:v1(),y:v1()}),q9={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function j1(e,t,r,n){const s=r[t],{length:i,position:o}=q9[t],l=s.current,c=r.time;s.current=e[`scroll${o}`],s.scrollLength=e[`scroll${i}`]-e[`client${i}`],s.offset.length=0,s.offset[0]=0,s.offset[1]=s.scrollLength,s.progress=Ua(0,s.scrollLength,s.current);const u=n-c;s.velocity=u>B9?0:Sx(s.current-l,u)}function U9(e,t,r){j1(e,"x",t,r),j1(e,"y",t,r),t.time=r}function V9(e,t){const r={x:0,y:0};let n=e;for(;n&&n!==t;)if(Bl(n))r.x+=n.offsetLeft,r.y+=n.offsetTop,n=n.offsetParent;else if(n.tagName==="svg"){const s=n.getBoundingClientRect();n=n.parentElement;const i=n.getBoundingClientRect();r.x+=s.left-i.left,r.y+=s.top-i.top}else if(n instanceof SVGGraphicsElement){const{x:s,y:i}=n.getBBox();r.x+=s,r.y+=i;let o=null,l=n.parentNode;for(;!o;)l.tagName==="svg"&&(o=l),l=n.parentNode;n=o}else break;return r}const ig={start:0,center:.5,end:1};function w1(e,t,r=0){let n=0;if(e in ig&&(e=ig[e]),typeof e=="string"){const s=parseFloat(e);e.endsWith("px")?n=s:e.endsWith("%")?e=s/100:e.endsWith("vw")?n=s/100*document.documentElement.clientWidth:e.endsWith("vh")?n=s/100*document.documentElement.clientHeight:e=s}return typeof e=="number"&&(n=t*e),r+n}const z9=[0,0];function W9(e,t,r,n){let s=Array.isArray(e)?e:z9,i=0,o=0;return typeof e=="number"?s=[e,e]:typeof e=="string"&&(e=e.trim(),e.includes(" ")?s=e.split(" "):s=[e,ig[e]?e:"0"]),i=w1(s[0],r,n),o=w1(s[1],t),i-o}const H9={All:[[0,0],[1,1]]},K9={x:0,y:0};function G9(e){return"getBBox"in e&&e.tagName!=="svg"?e.getBBox():{width:e.clientWidth,height:e.clientHeight}}function X9(e,t,r){const{offset:n=H9.All}=r,{target:s=e,axis:i="y"}=r,o=i==="y"?"height":"width",l=s!==e?V9(s,e):K9,c=s===e?{width:e.scrollWidth,height:e.scrollHeight}:G9(s),u={width:e.clientWidth,height:e.clientHeight};t[i].offset.length=0;let d=!t[i].interpolate;const f=n.length;for(let h=0;h<f;h++){const x=W9(n[h],u[o],c[o],l[i]);!d&&x!==t[i].interpolatorOffsets[h]&&(d=!0),t[i].offset[h]=x}d&&(t[i].interpolate=Ex(t[i].offset,n2(n),{clamp:!1}),t[i].interpolatorOffsets=[...t[i].offset]),t[i].progress=br(0,1,t[i].interpolate(t[i].current))}function Y9(e,t=e,r){if(r.x.targetOffset=0,r.y.targetOffset=0,t!==e){let n=t;for(;n&&n!==e;)r.x.targetOffset+=n.offsetLeft,r.y.targetOffset+=n.offsetTop,n=n.offsetParent}r.x.targetLength=t===e?t.scrollWidth:t.clientWidth,r.y.targetLength=t===e?t.scrollHeight:t.clientHeight,r.x.containerLength=e.clientWidth,r.y.containerLength=e.clientHeight}function J9(e,t,r,n={}){return{measure:s=>{Y9(e,n.target,r),U9(e,r,s),(n.offset||n.target)&&X9(e,r,n)},notify:()=>t(r)}}const ta=new WeakMap,N1=new WeakMap,om=new WeakMap,S1=new WeakMap,mo=new WeakMap,P1=e=>e===document.scrollingElement?window:e;function gk(e,{container:t=document.scrollingElement,trackContentSize:r=!1,...n}={}){if(!t)return It;let s=om.get(t);s||(s=new Set,om.set(t,s));const i=F9(),o=J9(t,e,i,n);if(s.add(o),!ta.has(t)){const c=()=>{for(const h of s)h.measure(ot.timestamp);_e.preUpdate(u)},u=()=>{for(const h of s)h.notify()},d=()=>_e.read(c);ta.set(t,d);const f=P1(t);window.addEventListener("resize",d,{passive:!0}),t!==document.documentElement&&N1.set(t,u7(t,d)),f.addEventListener("scroll",d,{passive:!0}),d()}if(r&&!mo.has(t)){const c=ta.get(t),u={width:t.scrollWidth,height:t.scrollHeight};S1.set(t,u);const d=()=>{const h=t.scrollWidth,x=t.scrollHeight;(u.width!==h||u.height!==x)&&(c(),u.width=h,u.height=x)},f=_e.read(d,!0);mo.set(t,f)}const l=ta.get(t);return _e.read(l,!1,!0),()=>{nr(l);const c=om.get(t);if(!c||(c.delete(o),c.size))return;const u=ta.get(t);ta.delete(t),u&&(P1(t).removeEventListener("scroll",u),N1.get(t)?.(),window.removeEventListener("resize",u));const d=mo.get(t);d&&(nr(d),mo.delete(t)),S1.delete(t)}}const A1=new Map;function Z9(e){const t={value:0},r=gk(n=>{t.value=n[e.axis].progress*100},e);return{currentTime:t,cancel:r}}function xk({source:e,container:t,...r}){const{axis:n}=r;e&&(t=e);const s=A1.get(t)??new Map;A1.set(t,s);const i=r.target??"self",o=s.get(i)??{},l=n+(r.offset??[]).join(",");return o[l]||(o[l]=!r.target&&o2()?new ScrollTimeline({source:t,axis:n}):Z9({container:t,...r})),o[l]}function Q9(e,t){const r=xk(t);return e.attachTimeline({timeline:t.target?void 0:r,observe:n=>(n.pause(),k2(s=>{n.time=n.iterationDuration*s},r))})}function eK(e){return e.length===2}function tK(e,t){return eK(e)?gk(r=>{e(r[t.axis].progress,r)},t):k2(e,xk(t))}function rK(e,{axis:t="y",container:r=document.scrollingElement,...n}={}){if(!r)return It;const s={axis:t,container:r,...n};return typeof e=="function"?tK(e,s):Q9(e,s)}const nK=()=>({scrollX:pr(0),scrollY:pr(0),scrollXProgress:pr(0),scrollYProgress:pr(0)}),po=e=>e?!e.current:!1;function aK({container:e,target:t,...r}={}){const n=dn(nK),s=N.useRef(null),i=N.useRef(!1),o=N.useCallback(()=>(s.current=rK((l,{x:c,y:u})=>{n.scrollX.set(c.current),n.scrollXProgress.set(c.progress),n.scrollY.set(u.current),n.scrollYProgress.set(u.progress)},{...r,container:e?.current||void 0,target:t?.current||void 0}),()=>{s.current?.()}),[e,t,JSON.stringify(r.offset)]);return Ec(()=>{if(i.current=!1,po(e)||po(t)){i.current=!0;return}else return o()},[o]),N.useEffect(()=>{if(i.current)return ji(!po(e)),ji(!po(t)),o()},[o]),n}function sK(e){const t=dn(()=>pr(e)),{isStatic:r}=N.useContext(Mc);if(r){const[,n]=N.useState(e);N.useEffect(()=>t.on("change",n),[])}return t}function yk(e,t){const r=sK(t()),n=()=>r.set(t());return n(),Ec(()=>{const s=()=>_e.preRender(n,!1,!0),i=e.map(o=>o.on("change",s));return()=>{i.forEach(o=>o()),nr(n)}}),r}function iK(e){$s.current=[],e();const t=yk($s.current,e);return $s.current=void 0,t}function _o(e,t,r,n){if(typeof e=="function")return iK(e);if(r!==void 0&&!Array.isArray(r)&&typeof t!="function")return oK(e,t,r,n);const o=typeof t=="function"?t:f7(t,r,n);return Array.isArray(e)?O1(e,o):O1([e],([l])=>o(l))}function O1(e,t){const r=dn(()=>[]);return yk(e,()=>{r.length=0;const n=e.length;for(let s=0;s<n;s++)r[s]=e[s].get();return t(r)})}function oK(e,t,r,n){const s=dn(()=>Object.keys(r)),i=dn(()=>({}));for(const o of s)i[o]=_o(e,t,r[o],n);return i}const lK="http://localhost:5000";function cK(){const[e,t]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(null),[o,l]=N.useState("score");N.useEffect(()=>{c()},[]);const c=async()=>{try{n(!0),i(null);const p=localStorage.getItem("token"),m=(await We.get(`${lK}/api/ai/staff-score`,{headers:{Authorization:`Bearer ${p}`}})).data.data;t(m.scores||[])}catch(p){console.error("Staff scores fetch error:",p),i(p.response?.data?.message||"Failed to load staff scores")}finally{n(!1)}},u=()=>{const p=[...e];return o==="score"?p.sort((g,m)=>m.score-g.score):o==="name"&&p.sort((g,m)=>g.name.localeCompare(m.name)),p},d=p=>p>=90?"#4CAF50":p>=75?"#2196F3":p>=60?"#FF9800":"#f44336",f=p=>p>=90?"Excellent":p>=75?"Good":p>=60?"Average":"Needs Improvement";if(r)return a.jsxs("div",{className:"staff-scores-loading",children:[a.jsx("div",{className:"spinner"}),a.jsx("p",{children:"Analyzing staff performance..."})]});if(s)return a.jsxs("div",{className:"staff-scores-error",children:[a.jsxs("p",{className:"error-message",children:["âš ï¸ ",s]}),a.jsx("button",{onClick:c,className:"retry-btn",children:"Retry"})]});if(!e.length)return a.jsxs("div",{className:"staff-scores-empty",children:[a.jsx("p",{children:"No employee data available for scoring"}),a.jsx("small",{children:"Scores are based on sales performance and time tracking"})]});const h=u(),x=e.reduce((p,g)=>p+g.score,0)/e.length;return a.jsxs("div",{className:"staff-scores-container",children:[a.jsxs("div",{className:"staff-scores-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsx("h3",{children:"ðŸ§  Employee Performance Scores"}),a.jsxs("span",{className:"scores-count",children:[e.length," employees"]})]}),a.jsxs("div",{className:"header-right",children:[a.jsx("button",{onClick:c,className:"refresh-btn",title:"Refresh scores",children:"ðŸ”„ Refresh"}),a.jsxs("select",{value:o,onChange:p=>l(p.target.value),className:"sort-select",children:[a.jsx("option",{value:"score",children:"Sort by Score"}),a.jsx("option",{value:"name",children:"Sort by Name"})]})]})]}),a.jsxs("div",{className:"staff-scores-summary",children:[a.jsxs("div",{className:"summary-card",children:[a.jsx("span",{className:"summary-label",children:"Team Average"}),a.jsxs("span",{className:"summary-value",children:[x.toFixed(1),"/100"]})]}),a.jsxs("div",{className:"summary-card",children:[a.jsx("span",{className:"summary-label",children:"Top Performer"}),a.jsxs("span",{className:"summary-value",children:[h[0]?.name," (",h[0]?.score,")"]})]})]}),a.jsx("div",{className:"staff-scores-list",children:h.map((p,g)=>a.jsxs("div",{className:"staff-score-card",children:[a.jsxs("div",{className:"staff-header",children:[a.jsxs("div",{className:"staff-info",children:[a.jsxs("span",{className:"staff-rank",children:["#",g+1]}),a.jsx("span",{className:"staff-name",children:p.name})]}),a.jsxs("div",{className:"staff-score",children:[a.jsxs("span",{className:"score-value",style:{color:d(p.score)},children:[p.score,"/100"]}),a.jsx("span",{className:"score-label",style:{color:d(p.score)},children:f(p.score)})]})]}),a.jsx("div",{className:"staff-progress",children:a.jsx("div",{className:"progress-bar",style:{width:`${p.score}%`,backgroundColor:d(p.score)}})}),a.jsxs("div",{className:"staff-reason",children:[a.jsx("span",{className:"reason-icon",children:"ðŸ’¡"}),a.jsx("span",{className:"reason-text",children:p.reason})]})]},g))}),a.jsx("div",{className:"staff-scores-footer",children:a.jsx("small",{children:"â„¹ï¸ Scores are calculated by AI based on sales volume, hours worked, and consistency. Updated in real-time."})})]})}function uK(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!0),[o,l]=N.useState("7days"),[c,u]=N.useState("bar");N.useEffect(()=>{d()},[]);const d=async()=>{try{const S={Authorization:`Bearer ${localStorage.getItem("token")}`},[j,w]=await Promise.all([fetch(`${ye}/sales`,{headers:S}),fetch(`${ye}/products`,{headers:S})]),P=await j.json(),A=await w.json();t(P),n(A)}catch(b){console.error("Failed to load analytics data:",b)}finally{i(!1)}},f=()=>{const b=new Date,j={"7days":7,"30days":30,"90days":90,all:9999}[o]||7,w=new Date(b.getTime()-j*24*60*60*1e3);return e.filter(P=>new Date(P.created_at||P.date)>=w)},h=()=>{const b=f(),S={};return b.forEach(j=>{j.items&&j.items.forEach(w=>{if(!S[w.product_id]){const O=r.find(C=>C.id===w.product_id);S[w.product_id]={name:w.name||O?.name||"Unknown",quantity:0,revenue:0,profit:0,count:0}}S[w.product_id].quantity+=w.quantity||0,S[w.product_id].revenue+=(w.price||0)*(w.quantity||0);const A=r.find(O=>O.id===w.product_id)?.cost||0;S[w.product_id].profit+=((w.price||0)-A)*(w.quantity||0),S[w.product_id].count+=1})}),Object.values(S).sort((j,w)=>w.revenue-j.revenue)},x=()=>{const b=f(),S={};return b.forEach(j=>{const w=new Date(j.created_at||j.date).toLocaleDateString();S[w]||(S[w]={date:w,revenue:0,count:0}),S[w].revenue+=j.total||0,S[w].count+=1}),Object.values(S).sort((j,w)=>new Date(j.date)-new Date(w.date))},g=(()=>{const b=f(),S=b.reduce((O,C)=>O+(C.total||0),0),j=b.length,w=j>0?S/j:0,P=b.reduce((O,C)=>C.items?O+C.items.reduce((k,T)=>{const $=r.find(L=>L.id===T.product_id)?.cost||0;return k+((T.price||0)-$)*(T.quantity||0)},0):O,0),A=S>0?P/S*100:0;return{totalRevenue:S,totalTransactions:j,avgTransaction:w,totalProfit:P,profitMargin:A}})(),m=h(),y=x(),v=Math.max(...y.map(b=>b.revenue),1);return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics Dashboard"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Track your business performance and trends"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("select",{value:o,onChange:b=>l(b.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"7days",children:"Last 7 Days"}),a.jsx("option",{value:"30days",children:"Last 30 Days"}),a.jsx("option",{value:"90days",children:"Last 90 Days"}),a.jsx("option",{value:"all",children:"All Time"})]}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(R1,{className:"w-4 h-4"}),"Export"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Total Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["KES ",g.totalRevenue.toLocaleString()]})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(Dt,{className:"w-6 h-6 text-green-600"})})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-4 text-sm text-green-600",children:[a.jsx(ft,{className:"w-4 h-4"}),a.jsx("span",{children:"Revenue generated"})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Total Profit"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["KES ",g.totalProfit.toLocaleString()]})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(ft,{className:"w-6 h-6 text-blue-600"})})]}),a.jsx("div",{className:"flex items-center gap-2 mt-4 text-sm text-blue-600",children:a.jsxs("span",{children:[g.profitMargin.toFixed(1),"% Margin"]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Transactions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g.totalTransactions})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(Br,{className:"w-6 h-6 text-purple-600"})})]}),a.jsx("div",{className:"flex items-center gap-2 mt-4 text-sm text-purple-600",children:a.jsx("span",{children:"Total sales count"})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Avg Transaction"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["KES ",g.avgTransaction.toLocaleString()]})]}),a.jsx("div",{className:"bg-orange-100 rounded-full p-3",children:a.jsx(jt,{className:"w-6 h-6 text-orange-600"})})]}),a.jsx("div",{className:"flex items-center gap-2 mt-4 text-sm text-orange-600",children:a.jsx("span",{children:"Per sale average"})})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Sales Trend"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>u("bar"),className:`p-2 rounded-lg ${c==="bar"?"bg-blue-100 text-blue-600":"text-gray-400 hover:bg-gray-100"}`,children:a.jsx(og,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>u("line"),className:`p-2 rounded-lg ${c==="line"?"bg-blue-100 text-blue-600":"text-gray-400 hover:bg-gray-100"}`,children:a.jsx(ft,{className:"w-5 h-5"})})]})]}),y.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(_r,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No sales data available for selected period"})]}):a.jsxs("div",{className:"space-y-4",children:[c==="bar"&&a.jsx("div",{className:"space-y-3",children:y.map((b,S)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-24 text-sm text-gray-600",children:b.date}),a.jsx("div",{className:"flex-1 bg-gray-100 rounded-full h-10 relative overflow-hidden",children:a.jsx(ee.div,{initial:{width:0},animate:{width:`${b.revenue/v*100}%`},transition:{duration:.8,delay:S*.05},className:"bg-gradient-to-r from-blue-500 to-purple-500 h-full rounded-full flex items-center justify-end pr-3",children:a.jsxs("span",{className:"text-white text-sm font-medium",children:["KES ",b.revenue.toLocaleString()]})})}),a.jsxs("div",{className:"w-16 text-sm text-gray-600 text-right",children:[b.count," sales"]})]},S))}),c==="line"&&a.jsx("div",{className:"relative h-64",children:a.jsxs("svg",{className:"w-full h-full",children:[[0,25,50,75,100].map(b=>a.jsx("line",{x1:"0",y1:`${100-b}%`,x2:"100%",y2:`${100-b}%`,stroke:"#e5e7eb",strokeWidth:"1"},b)),a.jsx(ee.polyline,{initial:{pathLength:0},animate:{pathLength:1},transition:{duration:1.5},fill:"none",stroke:"url(#gradient)",strokeWidth:"3",points:y.map((b,S)=>{const j=S/(y.length-1)*100,w=100-b.revenue/v*90;return`${j}%,${w}%`}).join(" ")}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#3b82f6"}),a.jsx("stop",{offset:"100%",stopColor:"#8b5cf6"})]})}),y.map((b,S)=>{const j=S/(y.length-1)*100,w=100-b.revenue/v*90;return a.jsx("circle",{cx:`${j}%`,cy:`${w}%`,r:"4",fill:"#3b82f6"},S)})]})})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Top Selling Products"}),m.length===0?a.jsxs("div",{className:"text-center py-12 text-gray-500",children:[a.jsx(jt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),a.jsx("p",{children:"No product sales data available"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-gray-200",children:[a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Rank"}),a.jsx("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Product"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Quantity Sold"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Revenue"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Profit"}),a.jsx("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Sales Count"})]})}),a.jsx("tbody",{children:m.slice(0,10).map((b,S)=>a.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"py-4 px-4",children:a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${S===0?"bg-yellow-100 text-yellow-700":S===1?"bg-gray-100 text-gray-700":S===2?"bg-orange-100 text-orange-700":"bg-gray-50 text-gray-600"}`,children:S+1})}),a.jsx("td",{className:"py-4 px-4",children:a.jsx("p",{className:"font-medium text-gray-900",children:b.name})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsx("span",{className:"text-gray-900",children:b.quantity})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:"font-medium text-gray-900",children:["KES ",b.revenue.toLocaleString()]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsxs("span",{className:`font-medium ${b.profit>=0?"text-green-600":"text-red-600"}`,children:["KES ",b.profit.toLocaleString()]})}),a.jsx("td",{className:"py-4 px-4 text-right",children:a.jsx("span",{className:"text-gray-600",children:b.count})})]},S))})]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"ðŸ¤– AI Sales Forecast"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Predicted revenue and profit trends"})]}),a.jsx("div",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:"AI Powered"})]}),a.jsx(CT,{periods:4})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-lg shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:"ðŸ‘¥ Staff Performance"}),a.jsx("p",{className:"text-sm text-gray-600",children:"AI-scored employee rankings"})]}),a.jsx("div",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:"AI Analytics"})]}),a.jsx(cK,{})]})]})}const dK=()=>"https://universal-backend-w0x1.onrender.com/api".replace("https://","wss://").replace("http://","ws://").replace("/api","");class fK{constructor(){this.ws=null,this.listeners={stock_updated:[],sale_completed:[],admin_sale_completed:[],product_created:[],product_updated:[],product_deleted:[],heartbeat:[],initial:[],error:[]},this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=3e3,this.isManualClose=!1}connect(t,r){return new Promise((n,s)=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){n();return}if(!t){s(new Error("No token provided for WebSocket connection"));return}const i=`${dK()}/ws`;try{this.ws=new WebSocket(i),this.ws.onopen=()=>{console.log("âœ… WebSocket connected for real-time updates"),this.reconnectAttempts=0,this.ws.send(JSON.stringify({token:t})),console.log("ðŸ” Authentication sent"),n()},this.ws.onmessage=o=>{try{const l=JSON.parse(o.data),c=l.type?l.type.toLowerCase():"unknown";if(c==="connected"){console.log("âœ… WebSocket authenticated:",l.account_id);return}c==="stock_updated"?(console.log("ðŸ“¦ Stock update received:",l.data),r&&r(l.data),this.emit("stock_updated",l.data)):c==="sale_completed"?(console.log("ðŸ’° Sale completed - stock deducted:",l.data),this.emit("sale_completed",l.data),r&&l.data.updatedProducts&&r({allProducts:l.data.updatedProducts})):c==="admin_sale_completed"?(console.log("ðŸ‘¨â€ðŸ’¼ Admin sale completed:",l.data),this.emit("admin_sale_completed",l.data),this.emit("sale_completed",l.data),r&&l.data.updatedProducts&&r({allProducts:l.data.updatedProducts})):c==="product_created"?(console.log("âœ¨ Product created:",l.data),this.emit("product_created",l.data)):c==="product_updated"?(console.log("ðŸ“ Product updated:",l.data),this.emit("product_updated",l.data),r&&l.data.allProducts&&r({allProducts:l.data.allProducts})):c==="product_deleted"?(console.log("ðŸ—‘ï¸ Product deleted:",l.data),this.emit("product_deleted",l.data),r&&l.data.allProducts&&r({allProducts:l.data.allProducts})):c==="initial"?(console.log("ðŸ“¦ Initial products loaded via WebSocket"),this.emit("initial",l.products)):c==="heartbeat"?this.emit("heartbeat",l):(console.log(`ðŸ“¨ Message received (${c}):`,l.data),c!=="unknown"&&this.emit(c,l.data))}catch(l){console.error("Error parsing WebSocket message:",l)}},this.ws.onerror=o=>{console.error("âŒ WebSocket error:",o),this.emit("error",o),s(o)},this.ws.onclose=()=>{console.log("ðŸ”Œ WebSocket disconnected"),this.isManualClose||this.attemptReconnect(t,r)}}catch(o){console.error("Failed to create WebSocket:",o),s(o)}})}attemptReconnect(t,r){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.log("Max reconnection attempts reached");return}this.reconnectAttempts++;const n=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`ðŸ”„ Reconnecting in ${n}ms (attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts})`),setTimeout(()=>{this.connect(t,r).catch(s=>{console.error("Reconnection failed:",s)})},n)}on(t,r){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(r)}emit(t,r){this.listeners[t]&&this.listeners[t].forEach(n=>{try{n(r)}catch(s){console.error(`Error in ${t} listener:`,s)}})}disconnect(){this.isManualClose=!0,this.ws&&(this.ws.close(),this.ws=null)}isConnected(){return this.ws&&this.ws.readyState===WebSocket.OPEN}}const Or=new fK;function hK(){const{user:e,isUltraPackage:t,isRealTimeProductSyncEnabled:r}=Oe(),{products:n,refreshProducts:s}=ug(),[i,o]=N.useState([]),[l,c]=N.useState([]),[u,d]=N.useState(!1),[f,h]=N.useState("all"),[x,p]=N.useState(""),[g,m]=N.useState(!1),[y,v]=N.useState(!1),[b,S]=N.useState(!1),[j,w]=N.useState(!1),[P,A]=N.useState(null),[O,C]=N.useState({}),[k,T]=N.useState({weight:"",price:""}),[E,$]=N.useState(null),[L,q]=N.useState(null),[z,K]=N.useState(!1),[G,Z]=N.useState(null),[R,F]=N.useState(""),[H,re]=N.useState({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0}),[M,J]=N.useState({quantity:"",expiryDate:"",batchNumber:"",cost:""}),[Q,de]=N.useState({name:"",price:"",cost:"",quantity:"",unit:"pcs",category:"raw",expenseOnly:!1,image:"",visibleToCashier:!0}),V=async()=>{try{console.log("ðŸ“¦ Loading inventory data..."),await s();const D=await Mo.getAll();c(D),console.log("âœ… Inventory data loaded")}catch(D){console.error("âŒ Failed to load data:",D),U("Failed to load inventory data","error")}};N.useEffect(()=>{u||(V(),d(!0));const D=localStorage.getItem("token");if(D){let X=null;Or.connect(D,ne=>{ne&&ne.allProducts&&ne.allProducts.length>0&&(console.log("ðŸ“¦ WebSocket stock update received:",ne.allProducts.length,"products"),X&&clearTimeout(X),X=setTimeout(()=>{o(ve=>{if(ve.length===0)return ne.allProducts;const ue=new Map(ve.map(fe=>[fe.id,fe]));return ne.allProducts.forEach(fe=>{const Re=ue.get(fe.id);Re?Re.quantity!==fe.quantity&&ue.set(fe.id,{...Re,quantity:fe.quantity}):ue.set(fe.id,fe)}),Array.from(ue.values())})},200))}).catch(ne=>{console.warn("WebSocket connection failed:",ne)}),Or.on("sale_completed",ne=>{if(console.log("ðŸ”„ Sale completed - updating inventory display:",ne),ne.updatedProducts&&ne.updatedProducts.length>0&&(console.log(`âœ… Updating ${ne.updatedProducts.length} products from sale`),o(ne.updatedProducts),U(`âœ… Stock updated! Sale #${ne.saleId} deducted inventory`,"success")),ne.lowStockWarnings&&ne.lowStockWarnings.length>0){const ve=ne.lowStockWarnings.map(ue=>`${ue.name}: ${ue.current} left`).join(", ");U(`âš ï¸ Low stock alert: ${ve}`,"warning")}}),Or.on("stock_updated",ne=>{console.log("ðŸ“¦ Stock updated via WebSocket:",ne),ne.product_id&&ne.quantity!==void 0&&(o(ve=>ve.map(ue=>ue.id===ne.product_id?{...ue,quantity:ne.quantity}:ue)),U("âœ… Stock updated!","success"))})}return()=>{Or.disconnect()}},[u]),N.useEffect(()=>{n&&n.length>0&&(console.log("ðŸ“¦ Syncing from global context:",n.length,"products"),o(D=>[...D.filter(ne=>typeof ne.id=="string"&&ne.id.startsWith("temp-")),...n]))},[n]);const ie=(D,X=!0)=>{const ne=D.target.files[0];if(ne){if(ne.size>2*1024*1024){U("Image must be smaller than 2MB","error");return}const ve=new FileReader;ve.onload=ue=>{const fe=ue.target.result;F(fe),X?re({...H,image:fe}):(de({...Q,image:fe}),Q.id&&setTimeout(async()=>{try{await St.update(Q.id,{image:fe}),U("âœ… Image saved","success")}catch(Re){console.error("Failed to save image:",Re)}},500))},ve.readAsDataURL(ne)}},ce=D=>l.filter(X=>X.productId===D&&X.quantity>0),U=(D,X="success")=>{q({message:D,type:X}),setTimeout(()=>q(null),5e3)},Ce=async D=>{D.preventDefault();try{const X={...H,price:parseFloat(H.price),cost:parseFloat(H.cost||0),quantity:0,visibleToCashier:!H.expenseOnly&&H.visibleToCashier!==!1},ne=`temp-${Date.now()}`,ve={...X,id:ne,created_at:new Date().toISOString()};o(ue=>[...ue,ve]),re({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0}),F(""),m(!1),U("âš¡ Adding product...","info");try{const ue=await St.create(X);o(fe=>fe.map(Re=>Re.id===ne?ue:Re)),U(`âœ… Product "${ue.name}" added successfully! ${ue.visibleToCashier?"Cashiers can now see this product.":"This product is hidden from cashiers."}`,"success"),window.dispatchEvent(new CustomEvent("productCreated",{detail:{product:ue,timestamp:new Date().toISOString()}})),window.dispatchEvent(new CustomEvent("stock_updated",{detail:{productId:ue.id,quantity:ue.quantity||0,product:ue,timestamp:Date.now()}})),V().catch(fe=>console.warn("Background refresh failed:",fe))}catch(ue){throw o(fe=>fe.filter(Re=>Re.id!==ne)),ue}}catch(X){console.error("Failed to create product:",X),U(`âŒ Failed to add product: ${X.message||"Unknown error"}`,"error")}},be=async D=>{D.preventDefault(),console.log("ðŸ“¦ handleAddStock called - Form submitted"),console.log("ðŸ“¦ newStock:",M),console.log("ðŸ“¦ selectedProduct:",P);try{const X=parseInt(M.quantity);if(!X||X<=0){U("âš ï¸ Please enter a valid quantity","warning"),console.log("âš ï¸ Invalid quantity:",X);return}const ne=i.find(fe=>fe.id===P.id),ve=ne?.quantity||0;if(console.log(`ðŸ“¦ STOCK BEFORE: ${P.name} = ${ve} units`),console.log(`âœ… Adding ${X} units to ${P.name}`),ne){const fe=ve+X;o(Re=>Re.map(Be=>Be.id===P.id?{...Be,quantity:fe}:Be)),console.log(`ðŸ“¦ OPTIMISTIC UPDATE: ${ve} â†’ ${fe}`)}const ue={id:`batch-${Date.now()}`,productId:P.id,quantity:X,expiryDate:M.expiryDate,batchNumber:M.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(M.cost||P.cost||0)};c(fe=>[...fe,ue]),U("âš¡ Adding stock...","info");try{const fe=await Mo.create({productId:P.id,quantity:X,expiryDate:M.expiryDate,batchNumber:M.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(M.cost||P.cost||0)});console.log("âœ… BACKEND: Batch created successfully:",fe),console.log("ðŸ”„ Refreshing products from backend to confirm stock update...");const Be=(await s())?.find(Zr=>Zr.id===P.id);Be&&(console.log(`ðŸ“¦ STOCK AFTER DB UPDATE: ${Be.name} = ${Be.quantity} units`),console.log(`âœ… DB PERSISTED: Stock increased from ${ve} to ${Be.quantity}`),o(Zr=>Zr.map(Lt=>Lt.id===P.id?Be:Lt))),window.dispatchEvent(new CustomEvent("stock_updated",{detail:{productId:P.id,quantity:Be?.quantity||ve+X,timestamp:Date.now()}})),J({quantity:"",expiryDate:"",batchNumber:"",cost:""}),S(!1),U(`âœ… Stock added! ${P.name} quantity: ${ve} â†’ ${Be?.quantity||ve+X}`,"success")}catch(fe){throw console.error("âŒ BACKEND ERROR:",fe),ne&&(o(Re=>Re.map(Be=>Be.id===P.id?ne:Be)),console.log(`ðŸ”„ ROLLBACK: Restored ${P.name} to ${ve} units`)),c(Re=>Re.filter(Be=>Be.id!==ue.id)),fe}finally{A(null)}}catch(X){console.error("Failed to add stock:",X),U(`âŒ Failed to add stock: ${X.message||"Unknown error"}`,"error")}},Ve=async D=>{D.preventDefault();try{const X=i.find(ue=>ue.id===Q.id);if(parseFloat(Q.price)<X.price){alert("You cannot lower prices, only increase.");return}const ne={...Q,price:parseFloat(Q.price),cost:parseFloat(Q.cost),quantity:X.quantity},ve={...X,...ne};o(ue=>ue.map(fe=>fe.id===Q.id?ve:fe)),K(!0),U("âš¡ Updating product...","info");try{const ue=await St.update(Q.id,ne);ue&&ue.id&&(o(fe=>fe.map(Re=>Re.id===Q.id?ue:Re)),console.log("âœ… Product updated with backend response:",ue)),v(!1),window.dispatchEvent(new CustomEvent("productUpdated",{detail:{product:ue,originalProduct:X,timestamp:new Date().toISOString(),type:"update"}})),window.dispatchEvent(new CustomEvent("stock_updated",{detail:{productId:ue.id,quantity:ue.quantity,product:ue,timestamp:Date.now()}})),r()?U("âœ… Product updated and synced!","success"):U("âœ… Product updated successfully!","success"),Z(new Date)}catch(ue){throw o(fe=>fe.map(Re=>Re.id===Q.id?X:Re)),ue}finally{K(!1)}}catch(X){console.error("Failed to update product:",X),U(`âŒ Update failed: ${X.message||"Unknown error"}`,"error")}},Le=async D=>{try{if(!confirm("Are you sure you want to delete this product? This action cannot be undone."))return;const X=i.find(ve=>ve.id===D),ne=await St.delete(D);if(o(ve=>ve.filter(ue=>ue.id!==D)),r()&&X)K(!0),window.dispatchEvent(new CustomEvent("productDeleted",{detail:{product:X,timestamp:new Date().toISOString(),type:"delete"}})),U(`ðŸ“¡ Product "${X.name}" deleted and synced to all dashboards!`,"success"),Z(new Date),setTimeout(()=>{K(!1)},3e3);else{const ve=ne?.message||"Product deleted successfully!";alert(ve)}await s()}catch(X){console.error("Failed to delete product:",X);let ne="Failed to delete product";X.message.includes("Failed to execute")||X.message.includes("JSON")?ne="Network error. Please check your connection and try again.":X.message.includes("401")||X.message.includes("unauthorized")?ne="You are not authorized to delete this product.":X.message.includes("404")||X.message.includes("not found")?ne="Product not found. It may have been deleted already.":X.message&&(ne=`Failed to delete product: ${X.message}`),alert(ne)}},et=(i||[]).filter(D=>{if(!D)return!1;const X=D.name?.toLowerCase().includes(x.toLowerCase()),ne=f==="all"||f==="raw"&&!D.recipe||f==="composite"&&D.recipe||f==="expense"&&D.expenseOnly||f==="low-stock"&&D.quantity<10;return X&&ne}),mt=(i||[]).filter(D=>D&&!D.recipe&&!D.expenseOnly),Mt=(i||[]).filter(D=>D&&D.recipe),sr=(i||[]).filter(D=>D&&D.expenseOnly),$t=D=>{if(!D||!D.recipe)return 0;let X=1/0;return(D.recipe||[]).forEach(ne=>{if(!ne)return;const ve=(i||[]).find(ue=>ue&&ue.id===ne.productId);if(ve&&ve.quantity>0&&ne.quantity>0){const ue=Math.floor(ve.quantity/ne.quantity);X=Math.min(X,ue)}}),X===1/0?0:X},Wt=D=>{if(!D)return 0;if(!D.recipe)return D.cost||0;let X=0;return(D.recipe||[]).forEach(ne=>{if(!ne)return;const ve=(i||[]).find(ue=>ue&&ue.id===ne.productId);if(ve&&ve.quantity>0){const ue=(ve.cost||0)/ve.quantity;X+=ue*(ne.quantity||0)}}),X},Yn=async D=>{A(D);try{const X=await St.getWeightPricing(D.id);C(X.weightPricing||{})}catch(X){console.error("Failed to load weight pricing:",X),C({})}w(!0)},rs=async D=>{if(D.preventDefault(),!k.weight||!k.price){U("âŒ Please enter both weight and price","error");return}try{const X=parseFloat(k.weight),ne=parseFloat(k.price);if(X*10%1!==0){U("âŒ Weight must be in 0.1kg increments (0.1, 0.2, 0.3, etc)","error");return}await St.addWeightPrice(P.id,X,ne),C({...O,[String(X)]:ne}),T({weight:"",price:""}),U(`âœ… Weight price added for ${X}kg`,"success")}catch(X){U(`âŒ Failed to add weight price: ${X.message}`,"error")}},ns=async D=>{if(confirm(`Delete pricing for ${D}kg?`))try{await St.deleteWeightPrice(P.id,D);const X={...O};delete X[String(D)],C(X),U(`âœ… Weight price for ${D}kg deleted`,"success")}catch(X){U(`âŒ Failed to delete weight price: ${X.message}`,"error")}};return a.jsxs("div",{className:"p-6 space-y-6",children:[L&&a.jsx("div",{className:`fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-md ${L.type==="success"?"bg-green-50 border border-green-200 text-green-800":L.type==="error"?"bg-red-50 border border-red-200 text-red-800":"bg-blue-50 border border-blue-200 text-blue-800"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium",children:L.message}),a.jsx("button",{onClick:()=>q(null),className:"ml-2 text-gray-400 hover:text-gray-600",children:"Ã—"})]})}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search products...",className:"input pl-10 w-80",value:x,onChange:D=>p(D.target.value)})]}),a.jsxs("select",{value:f,onChange:D=>h(D.target.value),className:"input w-40",children:[a.jsx("option",{value:"all",children:"All Products"}),a.jsx("option",{value:"raw",children:"Raw Materials"}),a.jsx("option",{value:"composite",children:"Composite"}),a.jsx("option",{value:"expense",children:"Expense Only"}),a.jsx("option",{value:"low-stock",children:"Low Stock"})]})]}),a.jsxs("button",{onClick:()=>m(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Product"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[a.jsx("h4",{className:"text-sm font-medium text-blue-700 mb-2",children:"Raw Materials"}),a.jsx("p",{className:"text-3xl font-bold text-blue-900",children:mt.length})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[a.jsx("h4",{className:"text-sm font-medium text-purple-700 mb-2",children:"Composite Products"}),a.jsx("p",{className:"text-3xl font-bold text-purple-900",children:Mt.length})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:[a.jsx("h4",{className:"text-sm font-medium text-orange-700 mb-2",children:"Expense Items"}),a.jsx("p",{className:"text-3xl font-bold text-orange-900",children:sr.length})]})]}),a.jsx("div",{className:"card",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Image"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Product Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cost/COGS"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Batches"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Max Units"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Margin"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{children:(et||[]).map(D=>{if(!D)return null;const X=Wt(D),ne=D.price?((D.price-X)/D.price*100).toFixed(1):0,ve=$t(D),ue=E===D.id;return a.jsxs(a.Fragment,{children:[a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsxs("td",{className:"px-4 py-3",children:[D.image?a.jsx("img",{src:D.image,alt:D.name,className:"w-12 h-12 object-cover rounded-lg",onError:fe=>{fe.target.style.display="none",fe.target.nextSibling.style.display="flex"}}):null,a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center",style:{display:D.image?"none":"flex"},children:a.jsx("span",{className:"text-xs text-gray-400",children:"No Image"})})]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[D.recipe&&a.jsx("button",{onClick:()=>$(ue?null:D.id),className:"p-1 hover:bg-gray-200 rounded",children:ue?a.jsx(Dk,{className:"w-4 h-4"}):a.jsx(Rk,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium",children:D.name}),D.quantity<10&&!D.recipe&&a.jsx(pa,{className:"w-4 h-4 text-orange-500"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsx("span",{className:`badge ${D.expenseOnly?"badge-warning":D.recipe?"badge-success":"bg-blue-100 text-blue-800"}`,children:D.expenseOnly?"Expense":D.recipe?"Composite":"Raw"})}),a.jsxs("td",{className:"px-4 py-3 font-semibold text-green-600",children:["KSH ",D.price?.toLocaleString()]}),a.jsxs("td",{className:"px-4 py-3 text-orange-600",children:["KSH ",X.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:`font-medium ${(D.quantity||0)===0?"text-red-600":(D.quantity||0)<10?"text-yellow-600":"text-gray-900"}`,children:[D.quantity||0," ",D.unit]}),(D.quantity||0)<10&&(D.quantity||0)>0&&a.jsx(pa,{className:"w-4 h-4 text-yellow-500"}),(D.quantity||0)===0&&a.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full font-medium",children:"Out of Stock"})]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-gray-600",children:[ce(D.id).length," active"]}),a.jsx("button",{onClick:()=>{console.log("ðŸ”µ Add Stock clicked for product:",D.name,D.id),A(D),S(!0),console.log("ðŸ”µ Modal state set - showAddStock: true, selectedProduct:",D.name)},className:"p-1 hover:bg-blue-50 rounded text-blue-600 transition-colors",title:"Add Stock",children:a.jsx(Ge,{className:"w-3 h-3"})})]})}),a.jsx("td",{className:"px-4 py-3",children:D.recipe?a.jsxs("span",{className:"font-semibold text-blue-600",children:[ve," units"]}):a.jsx("span",{className:"text-gray-400",children:"-"})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("span",{className:`font-semibold ${ne>30?"text-green-600":ne>15?"text-yellow-600":"text-red-600"}`,children:[ne,"%"]})}),a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Yn(D),className:"p-2 hover:bg-purple-50 rounded-lg text-purple-600 transition-colors",title:"Edit weight-based pricing",children:a.jsx(jt,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{de(D),v(!0)},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-colors",children:a.jsx(Bn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>Le(D.id),className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-colors",children:a.jsx(tr,{className:"w-4 h-4"})})]})})]},D.id),ue&&D.recipe&&a.jsx("tr",{className:"bg-blue-50",children:a.jsx("td",{colSpan:"9",className:"px-4 py-4",children:a.jsxs("div",{className:"ml-8",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:"Recipe Breakdown:"}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-white",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Ingredient"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Quantity Needed"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Available"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Unit Cost"}),a.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600",children:"Total Cost"})]})}),a.jsx("tbody",{children:(D.recipe||[]).map((fe,Re)=>{if(!fe)return null;const Be=(i||[]).find(Wi=>Wi&&Wi.id===fe.productId);if(!Be)return null;const Zr=(Be.cost||0)/(Be.quantity||1),Lt=Zr*(fe.quantity||0);return a.jsxs("tr",{className:"border-t border-blue-100",children:[a.jsx("td",{className:"px-3 py-2",children:Be.name||"Unknown"}),a.jsxs("td",{className:"px-3 py-2",children:[fe.quantity||0," ",Be.unit||"pcs"]}),a.jsxs("td",{className:"px-3 py-2",children:[Be.quantity||0," ",Be.unit||"pcs"]}),a.jsxs("td",{className:"px-3 py-2",children:["KSH ",Zr.toFixed(2)]}),a.jsxs("td",{className:"px-3 py-2 font-semibold",children:["KSH ",Lt.toFixed(2)]})]},Re)})}),a.jsx("tfoot",{className:"bg-white font-semibold",children:a.jsxs("tr",{children:[a.jsx("td",{colSpan:"4",className:"px-3 py-2 text-right",children:"Total COGS per unit:"}),a.jsxs("td",{className:"px-3 py-2 text-orange-600",children:["KSH ",X.toFixed(2)]})]})})]})]})})})]})})})]})})}),b&&P&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:D=>{D.target===D.currentTarget&&(S(!1),A(null))},children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md shadow-2xl",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4 text-gray-900",children:["Add Stock for ",P.name]}),a.jsxs("form",{onSubmit:be,className:"space-y-4",children:[a.jsx("input",{type:"number",placeholder:"Quantity",className:"input",value:M.quantity,onChange:D=>J({...M,quantity:D.target.value}),required:!0}),a.jsx("input",{type:"date",placeholder:"Expiry Date (Optional)",className:"input",value:M.expiryDate,onChange:D=>J({...M,expiryDate:D.target.value})}),a.jsx("input",{type:"text",placeholder:"Batch Number (Optional)",className:"input",value:M.batchNumber,onChange:D=>J({...M,batchNumber:D.target.value})}),a.jsx("input",{type:"number",step:"0.01",placeholder:"Cost per Unit",className:"input",value:M.cost,onChange:D=>J({...M,cost:D.target.value})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Stock"}),a.jsx("button",{type:"button",onClick:()=>{S(!1),A(null),J({quantity:"",expiryDate:"",batchNumber:"",cost:""})},className:"btn-secondary",children:"Cancel"})]})]})]})}),g&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add New Product"}),a.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Product Name",className:"input",value:H.name,onChange:D=>re({...H,name:D.target.value}),required:!0}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Product Image"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:D=>ie(D,!0),className:"input"}),a.jsx(M1,{className:"w-5 h-5 text-gray-400"})]}),(R||H.image)&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:R||H.image,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"number",step:"0.01",placeholder:"Price",className:"input",value:H.price,onChange:D=>re({...H,price:D.target.value}),required:!0}),a.jsx("input",{type:"number",step:"0.01",placeholder:"Cost",className:"input",value:H.cost,onChange:D=>re({...H,cost:D.target.value})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("select",{className:"input",value:H.category,onChange:D=>re({...H,category:D.target.value}),children:[a.jsx("option",{value:"finished",children:"Finished Product"}),a.jsx("option",{value:"raw",children:"Raw Material"}),a.jsx("option",{value:"service",children:"Service"})]}),a.jsxs("select",{className:"input",value:H.unit,onChange:D=>re({...H,unit:D.target.value}),children:[a.jsx("option",{value:"pcs",children:"Pieces"}),a.jsx("option",{value:"kg",children:"Kilograms"}),a.jsx("option",{value:"L",children:"Liters"}),a.jsx("option",{value:"g",children:"Grams"}),a.jsx("option",{value:"ml",children:"Milliliters"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:H.expenseOnly,onChange:D=>re({...H,expenseOnly:D.target.checked,visibleToCashier:!D.target.checked})}),a.jsx("span",{className:"text-sm",children:"Expense Only (Hidden from cashier)"})]}),!H.expenseOnly&&a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:H.visibleToCashier,onChange:D=>re({...H,visibleToCashier:D.target.checked})}),a.jsx("span",{className:"text-sm",children:"Visible to Cashier"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Product"}),a.jsx("button",{type:"button",onClick:()=>{m(!1),F(""),re({name:"",price:"",cost:"",category:"finished",unit:"pcs",expenseOnly:!1,image:"",visibleToCashier:!0})},className:"btn-secondary",children:"Cancel"})]})]})]})}),y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Edit Product"}),a.jsxs("form",{onSubmit:Ve,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Product Name",className:"input",value:Q.name,onChange:D=>de({...Q,name:D.target.value}),required:!0}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Product Image"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",placeholder:"Image URL",className:"input flex-1",value:Q.image||"",onChange:D=>de({...Q,image:D.target.value})}),a.jsx("span",{className:"text-sm text-gray-500 self-center",children:"or"}),a.jsx("input",{type:"file",accept:"image/*",className:"input flex-1",onChange:D=>{const X=D.target.files[0];if(X){const ne=new FileReader;ne.onloadend=()=>{de({...Q,image:ne.result})},ne.readAsDataURL(X)}}})]}),Q.image&&a.jsx("img",{src:Q.image,alt:"Preview",className:"w-20 h-20 object-cover rounded"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"number",step:"0.01",placeholder:"Price",className:"input",value:Q.price||"",onChange:D=>de({...Q,price:D.target.value}),required:!0}),a.jsx("input",{type:"number",step:"0.01",placeholder:"Cost",className:"input",value:Q.cost||"",onChange:D=>de({...Q,cost:D.target.value}),required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",step:"0.01",placeholder:"Quantity",className:"input bg-gray-100 cursor-not-allowed",value:Q.quantity||"",readOnly:!0,disabled:!0,title:"Use 'Add Stock' button to update quantity"}),a.jsx("span",{className:"absolute right-3 top-3 text-xs text-gray-500",children:"Read-only"})]}),a.jsxs("select",{className:"input",value:Q.unit||"pcs",onChange:D=>de({...Q,unit:D.target.value}),children:[a.jsx("option",{value:"pcs",children:"Pieces"}),a.jsx("option",{value:"kg",children:"Kilograms"}),a.jsx("option",{value:"L",children:"Liters"}),a.jsx("option",{value:"g",children:"Grams"}),a.jsx("option",{value:"ml",children:"Milliliters"})]})]}),a.jsxs("select",{className:"input",value:Q.category||"raw",onChange:D=>de({...Q,category:D.target.value}),children:[a.jsx("option",{value:"raw",children:"Raw Material"}),a.jsx("option",{value:"finished",children:"Finished Product"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Q.expenseOnly||!1,onChange:D=>de({...Q,expenseOnly:D.target.checked,visibleToCashier:!D.target.checked})}),a.jsx("span",{className:"text-sm",children:"Expense Only (Hidden from cashier)"})]}),!Q.expenseOnly&&a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:Q.visibleToCashier!==!1,onChange:D=>de({...Q,visibleToCashier:D.target.checked})}),a.jsx("span",{className:"text-sm",children:"Visible to Cashier"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Update Product"}),a.jsx("button",{type:"button",onClick:()=>v(!1),className:"btn-secondary",children:"Cancel"})]})]})]})}),j&&P&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-96 overflow-y-auto",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Weight-Based Pricing - ",P.name]}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Set different prices for different weights (in 0.1kg increments)"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 space-y-3",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700",children:"Add New Weight Price"}),a.jsxs("form",{onSubmit:rs,className:"flex gap-3",children:[a.jsx("input",{type:"number",step:"0.1",min:"0.1",placeholder:"Weight (kg) - e.g., 0.1, 0.5, 1.0",className:"input flex-1",value:k.weight,onChange:D=>T({...k,weight:D.target.value}),required:!0}),a.jsx("input",{type:"number",step:"0.01",min:"0",placeholder:"Price (KSH)",className:"input flex-1",value:k.price,onChange:D=>T({...k,price:D.target.value}),required:!0}),a.jsx("button",{type:"submit",className:"btn-primary whitespace-nowrap",children:"Add Price"})]})]}),a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-semibold text-sm text-gray-700 mb-3",children:"Current Prices"}),Object.keys(O).length>0?a.jsx("div",{className:"space-y-2",children:Object.entries(O).sort(([D],[X])=>parseFloat(D)-parseFloat(X)).map(([D,X])=>a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("span",{className:"font-medium",children:[D," kg"]}),a.jsxs("span",{className:"text-gray-600 ml-4",children:["KSH ",parseFloat(X).toLocaleString()]})]}),a.jsx("button",{onClick:()=>ns(D),className:"text-red-600 hover:bg-red-50 px-3 py-1 rounded text-sm font-medium transition-colors",children:"Delete"})]},D))}):a.jsx("p",{className:"text-gray-500 text-sm",children:"No weight-based pricing set. Add one above."})]}),a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-sm text-blue-800",children:[a.jsx("strong",{children:"Base price:"})," KSH ",P.price?.toLocaleString()]})})]}),a.jsx("div",{className:"flex gap-2 mt-6",children:a.jsx("button",{onClick:()=>{w(!1),A(null),C({}),T({weight:"",price:""})},className:"btn-secondary flex-1",children:"Done"})})]})})]})}function mK(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState({name:"",price:"",ingredients:[],image:"",visibleToCashier:!0});N.useEffect(()=>{c()},[]);const c=async()=>{const g=await St.getAll();t(g),n(g.filter(m=>!m.recipe))},u=()=>{l({...o,ingredients:[...o.ingredients,{name:"",quantity:"",unit:"pcs"}]})},d=(g,m,y)=>{const v=[...o.ingredients];v[g][m]=y,l({...o,ingredients:v})},f=g=>{l({...o,ingredients:o.ingredients.filter((m,y)=>y!==g)})},h=()=>o.ingredients.reduce((g,m)=>{const y=r.find(v=>v.name.toLowerCase()===m.name.toLowerCase());if(y&&m.quantity){const v=y.cost/y.quantity;return g+v*parseFloat(m.quantity)}return g},0),x=async g=>{g.preventDefault();const m=[];for(const v of o.ingredients){if(!v.name||!v.quantity)continue;const b=r.find(S=>S.name.toLowerCase()===v.name.toLowerCase());b?m.push({productId:b.id,quantity:parseFloat(v.quantity),unit:v.unit||"pcs"}):m.push({name:v.name,quantity:parseFloat(v.quantity),unit:v.unit||"pcs"})}if(m.length===0){alert("Please add at least one ingredient");return}const y=h();try{await St.create({name:o.name,price:parseFloat(o.price),cost:y,quantity:0,unit:"pcs",category:"composite",recipe:m,image:o.image||"",visibleToCashier:o.visibleToCashier,expenseOnly:!1}),l({name:"",price:"",ingredients:[],image:"",visibleToCashier:!0}),i(!1),c(),alert("Recipe created successfully!")}catch(v){console.error("Error creating recipe:",v),alert("Failed to create recipe. Please try again.")}},p=e.filter(g=>g.recipe);return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Recipe & BOM Builder"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create composite products with ingredient recipes"})]}),a.jsxs("button",{onClick:()=>i(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Create Recipe"]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-blue-50 to-purple-50 border-blue-200",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"ðŸ’¡ How it works"}),a.jsx("p",{className:"text-sm text-blue-800",children:"Create composite products by defining recipes with raw ingredients. When a composite product is sold, the system automatically deducts the required quantities from raw materials and calculates COGS."}),a.jsxs("div",{className:"mt-3 p-3 bg-white rounded-lg text-sm",children:[a.jsx("strong",{children:"Example: Fish Fingers"}),a.jsxs("ul",{className:"mt-2 space-y-1 text-gray-700",children:[a.jsx("li",{children:"â€¢ 0.02 kg Nile Perch"}),a.jsx("li",{children:"â€¢ 0.01 L Cooking Oil"}),a.jsx("li",{children:"â€¢ 0.004 kg Breadcrumbs"}),a.jsx("li",{children:"â€¢ 0.002 kg Salt"})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Existing Recipes (",p.length,")"]}),p.length===0?a.jsx("div",{className:"text-center py-12",children:a.jsx("p",{className:"text-gray-500",children:"No recipes created yet"})}):a.jsx("div",{className:"space-y-4",children:p.map(g=>{const m=g.recipe.reduce((v,b)=>{if(b.productId){const S=e.find(j=>j.id===b.productId);if(S){const j=S.cost/S.quantity;return v+j*b.quantity}}else if(b.name){const S=e.find(j=>j.name.toLowerCase()===b.name.toLowerCase());if(S){const j=S.cost/S.quantity;return v+j*b.quantity}}return v},0),y=((g.price-m)/g.price*100).toFixed(1);return a.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-lg",children:g.name}),a.jsxs("div",{className:"flex items-center gap-4 mt-1 text-sm",children:[a.jsxs("span",{className:"text-green-600 font-semibold",children:["Price: KSH ",g.price]}),a.jsxs("span",{className:"text-orange-600",children:["COGS: KSH ",m.toFixed(2)]}),a.jsxs("span",{className:`font-semibold ${y>30?"text-green-600":"text-yellow-600"}`,children:["Margin: ",y,"%"]})]})]}),a.jsx("button",{className:"text-red-600 hover:bg-red-50 p-2 rounded-lg",children:a.jsx(tr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"INGREDIENTS:"}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:g.recipe.map((v,b)=>{let S="",j=v.unit||"pcs";if(v.productId){const w=e.find(P=>P.id===v.productId);w&&(S=w.name,j=w.unit)}else v.name&&(S=v.name,j=v.unit||"pcs");return S?a.jsxs("div",{className:"text-sm flex items-center justify-between bg-white px-3 py-2 rounded",children:[a.jsx("span",{children:S}),a.jsxs("span",{className:"font-semibold text-blue-600",children:[v.quantity," ",j]})]},b):null})})]})]},g.id)})})]}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Create New Recipe"}),a.jsxs("form",{onSubmit:x,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Product Name (e.g., Fish Fingers)",className:"input",value:o.name,onChange:g=>l({...o,name:g.target.value}),required:!0}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("input",{type:"number",step:"0.01",placeholder:"Selling Price",className:"input",value:o.price,onChange:g=>l({...o,price:g.target.value}),required:!0}),a.jsx("input",{type:"url",placeholder:"Image URL (optional)",className:"input",value:o.image,onChange:g=>l({...o,image:g.target.value})})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:o.visibleToCashier,onChange:g=>l({...o,visibleToCashier:g.target.checked})}),a.jsx("span",{className:"text-sm",children:"Visible to Cashier"})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h4",{className:"font-semibold",children:"Ingredients"}),a.jsx("button",{type:"button",onClick:u,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"+ Add Ingredient"})]}),a.jsx("div",{className:"space-y-3",children:o.ingredients.map((g,m)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",placeholder:"Ingredient name (e.g., Nile Perch)",className:"input flex-1",value:g.name,onChange:y=>d(m,"name",y.target.value),required:!0,list:`ingredients-list-${m}`}),a.jsx("datalist",{id:`ingredients-list-${m}`,children:r.map(y=>a.jsxs("option",{value:y.name,children:[y.name," (",y.quantity," ",y.unit," available)"]},y.id))}),a.jsx("input",{type:"number",step:"0.001",placeholder:"Qty",className:"input w-32",value:g.quantity,onChange:y=>d(m,"quantity",y.target.value),required:!0}),a.jsxs("select",{className:"input w-24",value:g.unit,onChange:y=>d(m,"unit",y.target.value),children:[a.jsx("option",{value:"pcs",children:"pcs"}),a.jsx("option",{value:"kg",children:"kg"}),a.jsx("option",{value:"g",children:"g"}),a.jsx("option",{value:"L",children:"L"}),a.jsx("option",{value:"ml",children:"ml"})]}),a.jsx("button",{type:"button",onClick:()=>f(m),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:a.jsx(tr,{className:"w-4 h-4"})})]},m))}),o.ingredients.length===0&&a.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:'No ingredients added yet. Click "Add Ingredient" to start.'})]}),o.ingredients.length>0&&a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"font-medium",children:"Estimated COGS:"}),a.jsxs("span",{className:"text-lg font-bold text-orange-600",children:["KSH ",h().toFixed(2)]})]}),o.price&&a.jsxs("div",{className:"flex items-center justify-between text-sm mt-2",children:[a.jsx("span",{className:"font-medium",children:"Profit Margin:"}),a.jsxs("span",{className:"text-lg font-bold text-green-600",children:[((parseFloat(o.price)-h())/parseFloat(o.price)*100).toFixed(1),"%"]})]})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsxs("button",{type:"submit",className:"btn-primary flex-1 flex items-center justify-center gap-2",children:[a.jsx(Mk,{className:"w-4 h-4"}),"Create Recipe"]}),a.jsx("button",{type:"button",onClick:()=>{i(!1),l({name:"",price:"",ingredients:[]})},className:"btn-secondary",children:"Cancel"})]})]})]})})]})}function pK(){const[e,t]=N.useState([]),[r,n]=N.useState("all"),[s,i]=N.useState([]),[o,l]=N.useState(!1);N.useEffect(()=>{c()},[]);const c=async()=>{const m=await Kl.getAll();t(m.reverse())},u=async m=>{if(window.confirm("Delete this sale? This action cannot be undone."))try{l(!0);const y=localStorage.getItem("token");if(!(await fetch(`${ye}/sales/${m}`,{method:"DELETE",headers:{Authorization:`Bearer ${y}`}})).ok)throw new Error("Failed to delete sale");t(e.filter(b=>b.id!==m)),alert("Sale deleted successfully")}catch(y){alert("Failed to delete sale: "+y.message)}finally{l(!1)}},d=async()=>{if(s.length===0){alert("No sales selected");return}if(window.confirm(`Delete ${s.length} sales? This action cannot be undone.`))try{l(!0);const m=localStorage.getItem("token");if(!(await fetch(`${ye}/sales/bulk-delete`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({saleIds:s})})).ok)throw new Error("Failed to delete sales");t(e.filter(v=>!s.includes(v.id))),i([]),alert("Sales deleted successfully")}catch(m){alert("Failed to delete sales: "+m.message)}finally{l(!1)}},f=async()=>{if(window.confirm("Clear ALL sales data? This will delete everything and cannot be undone."))try{l(!0);const m=localStorage.getItem("token");if(!(await fetch(`${ye}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({type:"sales"})})).ok)throw new Error("Failed to clear sales");t([]),i([]),alert("All sales data cleared")}catch(m){alert("Failed to clear sales: "+m.message)}finally{l(!1)}},h=e.filter(m=>{if(r==="today")return new Date(m.createdAt).toDateString()===new Date().toDateString();if(r==="week"){const y=new Date;return y.setDate(y.getDate()-7),new Date(m.createdAt)>=y}return!0}),x=h.reduce((m,y)=>m+y.total,0),p=h.reduce((m,y)=>m+(y.cogs||0),0),g=x-p;return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("select",{value:r,onChange:m=>n(m.target.value),className:"input w-40",children:[a.jsx("option",{value:"all",children:"All Time"}),a.jsx("option",{value:"today",children:"Today"}),a.jsx("option",{value:"week",children:"This Week"})]}),s.length>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-sm text-gray-600",children:[s.length," selected"]}),a.jsxs("button",{onClick:d,disabled:o,className:"px-3 py-2 bg-red-600 hover:bg-red-700 disabled:bg-gray-400 text-white rounded text-sm font-medium flex items-center gap-1",children:[a.jsx(tr,{className:"w-4 h-4"}),"Delete Selected"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("button",{onClick:f,disabled:o||e.length===0,className:"px-4 py-2 bg-red-700 hover:bg-red-800 disabled:bg-gray-400 text-white rounded font-medium flex items-center gap-2",children:[a.jsx($1,{className:"w-4 h-4"}),"Clear All Sales"]}),a.jsxs("button",{className:"btn-secondary flex items-center gap-2",children:[a.jsx(R1,{className:"w-4 h-4"}),"Export"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-green-500 to-emerald-600 text-white",children:[a.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Total Sales"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",x.toLocaleString()]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-orange-500 to-red-600 text-white",children:[a.jsx("p",{className:"text-sm text-orange-100 mb-1",children:"Total COGS"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",p.toLocaleString()]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[a.jsx("p",{className:"text-sm text-blue-100 mb-1",children:"Total Profit"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",g.toLocaleString()]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Sales History"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left",children:a.jsx("input",{type:"checkbox",checked:s.length===h.length&&h.length>0,onChange:m=>{m.target.checked?i(h.map(y=>y.id)):i([])},className:"rounded"})}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"ID"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"COGS"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Profit"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Action"})]})}),a.jsx("tbody",{children:h.map(m=>a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsx("input",{type:"checkbox",checked:s.includes(m.id),onChange:y=>{y.target.checked?i([...s,m.id]):i(s.filter(v=>v!==m.id))},className:"rounded"})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-medium",children:["#",m.id]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(m.createdAt).toLocaleString()}),a.jsxs("td",{className:"px-4 py-3 text-sm",children:[m.items?.length||0," items"]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-success",children:m.paymentMethod})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",m.total?.toLocaleString()]}),a.jsxs("td",{className:"px-4 py-3 text-sm text-orange-600",children:["KSH ",m.cogs?.toLocaleString()||0]}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-blue-600",children:["KSH ",m.profit?.toLocaleString()||0]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("button",{onClick:()=>u(m.id),disabled:o,className:"px-3 py-1 bg-red-500 hover:bg-red-600 disabled:bg-gray-400 text-white rounded text-sm font-medium flex items-center gap-1",children:[a.jsx(tr,{className:"w-4 h-4"}),"Delete"]})})]},m.id))})]})})]})]})}function gK(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState({description:"",amount:"",category:"general"}),[o,l]=N.useState(null);N.useEffect(()=>{u();const p=localStorage.getItem("token");return p&&(Or.connect(p).catch(g=>{console.warn("WebSocket connection failed:",g)}),Or.on("sale_completed",g=>{console.log("ðŸ’° Sale completed - updating expenses:",g),u(),g.saleId&&c(`âœ… Expenses updated from Sale #${g.saleId}`,"success")})),()=>{Or.disconnect()}},[]);const c=(p,g)=>{l({message:p,type:g}),setTimeout(()=>l(null),3e3)},u=async()=>{const p=await Ro.getAll();t(p.reverse())},d=async p=>{p.preventDefault();const g={...s,amount:parseFloat(s.amount)};await Ro.create(g),i({description:"",amount:"",category:"general"}),n(!1),window.dispatchEvent(new CustomEvent("expense_added",{detail:{expense:g}})),u()},f=e.reduce((p,g)=>p+g.amount,0),h=e.filter(p=>!p.automatic),x=e.filter(p=>p.automatic);return a.jsxs("div",{className:"p-6 space-y-6",children:[o&&a.jsx("div",{className:`fixed top-4 right-4 p-4 rounded-lg text-white font-medium z-50 ${o.type==="success"?"bg-green-600":"bg-blue-600"}`,children:o.message}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Expense Management"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track manual and automatic ingredient-based expenses"})]}),a.jsxs("button",{onClick:()=>n(!0),className:"btn-primary flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Expense"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-red-500 to-pink-600 text-white",children:[a.jsx("p",{className:"text-sm text-red-100 mb-1",children:"Total Expenses"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",f.toLocaleString()]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white",children:[a.jsx("p",{className:"text-sm text-blue-100 mb-1",children:"Manual Expenses"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",h.reduce((p,g)=>p+g.amount,0).toLocaleString()]})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-purple-500 to-violet-600 text-white",children:[a.jsx("p",{className:"text-sm text-purple-100 mb-1",children:"Auto Expenses"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",x.reduce((p,g)=>p+g.amount,0).toLocaleString()]})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Expense History"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Type"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount"})]})}),a.jsx("tbody",{children:e.map(p=>a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(p.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:p.description}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-warning",children:p.category})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:`badge ${p.automatic?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:p.automatic?"Automatic":"Manual"})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-red-600",children:["KSH ",p.amount?.toLocaleString()]})]},p.id))})]})})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add Manual Expense"}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Description",className:"input",value:s.description,onChange:p=>i({...s,description:p.target.value}),required:!0}),a.jsx("input",{type:"number",step:"0.01",placeholder:"Amount",className:"input",value:s.amount,onChange:p=>i({...s,amount:p.target.value}),required:!0}),a.jsxs("select",{className:"input",value:s.category,onChange:p=>i({...s,category:p.target.value}),children:[a.jsx("option",{value:"general",children:"General"}),a.jsx("option",{value:"utilities",children:"Utilities"}),a.jsx("option",{value:"rent",children:"Rent"}),a.jsx("option",{value:"salaries",children:"Salaries"}),a.jsx("option",{value:"supplies",children:"Supplies"}),a.jsx("option",{value:"other",children:"Other"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Expense"}),a.jsx("button",{type:"button",onClick:()=>n(!1),className:"btn-secondary",children:"Cancel"})]})]})]})})]})}function xK(){const{isCashierUserManagementEnabled:e,isCashier:t,user:r}=Oe(),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState(!1),[u,d]=N.useState(null),[f,h]=N.useState(null),[x,p]=N.useState(null),[g,m]=N.useState(0),[y,v]=N.useState({name:"",email:"",password:"",businessType:"",businessRole:"cashier",permissions:{viewSales:!0,viewInventory:!0,viewExpenses:!1,manageProducts:!1}}),[b,S]=N.useState(!1),[j,w]=N.useState(null),[P,A]=N.useState(""),O=[{id:"clinic",name:"Clinic",icon:Wl,roles:["doctor","reception","pharmacy","nurse"]},{id:"hotel",name:"Hotel",icon:on,roles:["reception","housekeeping","manager"]},{id:"bar",name:"Bar/Restaurant",icon:dm,roles:["bartender","waiter","manager"]},{id:"supermarket",name:"Supermarket",icon:um,roles:["cashier","manager","stock_clerk"]}],C=r?.plan==="pro";N.useEffect(()=>{k()},[]),N.useEffect(()=>()=>{x?.intervalId&&clearInterval(x.intervalId)},[x]);const k=async()=>{try{o(!0);const M=await Pn.getAll();s(Array.isArray(M)?M:[])}catch(M){console.error("Error loading users:",M),s([])}finally{o(!1)}},T=()=>Math.floor(1e3+Math.random()*9e3).toString(),E=async M=>{if(M.preventDefault(),console.log("Form submitted with data:",y),!y.name?.trim()||!y.email?.trim()||!y.password?.trim()){alert("Please fill in all required fields");return}if(y.password.length<6){alert("Password must be at least 6 characters long");return}try{const J=T(),Q={name:y.name.trim(),email:y.email.trim().toLowerCase(),password:y.password.trim(),pin:J,...C&&y.businessType&&{businessType:y.businessType,businessRole:y.businessRole||"cashier"}};console.log("Sending user data:",Q);const de=`temp-${Date.now()}`,V={id:de,...Q,role:"cashier",is_active:!0,created_at:new Date().toISOString()};s(ie=>[...ie,V]),v({name:"",email:"",password:"",businessType:"",businessRole:"cashier",permissions:{viewSales:!0,viewInventory:!0,viewExpenses:!1,manageProducts:!1}}),c(!1);try{const ie=await Pn.create(Q);console.log("User creation result:",ie),s(U=>U.map(Ce=>Ce.id===de?ie:Ce));const ce=`âœ… Cashier added successfully!

ðŸ“§ Email: ${Q.email}
ðŸ”‘ Password: ${Q.password}
ðŸ”¢ PIN: ${J}

ðŸ’¡ LOGIN OPTIONS:
1. Email + Password: Use email and password above
2. PIN Login: Use email + ${J}

Please share these credentials securely with the new cashier.`;alert(ce),k().catch(U=>console.warn("Background refresh failed:",U))}catch(ie){throw s(ce=>ce.filter(U=>U.id!==de)),ie}}catch(J){console.error("Error creating cashier:",J);let Q="Failed to add cashier";J.message.includes("Current user not found")?Q="Authentication error. Please refresh the page and try again.":J.message.includes("email")?Q="Email already exists. Please use a different email.":J.message.includes("network")||J.message.includes("fetch")?Q="Network error. Please check your connection and try again.":J.message&&(Q=`Failed to add cashier: ${J.message}`),alert(Q)}},$=async(M,J)=>{try{o(!0),await Pn.update(M,{permissions:J}),await k(),d(null)}catch(Q){console.error("Error updating permissions:",Q),alert("Failed to update permissions: "+Q.message)}finally{o(!1)}},L=async(M,J)=>{try{o(!0);const Q=!J,de=await fetch(`${ye}/users/${M}/activate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({active:Q})});if(!de.ok){const V=await de.json().catch(()=>({error:"Network error"}));throw new Error(V.error||`HTTP ${de.status}: ${de.statusText}`)}await k()}catch(Q){console.error("Error updating user status:",Q),alert("Failed to update user status: "+Q.message)}finally{o(!1)}},q=async(M,J)=>{try{o(!0);const Q=!J,de=await fetch(`${ye}/users/${M}/lock`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({locked:Q})});if(!de.ok){const V=await de.json().catch(()=>({error:"Network error"}));throw new Error(V.error||`HTTP ${de.status}: ${de.statusText}`)}await k()}catch(Q){console.error("Error updating user lock status:",Q),alert("Failed to update user lock status: "+Q.message)}finally{o(!1)}},z=async M=>{if(confirm("Are you sure you want to delete this user? This action cannot be undone."))try{o(!0),await Pn.delete(M),await k()}catch(J){console.error("Error deleting user:",J),alert("Failed to delete user: "+J.message)}finally{o(!1)}},K=async()=>{if(window.confirm("Clear ALL users data? This will delete all users and cannot be undone."))try{o(!0);const M=localStorage.getItem("token");if(!(await fetch(`${ye}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${M}`,"Content-Type":"application/json"},body:JSON.stringify({type:"users"})})).ok)throw new Error("Failed to clear users");s([]),alert("All users data cleared")}catch(M){alert("Failed to clear users: "+M.message)}finally{o(!1)}},G=M=>{w(M),A(T()),S(!0)},Z=async()=>{try{o(!0),await Pn.update(j.id,{cashierPIN:P}),await k(),S(!1),w(null),A(""),alert(`âœ… PIN reset successfully!

ðŸ”¢ New PIN for ${j.name}: ${P}

Please share this PIN securely with the cashier.`)}catch(M){console.error("Error resetting PIN:",M),alert("Failed to reset PIN: "+M.message)}finally{o(!1)}},R=M=>{h(M),p({isActive:!1,currentCart:[],totalSalesToday:0,salesCount:0,lastActivity:"Loading..."});const J=setInterval(()=>{H(M)},3e3);p(Q=>({...Q,intervalId:J})),H(M)},F=()=>{x?.intervalId&&clearInterval(x.intervalId),h(null),p(null)},H=async M=>{try{const J=await Kl.getAll(),de=(Array.isArray(J)?J:[]).filter(ie=>ie.cashierId===M.id).sort((ie,ce)=>new Date(ce.createdAt)-new Date(ie.createdAt)).slice(0,10),V={isActive:Math.random()>.3,currentCart:de.length>0?[{name:"Product A",price:150,quantity:2},{name:"Product B",price:300,quantity:1}]:[],totalSalesToday:de.reduce((ie,ce)=>ie+ce.total,0),salesCount:de.length,lastActivity:de.length>0?new Date(de[0].createdAt).toLocaleTimeString():"No recent activity"};p(V)}catch(J){console.error("Error loading live view data:",J)}},re=(n||[]).filter(M=>M.role==="cashier");return i&&n.length===0?a.jsx("div",{className:"p-6 space-y-6",children:a.jsxs("div",{className:"text-center py-12",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Loading users..."})]})}):a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"User Management"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage cashiers and their permissions"})]}),a.jsx("div",{className:"flex items-center gap-2",children:e()&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:K,disabled:i||n.length===0,className:"px-4 py-2 bg-red-700 hover:bg-red-800 disabled:bg-gray-400 text-white rounded font-medium flex items-center gap-2",children:[a.jsx($1,{className:"w-4 h-4"}),"Clear All Users"]}),a.jsxs("button",{onClick:()=>c(!0),className:"btn-primary flex items-center gap-2",disabled:i,children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Cashier"]})]})})]}),t()&&!e()&&a.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-yellow-100 flex items-center justify-center",children:a.jsx(Ut,{className:"w-4 h-4 text-yellow-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-semibold text-yellow-800",children:"User Management Restricted"}),a.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"The admin has disabled cashier user management. You cannot add, edit, or remove users at this time."})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[a.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Total Users"}),a.jsx("p",{className:"text-3xl font-bold text-blue-900",children:n.length})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[a.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Cashiers"}),a.jsx("p",{className:"text-3xl font-bold text-green-900",children:re.length})]}),a.jsxs("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[a.jsx("p",{className:"text-sm text-purple-700 mb-1",children:"Active Users"}),a.jsx("p",{className:"text-3xl font-bold text-purple-900",children:n.filter(M=>M.active).length})]})]}),a.jsxs("div",{className:"card",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Users"}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Name"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Email"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Role"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Plan"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"PIN"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{children:(n||[]).map(M=>a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:M.name}),a.jsx("td",{className:"px-4 py-3 text-sm",children:M.email}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:`badge ${M.role==="admin"?"bg-purple-100 text-purple-800":"badge-success"}`,children:M.role})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-warning",children:M.plan||"N/A"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:M.role==="cashier"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"font-mono text-lg font-bold text-blue-600 bg-blue-50 px-2 py-1 rounded",children:M.pin||M.cashierPIN||"----"}),a.jsx("button",{onClick:()=>G(M),className:"p-1 hover:bg-yellow-50 rounded text-yellow-600",title:"Reset PIN",disabled:i,children:a.jsx(Bn,{className:"w-3 h-3"})})]}):a.jsx("span",{className:"text-gray-400 text-sm",children:"N/A"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold ${M.active?"bg-green-100 text-green-700":"bg-gray-100 text-gray-700"}`,children:M.active?a.jsxs(a.Fragment,{children:[a.jsx(Zx,{className:"w-3 h-3"}),"Active"]}):a.jsxs(a.Fragment,{children:[a.jsx(Qx,{className:"w-3 h-3"}),"Inactive"]})}),M.locked&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-semibold bg-red-100 text-red-700",children:[a.jsx(nn,{className:"w-3 h-3"}),"Locked"]})]})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex gap-2",children:[e()&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>L(M.id,M.active),className:`p-2 rounded-lg transition ${M.active?"hover:bg-red-50 text-red-600":"hover:bg-green-50 text-green-600"}`,title:M.active?"Deactivate User":"Activate User",disabled:i,children:M.active?a.jsx(Qx,{className:"w-4 h-4"}):a.jsx(Zx,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>q(M.id,M.locked||!1),className:`p-2 rounded-lg transition ${M.locked?"hover:bg-green-50 text-green-600":"hover:bg-red-50 text-red-600"}`,title:M.locked?"Unlock User":"Lock User",disabled:i,children:a.jsx(nn,{className:"w-4 h-4"})})]}),M.role==="cashier"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{localStorage.setItem("adminViewingCashier",M.id),window.location.href="/cashier/pos"},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600",title:"Access Cashier POS",children:a.jsx(L1,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(M),className:"p-2 hover:bg-green-50 rounded-lg text-green-600",title:"Live View",children:a.jsx(ey,{className:"w-4 h-4"})})]}),e()&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>d(M),className:"p-2 hover:bg-purple-50 rounded-lg text-purple-600",title:"Edit Permissions",children:a.jsx(Bn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>z(M.id),className:"p-2 hover:bg-red-50 rounded-lg text-red-600",title:"Delete User",disabled:i,children:a.jsx(tr,{className:"w-4 h-4"})})]})]})})]},M.id))})]}),n.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No users found"}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"Add your first cashier to get started"})]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add New Cashier"}),a.jsxs("form",{onSubmit:E,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Full Name",className:"input",value:y.name||"",onChange:M=>{console.log("Name input changed:",M.target.value),v({...y,name:M.target.value})},required:!0,disabled:i}),a.jsx("input",{type:"email",placeholder:"Email",className:"input",value:y.email||"",onChange:M=>{console.log("Email input changed:",M.target.value),v({...y,email:M.target.value})},required:!0,disabled:i}),a.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",className:"input",value:y.password||"",onChange:M=>{console.log("Password input changed:",M.target.value),v({...y,password:M.target.value})},required:!0,minLength:6,disabled:i}),a.jsx("p",{className:"text-xs text-gray-500",children:"ðŸ’¡ The cashier will use this email and password to log in to the system"}),C&&a.jsxs("div",{className:"border-t pt-4",children:[a.jsxs("h4",{className:"font-semibold mb-3 text-sm flex items-center gap-2",children:[a.jsx(um,{className:"w-4 h-4"}),"Business Settings (Pro Plan)"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Type"}),a.jsxs("select",{className:"input",value:y.businessType||"",onChange:M=>{v({...y,businessType:M.target.value,businessRole:"cashier"})},disabled:i,children:[a.jsx("option",{value:"",children:"Default (Standard Cashier)"}),O.map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Select business type for specialized dashboard"})]}),y.businessType&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role in Business"}),a.jsx("select",{className:"input",value:y.businessRole||"cashier",onChange:M=>{v({...y,businessRole:M.target.value})},disabled:i,children:O.find(M=>M.id===y.businessType)?.roles.map(M=>a.jsx("option",{value:M,children:M.charAt(0).toUpperCase()+M.slice(1).replace("_"," ")},M))}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This determines which dashboard they'll see"})]})]})]}),a.jsxs("div",{className:"border-t pt-4",children:[a.jsx("h4",{className:"font-semibold mb-3 text-sm",children:"Permissions"}),a.jsx("div",{className:"space-y-2",children:Object.entries(y.permissions).map(([M,J])=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:J,onChange:Q=>v({...y,permissions:{...y.permissions,[M]:Q.target.checked}}),disabled:i}),a.jsx("span",{className:"text-sm capitalize",children:M.replace(/([A-Z])/g," $1").trim()})]},M))})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",disabled:i,children:i?"Adding...":"Add Cashier"}),a.jsx("button",{type:"button",onClick:()=>c(!1),className:"btn-secondary",disabled:i,children:"Cancel"})]})]})]})}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Edit Permissions: ",u.name]}),a.jsx("div",{className:"space-y-3",children:Object.entries(u.permissions||{}).map(([M,J])=>a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:J,onChange:Q=>d({...u,permissions:{...u.permissions,[M]:Q.target.checked}}),disabled:i}),a.jsx("span",{className:"text-sm capitalize",children:M.replace(/([A-Z])/g," $1").trim()})]},M))}),a.jsxs("div",{className:"flex gap-2 mt-6",children:[a.jsx("button",{onClick:()=>$(u.id,u.permissions),className:"btn-primary flex-1",disabled:i,children:i?"Saving...":"Save Changes"}),a.jsx("button",{onClick:()=>d(null),className:"btn-secondary",disabled:i,children:"Cancel"})]})]})}),f&&x&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-xl flex items-center justify-center",children:a.jsx(ey,{className:"w-5 h-5 text-green-600"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-bold",children:["Live View: ",f.name]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Real-time cashier activity monitoring"})]})]}),a.jsx("button",{onClick:F,className:"p-2 hover:bg-red-50 rounded-lg text-red-600",children:a.jsx(yr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex items-center gap-3 mb-6 p-4 bg-gray-50 rounded-xl",children:[a.jsx("div",{className:`w-3 h-3 rounded-full ${x.isActive?"bg-green-500 animate-pulse":"bg-gray-400"}`}),a.jsx("span",{className:"font-semibold",children:x.isActive?"Currently Active":"Currently Inactive"}),a.jsxs("div",{className:"ml-auto flex items-center gap-2 text-sm text-gray-600",children:[a.jsx(vr,{className:"w-4 h-4"}),"Last Activity: ",x.lastActivity]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(Br,{className:"w-5 h-5 text-blue-600"}),a.jsx("h4",{className:"font-semibold",children:"Current Cart"})]}),(x.currentCart?.length||0)>0?a.jsxs("div",{className:"space-y-2",children:[(x.currentCart||[]).map((M,J)=>a.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[a.jsxs("span",{className:"text-sm",children:[M.name," x",M.quantity]}),a.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["KSH ",M.price.toLocaleString()]})]},J)),a.jsx("div",{className:"border-t pt-2 mt-2",children:a.jsxs("div",{className:"flex justify-between font-bold",children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{className:"text-green-600",children:["KSH ",(x.currentCart||[]).reduce((M,J)=>M+J.price*J.quantity,0).toLocaleString()]})]})})]}):a.jsx("p",{className:"text-gray-500 text-sm italic",children:"No items in cart"})]}),a.jsxs("div",{className:"card",children:[a.jsx("h4",{className:"font-semibold mb-4",children:"Today's Summary"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Sales Count:"}),a.jsx("span",{className:"font-semibold",children:x.salesCount})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Total Sales:"}),a.jsxs("span",{className:"font-semibold text-green-600",children:["KSH ",x.totalSalesToday.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Average Sale:"}),a.jsxs("span",{className:"font-semibold",children:["KSH ",x.salesCount>0?Math.round(x.totalSalesToday/x.salesCount).toLocaleString():"0"]})]})]})]})]}),a.jsx("div",{className:"text-center",children:a.jsxs("p",{className:"text-xs text-gray-500",children:["ðŸ”„ Auto-refreshing every 3 seconds â€¢ Last updated: ",new Date().toLocaleTimeString()]})})]})}),b&&j&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:["Reset PIN for ",j.name]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Generate a new 4-digit PIN for this cashier. The old PIN will be invalid."}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("p",{className:"text-sm text-blue-800 mb-2",children:"New PIN:"}),a.jsx("div",{className:"text-center",children:a.jsx("span",{className:"font-mono text-3xl font-bold text-blue-600 bg-white px-4 py-2 rounded border",children:P})})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>A(T()),className:"btn-secondary flex-1",disabled:i,children:"Generate New PIN"}),a.jsx("button",{onClick:Z,className:"btn-primary flex-1",disabled:i,children:i?"Updating...":"Confirm & Update"})]}),a.jsx("div",{className:"mt-4",children:a.jsx("button",{onClick:()=>{S(!1),w(null),A("")},className:"btn-secondary w-full",disabled:i,children:"Cancel"})})]})})]})}function yK(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState("all"),[i,o]=N.useState(!0);N.useEffect(()=>{l();const h=setInterval(l,3e4);return()=>clearInterval(h)},[]);const l=async()=>{try{o(!0);const h=await bo.getAll();Array.isArray(h)&&(r(h.reverse()),console.log(`âœ… Loaded ${h.length} clock records from backend`))}catch(h){console.error("Failed to load clock records:",h),r([])}finally{o(!1)}},c=new Date().toDateString(),u=n==="all"?t:t.filter(h=>{try{return new Date(h.date||h.clockInTime).toDateString()===c}catch{return!1}}),d=t.filter(h=>{try{return new Date(h.date||h.clockInTime).toDateString()===c&&h.duration}catch{return!1}}).reduce((h,x)=>h+(x.duration||0),0)/60,f=h=>{let x=typeof h=="number"?h<120?h:Math.floor(h/60):0;const p=Math.floor(x/60),g=x%60;return`${p}h ${g}m`};return a.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Time Tracking"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor cashier clock in/out records"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 md:gap-6",children:[a.jsx("div",{className:"card bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-xl flex items-center justify-center",children:a.jsx(vr,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-700",children:"Total Hours Today"}),a.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:[d.toFixed(1),"h"]})]})]})}),a.jsx("div",{className:"card bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-xl flex items-center justify-center",children:a.jsx(lg,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-700",children:"Active Cashiers Today"}),a.jsx("p",{className:"text-2xl font-bold text-green-900",children:new Set(t.filter(h=>{try{return new Date(h.date||h.clockInTime).toDateString()===new Date().toDateString()}catch{return!1}}).map(h=>h.cashierId||h.userId)).size})]})]})}),a.jsx("div",{className:"card bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-xl flex items-center justify-center",children:a.jsx(_r,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-700",children:"Total Records"}),a.jsx("p",{className:"text-2xl font-bold text-purple-900",children:t.length})]})]})})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Clock Records"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>s("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${n==="all"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"All Time"}),a.jsx("button",{onClick:()=>s("today"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${n==="today"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Today"}),a.jsx("button",{onClick:l,disabled:i,className:"px-4 py-2 rounded-lg text-sm font-medium bg-green-100 text-green-600 hover:bg-green-200 disabled:opacity-50",children:i?"Loading...":"Refresh"})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Cashier"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Clock In"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Clock Out"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Duration"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Status"})]})}),a.jsx("tbody",{children:u.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:"6",className:"px-4 py-8 text-center text-gray-500",children:i?"Loading records...":"No records found"})}):u.map((h,x)=>{const p=new Date(h.clockInTime),g=h.clockOutTime?new Date(h.clockOutTime):null;return a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:h.cashierName||h.userName}),a.jsx("td",{className:"px-4 py-3 text-sm",children:p.toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:p.toLocaleTimeString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:g?g.toLocaleTimeString():"-"}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-success",children:h.duration?f(h.duration):"-"})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h.status==="clocked_in"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.status==="clocked_in"?"ðŸŸ¢ Clocked In":"âœ“ Clocked Out"})})]},x)})})]})})]})]})}function bK(){const{user:e,updateUser:t}=Oe();wt();const[r,n]=N.useState(!1),[s,i]=N.useState(e?.plan||"ultra"),[o,l]=N.useState({}),[c,u]=N.useState(null),[d,f]=N.useState(e?.profilePicture||null),[h,x]=N.useState(!0),[p,g]=N.useState(!0);N.useEffect(()=>{m()},[]);const m=async()=>{try{const A=await ks.get();l(A),A.logo&&u(A.logo),x(A.cashierUserManagement!==!1),g(A.realTimeProductSync!==!1)}catch(A){console.error("Failed to load settings:",A)}},y=async A=>{try{const O={...o,...A};return await ks.update(O),l(O),!0}catch(O){return console.error("Failed to save settings:",O),!1}},v=async()=>{const A=!h;x(A),await y({cashierUserManagement:A})?(window.dispatchEvent(new CustomEvent("settingsChanged",{detail:{cashierUserManagement:A}})),alert(`âœ… Cashier User Management ${A?"ENABLED":"DISABLED"}`)):(x(!A),alert("âŒ Failed to save setting. Please try again."))},b=async()=>{const A=!p;g(A),await y({realTimeProductSync:A})?(window.dispatchEvent(new CustomEvent("settingsChanged",{detail:{realTimeProductSync:A}})),alert(`âœ… Real-time Product Sync ${A?"ENABLED":"DISABLED"}`)):(g(!A),alert("âŒ Failed to save setting. Please try again."))},S=async A=>{const O=A.target.files[0];if(O){const C=new FileReader;C.onloadend=async()=>{const k=C.result;u(k);try{await ks.update({...o,logo:k}),l({...o,logo:k})}catch(T){console.error("Failed to save logo:",T)}},C.readAsDataURL(O)}},j=async A=>{const O=A.target.files[0];if(O){const C=new FileReader;C.onloadend=async()=>{const k=C.result;f(k);try{await t({...e,profilePicture:k})}catch(T){console.error("Failed to save profile picture:",T)}},C.readAsDataURL(O)}},w=[{id:"basic",name:"Basic Package",price:900,features:["Cashier Dashboard","Sales Tracking","Product Management","Basic Reports"]},{id:"ultra",name:"Ultra Package",price:1600,features:["Admin Dashboard","Recipe Builder","User Management","Advanced Analytics","Expense Tracking"]}],P=async()=>{const A=w.find(C=>C.id===s),O=s==="ultra"?"admin":"cashier";await t({...e,role:O,plan:s,price:A.price}),n(!1),setTimeout(()=>window.location.href=O==="admin"?"/admin":"/cashier",500)};return a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Settings"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage your account and preferences"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(lg,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Account Information"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[d?a.jsx("img",{src:d,alt:"Profile",className:"w-20 h-20 rounded-full object-cover"}):a.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:e?.name?.charAt(0).toUpperCase()}),a.jsxs("label",{className:"absolute bottom-0 right-0 bg-blue-600 text-white p-1.5 rounded-full cursor-pointer hover:bg-blue-700 transition",children:[a.jsx(ty,{className:"w-3 h-3"}),a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:j})]})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Name"}),a.jsx("p",{className:"font-medium",children:e?.name})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Email"}),a.jsx("p",{className:"font-medium",children:e?.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Role"}),a.jsx("p",{className:"font-medium capitalize",children:e?.role})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:a.jsx(In,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Subscription"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Current Plan"}),a.jsxs("p",{className:"font-medium capitalize",children:[e?.plan||"Ultra"," Package"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm text-gray-600",children:"Price"}),a.jsxs("p",{className:"font-medium",children:["KSH ",e?.price||1600,"/month"]})]}),a.jsx("button",{onClick:()=>n(!0),className:"btn-secondary text-sm",children:"Change Plan"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center",children:a.jsx(cg,{className:"w-5 h-5 text-green-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Notifications"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Email Notifications"}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle"})]}),a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Low Stock Alerts"}),a.jsx("input",{type:"checkbox",defaultChecked:!0,className:"toggle"})]}),a.jsxs("label",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm",children:"Daily Sales Summary"}),a.jsx("input",{type:"checkbox",className:"toggle"})]})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(Xe,{className:"w-5 h-5 text-blue-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Cashier User Management"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Enable Cashier User Management"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Allow cashiers to add and remove users"})]}),a.jsx("button",{onClick:v,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h?"bg-blue-600":"bg-gray-300"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${h?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("div",{className:`p-3 rounded-lg border ${h?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:a.jsx("p",{className:"text-xs",children:h?"âœ… Cashiers can add and remove users when enabled":"âŒ Cashiers cannot add or remove users when disabled"})})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:a.jsx($k,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Real-time Product Sync"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium",children:"Enable Real-time Sync"}),a.jsx("p",{className:"text-xs text-gray-500",children:"Automatically sync products between admin and cashier dashboards"})]}),a.jsx("button",{onClick:b,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-purple-600":"bg-gray-300"}`,children:a.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p?"translate-x-6":"translate-x-1"}`})})]}),a.jsx("div",{className:`p-3 rounded-lg border ${p?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:a.jsx("p",{className:"text-xs",children:p?"âœ… Products will sync in real-time across all dashboards":"âŒ Products will not sync automatically across dashboards"})})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:a.jsx(nn,{className:"w-5 h-5 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Security"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{className:"btn-secondary text-sm w-full",children:"Change Password"}),a.jsx("button",{className:"btn-secondary text-sm w-full",children:"Enable 2FA"})]})]}),a.jsxs("div",{className:"card",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:a.jsx(Lk,{className:"w-5 h-5 text-purple-600"})}),a.jsx("h3",{className:"text-lg font-semibold",children:"Screen Lock Logo"})]}),a.jsxs("div",{className:"space-y-3",children:[c&&a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{src:c,alt:"Logo Preview",className:"w-32 h-32 object-contain rounded-lg border-2 border-gray-200"})}),a.jsxs("label",{className:"btn-secondary text-sm w-full cursor-pointer flex items-center justify-center gap-2",children:[a.jsx(ty,{className:"w-4 h-4"}),"Upload Logo",a.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:S})]}),a.jsx("p",{className:"text-xs text-gray-500 text-center",children:"This logo will appear on the screen lock"})]})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-6",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[a.jsx("h3",{className:"text-2xl font-bold mb-6",children:"Change Your Plan"}),a.jsx("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:w.map(A=>a.jsxs("div",{onClick:()=>i(A.id),className:`card cursor-pointer transition-all ${s===A.id?"ring-4 ring-blue-600 bg-blue-50":"hover:shadow-lg"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-xl font-bold",children:A.name}),s===A.id&&a.jsx(gr,{className:"w-6 h-6 text-blue-600"})]}),a.jsxs("p",{className:"text-3xl font-bold mb-4",children:["KSH ",A.price,a.jsx("span",{className:"text-sm text-gray-600",children:"/month"})]}),a.jsx("ul",{className:"space-y-2",children:A.features.map((O,C)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[a.jsx(gr,{className:"w-4 h-4 text-green-600"}),O]},C))})]},A.id))}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:P,className:"btn-primary flex-1",children:"Confirm Change"}),a.jsx("button",{onClick:()=>n(!1),className:"btn-secondary",children:"Cancel"})]})]})})]})}function vK(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState({name:"",amount:"",description:"",active:!0});N.useEffect(()=>{c()},[]);const c=()=>{const h=JSON.parse(localStorage.getItem("serviceFees")||"[]");t(h)},u=h=>{localStorage.setItem("serviceFees",JSON.stringify(h)),t(h)},d=h=>{if(h.preventDefault(),s){const x=e.map(p=>p.id===s.id?{...o,id:p.id}:p);u(x)}else{const x={...o,id:Date.now(),createdAt:new Date().toISOString()};u([...e,x])}n(!1),i(null),l({name:"",amount:"",description:"",active:!0})},f=h=>{confirm("Delete this service fee?")&&u(e.filter(x=>x.id!==h))};return a.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Service Fees"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Manage delivery, packaging, and other fees"})]}),a.jsxs("button",{onClick:()=>{n(!0),i(null)},className:"btn-primary flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Fee"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:e.map(h=>a.jsxs("div",{className:`card ${h.active?"border-green-200 bg-green-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Dt,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:h.name}),a.jsx("p",{className:"text-xs text-gray-500",children:h.description})]})]}),a.jsx("span",{className:`badge ${h.active?"badge-success":"bg-gray-200 text-gray-600"}`,children:h.active?"Active":"Inactive"})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:["KSH ",h.amount]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{i(h),l(h),n(!0)},className:"p-2 hover:bg-blue-50 rounded-lg",children:a.jsx(Bn,{className:"w-4 h-4 text-blue-600"})}),a.jsx("button",{onClick:()=>f(h.id),className:"p-2 hover:bg-red-50 rounded-lg",children:a.jsx(tr,{className:"w-4 h-4 text-red-600"})})]})]})]},h.id))}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[s?"Edit":"Add"," Service Fee"]}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsx("input",{type:"text",placeholder:"Fee Name (e.g., Delivery)",className:"input",value:o.name,onChange:h=>l({...o,name:h.target.value}),required:!0}),a.jsx("input",{type:"number",step:"0.01",placeholder:"Amount",className:"input",value:o.amount,onChange:h=>l({...o,amount:h.target.value}),required:!0}),a.jsx("textarea",{placeholder:"Description",className:"input",rows:"2",value:o.description,onChange:h=>l({...o,description:h.target.value})}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:o.active,onChange:h=>l({...o,active:h.target.checked})}),a.jsx("span",{className:"text-sm",children:"Active"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Save"}),a.jsx("button",{type:"button",onClick:()=>n(!1),className:"btn-secondary",children:"Cancel"})]})]})]})})]})}function jK(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState(!1),[o,l]=N.useState({customerName:"",productId:"",frequency:"weekly",days:[],nextDate:""});N.useEffect(()=>{c(),u()},[]);const c=async()=>{try{const p=localStorage.getItem("token"),g=await fetch(`${ye}/reminders`,{headers:{Authorization:`Bearer ${p}`}});if(!g.ok){console.error("API Error:",g.status,g.statusText),t([]);return}const m=await g.json();Array.isArray(m)?t(m):(console.error("Expected array but got:",typeof m,m),t([]))}catch(p){console.error("Failed to fetch reminders:",p),t([])}},u=async()=>{try{const p=localStorage.getItem("token"),g=await fetch(`${ye}/products`,{headers:{Authorization:`Bearer ${p}`}});if(!g.ok){console.error("API Error:",g.status,g.statusText),n([]);return}const m=await g.json();Array.isArray(m)?n(m):(console.error("Expected array but got:",typeof m,m),n([]))}catch(p){console.error("Failed to fetch products:",p),n([])}},d=async p=>{p.preventDefault();try{const g=localStorage.getItem("token"),m=await fetch(`${ye}/reminders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${g}`},body:JSON.stringify(o)});if(!m.ok){const v=await m.json();console.error("Failed to create reminder:",v),alert(`Failed to create reminder: ${v.error||"Unknown error"}`);return}const y=await m.json();l({customerName:"",productId:"",frequency:"weekly",days:[],nextDate:""}),i(!1),c(),alert("Reminder created successfully!")}catch(g){console.error("Failed to create reminder:",g),alert("Failed to create reminder. Please try again.")}},f=async p=>{try{if(JSON.parse(localStorage.getItem("user")||"{}").role!=="admin"){alert("Only administrators can delete reminders.");return}if(!confirm("Are you sure you want to delete this reminder? This action cannot be undone."))return;const m=localStorage.getItem("token"),y=await fetch(`${ye}/reminders/${p}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`}});if(!y.ok){const v=await y.json();console.error("Failed to delete reminder:",v),alert(`Failed to delete reminder: ${v.error||"Unknown error"}`);return}c(),alert("Reminder deleted successfully!")}catch(g){console.error("Failed to delete reminder:",g),alert("Failed to delete reminder. Please try again.")}},h=p=>{o.days.includes(p)?l({...o,days:o.days.filter(g=>g!==p)}):l({...o,days:[...o.days,p]})},x=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[a.jsx(cg,{className:"text-blue-600"}),"Reminder System"]}),a.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-bold hover:bg-blue-700 transition flex items-center gap-2",children:[a.jsx(Ge,{size:20}),"New Reminder"]})]}),a.jsx("div",{className:"grid gap-4",children:e.map(p=>{const g=r.find(m=>m.id===p.productId);return a.jsx("div",{className:`p-6 rounded-xl shadow-lg ${p.status==="pending"?"bg-red-50 border-l-4 border-red-500":"bg-green-50 border-l-4 border-green-500"}`,children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:p.customerName}),a.jsxs("p",{className:"text-gray-700 mb-1",children:["Product: ",g?.name||"Unknown"]}),a.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Frequency: ",p.frequency]}),p.days?.length>0&&a.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:["Days: ",p.days.join(", ")]}),a.jsxs("p",{className:"text-gray-600 text-sm flex items-center gap-2",children:[a.jsx(_r,{size:16}),"Next: ",new Date(p.nextDate).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:`px-4 py-2 rounded-lg font-bold ${p.status==="pending"?"bg-red-500 text-white":"bg-green-500 text-white"}`,children:p.status}),a.jsx("button",{onClick:()=>f(p.id),className:"bg-red-500 text-white p-2 rounded-lg hover:bg-red-600 transition",children:a.jsx(tr,{size:20})})]})]})},p.id)})}),s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white rounded-t-2xl",children:a.jsx("h2",{className:"text-2xl font-bold",children:"Create Reminder"})}),a.jsxs("form",{onSubmit:d,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Name"}),a.jsx("input",{type:"text",value:o.customerName,onChange:p=>l({...o,customerName:p.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product"}),a.jsxs("select",{value:o.productId,onChange:p=>l({...o,productId:parseInt(p.target.value)}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select Product"}),r.map(p=>a.jsx("option",{value:p.id,children:p.name},p.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Frequency"}),a.jsxs("select",{value:o.frequency,onChange:p=>l({...o,frequency:p.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"specific",children:"Specific Days"})]})]}),o.frequency==="specific"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Days"}),a.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(p=>a.jsx("button",{type:"button",onClick:()=>h(p),className:`px-4 py-2 rounded-lg font-medium transition ${o.days.includes(p)?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:p},p))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Next Reminder Date"}),a.jsx("input",{type:"date",value:o.nextDate,onChange:p=>l({...o,nextDate:p.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500",required:!0})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700 transition",children:"Create Reminder"}),a.jsx("button",{type:"button",onClick:()=>i(!1),className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition",children:"Cancel"})]})]})]})})]})}function wK(){const[e,t]=N.useState([]),[r,n]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState({name:"",percentage:"",validFrom:"",validTo:"",active:!0});N.useEffect(()=>{c()},[]);const c=async()=>{try{const h=await ws.getAll();t(h)}catch(h){console.error("Failed to load discounts:",h)}},u=async h=>{h.preventDefault();try{s?await ws.update(s.id,o):await ws.create(o),n(!1),i(null),l({name:"",percentage:"",validFrom:"",validTo:"",active:!0}),c()}catch(x){console.error("Failed to save discount:",x)}},d=async h=>{if(confirm("Delete this discount?"))try{await ws.delete(h),c()}catch(x){console.error("Failed to delete discount:",x)}},f=h=>{const x=new Date,p=new Date(h.validFrom),g=new Date(h.validTo);return h.active&&p<=x&&g>=x};return a.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Discount Manager"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Create and manage discount rules"})]}),a.jsxs("button",{onClick:()=>{n(!0),i(null),l({name:"",percentage:"",validFrom:"",validTo:"",active:!0})},className:"btn-primary flex items-center gap-2",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Discount"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.map(h=>a.jsxs("div",{className:`card ${f(h)?"border-green-200 bg-green-50":"border-gray-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${f(h)?"bg-green-600":"bg-gray-400"}`,children:a.jsx(fm,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:h.name}),a.jsxs("p",{className:"text-2xl font-bold text-red-600",children:[h.percentage,"% OFF"]})]})]}),a.jsx("span",{className:`badge ${f(h)?"badge-success":"bg-gray-200 text-gray-600"}`,children:f(h)?"Active":"Inactive"})]}),a.jsxs("div",{className:"space-y-2 text-sm text-gray-600 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{className:"w-4 h-4"}),a.jsxs("span",{children:["From: ",new Date(h.validFrom).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_r,{className:"w-4 h-4"}),a.jsxs("span",{children:["To: ",new Date(h.validTo).toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{i(h),l(h),n(!0)},className:"p-2 hover:bg-blue-50 rounded-lg flex-1",children:a.jsx(Bn,{className:"w-4 h-4 text-blue-600 mx-auto"})}),a.jsx("button",{onClick:()=>d(h.id),className:"p-2 hover:bg-red-50 rounded-lg flex-1",children:a.jsx(tr,{className:"w-4 h-4 text-red-600 mx-auto"})})]})]},h.id)),e.length===0&&a.jsxs("div",{className:"card text-center py-12 col-span-full",children:[a.jsx(fm,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No discounts yet. Create your first discount!"})]})]}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 w-full max-w-md",children:[a.jsxs("h3",{className:"text-xl font-bold mb-4",children:[s?"Edit":"Add"," Discount"]}),a.jsxs("form",{onSubmit:u,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Discount Name"}),a.jsx("input",{type:"text",className:"input",value:o.name,onChange:h=>l({...o,name:h.target.value}),placeholder:"e.g., Holiday Sale",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Percentage (%)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",className:"input",value:o.percentage,onChange:h=>l({...o,percentage:parseFloat(h.target.value)}),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valid From"}),a.jsx("input",{type:"date",className:"input",value:o.validFrom,onChange:h=>l({...o,validFrom:h.target.value}),required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Valid To"}),a.jsx("input",{type:"date",className:"input",value:o.validTo,onChange:h=>l({...o,validTo:h.target.value}),required:!0})]}),a.jsxs("label",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:o.active,onChange:h=>l({...o,active:h.target.checked})}),a.jsx("span",{className:"text-sm",children:"Active"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Save"}),a.jsx("button",{type:"button",onClick:()=>n(!1),className:"btn-secondary",children:"Cancel"})]})]})]})})]})}function NK(){const[e,t]=N.useState([]),[r,n]=N.useState("all"),[s,i]=N.useState(null),[o,l]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState(null);N.useEffect(()=>{h();const b=setInterval(h,1e4);return()=>clearInterval(b)},[]);const h=async()=>{try{const b=await yo.getAll();t(b||[])}catch(b){console.error("Failed to load credit requests:",b)}},x=async b=>{i(b);try{await yo.update(b,{status:"approved"}),console.log("âœ… Credit request approved"),h()}catch(S){console.error("Failed to approve request:",S),alert("Failed to approve request: "+(S.message||"Unknown error"))}finally{i(null)}},p=b=>{f(b),u(!0)},g=async()=>{if(d){i(d.id);try{await yo.update(d.id,{status:"rejected",rejectionReason:o}),console.log("âœ… Credit request rejected"),u(!1),l(""),f(null),h()}catch(b){console.error("Failed to reject request:",b),alert("Failed to reject request: "+(b.message||"Unknown error"))}finally{i(null)}}},m=e.filter(b=>r==="all"?!0:b.status===r),y=b=>{switch(b){case"pending":return"bg-orange-50 border-orange-200";case"approved":return"bg-green-50 border-green-200";case"rejected":return"bg-red-50 border-red-200";default:return"bg-gray-50 border-gray-200"}},v=b=>{switch(b){case"pending":return a.jsx(vr,{className:"w-6 h-6 text-orange-600"});case"approved":return a.jsx(xr,{className:"w-6 h-6 text-green-600"});case"rejected":return a.jsx(Ts,{className:"w-6 h-6 text-red-600"});default:return a.jsx(In,{className:"w-6 h-6 text-gray-600"})}};return a.jsxs("div",{className:"p-4 md:p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Credit Requests"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Review and manage credit requests from cashiers"})]}),a.jsx("div",{className:"flex gap-2",children:["all","pending","approved","rejected"].map(b=>a.jsxs("button",{onClick:()=>n(b),className:`px-4 py-2 rounded-lg font-medium transition ${r===b?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[b.charAt(0).toUpperCase()+b.slice(1),b==="pending"&&e.filter(S=>S.status==="pending").length>0&&a.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs rounded-full px-2 py-1",children:e.filter(S=>S.status==="pending").length})]},b))})]}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m.map(b=>a.jsx("div",{className:`card border-l-4 ${y(b.status)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${b.status==="pending"?"bg-orange-600":b.status==="approved"?"bg-green-600":"bg-red-600"}`,children:v(b.status)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:b.customerName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Requested by: ",b.cashierName]}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[a.jsxs("span",{children:["Amount: ",a.jsxs("strong",{className:"text-green-600",children:["KSH ",b.amount?.toLocaleString()]})]}),b.reason&&a.jsxs("span",{children:["Reason: ",a.jsx("strong",{children:b.reason.replace(/_/g," ")})]})]}),b.notes&&a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Notes: ",b.notes]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Requested: ",new Date(b.createdAt).toLocaleString()]}),b.approvalDate&&a.jsxs("p",{className:"text-xs text-gray-500",children:[b.status==="approved"?"Approved":"Processed",": ",new Date(b.approvalDate).toLocaleString(),b.approvedBy&&` by ${b.approvedBy}`]}),b.rejectionReason&&a.jsxs("p",{className:"text-xs text-red-600 mt-2",children:["Rejection reason: ",b.rejectionReason]})]})]}),b.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>x(b.id),disabled:s===b.id,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition disabled:opacity-50",children:[a.jsx(xr,{size:16}),s===b.id?"Approving...":"Approve"]}),a.jsxs("button",{onClick:()=>p(b),disabled:s===b.id,className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition disabled:opacity-50",children:[a.jsx(Ts,{size:16}),s===b.id?"Rejecting...":"Reject"]})]}),b.status!=="pending"&&a.jsx("span",{className:`badge ${b.status==="approved"?"badge-success":"bg-red-100 text-red-800"}`,children:b.status.toUpperCase()})]})},b.id)),m.length===0&&a.jsxs("div",{className:"card text-center py-12",children:[a.jsx(In,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No ",r!=="all"?r:""," credit requests found."]})]})]}),c&&d&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"bg-gradient-to-r from-red-500 to-red-600 p-6 text-white flex items-center gap-3",children:[a.jsx(un,{className:"w-6 h-6"}),a.jsx("h3",{className:"text-xl font-bold",children:"Reject Credit Request"})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Are you sure you want to reject this credit request from ",a.jsx("strong",{children:d.customerName})," for ",a.jsxs("strong",{children:["KSH ",d.amount?.toLocaleString()]}),"?"]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Rejection Reason"}),a.jsx("textarea",{placeholder:"Enter reason for rejection...",value:o,onChange:b=>l(b.target.value),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-red-500",rows:"4"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:g,disabled:s!==null,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-bold transition disabled:opacity-50",children:s?"Rejecting...":"Confirm Rejection"}),a.jsx("button",{onClick:()=>{u(!1),l(""),f(null)},disabled:s!==null,className:"flex-1 bg-gray-300 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-400 transition disabled:opacity-50",children:"Cancel"})]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[m.map(b=>a.jsx("div",{className:`card border-l-4 ${y(b.status)}`,children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-4 flex-1",children:[a.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${b.status==="pending"?"bg-orange-600":b.status==="approved"?"bg-green-600":"bg-red-600"}`,children:v(b.status)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-lg",children:b.customerName}),a.jsx("p",{className:"text-sm text-gray-600",children:getProductName(b.productId)}),a.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[a.jsxs("span",{children:["Quantity: ",a.jsx("strong",{children:b.quantity})]}),a.jsxs("span",{children:["Amount: ",a.jsxs("strong",{className:"text-green-600",children:["KSH ",b.amount?.toLocaleString()]})]})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Requested: ",new Date(b.createdAt).toLocaleString()]}),b.approvedAt&&a.jsxs("p",{className:"text-xs text-gray-500",children:["Approved: ",new Date(b.approvedAt).toLocaleString()]})]})]}),b.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>x(b.id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[a.jsx(xr,{size:16}),"Approve"]}),a.jsxs("button",{onClick:()=>handleReject(b.id),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[a.jsx(Ts,{size:16}),"Reject"]})]}),b.status!=="pending"&&a.jsx("span",{className:`badge ${b.status==="approved"?"badge-success":"bg-red-100 text-red-800"}`,children:b.status.toUpperCase()})]})},b.id)),m.length===0&&a.jsxs("div",{className:"card text-center py-12",children:[a.jsx(In,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("p",{className:"text-gray-500",children:["No ",r!=="all"?r:""," credit requests found."]})]})]})]})}function SK(){const[e,t]=N.useState([]),[r,n]=N.useState(!0),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState(""),[d,f]=N.useState({name:"",email:"",phone:"",address:"",city:"",country:"",products:""});N.useEffect(()=>{h()},[]);const h=async()=>{try{n(!0);const v=localStorage.getItem("token"),b=await fetch(`${ye}/vendors`,{headers:{Authorization:`Bearer ${v}`}});if(b.ok){const S=await b.json();t(Array.isArray(S)?S:[])}}catch(v){console.error("Failed to load vendors:",v),t([])}finally{n(!1)}},x=()=>{l(null),f({name:"",email:"",phone:"",address:"",city:"",country:"",products:""}),i(!0)},p=v=>{l(v),f(v),i(!0)},g=async v=>{if(window.confirm("Are you sure you want to delete this vendor?"))try{const b=localStorage.getItem("token");(await fetch(`${ye}/vendors/${v}`,{method:"DELETE",headers:{Authorization:`Bearer ${b}`}})).ok?(t(e.filter(j=>j.id!==v)),alert("Vendor deleted successfully")):alert("Failed to delete vendor")}catch(b){console.error("Failed to delete vendor:",b),alert("Failed to delete vendor")}},m=async v=>{v.preventDefault();try{const b=localStorage.getItem("token"),S=o?"PUT":"POST",j=o?`${ye}/vendors/${o.id}`:`${ye}/vendors`,w=await fetch(j,{method:S,headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify(d)});if(w.ok){const P=await w.json();t(o?e.map(A=>A.id===P.id?P:A):[...e,P]),i(!1),alert(o?"Vendor updated":"Vendor added")}else alert("Failed to save vendor")}catch(b){console.error("Failed to save vendor:",b),alert("Failed to save vendor")}},y=e.filter(v=>v.name?.toLowerCase().includes(c.toLowerCase())||v.email?.toLowerCase().includes(c.toLowerCase()));return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Vendors"}),a.jsxs("button",{onClick:x,className:"flex items-center gap-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700",children:[a.jsx(Ge,{className:"w-5 h-5"}),"Add Vendor"]})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Va,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search vendors...",value:c,onChange:v=>u(v.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg"})]})}),r?a.jsx("div",{className:"text-center py-8",children:"Loading vendors..."}):y.length===0?a.jsxs("div",{className:"text-center py-8 text-gray-500",children:["No vendors found. ",e.length===0&&"Add your first vendor to get started."]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(v=>a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.name}),a.jsx("p",{className:"text-sm text-gray-500",children:v.products})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>p(v),className:"p-2 text-blue-600 hover:bg-blue-50 rounded",children:a.jsx(Bn,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>g(v.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",children:a.jsx(tr,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-2 text-sm",children:[v.email&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(ga,{className:"w-4 h-4"}),a.jsx("a",{href:`mailto:${v.email}`,children:v.email})]}),v.phone&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(B1,{className:"w-4 h-4"}),a.jsx("a",{href:`tel:${v.phone}`,children:v.phone})]}),v.address&&a.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[a.jsx(Bk,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[v.address,v.city&&`, ${v.city}`,v.country&&`, ${v.country}`]})]})]})]},v.id))}),s&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold",children:o?"Edit Vendor":"Add Vendor"}),a.jsx("button",{onClick:()=>i(!1),className:"text-gray-500 hover:text-gray-700",children:a.jsx(yr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vendor Name *"}),a.jsx("input",{type:"text",required:!0,value:d.name,onChange:v=>f({...d,name:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., ABC Supplies"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Products/Services"}),a.jsx("input",{type:"text",value:d.products,onChange:v=>f({...d,products:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Vegetables, Fruits"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:d.email,onChange:v=>f({...d,email:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"vendor@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsx("input",{type:"tel",value:d.phone,onChange:v=>f({...d,phone:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"+1 (555) 000-0000"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),a.jsx("input",{type:"text",value:d.address,onChange:v=>f({...d,address:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Street address"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),a.jsx("input",{type:"text",value:d.city,onChange:v=>f({...d,city:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"City"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),a.jsx("input",{type:"text",value:d.country,onChange:v=>f({...d,country:v.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Country"})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-200 rounded-lg hover:bg-gray-300",children:"Cancel"}),a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 text-white bg-blue-600 rounded-lg hover:bg-blue-700",children:[o?"Update":"Add"," Vendor"]})]})]})]})})]})}function bk({onClose:e}){const[t,r]=N.useState([]),[n,s]=N.useState(!0),i=N.useRef({data:null,timestamp:null}),o=3e4;N.useEffect(()=>{l()},[]);const l=async()=>{try{const u=Date.now();if(i.current.data&&i.current.timestamp&&u-i.current.timestamp<o){console.log("ðŸ“¦ Using cached reminders"),r(i.current.data),s(!1);return}const d=localStorage.getItem("token"),f=await fetch(`${ye}/reminders/today`,{headers:{Authorization:`Bearer ${d}`}});if(!f.ok){console.error("API Error:",f.status,f.statusText),r([]),s(!1);return}const h=await f.json();Array.isArray(h)?(i.current.data=h,i.current.timestamp=Date.now(),r(h)):(console.error("Expected array but got:",typeof h,h),r([]))}catch(u){console.error("Failed to fetch reminders:",u),r([])}finally{s(!1)}},c=async u=>{try{const d=localStorage.getItem("token");await fetch(`${ye}/reminders/${u}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({status:"fulfilled"})}),i.current={data:null,timestamp:null},l()}catch(d){console.error("Failed to update reminder:",d)}};return n?null:a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Today's Reminders"}),a.jsx("button",{onClick:e,className:"hover:bg-white/20 p-2 rounded-lg transition",children:a.jsx(yr,{size:24})})]}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(un,{className:"mx-auto h-12 w-12 text-green-500 mb-4"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"No reminders for today"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"You're all caught up!"})]}):t.map(u=>a.jsxs("div",{className:"mb-4 p-4 border-l-4 border-red-500 bg-red-50 rounded-lg flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800",children:u.customerName}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Product ID: ",u.productId]}),a.jsx("p",{className:"text-xs text-gray-500",children:u.frequency})]}),a.jsxs("button",{onClick:()=>c(u.id),className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[a.jsx(xr,{size:18}),"Mark Done"]})]},u.id))})]})})}function vk({onUnlock:e,userType:t="user"}){const[r,n]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState("password"),[c,u]=N.useState(!1),[d,f]=N.useState(""),[h,x]=N.useState(!1),[p,g]=N.useState("2005"),m=JSON.parse(localStorage.getItem("user")||"{}");N.useEffect(()=>{(async()=>{try{const S=await ks.get();S?.screenLockPassword&&g(S.screenLockPassword)}catch(S){console.warn("Failed to load settings, using default password:",S)}})()},[]),N.useEffect(()=>{const b=document.getElementById(o==="password"?"unlock-password":"unlock-pin");b&&b.focus()},[o]);const y=async b=>{b.preventDefault(),b.stopPropagation(),x(!0),f("");try{const S=localStorage.getItem("token");if(!S)throw new Error("No authentication token found");const j=await fetch("https://universal-backend-w0x1.onrender.com/api/auth/unlock-screen",{method:"POST",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"},body:JSON.stringify({pin:s})});if(!j.ok){const P=await j.json();throw j.status===429?new Error(P.message||"Too many failed attempts. Try again later."):j.status===401?new Error(P.message||"Incorrect PIN"):new Error(P.message||"Unlock failed")}const w=await j.json();w.token&&localStorage.setItem("token",w.token),i(""),n(""),e(w)}catch(S){f(S.message||"Unlock failed")}finally{x(!1)}},v=b=>{const S=b.replace(/\D/g,"").slice(0,4);i(S)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50",onClick:b=>b.stopPropagation(),children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-8",onClick:b=>b.stopPropagation(),children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl mx-auto mb-4 flex items-center justify-center ${t==="main_admin"?"bg-gradient-to-br from-red-600 to-orange-600":"bg-gradient-to-br from-blue-600 to-purple-600"}`,children:a.jsx(Ut,{className:"w-8 h-8 text-white"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Screen Locked"}),a.jsx("p",{className:"text-gray-600",children:t==="main_admin"?"Main Admin":m.name||"User"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Enter your ",o," to continue"]})]}),a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enter PIN to unlock"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",id:"unlock-pin",value:s,onChange:b=>v(b.target.value),placeholder:"0000",maxLength:"4",className:"w-full pl-10 pr-4 py-3 border-2 border-gray-300 rounded-lg focus:border-blue-500 focus:outline-none text-center tracking-widest text-2xl",disabled:h})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸ”’ PIN validated securely on server"})]}),d&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:a.jsxs("p",{className:"text-red-700 text-sm font-medium",children:[d.includes("Too many")?"âŒ ":"âš ï¸ ",d]})}),a.jsx("button",{type:"submit",disabled:h||s.length<4,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold py-3 rounded-lg hover:shadow-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"}),"Verifying..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ut,{className:"w-5 h-5"}),"Unlock Screen"]})})]})]})})}function jk(e=6e4){const[t,r]=N.useState(!1),n=N.useRef(Date.now()),s=N.useCallback(()=>{n.current=Date.now(),r(!1)},[]),i=N.useCallback(()=>{r(!1),n.current=Date.now()},[]);return N.useEffect(()=>{const o=["mousedown","mousemove","keypress","scroll","touchstart","click"],l=()=>{n.current=Date.now(),t&&r(!1)};o.forEach(u=>{document.addEventListener(u,l,!0)});const c=setInterval(()=>{Date.now()-n.current>e&&!t&&r(!0)},5e3);return()=>{o.forEach(u=>{document.removeEventListener(u,l,!0)}),clearInterval(c)}},[e,t]),[t,i,s]}function zl(){const{user:e,logout:t,isCashierUserManagementEnabled:r}=Oe(),n=wt(),s=E1(),[i,o]=N.useState(!0),[l,c]=N.useState(!1),[u,d]=N.useState({}),[f,h]=jk(45e3),x=e?.subscription==="pro"||e?.plan==="pro"||e?.subscription==="custom"||e?.plan===3e3,p=e?.businessType||e?.business_type;if(x&&p)return console.log("ðŸš« [AdminDashboard] Pro user detected - redirecting to business dashboard:",p),a.jsx(Ne,{to:`/admin/${p}`,replace:!0});if(x&&!p&&e?.role==="admin")return console.log("ðŸš« [AdminDashboard] Pro user without business type - redirecting to selector"),a.jsx(Ne,{to:"/select-business-type",replace:!0});N.useEffect(()=>{const b=()=>{const j=localStorage.getItem("user");if(j){const w=JSON.parse(j);let P=!1;(w.plan==="ultra"||w.role==="admin")&&(w.active||(w.active=!0,P=!0),w.plan==="ultra"&&w.role!=="admin"&&(w.role="admin",P=!0),w.plan==="ultra"&&(!w.price||w.price!==1600)&&(w.price=1600,P=!0),P&&(localStorage.setItem("user",JSON.stringify(w)),window.dispatchEvent(new Event("storage")),window.dispatchEvent(new Event("localStorageUpdated"))))}};b(),setTimeout(b,100);const S=setTimeout(()=>{c(!0)},1e3);return g(),()=>clearTimeout(S)},[]);const g=async()=>{try{const b=await ks.get();d(b)}catch(b){console.error("Failed to load settings:",b)}},m=async()=>{if(window.confirm("Are you sure you want to clear all sales and expenses data? This action cannot be undone."))try{const b=localStorage.getItem("token"),j=await fetch(`${ye}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${b}`,"Content-Type":"application/json"},body:JSON.stringify({type:"all"})});if(!j.ok){const w=await j.json();throw new Error(w.message||"Failed to clear data")}alert("Data cleared successfully!"),window.location.reload()}catch(b){console.error("Failed to clear data:",b),alert("Failed to clear data: "+b.message)}},y=[{id:"overview",label:"Dashboard",icon:Fk,path:"/admin"},{id:"analytics",label:"Analytics",icon:ft,path:"/admin/analytics"},{id:"sales",label:"Sales",icon:D1,path:"/admin/sales"},{id:"inventory",label:"Inventory",icon:jt,path:"/admin/inventory"},{id:"recipes",label:"Recipes/BOM",icon:qk,path:"/admin/recipes"},{id:"expenses",label:"Expenses",icon:Eo,path:"/admin/expenses"},{id:"vendors",label:"Vendors",icon:Uk,path:"/admin/vendors"},...r()?[{id:"users",label:"Users",icon:Xe,path:"/admin/users"}]:[],{id:"time",label:"Time Tracking",icon:vr,path:"/admin/time"},{id:"reminders",label:"Reminders",icon:cg,path:"/admin/reminders"},{id:"service-fees",label:"Service Fees",icon:Dt,path:"/admin/service-fees"},{id:"discounts",label:"Discounts",icon:fm,path:"/admin/discounts"},{id:"credit-requests",label:"Credit Requests",icon:In,path:"/admin/credit-requests"},{id:"settings",label:"Settings",icon:F1,path:"/admin/settings"}],v=b=>b==="/admin"?s.pathname==="/admin":s.pathname.startsWith(b);return a.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[a.jsxs("aside",{className:`bg-white border-r border-gray-200 transition-all duration-300 ${i?"w-64":"w-20"} flex flex-col`,children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[i&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Admin Panel"}),a.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Ultra Package"})]}),a.jsx("button",{onClick:()=>o(!i),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:i?a.jsx(yr,{className:"w-5 h-5"}):a.jsx(Vk,{className:"w-5 h-5"})})]})}),a.jsx("nav",{className:"flex-1 p-4 space-y-2",children:y.map(b=>{const S=b.icon;return a.jsxs("button",{onClick:()=>n(b.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${v(b.path)?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-700 hover:bg-gray-100"}`,children:[a.jsx(S,{className:"w-5 h-5 flex-shrink-0"}),i&&a.jsx("span",{className:"font-medium",children:b.label})]},b.id)})}),a.jsxs("div",{className:"p-4 border-t border-gray-200 space-y-2",children:[a.jsxs("button",{onClick:()=>window.open("/cashier","_blank"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors",children:[a.jsx(zk,{className:"w-5 h-5 flex-shrink-0"}),i&&a.jsx("span",{className:"font-medium",children:"Open POS"})]}),a.jsxs("button",{onClick:t,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx(Ir,{className:"w-5 h-5 flex-shrink-0"}),i&&a.jsx("span",{className:"font-medium",children:"Logout"})]}),a.jsxs("button",{onClick:m,className:"w-full flex items-center gap-3 px-4 py-3 rounded-lg text-orange-600 hover:bg-orange-50 transition-colors",children:[a.jsx(yr,{className:"w-5 h-5 flex-shrink-0"}),i&&a.jsx("span",{className:"font-medium",children:"Clear Data"})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col",children:[a.jsx("header",{className:"bg-white border-b border-gray-200 px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{children:a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:y.find(b=>v(b.path))?.label||"Dashboard"})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-semibold text-gray-900",children:e?.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e?.email})]}),a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:e?.name?.charAt(0).toUpperCase()})]})]})}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsxs(I1,{children:[a.jsx(xe,{path:"/analytics",element:a.jsx(uK,{})}),a.jsx(xe,{path:"/",element:a.jsx(JV,{})}),a.jsx(xe,{path:"/sales",element:a.jsx(pK,{})}),a.jsx(xe,{path:"/inventory",element:a.jsx(hK,{})}),a.jsx(xe,{path:"/recipes",element:a.jsx(mK,{})}),a.jsx(xe,{path:"/expenses",element:a.jsx(gK,{})}),a.jsx(xe,{path:"/vendors",element:a.jsx(SK,{})}),a.jsx(xe,{path:"/reminders",element:a.jsx(jK,{})}),a.jsx(xe,{path:"/service-fees",element:a.jsx(vK,{})}),a.jsx(xe,{path:"/discounts",element:a.jsx(wK,{})}),a.jsx(xe,{path:"/credit-requests",element:a.jsx(NK,{})}),a.jsx(xe,{path:"/users",element:a.jsx(xK,{})}),a.jsx(xe,{path:"/time",element:a.jsx(yK,{})}),a.jsx(xe,{path:"/settings",element:a.jsx(bK,{})})]})})]}),l&&a.jsx(bk,{onClose:()=>c(!1)}),f&&a.jsx(vk,{onUnlock:h,logo:u.logo})]})}function PK(e){if(!e)return console.warn("[getDashboardRoute] No user provided"),"/auth/login";const t=e.subscription||e.plan||"basic",r=e.role||"cashier",n=e.businessType||e.business_type,s=e.businessRole||e.business_role;if(console.log("[getDashboardRoute] Evaluating:",{subscription:t,role:r,businessType:n,businessRole:s,user:e.email}),r==="owner")return console.log("[getDashboardRoute] â†’ /main-admin (Owner)"),"/main-admin";if((t==="pro"||t==="custom")&&n){if(r==="admin")return console.log(`[getDashboardRoute] â†’ /admin/${n} (Pro Admin - ${n})`),`/admin/${n}`;if(s&&s!=="admin")return console.log(`[getDashboardRoute] â†’ /dashboard/${n}/${s} (Pro ${s})`),`/dashboard/${n}/${s}`;if(r==="cashier")return console.log(`[getDashboardRoute] â†’ /dashboard/${n}/cashier (Pro Cashier - ${n})`),`/dashboard/${n}/cashier`}if((t==="pro"||t==="custom")&&!n){if(r==="admin")return console.log("[getDashboardRoute] â†’ /select-business-type (Pro Admin - No business type)"),"/select-business-type";if(r==="cashier")return console.log("[getDashboardRoute] â†’ /cashier (Pro Cashier - No business type)"),"/cashier"}return r==="admin"?(console.log(`[getDashboardRoute] â†’ /admin (${t} Admin)`),"/admin"):r==="cashier"?(console.log(`[getDashboardRoute] â†’ /cashier (${t} Cashier)`),"/cashier"):(console.warn("[getDashboardRoute] â†’ /dashboard (Fallback)"),"/dashboard")}function AK(e){if(!e)return!1;const t=e.subscription||e.plan;return t==="pro"||t==="custom"}function OK(e){return e?!!(e.businessType||e.business_type):!1}function TK(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(null),[l,c]=N.useState(!1),[u,d]=N.useState(!0),[f,h]=N.useState({medications:"",dosage:"",instructions:"",duration:""});N.useEffect(()=>{x()},[]);const x=async()=>{try{const m=localStorage.getItem("token"),y=await fetch(`${ye}/appointments?doctor_id=${e.id}&status=scheduled`,{headers:{Authorization:`Bearer ${m}`}});if(y.ok){const v=await y.json();r(v)}}catch(m){console.error("Failed to load appointments:",m)}finally{d(!1)}},p=async()=>{try{const m=localStorage.getItem("token");(await fetch(`${ye}/prescriptions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({patient_id:i.id,patient_name:i.name,doctor_id:e.id,doctor_name:e.name,medications:f.medications,dosage:f.dosage,instructions:f.instructions,duration:f.duration,status:"active"})})).ok&&(c(!1),h({medications:"",dosage:"",instructions:"",duration:""}),o(null),alert("Prescription created successfully"))}catch(m){console.error("Failed to create prescription:",m),alert("Failed to create prescription")}},g=t.filter(m=>{const y=new Date(m.appointment_date).toDateString(),v=new Date().toDateString();return y===v});return u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Doctor Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome back, Dr. ",e.name]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Today's Appointments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g.length})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(_r,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Total Patients"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:n.length})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(Xe,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Prescriptions Written"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:"0"})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(q1,{className:"w-6 h-6 text-purple-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Pending Reviews"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:"0"})]}),a.jsx("div",{className:"bg-orange-100 rounded-full p-3",children:a.jsx(U1,{className:"w-6 h-6 text-orange-600"})})]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Today's Schedule"}),a.jsx(vr,{className:"w-5 h-5 text-gray-400"})]}),g.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(_r,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No appointments scheduled for today"})]}):a.jsx("div",{className:"space-y-4",children:g.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:a.jsx(Wl,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:m.patient_name}),a.jsx("p",{className:"text-sm text-gray-600",children:m.reason||"General checkup"})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:new Date(m.appointment_date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),a.jsx("button",{onClick:()=>{o({id:m.patient_id,name:m.patient_name}),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"Write Prescription"})]})]},m.id))})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Write Prescription"}),a.jsx("button",{onClick:()=>{c(!1),o(null)},className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),a.jsx("div",{className:"mb-4",children:a.jsxs("p",{className:"text-gray-600",children:["Patient: ",a.jsx("span",{className:"font-medium text-gray-900",children:i?.name})]})}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medications"}),a.jsx("input",{type:"text",value:f.medications,onChange:m=>h({...f,medications:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Amoxicillin, Ibuprofen"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dosage"}),a.jsx("input",{type:"text",value:f.dosage,onChange:m=>h({...f,dosage:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 500mg twice daily"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instructions"}),a.jsx("textarea",{value:f.instructions,onChange:m=>h({...f,instructions:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Take with food, avoid alcohol, etc."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration"}),a.jsx("input",{type:"text",value:f.duration,onChange:m=>h({...f,duration:m.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 7 days, 2 weeks"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>{c(!1),o(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:p,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Prescription"})]})]})})]})}function T1(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState(!1),[i,o]=N.useState(!0),[l,c]=N.useState({patient_name:"",patient_phone:"",patient_email:"",appointment_date:"",appointment_time:"",reason:"",doctor_id:""});N.useEffect(()=>{u()},[]);const u=async()=>{try{const p=localStorage.getItem("token"),g=await fetch(`${ye}/appointments`,{headers:{Authorization:`Bearer ${p}`}});if(g.ok){const m=await g.json();r(m)}}catch(p){console.error("Failed to load appointments:",p)}finally{o(!1)}},d=async()=>{try{const p=localStorage.getItem("token"),g=`${l.appointment_date}T${l.appointment_time}:00`;(await fetch(`${ye}/appointments`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({patient_name:l.patient_name,patient_phone:l.patient_phone,patient_email:l.patient_email,appointment_date:g,reason:l.reason,doctor_id:l.doctor_id||null,status:"scheduled"})})).ok&&(s(!1),c({patient_name:"",patient_phone:"",patient_email:"",appointment_date:"",appointment_time:"",reason:"",doctor_id:""}),u(),alert("Appointment scheduled successfully"))}catch(p){console.error("Failed to create appointment:",p),alert("Failed to schedule appointment")}},f=async(p,g)=>{try{const m=localStorage.getItem("token");(await fetch(`${ye}/appointments/${p}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify({status:g})})).ok&&u()}catch(m){console.error("Failed to update appointment:",m)}},h=t.filter(p=>{const g=new Date(p.appointment_date).toDateString(),m=new Date().toDateString();return g===m}),x=t.filter(p=>new Date(p.appointment_date)>new Date&&p.status==="scheduled");return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Reception Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome, ",e.name]})]}),a.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Wk,{className:"w-5 h-5"}),"New Appointment"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Today's Appointments"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:h.length})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(_r,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Upcoming"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:x.length})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(vr,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Completed Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:h.filter(p=>p.status==="completed").length})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(xr,{className:"w-6 h-6 text-purple-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Cancelled"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:h.filter(p=>p.status==="cancelled").length})]}),a.jsx("div",{className:"bg-red-100 rounded-full p-3",children:a.jsx(Ts,{className:"w-6 h-6 text-red-600"})})]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Today's Schedule"}),h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(_r,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No appointments scheduled for today"})]}):a.jsx("div",{className:"space-y-4",children:h.map(p=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:a.jsx(Xe,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:p.patient_name}),a.jsx("p",{className:"text-sm text-gray-600",children:p.reason||"General checkup"}),a.jsxs("div",{className:"flex items-center gap-4 mt-1",children:[p.patient_phone&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(B1,{className:"w-3 h-3"}),p.patient_phone]}),p.patient_email&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(ga,{className:"w-3 h-3"}),p.patient_email]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("p",{className:"text-sm text-gray-600",children:new Date(p.appointment_date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}),a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p.status==="completed"?"bg-green-100 text-green-700":p.status==="cancelled"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:p.status}),p.status==="scheduled"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>f(p.id,"completed"),className:"bg-green-600 text-white px-3 py-1 rounded text-xs hover:bg-green-700 transition-colors",children:"Complete"}),a.jsx("button",{onClick:()=>f(p.id,"cancelled"),className:"bg-red-600 text-white px-3 py-1 rounded text-xs hover:bg-red-700 transition-colors",children:"Cancel"})]})]})]},p.id))})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Schedule New Appointment"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Patient Name *"}),a.jsx("input",{type:"text",value:l.patient_name,onChange:p=>c({...l,patient_name:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter patient name"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:l.patient_phone,onChange:p=>c({...l,patient_phone:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+254 XXX XXX XXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:l.patient_email,onChange:p=>c({...l,patient_email:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"patient@example.com"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),a.jsx("input",{type:"date",value:l.appointment_date,onChange:p=>c({...l,appointment_date:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),a.jsx("input",{type:"time",value:l.appointment_time,onChange:p=>c({...l,appointment_time:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Visit"}),a.jsx("textarea",{value:l.reason,onChange:p=>c({...l,reason:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",placeholder:"Enter reason for visit"})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Schedule Appointment"})]})]})})]})}function kK(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(!0),[l,c]=N.useState("");N.useEffect(()=>{u(),d()},[]);const u=async()=>{try{const g=localStorage.getItem("token"),m=await fetch(`${ye}/prescriptions?status=active`,{headers:{Authorization:`Bearer ${g}`}});if(m.ok){const y=await m.json();r(y)}}catch(g){console.error("Failed to load prescriptions:",g)}},d=async()=>{try{const g=localStorage.getItem("token"),m=await fetch(`${ye}/products`,{headers:{Authorization:`Bearer ${g}`}});if(m.ok){const y=await m.json();s(y)}}catch(g){console.error("Failed to load products:",g)}finally{o(!1)}},f=async(g,m)=>{try{const y=localStorage.getItem("token");(await fetch(`${ye}/prescriptions/${g}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({status:"dispensed",dispensed_at:new Date().toISOString(),dispensed_by:e.id})})).ok&&(u(),alert("Prescription dispensed successfully"))}catch(y){console.error("Failed to dispense prescription:",y),alert("Failed to dispense prescription")}},h=t.filter(g=>g.patient_name.toLowerCase().includes(l.toLowerCase())||g.medications.toLowerCase().includes(l.toLowerCase())),x=t.filter(g=>g.status==="active"),p=t.filter(g=>{if(g.status!=="dispensed"||!g.dispensed_at)return!1;const m=new Date(g.dispensed_at).toDateString(),y=new Date().toDateString();return m===y});return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pharmacy Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome, ",e.name]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Active Prescriptions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:x.length})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(q1,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Dispensed Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:p.length})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(xr,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Stock Items"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:n.length})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(jt,{className:"w-6 h-6 text-purple-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Low Stock Alerts"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:n.filter(g=>g.quantity<10).length})]}),a.jsx("div",{className:"bg-orange-100 rounded-full p-3",children:a.jsx(un,{className:"w-6 h-6 text-orange-600"})})]})})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(Va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:l,onChange:g=>c(g.target.value),placeholder:"Search prescriptions by patient name or medication...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Pending Prescriptions"}),h.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(hm,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No prescriptions found"})]}):a.jsx("div",{className:"space-y-4",children:h.map(g=>a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:a.jsx(hm,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:g.patient_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Prescribed by Dr. ",g.doctor_name]})]})]}),a.jsxs("div",{className:"ml-11 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Medications"}),a.jsx("p",{className:"text-sm text-gray-900",children:g.medications})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Dosage"}),a.jsx("p",{className:"text-sm text-gray-900",children:g.dosage})]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Instructions"}),a.jsx("p",{className:"text-sm text-gray-900",children:g.instructions})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Duration"}),a.jsx("p",{className:"text-sm text-gray-900",children:g.duration})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Date Prescribed"}),a.jsx("p",{className:"text-sm text-gray-900",children:new Date(g.created_at).toLocaleDateString()})]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${g.status==="dispensed"?"bg-green-100 text-green-700":g.status==="cancelled"?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}`,children:g.status}),g.status==="active"&&a.jsxs("button",{onClick:()=>f(g.id,g.medications),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),"Dispense"]}),g.status==="dispensed"&&g.dispensed_at&&a.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[a.jsx(vr,{className:"w-3 h-3"}),new Date(g.dispensed_at).toLocaleString()]})]})]})},g.id))})]})]})}function CK(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState([]),[l,c]=N.useState(null),[u,d]=N.useState(!1),[f,h]=N.useState(!0),[x,p]=N.useState([]);N.useEffect(()=>{g(),m(),y()},[]);const g=async()=>{try{const A=localStorage.getItem("token"),O=await fetch(`${ye}/table-orders`,{headers:{Authorization:`Bearer ${A}`}});if(O.ok){const C=await O.json(),k={};C.forEach(T=>{k[T.table_number]||(k[T.table_number]={table_number:T.table_number,orders:[],total:0,status:T.status}),k[T.table_number].orders.push(T),T.status!=="paid"&&(k[T.table_number].total+=T.total_amount)}),r(Object.values(k))}}catch(A){console.error("Failed to load tables:",A)}},m=async()=>{try{const A=localStorage.getItem("token"),O=await fetch(`${ye}/table-orders`,{headers:{Authorization:`Bearer ${A}`}});if(O.ok){const C=await O.json();s(C)}}catch(A){console.error("Failed to load orders:",A)}},y=async()=>{try{const A=localStorage.getItem("token"),O=await fetch(`${ye}/products?category=drinks`,{headers:{Authorization:`Bearer ${A}`}});if(O.ok){const C=await O.json();o(C)}}catch(A){console.error("Failed to load products:",A)}finally{h(!1)}},v=A=>{const O=x.find(C=>C.product_id===A.id);p(O?x.map(C=>C.product_id===A.id?{...C,quantity:C.quantity+1}:C):[...x,{product_id:A.id,product_name:A.name,price:A.price,quantity:1}])},b=async()=>{if(!(!l||x.length===0))try{const A=localStorage.getItem("token"),O=x.reduce((k,T)=>k+T.price*T.quantity,0);(await fetch(`${ye}/table-orders`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({table_number:l,items:x,total_amount:O,status:"pending",waiter_id:e.id,waiter_name:e.name})})).ok&&(d(!1),c(null),p([]),g(),m(),alert("Order created successfully"))}catch(A){console.error("Failed to create order:",A),alert("Failed to create order")}},S=async(A,O)=>{try{const C=localStorage.getItem("token");(await fetch(`${ye}/table-orders/${A}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${C}`},body:JSON.stringify({status:O})})).ok&&(g(),m())}catch(C){console.error("Failed to update order:",C)}},j=n.filter(A=>A.status==="pending"||A.status==="preparing"),w=n.filter(A=>{if(A.status!=="paid")return!1;const O=new Date(A.created_at).toDateString(),C=new Date().toDateString();return O===C}),P=w.reduce((A,O)=>A+O.total_amount,0);return f?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bar Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome, ",e.name]})]}),a.jsxs("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Ge,{className:"w-5 h-5"}),"New Order"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Active Orders"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:j.length})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(vr,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Occupied Tables"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:t.filter(A=>A.status!=="paid").length})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(Xe,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Today's Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["KES ",P.toLocaleString()]})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(Dt,{className:"w-6 h-6 text-purple-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Completed Orders"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:w.length})]}),a.jsx("div",{className:"bg-orange-100 rounded-full p-3",children:a.jsx(gr,{className:"w-6 h-6 text-orange-600"})})]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Active Tables"}),t.filter(A=>A.status!=="paid").length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Hk,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No active tables"})]}):a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:t.filter(A=>A.status!=="paid").map(A=>a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-4 hover:shadow-lg transition-shadow cursor-pointer",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("p",{className:"font-bold text-gray-900",children:["Table ",A.table_number]}),a.jsx(Xe,{className:"w-4 h-4 text-blue-600"})]}),a.jsxs("p",{className:"text-sm text-gray-600",children:[A.orders.length," orders"]}),a.jsxs("p",{className:"text-lg font-bold text-blue-600 mt-2",children:["KES ",A.total.toLocaleString()]}),a.jsx("div",{className:"flex gap-2 mt-3",children:a.jsx("button",{onClick:()=>{const O=A.orders[A.orders.length-1];O&&S(O.id,"paid")},className:"flex-1 bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700 transition-colors",children:"Pay"})})]},A.table_number))})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-4xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Create New Order"}),a.jsx("button",{onClick:()=>{d(!1),p([]),c(null)},className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table Number *"}),a.jsx("input",{type:"number",value:l||"",onChange:A=>c(A.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter table number"})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Select Items"}),a.jsx("div",{className:"grid grid-cols-3 gap-3 max-h-60 overflow-y-auto",children:i.map(A=>a.jsxs("button",{onClick:()=>v(A),className:"bg-gray-50 hover:bg-blue-50 p-3 rounded-lg text-left transition-colors",children:[a.jsx("p",{className:"font-medium text-gray-900 text-sm",children:A.name}),a.jsxs("p",{className:"text-blue-600 font-bold text-sm",children:["KES ",A.price]})]},A.id))})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Order Items"}),x.length===0?a.jsx("p",{className:"text-gray-500 text-center py-4",children:"No items added"}):a.jsx("div",{className:"space-y-2",children:x.map((A,O)=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:A.product_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["KES ",A.price," Ã— ",A.quantity]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>{A.quantity>1&&p(x.map(C=>C.product_id===A.product_id?{...C,quantity:C.quantity-1}:C))},className:"bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"-"}),a.jsx("span",{className:"font-medium",children:A.quantity}),a.jsx("button",{onClick:()=>{p(x.map(C=>C.product_id===A.product_id?{...C,quantity:C.quantity+1}:C))},className:"bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded",children:"+"}),a.jsx("button",{onClick:()=>{p(x.filter(C=>C.product_id!==A.product_id))},className:"text-red-600 hover:text-red-700",children:a.jsx(yr,{className:"w-5 h-5"})})]})]},O))})]}),a.jsx("div",{className:"border-t pt-4 mb-4",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"font-bold text-gray-900",children:"Total:"}),a.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:["KES ",x.reduce((A,O)=>A+O.price*O.quantity,0).toLocaleString()]})]})}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>{d(!1),p([]),c(null)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:b,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Order"})]})]})})]})}function _K(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState(!1),[i,o]=N.useState(!0),[l,c]=N.useState({guest_name:"",guest_phone:"",guest_email:"",room_number:"",room_type:"",check_in:"",check_out:"",guests_count:1,rate_per_night:0});N.useEffect(()=>{u()},[]);const u=async()=>{try{const y=localStorage.getItem("token"),v=await fetch(`${ye}/room-bookings`,{headers:{Authorization:`Bearer ${y}`}});if(v.ok){const b=await v.json();r(b)}}catch(y){console.error("Failed to load bookings:",y)}finally{o(!1)}},d=async()=>{try{const y=localStorage.getItem("token"),v=new Date(l.check_in),b=new Date(l.check_out),j=Math.ceil((b-v)/(1e3*60*60*24))*l.rate_per_night;(await fetch(`${ye}/room-bookings`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({guest_name:l.guest_name,guest_phone:l.guest_phone,guest_email:l.guest_email,room_number:l.room_number,room_type:l.room_type,check_in:l.check_in,check_out:l.check_out,guests_count:l.guests_count,rate_per_night:l.rate_per_night,total_amount:j,status:"confirmed",booked_by:e.id})})).ok&&(s(!1),c({guest_name:"",guest_phone:"",guest_email:"",room_number:"",room_type:"",check_in:"",check_out:"",guests_count:1,rate_per_night:0}),u(),alert("Booking created successfully"))}catch(y){console.error("Failed to create booking:",y),alert("Failed to create booking")}},f=async y=>{try{const v=localStorage.getItem("token");(await fetch(`${ye}/room-bookings/${y}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({status:"checked_in"})})).ok&&u()}catch(v){console.error("Failed to check in:",v)}},h=async y=>{try{const v=localStorage.getItem("token");(await fetch(`${ye}/room-bookings/${y}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${v}`},body:JSON.stringify({status:"checked_out"})})).ok&&(u(),alert("Guest checked out successfully"))}catch(v){console.error("Failed to check out:",v)}},x=t.filter(y=>y.status==="confirmed"||y.status==="checked_in"),p=t.filter(y=>{if(y.status!=="checked_in")return!1;const v=new Date(y.check_in).toDateString(),b=new Date().toDateString();return v===b}),g=t.filter(y=>y.status==="checked_in").length,m=t.filter(y=>{const v=new Date(y.check_in).toDateString(),b=new Date().toDateString();return v===b&&y.status!=="cancelled"}).reduce((y,v)=>y+v.total_amount,0);return i?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",children:[a.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Hotel Dashboard"}),a.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome, ",e.name]})]}),a.jsxs("button",{onClick:()=>s(!0),className:"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[a.jsx(Ge,{className:"w-5 h-5"}),"New Booking"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Occupied Rooms"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:g})]}),a.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:a.jsx(mm,{className:"w-6 h-6 text-blue-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Active Bookings"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:x.length})]}),a.jsx("div",{className:"bg-green-100 rounded-full p-3",children:a.jsx(_r,{className:"w-6 h-6 text-green-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Today's Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:["KES ",m.toLocaleString()]})]}),a.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:a.jsx(Dt,{className:"w-6 h-6 text-purple-600"})})]})}),a.jsx(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-600 text-sm",children:"Check-ins Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:p.length})]}),a.jsx("div",{className:"bg-orange-100 rounded-full p-3",children:a.jsx(Xe,{className:"w-6 h-6 text-orange-600"})})]})})]}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Current Bookings"}),x.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(on,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),a.jsx("p",{className:"text-gray-500",children:"No active bookings"})]}):a.jsx("div",{className:"space-y-4",children:x.map(y=>{const v=new Date(y.check_in),b=new Date(y.check_out),S=Math.ceil((b-v)/(1e3*60*60*24));return a.jsx("div",{className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"bg-blue-100 rounded-full p-2",children:a.jsx(on,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:y.guest_name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Room ",y.room_number," â€¢ ",y.room_type]})]})]}),a.jsxs("div",{className:"ml-11 grid grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Check-in"}),a.jsx("p",{className:"text-sm text-gray-900",children:v.toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Check-out"}),a.jsx("p",{className:"text-sm text-gray-900",children:b.toLocaleDateString()})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Duration"}),a.jsxs("p",{className:"text-sm text-gray-900",children:[S," night",S>1?"s":""]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Guests"}),a.jsx("p",{className:"text-sm text-gray-900",children:y.guests_count})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Rate/Night"}),a.jsxs("p",{className:"text-sm text-gray-900",children:["KES ",y.rate_per_night?.toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Total"}),a.jsxs("p",{className:"text-sm font-bold text-blue-600",children:["KES ",y.total_amount?.toLocaleString()]})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-2 items-end",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${y.status==="checked_in"?"bg-green-100 text-green-700":y.status==="confirmed"?"bg-blue-100 text-blue-700":y.status==="checked_out"?"bg-gray-100 text-gray-700":"bg-red-100 text-red-700"}`,children:y.status.replace("_"," ")}),y.status==="confirmed"&&a.jsxs("button",{onClick:()=>f(y.id),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors text-sm flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),"Check In"]}),y.status==="checked_in"&&a.jsxs("button",{onClick:()=>h(y.id),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm flex items-center gap-2",children:[a.jsx(xr,{className:"w-4 h-4"}),"Check Out"]})]})]})},y.id)})})]}),n&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-white rounded-xl shadow-xl max-w-2xl w-full p-6 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"New Booking"}),a.jsx("button",{onClick:()=>s(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Guest Name *"}),a.jsx("input",{type:"text",value:l.guest_name,onChange:y=>c({...l,guest_name:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter guest name"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:l.guest_phone,onChange:y=>c({...l,guest_phone:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"+254 XXX XXX XXX"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:l.guest_email,onChange:y=>c({...l,guest_email:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"guest@example.com"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Number *"}),a.jsx("input",{type:"text",value:l.room_number,onChange:y=>c({...l,room_number:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"101"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Room Type *"}),a.jsxs("select",{value:l.room_type,onChange:y=>c({...l,room_type:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"Select room type"}),a.jsx("option",{value:"Single",children:"Single"}),a.jsx("option",{value:"Double",children:"Double"}),a.jsx("option",{value:"Suite",children:"Suite"}),a.jsx("option",{value:"Deluxe",children:"Deluxe"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-in Date *"}),a.jsx("input",{type:"date",value:l.check_in,onChange:y=>c({...l,check_in:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Check-out Date *"}),a.jsx("input",{type:"date",value:l.check_out,onChange:y=>c({...l,check_out:y.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Guests"}),a.jsx("input",{type:"number",value:l.guests_count,onChange:y=>c({...l,guests_count:parseInt(y.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"1"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rate per Night (KES)"}),a.jsx("input",{type:"number",value:l.rate_per_night,onChange:y=>c({...l,rate_per_night:parseFloat(y.target.value)}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0"})]})]})]}),a.jsxs("div",{className:"flex gap-3 mt-6",children:[a.jsx("button",{onClick:()=>s(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:d,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Booking"})]})]})})]})}function EK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState("overview"),[i,o]=N.useState(!1),[l,c]=N.useState({totalProducts:0,lowStockItems:0,todaySales:0,activeCashiers:0});N.useEffect(()=>{if(!e){r("/auth/login");return}u()},[e,r]);const u=async()=>{o(!0);try{c({totalProducts:0,lowStockItems:0,todaySales:0,activeCashiers:0})}catch(h){console.error("Error loading dashboard data:",h)}finally{o(!1)}},d=()=>{t(),r("/auth/login")},f=[{id:"overview",label:"Overview",icon:ft},{id:"products",label:"Products",icon:jt},{id:"cashiers",label:"Cashiers",icon:Xe},{id:"reports",label:"Reports",icon:Dt},{id:"settings",label:"Settings",icon:F1}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("header",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Supermarket Admin Dashboard"}),a.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[e?.name," â€¢ ",e?.email]})]}),a.jsxs("button",{onClick:d,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[a.jsx(Ir,{className:"w-4 h-4"}),a.jsx("span",{children:"Logout"})]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Products"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:l.totalProducts})]}),a.jsx(jt,{className:"w-12 h-12 text-blue-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock Items"}),a.jsx("p",{className:"text-3xl font-bold text-orange-600",children:l.lowStockItems})]}),a.jsx(un,{className:"w-12 h-12 text-orange-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Today's Sales"}),a.jsxs("p",{className:"text-3xl font-bold text-green-600",children:["KES ",l.todaySales.toLocaleString()]})]}),a.jsx(Dt,{className:"w-12 h-12 text-green-500"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Active Cashiers"}),a.jsx("p",{className:"text-3xl font-bold text-purple-600",children:l.activeCashiers})]}),a.jsx(Xe,{className:"w-12 h-12 text-purple-500"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow mb-6",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex -mb-px",children:f.map(h=>{const x=h.icon;return a.jsxs("button",{onClick:()=>s(h.id),className:`flex items-center gap-2 px-6 py-4 border-b-2 font-medium text-sm transition-colors ${n===h.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(x,{className:"w-5 h-5"}),h.label]},h.id)})})}),a.jsxs("div",{className:"p-6",children:[n==="overview"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Welcome to your Supermarket Dashboard"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Manage your retail operations efficiently with our comprehensive tools."}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Quick Actions"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add new products to inventory"]}),a.jsxs("li",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Xe,{className:"w-4 h-4"}),"Manage cashier accounts"]}),a.jsxs("li",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(ft,{className:"w-4 h-4"}),"View sales reports"]})]})]}),a.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"Recent Activity"}),a.jsx("p",{className:"text-sm text-gray-500",children:"No recent activity"})]})]})]}),n==="products"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Product Inventory"}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Product"]})]}),a.jsxs("div",{className:"text-gray-600",children:[a.jsx("p",{children:"Product management interface will appear here."}),a.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Features: Barcode scanning, stock management, pricing, and more."})]})]}),n==="cashiers"&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Cashier Management"}),a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Cashier"]})]}),a.jsx("div",{className:"text-gray-600",children:a.jsx("p",{children:"Cashier management interface will appear here."})})]}),n==="reports"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Sales Reports"}),a.jsx("div",{className:"text-gray-600",children:a.jsx("p",{children:"Detailed sales analytics and reports will appear here."})})]}),n==="settings"&&a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Settings"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),a.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter business name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),a.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]})]})]})]})]})]})}function IK(){const{user:e}=Oe(),t=wt();if(N.useEffect(()=>{if(!e){t("/auth/login");return}if(!AK(e)){e.role==="admin"?(console.log("[PRO ROUTER] Not a Pro user - redirecting admin to /admin"),t("/admin")):e.role==="cashier"?(console.log("[PRO ROUTER] Not a Pro user - redirecting cashier to /cashier"),t("/cashier")):(console.log("[PRO ROUTER] Not a Pro user - redirecting to /dashboard"),t("/dashboard"));return}if(!OK(e)&&e.role==="admin"){console.log("[PRO ROUTER] Pro admin without business type - redirecting to /select-business-type"),t("/select-business-type");return}console.log("[PRO ROUTER] Pro user with business type:",e.businessType||e.business_type,"- rendering dashboard")},[e,t]),!e)return null;const r=e.businessType||e.business_type||localStorage.getItem("businessType")||localStorage.getItem("selectedBusinessType"),n=e.businessRole||e.business_role||e.role;if(console.log("[PRO PLAN ROUTER] Business Type:",r,"Role:",n,"User:",e),!r)return a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Business Type Not Set"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Please select your business type to continue."}),a.jsx("button",{onClick:()=>t("/select-business-type"),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Select Business Type"})]})});if(r==="clinic")switch(n){case"doctor":return a.jsx(TK,{});case"reception":return a.jsx(T1,{});case"pharmacy":return a.jsx(kK,{});default:return a.jsx(T1,{})}return r==="bar"||r==="restaurant"?a.jsx(CK,{}):r==="hotel"?a.jsx(_K,{}):r==="supermarket"||r==="retail"?a.jsx(EK,{}):r==="hospital"||r==="pharmacy"||r==="petrol"||r==="school"||r==="gym"||r==="salon"?(console.log(`[PRO PLAN ROUTER] Using standard admin dashboard for ${r}`),a.jsx(zl,{})):(console.warn("[PRO PLAN ROUTER] Unknown business type, using default admin dashboard"),a.jsx(zl,{}))}function DK(){const{user:e}=Oe(),t=wt(),[r,n]=N.useState(!1),[s,i]=N.useState(null),[o,l]=N.useState([]),[c,u]=N.useState(""),d={Utensils:dm,Hotel:on,Stethoscope:Wl,Building2:Yk,ShoppingCart:Br,ChefHat:dm,Pill:hm,Fuel:V1,GraduationCap:Xk,Dumbbell:Gk,Scissors:Kk,Store:pm};N.useEffect(()=>{if(!e||!["pro","custom"].includes(e.plan)){t("/admin");return}if(e.businessType||e.business_type){t("/pro-dashboard");return}f()},[e,t]);const f=async()=>{try{const p=localStorage.getItem("token"),g=await fetch("http://localhost:5000/api/business/business-types",{headers:{Authorization:`Bearer ${p}`}});if(!g.ok)throw new Error("Failed to load business types");const m=await g.json();m.success&&l(m.businessTypes)}catch(p){console.error("Error loading business types:",p),u("Failed to load business types. Please try again.")}},h=p=>{i(p)},x=async()=>{if(!s){u("Please select a business type");return}n(!0),u("");try{const p=localStorage.getItem("token"),g=await fetch("http://localhost:5000/api/business/select",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({business_type:s.id})}),m=await g.json();if(g.ok&&m.success){const y=localStorage.getItem("user");if(y){const v=JSON.parse(y);v.businessType=s.id,v.business_type=s.id,localStorage.setItem("user",JSON.stringify(v))}localStorage.setItem("businessType",s.id),localStorage.setItem("selectedBusinessType",s.id),console.log("âœ… Business type selected:",s.id),t("/pro-dashboard")}else u(m.error||"Failed to set business type")}catch(p){console.error("Error setting business type:",p),u("An error occurred. Please try again.")}finally{n(!1)}};return e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-purple-50 py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-6xl mx-auto",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Choose Your Business Type"}),a.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Select the business type that best describes your operation. This will customize your dashboard and features."}),a.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-blue-100 text-blue-800 rounded-full",children:[a.jsx(gr,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:"Pro Plan Activated"})]})]}),c&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800 text-center",children:c}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:o.map(p=>{const g=d[p.icon]||pm,m=s?.id===p.id;return a.jsxs("button",{onClick:()=>h(p),className:`relative p-6 rounded-xl border-2 transition-all ${m?"border-blue-500 bg-blue-50 shadow-lg scale-105":"border-gray-200 bg-white hover:border-blue-300 hover:shadow-md"}`,children:[m&&a.jsx("div",{className:"absolute top-4 right-4 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx(gr,{className:"w-4 h-4 text-white"})}),a.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center mb-4 ${m?"bg-blue-100":"bg-gray-100"}`,children:a.jsx(g,{className:`w-8 h-8 ${m?"text-blue-600":"text-gray-600"}`})}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:p.name}),a.jsx("p",{className:"text-sm text-gray-600",children:p.description})]},p.id)})}),s&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8 animate-fade-in",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:s.name}),a.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:x,disabled:r,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed font-semibold shadow-md hover:shadow-lg",children:r?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Setting up..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("span",{children:"Confirm & Continue"}),a.jsx(Io,{className:"w-5 h-5"})]})}),a.jsx("button",{onClick:()=>i(null),disabled:r,className:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Change Selection"})]})]}),a.jsx("div",{className:"text-center text-gray-500 text-sm",children:a.jsx("p",{children:"You can change your business type later from the settings menu."})})]})}):null}function k1(){const e=wt(),{user:t}=Oe(),[r,n]=N.useState({x:0,y:0}),[s,i]=N.useState(!1),{scrollY:o}=aK(),l=N.useRef(null),c=N.useRef(null),u=_o(o,[0,500],[0,150]),d=_o(o,[0,300],[1,0]),f=_o(o,[0,800],[0,200]);N.useEffect(()=>{const p=g=>{n({x:(g.clientX-window.innerWidth/2)/50,y:(g.clientY-window.innerHeight/2)/50})};return window.addEventListener("mousemove",p),()=>window.removeEventListener("mousemove",p)},[]);const h=[{icon:is,title:"ðŸ¤– AI-Powered Forecasting",description:"GPT-4 powered sales predictions and intelligent business insights that learn from your data",color:"from-[#8b5a2b] via-[#00ff88] to-[#ff6b35]",badge:"NEW",highlighted:!0},{icon:Do,title:"Real-Time Sync",description:"Instant inventory updates across all devices with WebSocket technology",color:"from-[#8b5a2b] to-[#00ff88]"},{icon:nn,title:"Bank-Level Security",description:"Enterprise-grade encryption and role-based access control",color:"from-[#cd853f] to-[#ff6b35]"},{icon:ft,title:"Smart Analytics",description:"AI-driven insights to boost revenue and optimize inventory automatically",color:"from-[#8b5a2b] via-[#00ff88] to-[#ff6b35]"},{icon:jt,title:"Intelligent Inventory",description:"AI-powered stock predictions with automated reordering and anomaly detection",color:"from-[#d2691e] to-[#00ff88]"},{icon:Xe,title:"Staff Performance AI",description:"Automated performance analysis and personalized coaching recommendations",color:"from-[#cd853f] to-[#8b5a2b]",badge:"PRO"},{icon:og,title:"Predictive Reports",description:"Machine learning forecasts with trend analysis and growth projections",color:"from-[#ff6b35] to-[#cd853f]"}],x=[{value:"99.9%",label:"Uptime SLA"},{value:"<50ms",label:"Response Time"},{value:"10K+",label:"Businesses"},{value:"24/7",label:"Support"}];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#2c1810] via-[#3d2817] to-[#1a0f08] overflow-hidden relative",children:[a.jsx("div",{className:"fixed inset-0 opacity-10 pointer-events-none",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsx("defs",{children:a.jsxs("pattern",{id:"africanPattern",x:"0",y:"0",width:"120",height:"120",patternUnits:"userSpaceOnUse",children:[a.jsx("path",{d:"M 60 10 L 70 30 L 90 30 L 75 45 L 80 65 L 60 50 L 40 65 L 45 45 L 30 30 L 50 30 Z",fill:"rgba(139, 90, 43, 0.3)"}),a.jsx("circle",{cx:"20",cy:"20",r:"3",fill:"rgba(205, 133, 63, 0.4)"}),a.jsx("circle",{cx:"100",cy:"20",r:"3",fill:"rgba(205, 133, 63, 0.4)"}),a.jsx("circle",{cx:"20",cy:"100",r:"3",fill:"rgba(205, 133, 63, 0.4)"}),a.jsx("circle",{cx:"100",cy:"100",r:"3",fill:"rgba(205, 133, 63, 0.4)"}),a.jsx("rect",{x:"55",y:"85",width:"10",height:"10",fill:"rgba(139, 90, 43, 0.2)",transform:"rotate(45 60 90)"})]})}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#africanPattern)"})]})}),a.jsxs(ee.div,{style:{y:f},className:"fixed inset-0 pointer-events-none opacity-20",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#8b5a2b]/20 via-transparent to-[#cd853f]/20"}),a.jsxs("svg",{className:"absolute inset-0 w-full h-full",children:[a.jsxs("defs",{children:[a.jsxs("pattern",{id:"woodGrain",width:"80",height:"80",patternUnits:"userSpaceOnUse",children:[a.jsx("path",{d:"M 0 40 Q 20 35, 40 40 T 80 40",fill:"none",stroke:"url(#woodGradient)",strokeWidth:"0.5",opacity:"0.4"}),a.jsx("path",{d:"M 0 45 Q 20 42, 40 45 T 80 45",fill:"none",stroke:"url(#woodGradient)",strokeWidth:"0.3",opacity:"0.3"})]}),a.jsxs("linearGradient",{id:"woodGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#8b5a2b",stopOpacity:"0.6"}),a.jsx("stop",{offset:"50%",stopColor:"#cd853f",stopOpacity:"0.4"}),a.jsx("stop",{offset:"100%",stopColor:"#d2691e",stopOpacity:"0.5"})]})]}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#woodGrain)"})]})]}),a.jsxs("div",{className:"fixed inset-0 pointer-events-none",children:[a.jsx(ee.div,{animate:{x:[0,80,0],y:[0,-80,0]},transition:{duration:25,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/4 left-1/4 w-96 h-96 bg-gradient-to-br from-[#8b5a2b]/30 via-[#00ff88]/10 to-transparent rounded-full blur-3xl"}),a.jsx(ee.div,{animate:{x:[0,-80,0],y:[0,80,0]},transition:{duration:30,repeat:1/0,ease:"easeInOut"},className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-gradient-to-br from-[#cd853f]/30 via-[#ff6b35]/10 to-transparent rounded-full blur-3xl"}),a.jsx(ee.div,{animate:{x:[0,60,0],y:[0,-60,0]},transition:{duration:20,repeat:1/0,ease:"easeInOut"},className:"absolute top-1/2 right-1/3 w-64 h-64 bg-gradient-to-br from-[#d2691e]/20 to-transparent rounded-full blur-2xl"})]}),a.jsx("nav",{className:"sticky top-0 z-50 px-6 py-6 bg-gradient-to-r from-[#2c1810]/95 via-[#3d2817]/95 to-[#2c1810]/95 backdrop-blur-xl border-b border-[#8b5a2b]/20",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs(ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#8b5a2b] via-[#00ff88] to-[#cd853f] rounded-xl flex items-center justify-center shadow-lg shadow-[#8b5a2b]/40",children:a.jsx(is,{className:"w-6 h-6 text-[#f5deb3]"})}),a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-[#f5deb3] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"PosiFine"})]}),a.jsxs(ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"flex items-center gap-6",children:[a.jsx("a",{href:"#features",className:"text-[#e8c39e] hover:text-white font-medium transition-colors hidden md:block",children:"Features"}),a.jsx("a",{href:"#pricing",className:"text-[#e8c39e] hover:text-white font-medium transition-colors hidden md:block",children:"Pricing"}),a.jsx("button",{onClick:()=>e("/auth/login"),className:"px-6 py-2.5 text-[#f5deb3] hover:text-white font-medium transition-colors",children:"Login"}),a.jsx("button",{onClick:()=>e("/choose-subscription"),className:"px-6 py-2.5 bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#cd853f] text-white rounded-full font-medium shadow-lg shadow-[#8b5a2b]/40 hover:shadow-xl hover:shadow-[#00ff88]/50 transition-all hover:scale-105",children:"Get Started"})]})]})}),a.jsx(ee.section,{ref:l,style:{y:u,opacity:d},className:"relative z-10 pt-20 pb-32 px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-16 items-center",children:[a.jsx("div",{children:a.jsxs(ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsx(ee.span,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"inline-block px-4 py-2 bg-gradient-to-r from-[#8b5a2b]/20 to-[#00ff88]/20 border border-[#8b5a2b]/40 rounded-full text-sm font-medium mb-6",children:a.jsx("span",{className:"bg-gradient-to-r from-[#cd853f] to-[#00ff88] bg-clip-text text-transparent",children:"ðŸ¤– AI-Powered POS â€¢ GPT-4 Integration"})}),a.jsxs("h1",{className:"text-6xl lg:text-7xl font-bold leading-tight mb-6",children:[a.jsx("span",{className:"text-[#f5deb3]",children:"Elevate Your"}),a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"Business Today"})]}),a.jsxs("p",{className:"text-xl text-[#e8c39e] mb-8 leading-relaxed",children:["Experience the future of point-of-sale powered by ",a.jsx("span",{className:"font-semibold bg-gradient-to-r from-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"GPT-4 AI"}),". Get real-time forecasting, intelligent insights, and enterprise-grade security. Built for modern businesses that demand excellence."]}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-12",children:[a.jsxs(ee.button,{onClick:()=>e("/choose-subscription"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"group px-8 py-4 bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#cd853f] text-white rounded-full font-semibold shadow-xl shadow-[#8b5a2b]/40 hover:shadow-2xl hover:shadow-[#00ff88]/50 transition-all flex items-center gap-2",children:["Start Free Trial",a.jsx(Io,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]}),a.jsxs(ee.button,{onClick:()=>i(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-4 bg-[#3d2817]/80 backdrop-blur-xl border-2 border-[#8b5a2b]/40 text-[#f5deb3] rounded-full font-semibold hover:border-[#00ff88]/60 transition-all flex items-center gap-2 group",children:[a.jsx(xo,{className:"w-5 h-5 text-[#ff6b35]"}),"Watch Demo"]})]}),a.jsxs("div",{className:"flex items-center gap-8 text-sm text-[#e8c39e]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-5 h-5 text-[#00ff88]"}),a.jsx("span",{children:"No credit card"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-5 h-5 text-[#00ff88]"}),a.jsx("span",{children:"14-day trial"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gr,{className:"w-5 h-5 text-[#00ff88]"}),a.jsx("span",{children:"Cancel anytime"})]})]})]})}),a.jsx("div",{className:"relative",children:a.jsxs(ee.div,{style:{x:r.x,y:r.y},className:"relative",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"relative bg-[#3d2817]/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-[#8b5a2b]/40",style:{boxShadow:"0 0 80px rgba(139, 90, 43, 0.3), 0 0 40px rgba(0, 255, 136, 0.2)"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#8b5a2b] to-[#00ff88] rounded-xl"}),a.jsxs("div",{children:[a.jsx("div",{className:"h-3 w-24 bg-[#2c1810]/60 rounded"}),a.jsx("div",{className:"h-2 w-16 bg-[#2c1810]/40 rounded mt-1"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-[#2c1810]/40 rounded-lg"}),a.jsx("div",{className:"w-8 h-8 bg-[#2c1810]/40 rounded-lg"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[a.jsxs(ee.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-[#8b5a2b]/30 to-[#00ff88]/20 rounded-2xl p-4 border border-[#8b5a2b]/30",children:[a.jsx("div",{className:"text-xs text-[#d2a679] mb-1",children:"Revenue"}),a.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-[#cd853f] to-[#00ff88] bg-clip-text text-transparent",children:"$12,450"}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#00ff88] mt-1",children:[a.jsx(ft,{className:"w-3 h-3"}),a.jsx("span",{children:"+12.5%"})]})]}),a.jsxs(ee.div,{whileHover:{scale:1.05},className:"bg-gradient-to-br from-[#cd853f]/30 to-[#ff6b35]/20 rounded-2xl p-4 border border-[#cd853f]/30",children:[a.jsx("div",{className:"text-xs text-[#d2a679] mb-1",children:"Orders"}),a.jsx("div",{className:"text-2xl font-bold bg-gradient-to-r from-[#ff6b35] to-[#ff8c42] bg-clip-text text-transparent",children:"1,247"}),a.jsxs("div",{className:"flex items-center gap-1 text-xs text-[#ff6b35] mt-1",children:[a.jsx(Do,{className:"w-3 h-3"}),a.jsx("span",{children:"Live"})]})]})]}),a.jsx("div",{className:"relative h-40 bg-gradient-to-br from-[#2c1810]/80 to-[#1a0f08]/90 rounded-2xl p-4 overflow-hidden",children:a.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 400 100",children:[a.jsx(ee.path,{d:"M 0 80 Q 50 60, 100 70 T 200 65 T 300 55 T 400 50",fill:"none",stroke:"url(#chartGradient)",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}}),a.jsx("defs",{children:a.jsxs("linearGradient",{id:"chartGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[a.jsx("stop",{offset:"0%",stopColor:"#8b5a2b"}),a.jsx("stop",{offset:"50%",stopColor:"#00ff88"}),a.jsx("stop",{offset:"100%",stopColor:"#ff6b35"})]})})]})})]}),a.jsx(ee.div,{initial:{opacity:0,x:20,y:-20},animate:{opacity:1,x:0,y:0},transition:{delay:.4},className:"absolute -top-8 -right-8 bg-[#3d2817]/90 backdrop-blur-xl rounded-2xl p-4 shadow-xl border border-[#8b5a2b]/40",style:{boxShadow:"0 0 40px rgba(0, 255, 136, 0.3)"},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#8b5a2b] to-[#00ff88] rounded-xl flex items-center justify-center",children:a.jsx(Hl,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[#d2a679]",children:"Live Updates"}),a.jsx("div",{className:"text-sm font-bold text-[#f5deb3]",children:"Real-time Sync"})]})]})}),a.jsx(ee.div,{initial:{opacity:0,x:-20,y:20},animate:{opacity:1,x:0,y:0},transition:{delay:.6},className:"absolute -bottom-8 -left-8 bg-[#3d2817]/90 backdrop-blur-xl rounded-2xl p-4 shadow-xl border border-[#cd853f]/40",style:{boxShadow:"0 0 40px rgba(255, 107, 53, 0.3)"},children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-[#ff6b35] to-[#ff8c42] rounded-xl flex items-center justify-center",children:a.jsx(nn,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-[#d2a679]",children:"Security"}),a.jsx("div",{className:"text-sm font-bold text-[#f5deb3]",children:"Bank-Level"})]})]})})]})})]})})}),a.jsx(nk,{children:s&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm",onClick:()=>i(!1),children:a.jsxs(ee.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",damping:25,stiffness:300},className:"relative w-full max-w-4xl bg-gradient-to-br from-[#3d2817] via-[#2c1810] to-[#1a0f08] rounded-3xl shadow-2xl border border-[#8b5a2b]/40 overflow-hidden",onClick:p=>p.stopPropagation(),children:[a.jsx("button",{onClick:()=>i(!1),className:"absolute top-4 right-4 z-10 w-10 h-10 flex items-center justify-center bg-[#2c1810]/80 backdrop-blur-xl rounded-full border border-[#8b5a2b]/40 text-[#f5deb3] hover:text-white hover:border-[#00ff88]/60 transition-all hover:scale-110",children:a.jsx(yr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-3xl font-bold bg-gradient-to-r from-[#f5deb3] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent mb-2",children:"PosiFine Demo"}),a.jsx("p",{className:"text-[#d2a679]",children:"See how our premium POS system transforms retail management"})]}),a.jsx("div",{className:"relative aspect-video bg-[#1a0f08]/90 rounded-2xl overflow-hidden border border-[#8b5a2b]/30",children:a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-[#8b5a2b] via-[#00ff88] to-[#cd853f] rounded-full flex items-center justify-center shadow-xl shadow-[#8b5a2b]/40",children:a.jsx(xo,{className:"w-10 h-10 text-white ml-1"})}),a.jsx("p",{className:"text-[#d2a679] text-lg",children:"Demo Video Coming Soon"}),a.jsx("p",{className:"text-[#8b5a2b] text-sm mt-2",children:"Experience real-time sync, analytics, and seamless operations"})]})})}),a.jsx("div",{className:"grid grid-cols-3 gap-4 mt-6",children:[{icon:is,label:"AI Forecasting"},{icon:ft,label:"Live Analytics"},{icon:nn,label:"Secure Payments"}].map((p,g)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-[#2c1810]/60 rounded-xl border border-[#8b5a2b]/30",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#8b5a2b] to-[#00ff88] rounded-lg flex items-center justify-center",children:a.jsx(p.icon,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-[#f5deb3] text-sm font-medium",children:p.label})]},g))}),a.jsxs("div",{className:"mt-6 flex gap-4",children:[a.jsx("button",{onClick:()=>{i(!1),e("/choose-subscription")},className:"flex-1 px-6 py-3 bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#cd853f] text-white rounded-xl font-semibold shadow-lg shadow-[#8b5a2b]/40 hover:shadow-xl hover:shadow-[#00ff88]/50 transition-all hover:scale-105",children:"Start Free Trial"}),a.jsx("button",{onClick:()=>i(!1),className:"px-6 py-3 bg-[#2c1810]/80 backdrop-blur-xl text-[#f5deb3] rounded-xl font-semibold border border-[#8b5a2b]/40 hover:border-[#00ff88]/60 transition-all hover:scale-105",children:"Close"})]})]})]})})}),a.jsx("section",{className:"relative z-10 py-16 px-6 bg-gradient-to-r from-[#2c1810]/80 via-[#3d2817]/70 to-[#2c1810]/80 border-y border-[#8b5a2b]/30",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:x.map((p,g)=>a.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:g*.1},className:"text-center",children:[a.jsx("div",{className:"text-4xl font-bold bg-gradient-to-r from-[#cd853f] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent mb-2",children:p.value}),a.jsx("div",{className:"text-[#e8c39e] font-medium",children:p.label})]},g))})})}),a.jsx("section",{id:"features",ref:c,className:"relative z-10 py-32 px-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[a.jsx("span",{className:"inline-block px-4 py-2 bg-gradient-to-r from-[#8b5a2b]/20 to-[#00ff88]/20 border border-[#8b5a2b]/40 rounded-full text-sm font-medium mb-6",children:a.jsx("span",{className:"bg-gradient-to-r from-[#cd853f] to-[#00ff88] bg-clip-text text-transparent",children:"Features that matter"})}),a.jsxs("h2",{className:"text-5xl font-bold mb-6",children:[a.jsx("span",{className:"text-[#f5deb3]",children:"Built for"})," ",a.jsx("span",{className:"bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"Performance"})]}),a.jsx("p",{className:"text-xl text-[#e8c39e] max-w-2xl mx-auto",children:"Everything you need to run your business efficiently, all in one beautiful platform"})]}),a.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:h.map((p,g)=>a.jsxs(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{delay:g*.1},whileHover:{y:-10},className:`group relative bg-[#3d2817]/80 backdrop-blur-xl rounded-3xl p-8 shadow-lg border transition-all duration-300 ${p.highlighted?"border-[#00ff88]/60 shadow-2xl shadow-[#00ff88]/30":"border-[#8b5a2b]/40 hover:shadow-2xl hover:shadow-[#8b5a2b]/50"}`,children:[p.badge&&a.jsx("div",{className:"absolute -top-3 -right-3 px-3 py-1 bg-gradient-to-r from-[#ff6b35] to-[#ff8c42] text-white text-xs font-bold rounded-full shadow-lg animate-pulse",children:p.badge}),a.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${p.color} opacity-0 group-hover:opacity-20 rounded-3xl transition-opacity duration-300`}),a.jsx("div",{className:`w-14 h-14 bg-gradient-to-br ${p.color} rounded-2xl flex items-center justify-center mb-6 shadow-lg shadow-[#8b5a2b]/40 ${p.highlighted?"animate-pulse":""}`,children:a.jsx(p.icon,{className:"w-7 h-7 text-white"})}),a.jsx("h3",{className:"text-2xl font-bold text-[#f5f0e8] mb-3",children:p.title}),a.jsx("p",{className:"text-[#e8c39e] leading-relaxed",children:p.description}),a.jsxs("div",{className:"mt-6 flex items-center gap-2 text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity",children:[a.jsx("span",{className:`bg-gradient-to-r ${p.color} bg-clip-text text-transparent`,children:"Learn more"}),a.jsx(Jk,{className:"w-4 h-4 text-[#00ff88] group-hover:translate-x-1 transition-transform"})]})]},g))})]})}),a.jsx("section",{className:"relative z-10 py-32 px-6 bg-gradient-to-br from-[#1a0f08]/80 via-[#2c1810]/60 to-[#3d2817]/80",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center mb-16",children:[a.jsx(ee.div,{animate:{scale:[1,1.05,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0},className:"inline-block mb-6",children:a.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-[#8b5a2b]/30 via-[#00ff88]/30 to-[#ff6b35]/30 border-2 border-[#00ff88]/60 rounded-full backdrop-blur-xl",children:a.jsx("span",{className:"text-2xl font-bold bg-gradient-to-r from-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"ðŸ¤– Powered by GPT-4 AI"})})}),a.jsxs("h2",{className:"text-5xl lg:text-6xl font-bold mb-6",children:[a.jsx("span",{className:"text-[#f5deb3]",children:"Intelligent Business"}),a.jsx("br",{}),a.jsx("span",{className:"bg-gradient-to-r from-[#00ff88] via-[#8b5a2b] to-[#ff6b35] bg-clip-text text-transparent",children:"Powered by AI"})]}),a.jsx("p",{className:"text-xl text-[#e8c39e] max-w-3xl mx-auto",children:"Your POS system that thinks, learns, and grows with your business. Powered by OpenAI GPT-4 for cutting-edge predictions and insights."})]}),a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 mb-16",children:[a.jsxs(ee.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"group relative bg-gradient-to-br from-[#3d2817]/90 to-[#2c1810]/90 backdrop-blur-xl rounded-3xl p-8 border-2 border-[#00ff88]/40 hover:border-[#00ff88]/80 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-[#00ff88]/20 to-transparent rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#00ff88] to-[#8b5a2b] rounded-2xl flex items-center justify-center mb-6 shadow-xl shadow-[#00ff88]/40",children:a.jsx(ft,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"ðŸ“ˆ Sales Forecasting"}),a.jsx("p",{className:"text-[#e8c39e] text-lg mb-6",children:"Advanced machine learning analyzes your historical data to predict future sales trends with up to 95% accuracy. Plan inventory, staffing, and promotions with confidence."}),a.jsx("div",{className:"space-y-3",children:["4-week revenue predictions","Profit margin forecasts","Seasonal trend analysis","Growth projections"].map((p,g)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-[#00ff88] rounded-full"}),a.jsx("span",{className:"text-[#d2a679]",children:p})]},g))})]})]}),a.jsxs(ee.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"group relative bg-gradient-to-br from-[#3d2817]/90 to-[#2c1810]/90 backdrop-blur-xl rounded-3xl p-8 border-2 border-[#ff6b35]/40 hover:border-[#ff6b35]/80 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-[#ff6b35]/20 to-transparent rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#ff6b35] to-[#cd853f] rounded-2xl flex items-center justify-center mb-6 shadow-xl shadow-[#ff6b35]/40",children:a.jsx(is,{className:"w-8 h-8 text-white"})}),a.jsxs("h3",{className:"text-3xl font-bold text-white mb-4 flex items-center gap-2",children:["ðŸ’¬ AI Business Assistant",a.jsx("span",{className:"px-2 py-1 text-xs bg-[#ff6b35] text-white rounded-full",children:"PRO"})]}),a.jsx("p",{className:"text-[#e8c39e] text-lg mb-6",children:"Ask anything about your business. Get expert advice tailored to your industryâ€”bars, clinics, hotels, supermarkets, and more."}),a.jsx("div",{className:"space-y-3",children:["Business strategy recommendations","Industry-specific tips","Customer behavior insights","Real-time Q&A support"].map((p,g)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-[#ff6b35] rounded-full"}),a.jsx("span",{className:"text-[#d2a679]",children:p})]},g))})]})]}),a.jsxs(ee.div,{initial:{opacity:0,x:-30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"group relative bg-gradient-to-br from-[#3d2817]/90 to-[#2c1810]/90 backdrop-blur-xl rounded-3xl p-8 border-2 border-[#8b5a2b]/40 hover:border-[#8b5a2b]/80 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-[#8b5a2b]/20 to-transparent rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#8b5a2b] to-[#cd853f] rounded-2xl flex items-center justify-center mb-6 shadow-xl shadow-[#8b5a2b]/40",children:a.jsx(Xe,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"ðŸ‘¥ Staff Performance AI"}),a.jsx("p",{className:"text-[#e8c39e] text-lg mb-6",children:"Automatically analyze employee performance, identify top performers, and provide personalized coaching recommendations."}),a.jsx("div",{className:"space-y-3",children:["Automated scoring (0-100)","Performance trends","Coaching suggestions","Team comparisons"].map((p,g)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-[#8b5a2b] rounded-full"}),a.jsx("span",{className:"text-[#d2a679]",children:p})]},g))})]})]}),a.jsxs(ee.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},viewport:{once:!0},className:"group relative bg-gradient-to-br from-[#3d2817]/90 to-[#2c1810]/90 backdrop-blur-xl rounded-3xl p-8 border-2 border-[#cd853f]/40 hover:border-[#cd853f]/80 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-gradient-to-br from-[#cd853f]/20 to-transparent rounded-full blur-3xl group-hover:scale-150 transition-transform duration-500"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-[#cd853f] to-[#d2691e] rounded-2xl flex items-center justify-center mb-6 shadow-xl shadow-[#cd853f]/40",children:a.jsx(nn,{className:"w-8 h-8 text-white"})}),a.jsx("h3",{className:"text-3xl font-bold text-white mb-4",children:"ðŸ›¡ï¸ Smart Anomaly Detection"}),a.jsx("p",{className:"text-[#e8c39e] text-lg mb-6",children:"AI monitors your sales, inventory, and expenses 24/7 to detect unusual patterns, potential fraud, or operational issues."}),a.jsx("div",{className:"space-y-3",children:["Fraud detection","Inventory discrepancies","Unusual expense patterns","Instant alerts"].map((p,g)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-2 h-2 bg-[#cd853f] rounded-full"}),a.jsx("span",{className:"text-[#d2a679]",children:p})]},g))})]})]})]}),a.jsx(ee.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"text-center",children:a.jsxs("div",{className:"inline-block bg-gradient-to-r from-[#3d2817]/80 to-[#2c1810]/80 backdrop-blur-xl rounded-2xl p-8 border border-[#8b5a2b]/40",children:[a.jsx("p",{className:"text-lg text-[#e8c39e] mb-4",children:"ðŸš€ All AI features included in Pro plan â€¢ No additional cost"}),a.jsx("button",{onClick:()=>e("/choose-subscription"),className:"px-8 py-4 bg-gradient-to-r from-[#8b5a2b] via-[#00ff88] to-[#ff6b35] text-white rounded-full font-bold text-lg shadow-xl shadow-[#00ff88]/40 hover:shadow-2xl hover:scale-105 transition-all",children:"Try AI Features Free for 14 Days"})]})})]})}),a.jsx("section",{className:"relative z-10 py-32 px-6",children:a.jsx("div",{className:"max-w-5xl mx-auto",children:a.jsxs(ee.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},viewport:{once:!0},className:"relative bg-gradient-to-br from-[#8b5a2b] via-[#cd853f] to-[#d2691e] rounded-[3rem] p-16 overflow-hidden shadow-2xl shadow-[#8b5a2b]/50",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:a.jsxs("svg",{className:"w-full h-full",children:[a.jsxs("pattern",{id:"ctaPattern",width:"60",height:"60",patternUnits:"userSpaceOnUse",children:[a.jsx("circle",{cx:"30",cy:"30",r:"2",fill:"white"}),a.jsx("path",{d:"M 30 20 L 35 30 L 30 40 L 25 30 Z",fill:"white",opacity:"0.5"})]}),a.jsx("rect",{width:"100%",height:"100%",fill:"url(#ctaPattern)"})]})}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("h2",{className:"text-5xl font-bold text-white mb-6",children:"Ready to Transform Your Business?"}),a.jsx("p",{className:"text-xl text-white/90 mb-10 max-w-2xl mx-auto",children:"Join thousands of businesses using PosiFine to streamline operations and boost revenue"}),a.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[a.jsxs(ee.button,{onClick:()=>e("/choose-subscription"),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-10 py-5 bg-white text-[#8b5a2b] rounded-full font-bold text-lg shadow-2xl hover:shadow-3xl transition-all flex items-center gap-2",children:["Start Free Trial",a.jsx(Io,{className:"w-5 h-5"})]}),a.jsxs(ee.button,{onClick:()=>i(!0),whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-10 py-5 bg-white/10 backdrop-blur-xl text-white border-2 border-white/30 rounded-full font-bold text-lg hover:bg-white/20 transition-all flex items-center gap-2",children:[a.jsx(xo,{className:"w-5 h-5"}),"Watch Demo"]})]}),a.jsx("p",{className:"text-white/80 text-sm mt-8",children:"No credit card required â€¢ 14-day free trial â€¢ Cancel anytime"})]})]})})}),a.jsx("footer",{className:"relative z-10 bg-gradient-to-br from-[#2c1810] via-[#1a0f08] to-[#0d0604] py-12 px-6 border-t border-[#8b5a2b]/30",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-[#8b5a2b] via-[#00ff88] to-[#cd853f] rounded-xl flex items-center justify-center shadow-lg shadow-[#8b5a2b]/40",children:a.jsx(is,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-[#f5deb3] via-[#00ff88] to-[#ff6b35] bg-clip-text text-transparent",children:"PosiFine"})]}),a.jsx("p",{className:"text-[#e8c39e] text-sm",children:"Â© 2026 Mabrixel Technologies. All rights reserved."}),a.jsxs("div",{className:"flex items-center gap-6 text-sm text-[#e8c39e]",children:[a.jsx("button",{onClick:()=>e("/choose-subscription"),className:"hover:text-[#f5deb3] transition-colors",children:"Pricing"}),a.jsx("button",{onClick:()=>e("/auth/login"),className:"hover:text-[#f5deb3] transition-colors",children:"Login"})]})]})})})]})}function C1(){const e=E1(),[t,r]=N.useState(e.pathname==="/auth/login"),[n,s]=N.useState("password"),[i,o]=N.useState({email:"",password:"",pin:"",name:"",newPassword:"",confirmPassword:""}),[l,c]=N.useState(""),[u,d]=N.useState(!1),[f,h]=N.useState(!1),x=wt(),{login:p}=Oe(),g=()=>{try{return JSON.parse(localStorage.getItem("selectedPlan")||"null")}catch(y){return console.warn("Invalid selectedPlan in localStorage:",y),null}},m=async y=>{y.preventDefault(),c(""),d(!0);try{if(f){if(i.newPassword!==i.confirmPassword){c("Passwords do not match"),d(!1);return}if(i.newPassword.length<6){c("Password must be at least 6 characters"),d(!1);return}const S=await ra.login({email:i.email,newPassword:i.newPassword});S.token&&S.user&&(await p(S),x("/dashboard"));return}if(t){if(n==="pin"){if(!i.pin||i.pin.length!==4){c("Please enter a valid 4-digit PIN"),d(!1);return}}else if(!i.password){c("Please enter your password"),d(!1);return}}let v;if(t)if(n==="pin")try{v=await ra.pinLogin({email:i.email,pin:i.pin})}catch(S){if(S.message.includes("PIN not set"))c("PIN not set for this user. Please use password login.");else if(S.message.includes("Invalid PIN"))c("Invalid PIN. Please try again.");else throw S;d(!1);return}else v=await ra.login({email:i.email,password:i.password});else{const S=g(),j=localStorage.getItem("planId")||S?.id||"basic",w=localStorage.getItem("businessType")||localStorage.getItem("selectedBusinessType")||S?.business_type,P=localStorage.getItem("selectedFeatures");v=await ra.signup({email:i.email,password:i.password,name:i.name,plan:j,business_type:w,selectedFeatures:P?JSON.parse(P):[]})}if(v.needsPasswordSetup){h(!0),o({...i,email:v.email}),c(""),d(!1);return}if(!v||!v.user||!v.token)throw new Error("Authentication failed. Please try again.");await p(v);const b=PK(v.user);x(b,{replace:!0})}catch(v){c(v.message||"Authentication failed")}finally{d(!1)}};return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl mx-auto mb-4 flex items-center justify-center",children:a.jsx("span",{className:"text-2xl font-bold text-white",children:"P"})}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:t?"Welcome Back":"Get Started"}),a.jsx("p",{className:"text-gray-500 text-sm",children:t?"Sign in to your account":"Create your account today"})]}),a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[f?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-blue-50 border border-blue-200 p-4 rounded-lg",children:a.jsx("p",{className:"text-sm text-blue-800 font-medium",children:"Please set a new password"})}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",placeholder:"New Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.newPassword,onChange:y=>o({...i,newPassword:y.target.value}),required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",placeholder:"Confirm Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.confirmPassword,onChange:y=>o({...i,confirmPassword:y.target.value}),required:!0})]})]}):a.jsxs(a.Fragment,{children:[!t&&a.jsxs("div",{className:"relative",children:[a.jsx(lg,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Full Name",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.name,onChange:y=>o({...i,name:y.target.value}),required:!0})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ga,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",placeholder:"Email",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.email,onChange:y=>o({...i,email:y.target.value}),required:!0})]}),t&&a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-2 bg-gray-100 p-1 rounded-lg",children:[a.jsx("button",{type:"button",onClick:()=>s("password"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${n==="password"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Password"}),a.jsx("button",{type:"button",onClick:()=>s("pin"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all ${n==="pin"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"PIN"})]})}),t&&n==="password"&&a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",placeholder:"Password",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.password,onChange:y=>o({...i,password:y.target.value}),required:!0})]}),t&&n==="pin"&&a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",inputMode:"numeric",placeholder:"4-digit PIN",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all text-center text-2xl tracking-widest",value:i.pin,onChange:y=>o({...i,pin:y.target.value.replace(/\D/g,"").slice(0,4)}),maxLength:4,required:!0})]}),!t&&a.jsxs("div",{className:"relative",children:[a.jsx(Ut,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"password",placeholder:"Password (min 6 characters)",className:"w-full pl-10 pr-4 py-3 rounded-lg border border-gray-300 focus:border-blue-500 focus:ring-2 focus:ring-blue-100 outline-none transition-all",value:i.password,onChange:y=>o({...i,password:y.target.value}),required:!0})]})]}),l&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 p-3 rounded-lg text-sm flex items-start gap-2",children:[a.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a.jsx("span",{children:l})]}),a.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg active:scale-[0.98]",children:u?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx(Zk,{className:"animate-spin h-5 w-5"}),"Processing..."]}):f?"Set Password":t?"Sign In":"Create Account"})]}),t&&!f&&a.jsx("div",{className:"mt-4 text-center",children:a.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Forgot password?"})}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:[t?"Don't have an account?":"Already have an account?"," ",a.jsx("button",{type:"button",onClick:()=>{r(!t),c(""),h(!1)},className:"text-blue-600 hover:text-blue-700 font-semibold transition-colors",children:t?"Sign up":"Sign in"})]})})]})})}function RK(){const[e,t]=N.useState("ultra"),[r,n]=N.useState(!1),[s,i]=N.useState(!1),[o,l]=N.useState(null),[c,u]=N.useState({name:"",email:"",company:""}),d=wt();console.log("âœ… Subscription component mounted, navigate available:",typeof d);const f=[{id:"basic",name:"Basic",price:1e3,icon:Hl,color:"from-green-500 to-teal-600",popular:!1,features:["âœ“ Admin Dashboard + Cashier POS","âœ“ Basic Inventory Management","âœ“ Sales Tracking","âœ“ Daily/Weekly Reports","âœ“ Basic Profit/Loss View","âœ“ Email Support","âœ“ 1 Cashier Only"]},{id:"ultra",name:"Ultra",price:2500,icon:Qk,color:"from-blue-600 to-purple-600",popular:!0,features:["âœ“ Admin Dashboard + Cashier POS","âœ“ Full Inventory Management","âœ“ Automatic Stock Deduction","âœ“ User Management (Unlimited)","âœ“ Permission Controls","âœ“ Expense Tracking","âœ“ Advanced Analytics","âœ“ Priority Support"]},{id:"pro",name:"Pro",price:3e3,icon:um,color:"from-purple-600 to-pink-600",popular:!1,badge:"NEW",features:["âœ“ Everything in Ultra Plan","âœ“ Business-Specific Dashboards","âœ“ Clinic/Hospital Management","âœ“ Bar/Restaurant Tables","âœ“ Hotel Room Booking","âœ“ Supermarket Features","âœ“ Role-Based Dashboards","âœ“ Priority 24/7 Support"]}],h=[{id:"clinic",name:"Clinic / Hospital",icon:Wl,description:"Patient management, appointments, prescriptions",roles:["Doctor","Reception","Pharmacy","Admin"]},{id:"bar",name:"Bar / Club",icon:eC,description:"Table orders, drink menu, hold bills",roles:["Bartender","Waiter","Manager"]},{id:"hotel",name:"Hotel",icon:on,description:"Room bookings, check-in/out, guest billing",roles:["Reception","Housekeeping","Manager"]},{id:"supermarket",name:"Supermarket",icon:Br,description:"Advanced inventory, bulk sales, departments",roles:["Cashier","Stock Manager","Department Head"]}],x=m=>{m?.preventDefault?.(),console.log("[BUTTON] Get Started clicked, selected plan:",e);const y=f.find(v=>v.id===e);if(console.log("[BUTTON] Found plan:",y),!y){console.error("[BUTTON] Plan not found!"),alert("Please select a plan first");return}if(e==="pro"){i(!0);return}try{const v={id:y.id,name:y.name,price:y.price};localStorage.setItem("selectedPlan",JSON.stringify(v)),localStorage.setItem("planId",e),console.log("[BUTTON] Stored to localStorage, navigating..."),console.log("[BUTTON] Going to /auth/signup"),d("/auth/signup")}catch(v){console.error("[BUTTON] Error:",v),alert("Error: "+v.message)}},p=m=>{try{const y=f.find(b=>b.id==="pro"),v={id:y.id,name:y.name,price:y.price,business_type:m.id};localStorage.setItem("selectedPlan",JSON.stringify(v)),localStorage.setItem("planId","pro"),localStorage.setItem("businessType",m.id),console.log("[PRO] Business type selected:",m.id),d("/auth/signup")}catch(y){console.error("[PRO] Error:",y),alert("Error: "+y.message)}},g=async m=>{m.preventDefault();try{await fetch(`${ye}/demo-requests`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),alert("Demo request submitted! Admin will review and contact you."),n(!1),u({name:"",email:"",company:""})}catch(y){console.error("Demo request failed:",y),alert("Failed to submit demo request. Please try again.")}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 py-6 md:py-12 px-4 md:px-6",children:[a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("button",{onClick:()=>d("/"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition",children:[a.jsx(z1,{size:20}),"Back to Home"]}),a.jsxs(ee.div,{className:"flex items-center gap-2",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:[a.jsx("img",{src:"/posifine-logo.png",alt:"PosiFine Logo",className:"w-8 h-8 object-contain",onError:m=>{m.target.style.display="none"}}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PosiFine"})]})]}),a.jsxs(ee.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12 md:mb-16",children:[a.jsx(ee.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5,delay:.2},className:"text-3xl md:text-5xl font-bold mb-3 md:mb-4 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Choose Your Plan"}),a.jsx(ee.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:.4},className:"text-gray-600 text-base md:text-lg",children:"Pick the perfect plan and unlock your POS potential"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-8 mb-8 md:mb-12 max-w-5xl mx-auto",children:f.map((m,y)=>{const v=m.icon;return a.jsxs(ee.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:y*.15},whileHover:{y:-8,transition:{duration:.2}},onClick:()=>t(m.id),className:`card cursor-pointer transition-all transform ${e===m.id?"ring-4 ring-blue-600 shadow-2xl scale-105 bg-gradient-to-br from-blue-50 to-purple-50":"hover:shadow-lg hover:scale-102"} relative`,children:[m.popular&&a.jsx("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2",children:a.jsx("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"Most Popular"})}),a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl bg-gradient-to-br ${m.color} flex items-center justify-center`,children:a.jsx(v,{className:"w-5 h-5 text-white"})}),a.jsx("h3",{className:"text-lg md:text-xl font-bold",children:m.name})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("span",{className:"text-2xl md:text-3xl font-bold",children:["KSH ",m.price]}),a.jsx("span",{className:"text-gray-600 text-xs md:text-sm",children:"/month"})]}),a.jsx("ul",{className:"space-y-2",children:m.features.map((b,S)=>a.jsxs("li",{className:"flex items-start gap-2 text-xs md:text-sm",children:[a.jsx(gr,{className:"w-4 h-4 text-green-600 flex-shrink-0 mt-0.5"}),a.jsx("span",{children:b})]},S))})]},m.id)})}),a.jsxs(ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"flex flex-col md:flex-row gap-4 items-center justify-center mt-8",children:[a.jsx(ee.button,{type:"button",onClick:x,whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(0,0,0,0.2)"},whileTap:{scale:.95},className:"cursor-pointer px-8 md:px-12 py-3 md:py-4 text-base md:text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg shadow-lg",children:"Get Started"}),a.jsx(ee.button,{type:"button",onClick:()=>n(!0),whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer px-8 md:px-12 py-3 md:py-4 text-base md:text-lg font-bold border-2 border-gray-300 bg-white text-gray-700 rounded-lg hover:border-gray-400 transition-all",children:"Request Free Demo"})]}),a.jsx("p",{className:"text-xs md:text-sm text-gray-500 mt-4 text-center",children:"Secure payment â€¢ Cancel anytime"}),r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full",children:[a.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 p-6 text-white rounded-t-2xl",children:[a.jsx("h2",{className:"text-2xl font-bold",children:"Request Free Demo"}),a.jsx("p",{className:"text-green-100 text-sm mt-1",children:"We'll contact you to schedule a demo"})]}),a.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Full Name"}),a.jsx("input",{type:"text",value:c.name,onChange:m=>u({...c,name:m.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Email Address"}),a.jsx("input",{type:"email",value:c.email,onChange:m=>u({...c,email:m.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Company Name"}),a.jsx("input",{type:"text",value:c.company,onChange:m=>u({...c,company:m.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-green-500",placeholder:"Optional"})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-3 rounded-lg font-bold hover:bg-green-700 transition",children:"Submit Request"}),a.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-6 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition",children:"Cancel"})]})]})]})})]}),a.jsx("footer",{className:"mt-16 border-t border-gray-200 pt-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 text-center",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ee.img,{src:"/posifine-logo.png",alt:"PosiFine Logo",className:"w-6 h-6 object-contain",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},onError:m=>{m.target.style.display="none"}}),a.jsx("span",{className:"text-sm font-semibold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"PosiFine"})]}),a.jsx("p",{className:"text-gray-500 text-sm",children:"Â© 2026 Mabrixel Technologies. All rights reserved."}),a.jsx("button",{onClick:()=>d("/auth/login"),className:"text-sm text-blue-600 hover:text-blue-700 transition-colors",children:"Already have an account? Login"})]})})}),a.jsx(nk,{children:s&&a.jsx(ee.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs(ee.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},className:"bg-white rounded-2xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Choose Your Business Type"}),a.jsx("p",{className:"text-gray-600",children:"Select the industry that matches your business for specialized features"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:h.map(m=>{const y=m.icon;return a.jsx(ee.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>p(m),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-purple-500 hover:shadow-lg transition-all text-left",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:a.jsx(y,{className:"w-8 h-8 text-purple-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:m.name}),a.jsx("p",{className:"text-gray-600 text-sm mb-3",children:m.description}),a.jsx("div",{className:"flex flex-wrap gap-2",children:m.roles.map(v=>a.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-700 text-xs rounded-full",children:v},v))})]})]})},m.id)})}),a.jsx("button",{onClick:()=>i(!1),className:"mt-6 w-full px-6 py-3 border-2 border-gray-300 rounded-xl text-gray-700 font-semibold hover:bg-gray-50 transition-colors",children:"Back to Plans"})]})})})]})}const lm={bar:{id:"bar",name:"Bar / Alcohol Business",description:"Drinks, happy hour pricing, brand tracking, staff shifts",icon:"Wine",color:"amber",features:["Bottle size + brand management","Happy hour pricing rules","Staff shift tracking","Profit by brand","Low stock alerts","Age-check functionality"],productFields:["name","brand","size","category","price","cost","stock"],categories:["Beer","Wine","Spirits","Beverages","Mixers"],adminModules:["inventory","staff","shifts","pricing","reports"],cashierModules:["categories","quick-tap","age-check","shift-view"]},hospital:{id:"hospital",name:"Hospital / Clinic",description:"Patient billing, services, medicines, doctor commission",icon:"Heart",color:"red",features:["Services + medicines separation","Patient search + billing","Doctor commission tracking","Batch + expiry tracking","Medicine inventory","Invoice printing"],productFields:["name","type","category","price","batchNo","expiryDate","stock"],categories:["Services","Medicines","Lab Tests","Equipment"],adminModules:["patients","services","medicines","doctors","inventory"],cashierModules:["patient-search","add-services","add-medicines","print"]},school:{id:"school",name:"School",description:"Student billing, term fees, canteen, uniform/books",icon:"BookOpen",color:"blue",features:["Student management","Term fees tracking","Canteen inventory","Uniform + books stock","Fee payment receipts","Student balance"],productFields:["name","type","category","price","stock","description"],categories:["Fees","Canteen","Uniforms","Books","Supplies"],adminModules:["students","fees","canteen","inventory","reports"],cashierModules:["student-lookup","fee-payment","canteen-sales","receipts"]},kiosk:{id:"kiosk",name:"Kiosk / Small Shop",description:"Simple inventory, supplier tracking, fast POS",icon:"Store",color:"green",features:["Simple inventory management","Supplier tracking","Price rules","Profit reports","Low stock alerts","Fast checkout"],productFields:["name","category","price","cost","stock","supplier"],categories:["General","Electronics","Food","Drinks","Supplies"],adminModules:["inventory","suppliers","pricing","reports"],cashierModules:["search","quick-scan","low-stock-alerts"]},petrol:{id:"petrol",name:"Petrol / Gas Station",description:"Fuel types, pump tracking, tank stock, shift reconciliation",icon:"Fuel",color:"yellow",features:["Fuel type management","Pump tracking","Tank stock management","Shift reconciliation","Pump totals","Attendant management"],productFields:["name","fuelType","pricePerLiter","tankCapacity","pumpId","stock"],categories:["Petrol","Diesel","Premium","LPG"],adminModules:["fuel-types","pumps","tanks","staff","reconciliation"],cashierModules:["pump-selector","fuel-buttons","shift-totals","attendant-view"]},shoes:{id:"shoes",name:"Shoe / Clothing Store",description:"Size & color variants, margin tracking, returns/refunds",icon:"Shirt",color:"pink",features:["Size + color variants","Margin per product","Returns + refunds","Variant inventory","Barcode + search POS","Stock by variant"],productFields:["name","category","price","cost","size","color","stock","margin"],categories:["Shoes","Shirts","Pants","Dresses","Accessories"],adminModules:["variants","inventory","returns","pricing","reports"],cashierModules:["variant-selector","search","barcode","returns"]}};function MK(){const e=wt(),[t,r]=N.useState(null),[n,s]=N.useState(1),i=d=>{r(d),s(2)},o=()=>{if(!t){alert("Please select a business type");return}const d=lm[t];localStorage.setItem("selectedBusinessType",t),localStorage.setItem("businessMetadata",JSON.stringify(d)),console.log("[BUILD POS] Selected business:",t),e("/auth/signup")},l=()=>{n===2?(s(1),r(null)):e("/plans")},c=t?lm[t]:null,u=Object.entries(lm).map(([d,f])=>({id:d,...f}));return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 py-8 px-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex items-center gap-4 mb-8",children:a.jsxs("button",{onClick:l,className:"flex items-center gap-2 text-gray-600 hover:text-gray-800 transition p-2 rounded-lg hover:bg-white",children:[a.jsx(z1,{size:20}),"Back"]})}),n===1&&a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Choose Your Business Type"}),a.jsx("p",{className:"text-gray-600 mb-12 text-lg",children:"Select the type that best matches your operation. We'll customize your dashboard accordingly."}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(d=>a.jsxs("button",{onClick:()=>i(d.id),className:`text-left p-6 rounded-xl border-2 transition-all transform hover:scale-105 ${t===d.id?"border-blue-600 bg-blue-50 ring-2 ring-blue-400 shadow-lg":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:d.name}),a.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${t===d.id?"bg-blue-600 border-blue-600":"border-gray-300"}`,children:t===d.id&&a.jsx(gr,{size:16,className:"text-white"})})]}),a.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:d.description}),a.jsx("ul",{className:"space-y-2",children:d.features.slice(0,3).map((f,h)=>a.jsxs("li",{className:"flex items-start gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"text-green-600 font-bold mt-0.5",children:"â€¢"}),a.jsx("span",{children:f})]},h))})]},d.id))})]}),n===2&&c&&a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("h1",{className:"text-4xl font-bold mb-8 text-center",children:"Confirm Your Selection"}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8 border-2 border-blue-600",children:[a.jsx("h2",{className:"text-3xl font-bold mb-4 text-blue-600",children:c.name}),a.jsx("p",{className:"text-gray-600 mb-8 text-lg",children:c.description}),a.jsxs("div",{className:"mb-8",children:[a.jsx("h3",{className:"text-xl font-bold mb-4",children:"Your Dashboard Includes:"}),a.jsx("ul",{className:"space-y-3",children:c.features.map((d,f)=>a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-6 h-6 rounded-full bg-green-600 flex items-center justify-center flex-shrink-0 mt-0.5",children:a.jsx(gr,{size:16,className:"text-white"})}),a.jsx("span",{className:"text-gray-700",children:d})]},f))})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 mb-8",children:[a.jsxs("p",{className:"text-sm text-gray-700",children:[a.jsx("span",{className:"font-bold",children:"Custom Price:"})," 3,500 KES/month"]}),a.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Your admin will be customized for ",c.name.toLowerCase(),". You can modify your selection later."]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>{s(1),r(null)},className:"flex-1 px-6 py-3 rounded-lg border-2 border-gray-300 font-bold text-gray-700 hover:bg-gray-50 transition",children:"Choose Different"}),a.jsxs("button",{onClick:o,className:"flex-1 px-6 py-3 rounded-lg bg-gradient-to-r from-blue-600 to-purple-600 text-white font-bold hover:shadow-lg transition flex items-center justify-center gap-2",children:["Continue to Sign Up",a.jsx(Io,{size:20})]})]})]})]})]})})}function $K({isLocked:e,onUnlock:t,userPin:r,userName:n="Cashier"}){const[s,i]=N.useState(""),[o,l]=N.useState(""),[c,u]=N.useState(0),[d,f]=N.useState(!1);N.useEffect(()=>{e&&(l(""),i(""),u(0),f(!1))},[e]),N.useEffect(()=>{c>=3&&(f(!0),setTimeout(()=>{f(!1),u(0)},3e4))},[c]);const h=g=>{d||s.length<4&&(i(m=>m+g),l(""))},x=()=>{d||(i(g=>g.slice(0,-1)),l(""))},p=()=>{if(d){l("Too many attempts. Please wait.");return}if(s.length!==4){l("PIN must be 4 digits");return}String(s)===String(r)?(i(""),l(""),t()):(l("Incorrect PIN"),u(g=>g+1),i(""))};return e?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-[9999] backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-96 max-w-full mx-4",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsx("div",{className:"bg-red-100 p-4 rounded-full",children:a.jsx(Ut,{className:"w-12 h-12 text-red-600"})})}),a.jsx("h1",{className:"text-2xl font-bold text-center text-gray-800 mb-2",children:"Screen Locked"}),a.jsxs("p",{className:"text-center text-gray-600 mb-6",children:[n,", enter your PIN to continue"]}),a.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-6 flex justify-center gap-2",children:[0,1,2,3].map(g=>a.jsx("div",{className:"w-12 h-12 bg-white border-2 border-gray-300 rounded-lg flex items-center justify-center font-bold text-xl text-gray-800",children:s[g]?"â—":""},g))}),o&&a.jsxs("div",{className:`text-center text-sm font-medium mb-4 p-2 rounded ${o.includes("Incorrect")?"bg-red-100 text-red-700":o.includes("must be")?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[o,c>0&&c<3&&a.jsxs("p",{className:"text-xs mt-1",children:[3-c," attempt",3-c!==1?"s":""," remaining"]}),d&&a.jsx("p",{className:"text-xs mt-1",children:"Locked. Try again in 30 seconds."})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[[1,2,3,4,5,6,7,8,9].map(g=>a.jsx("button",{onClick:()=>h(String(g)),disabled:d||s.length>=4,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white font-bold py-3 rounded-lg transition-colors text-lg",children:g},g)),a.jsx("button",{onClick:()=>h("0"),disabled:d||s.length>=4,className:"bg-blue-500 hover:bg-blue-600 disabled:bg-gray-300 text-white font-bold py-3 rounded-lg transition-colors col-span-1 text-lg",children:"0"}),a.jsxs("button",{onClick:x,disabled:d||s.length===0,className:"bg-red-500 hover:bg-red-600 disabled:bg-gray-300 text-white font-bold py-3 rounded-lg transition-colors col-span-2 flex items-center justify-center gap-2",children:[a.jsx(yr,{size:16}),"Back"]})]}),a.jsx("button",{onClick:p,disabled:d||s.length!==4,className:"w-full bg-green-600 hover:bg-green-700 disabled:bg-gray-300 text-white font-bold py-3 rounded-lg transition-colors mb-3",children:d?"Locked":"Unlock"}),a.jsx("p",{className:"text-center text-xs text-gray-500 mt-4",children:"Enter your 4-digit PIN"})]})}):null}function LK(){const[e,t]=N.useState([]),[r,n]=N.useState([]);N.useEffect(()=>{const o=async()=>{try{const c=await St.getLowStockWarnings?.();c?.warnings&&t(c.warnings)}catch(c){console.warn("Failed to fetch low-stock warnings:",c)}};o();const l=setInterval(o,1e4);return()=>clearInterval(l)},[]);const s=e.filter(o=>!r.includes(o.id));if(s.length===0)return null;const i=o=>{n([...r,o])};return a.jsx("div",{className:"fixed top-24 right-6 max-w-md space-y-2 z-40",children:s.map(o=>a.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded shadow-lg animate-pulse",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(pa,{className:"w-5 h-5 text-red-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-red-900",children:"âš ï¸ Stock Warning"}),a.jsxs("p",{className:"text-sm text-red-800 mt-1",children:[a.jsx("strong",{children:o.name}),": ",o.quantity,o.unit," remaining"]}),a.jsxs("p",{className:"text-xs text-red-700 mt-0.5",children:["Threshold: ",o.threshold,o.unit]})]})]}),a.jsx("button",{onClick:()=>i(o.id),className:"text-red-600 hover:text-red-900 flex-shrink-0",children:a.jsx(yr,{className:"w-4 h-4"})})]})},o.id))})}const BK="http://localhost:5000";let cm=null;const FK=()=>(cm||(cm=localStorage.getItem("token")),cm),qK=async(e,t={})=>{const r=performance.now(),n=FK();try{const s=await fetch(`${BK}${e}`,{...t,headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`,...t.headers},keepalive:!0,priority:"high"});if(!s.ok){const l=await s.json().catch(()=>({error:"Request failed"}));throw new Error(l.error||`HTTP ${s.status}`)}const i=await s.json(),o=performance.now()-r;return o>200&&console.warn(`âš ï¸ Slow API request: ${e} took ${o.toFixed(1)}ms`),i}catch(s){const i=performance.now()-r;throw console.error(`âŒ API error (${i.toFixed(1)}ms): ${e}`,s),s}},UK=async(e,t,r,n)=>{const s=performance.now();let i=!1;try{console.log("ðŸš€ [Transaction] Starting sale transaction",{items:e.items?.length||0,total:e.total}),t&&(t({action:"SALE_PENDING",cartCleared:!0,message:"Processing sale...",timestamp:Date.now()}),i=!0,console.log("âœ… [Transaction] Optimistic update applied"));const o=performance.now(),l=await qK("/api/v2/sales/complete",{method:"POST",body:JSON.stringify({items:e.items,total:e.total,discount:e.discount||0,tax:e.tax||0,taxType:e.taxType||"exclusive",paymentMethod:e.paymentMethod||"cash",shiftId:e.shiftId})}),c=performance.now()-o;console.log(`âœ… [Transaction] API completed in ${c.toFixed(1)}ms`);const u=performance.now()-s;if(!l.success||!l.saleId)throw new Error(l.error||"Invalid server response");const d={...l,clientElapsedMs:u,apiElapsedMs:c,performanceGrade:u<100?"ðŸš€ EXCELLENT":u<200?"âœ… GOOD":u<300?"âš ï¸ ACCEPTABLE":"âŒ SLOW",updatedProducts:l.updatedProducts||[],stockDeductions:l.stockDeductions||{},lowStockWarnings:l.lowStockWarnings||[]};return console.log(`âœ… [Transaction] Complete! Total: ${u.toFixed(1)}ms ${d.performanceGrade}`),r&&r(d),d}catch(o){const l=performance.now()-s;console.error(`âŒ [Transaction] Failed after ${l.toFixed(1)}ms:`,o);const c={error:o.message||"Transaction failed",elapsedMs:l,action:"SALE_FAILED",needsRollback:i,timestamp:Date.now()};throw n&&n(c),o}},VK="products_cache_v2",zK=()=>{sessionStorage.removeItem(VK),console.log("ðŸ—‘ï¸ [Cache] Product cache invalidated")},WK=(e,t)=>{if(!t||!Array.isArray(t.products))return e;const r=performance.now(),n=new Map;t.products.forEach(o=>{n.set(o.id,o.deducted||o.quantity)});const s=e.map(o=>{const l=n.get(o.id);return l!==void 0?{...o,quantity:Math.max(0,o.quantity-l)}:o}),i=performance.now()-r;return console.log(`âœ… [Optimistic] Inventory updated in ${i.toFixed(2)}ms`),s},HK={sales:[],clockIns:[],clockOuts:[],record(e,t){const r=this[e];r&&(r.push({duration:t,timestamp:Date.now()}),r.length>100&&r.shift())},getStats(e){const t=this[e];if(!t||t.length===0)return{count:0,avg:0,min:0,max:0,p95:0};const r=t.map(o=>o.duration).sort((o,l)=>o-l),n=r.length,s=r.reduce((o,l)=>o+l,0),i=Math.floor(n*.95);return{count:n,avg:s/n,min:r[0],max:r[n-1],p95:r[i]||r[n-1]}},logReport(){console.group("ðŸ“Š Transaction Performance Report"),console.log("Sales:",this.getStats("sales")),console.log("Clock Ins:",this.getStats("clockIns")),console.log("Clock Outs:",this.getStats("clockOuts")),console.groupEnd()}};typeof window<"u"&&(window.__transactionMetrics=HK);function hn(){const{user:e,logout:t}=Oe(),{products:r,refreshProducts:n}=ug(),{isLocked:s,lock:i,unlock:o}=Q1(),[l,c]=N.useState([]),[u,d]=N.useState([]),[f,h]=N.useState([]),[x,p]=N.useState("cash"),[g,m]=N.useState("pos"),[y,v]=N.useState({sales:[],expenses:[],stats:{}}),[b,S]=N.useState(""),[j,w]=N.useState(!1),[P,A]=N.useState(!1),[O,C]=N.useState(null),[k,T]=N.useState({name:"",price:"",cost:"",category:"finished",image:""}),[E,$]=N.useState({quantity:"",expiryDate:"",batchNumber:"",cost:""}),[L,q]=N.useState(!1),[z,K]=N.useState(!1),[G,Z]=N.useState({customerName:"",amount:"",reason:"",notes:""}),[R,F]=N.useState(!1),[H,re]=N.useState({description:"",amount:"",category:""}),[M,J]=N.useState(""),[Q,de]=N.useState([]),[V,ie]=N.useState(null),[ce,U]=N.useState("exclusive"),[Ce,be]=N.useState(!1),[Ve,Le]=N.useState(null),[et,mt]=N.useState(null),[Mt,sr]=N.useState({}),[$t,Wt]=N.useState(!1),[Yn,rs]=N.useState(!1),[ns,D]=N.useState(!1),[X,ne]=N.useState(Date.now()),[ve,ue]=N.useState(0);N.useEffect(()=>{Lt(),n();const I=localStorage.getItem(`cart_${e?.id}`),Y=localStorage.getItem(`paymentMethod_${e?.id}`),le=localStorage.getItem(`selectedDiscount_${e?.id}`),ge=localStorage.getItem(`taxType_${e?.id}`);if(I)try{h(JSON.parse(I))}catch(je){console.warn("Failed to restore cart:",je)}if(Y&&p(Y),ge&&U(ge),le)try{ie(JSON.parse(le))}catch{}Zr();const Pe=je=>{console.log("ðŸ“¦ Stock update event received:",je.detail),Lt(),n()},it=je=>{if(console.log("ðŸ”„ Products sync event received:",je.detail),je.detail&&je.detail.products){const pe=je.detail.products.filter(Nt=>Nt.visibleToCashier!==!1&&!Nt.expenseOnly);c(pe)}},Tt=()=>{console.log("ðŸ“ Product update event received"),Lt(),n()};window.addEventListener("stock_updated",Pe),window.addEventListener("productsSync",it),window.addEventListener("productUpdated",Tt),window.addEventListener("productCreated",Tt);const Nr=localStorage.getItem("token");Nr&&Or.connect(Nr,je=>{if(console.log("ðŸ“¡ WebSocket callback received:",je),je&&je.allProducts){console.log(`ðŸ“¦ Merging ${je.allProducts.length} products from WebSocket`);const pe=je.allProducts.filter(Nt=>Nt.visibleToCashier!==!1&&!Nt.expenseOnly);c(pe)}je&&je.productId!==void 0&&je.newQuantity!==void 0&&(console.log(`ðŸ“¦ Stock update for product ${je.productId}: ${je.newQuantity}${je.unit||""}`),c(pe=>pe.map(Qr=>Qr.id===je.productId?{...Qr,quantity:je.newQuantity}:Qr))),je&&je.discounts&&(console.log("ðŸ“Š Discount list updated"),de(je.discounts)),je&&je.sale&&(console.log("ðŸ’° Sale detected, reloading stats"),Lt())}).catch(je=>{console.warn("âš ï¸ WebSocket connection failed:",je)});const as=xC(je=>{try{if(!je)return;console.log("ðŸ“¨ Product subscription message:",je.type),(je.type==="initial"||je.type==="products_snapshot"||je.type==="product_created"||je.type==="product_updated"||je.type==="product_deleted")&&St.getAll().then(pe=>{const Nt=pe.filter(Qr=>Qr.visibleToCashier!==!1&&!Qr.expenseOnly);console.log(`âœ… Subscription update: ${Nt.length} products`),c(Nt)}).catch(pe=>{console.error("Failed to fetch products from subscription:",pe)})}catch(pe){console.error("âŒ Product subscription handler error",pe)}});return()=>{window.removeEventListener("stock_updated",Pe),window.removeEventListener("productsSync",it),window.removeEventListener("productUpdated",Tt),window.removeEventListener("productCreated",Tt);try{as()}catch{}Or.disconnect()}},[e?.id]),N.useEffect(()=>{if(r){const I=r.filter(Y=>Y.visibleToCashier!==!1&&!Y.expenseOnly&&!Y.pendingDelete);c(I),ne(Date.now()),ue(Y=>Y+1)}},[r]),N.useEffect(()=>{const I=localStorage.getItem("token");let Y=null;return I&&Or.connect(I,le=>{console.log("ðŸ“¡ WebSocket callback received:",le),le&&le.allProducts&&(console.log(`ðŸ“¦ Merging ${le.allProducts.length} products from WebSocket`),Y&&clearTimeout(Y),Y=setTimeout(()=>{const ge=le.allProducts.filter(Pe=>Pe.visibleToCashier!==!1&&!Pe.expenseOnly);c(ge)},300)),le&&le.productId!==void 0&&le.newQuantity!==void 0&&(console.log(`ðŸ“¦ Stock update for product ${le.productId}: ${le.newQuantity}${le.unit||""}`),c(ge=>ge.map(it=>it.id===le.productId?{...it,quantity:le.newQuantity}:it))),le&&le.discounts&&(console.log("ðŸ“Š Discount list updated"),de(le.discounts)),le&&le.sale&&(console.log("ðŸ’° Sale detected, reloading stats"),Lt())}).catch(le=>{console.warn("âš ï¸ WebSocket connection failed:",le)}),()=>{Y&&clearTimeout(Y)}},[]),N.useEffect(()=>{(f.length>0||x||ce)&&fe()},[f,x,ce,V,e?.id]);const fe=()=>{localStorage.setItem(`cart_${e?.id}`,JSON.stringify(f)),localStorage.setItem(`paymentMethod_${e?.id}`,x),localStorage.setItem(`taxType_${e?.id}`,ce),V&&localStorage.setItem(`selectedDiscount_${e?.id}`,JSON.stringify(V))},Re=async()=>{try{D(!0);const I=await bo.create("clock_in");Le(I),be(!0);const Y=new Date(I.clockInTime);mt(Y),localStorage.setItem(`clockIn_${e?.id}_${new Date().toDateString()}`,Y.toISOString()),console.log("âœ… Clocked in successfully"),alert("âœ… Clocked in successfully at "+Y.toLocaleTimeString())}catch(I){console.error("Clock in failed:",I),alert("âŒ Clock in failed: "+(I.message||"Unknown error"))}finally{D(!1)}},Be=async()=>{try{D(!0);const I=await bo.create("clock_out");Le(I),be(!1),mt(null),localStorage.removeItem(`clockIn_${e?.id}_${new Date().toDateString()}`),console.log("âœ… Clocked out successfully");const Y=I.duration?`${I.duration} minutes`:"unknown duration";alert("âœ… Clocked out successfully. Duration: "+Y)}catch(I){console.error("Clock out failed:",I),alert("âŒ Clock out failed: "+(I.message||"Unknown error"))}finally{D(!1)}},Zr=async()=>{try{const I=await bo.getStatus();I.isClockedIn?(be(!0),mt(new Date(I.clockInTime)),Le(I),console.log("âœ… User is clocked in since:",I.clockInTime)):(be(!1),mt(null),Le(null),console.log("User is not clocked in"))}catch(I){console.warn("Failed to check clock status:",I),be(!1),mt(null)}},Lt=async()=>{try{const[I,Y,le,ge,Pe,it]=await Promise.all([St.getAll(),Kl.getAll(),Ro.getAll(),X1.get(),Mo.getAll(),ws.getAll().catch(()=>[])]);c(I.filter(Tt=>Tt.visibleToCashier!==!1&&!Tt.expenseOnly)),v({sales:Y,expenses:le,stats:ge}),d(Pe),de(it||[])}catch(I){console.error("Failed to load data:",I)}},Wi=(I,Y=!0)=>{const le=I.target.files[0];if(le){const ge=new FileReader;ge.onload=Pe=>{const it=Pe.target.result;J(it),Y&&T({...k,image:it})},ge.readAsDataURL(le)}},Hi=I=>u.filter(le=>le.productId===I&&le.quantity>0).reduce((le,ge)=>le+ge.quantity,0),Nk=I=>{const Y=Hi(I.id);if(Y<=0){alert("Product is out of stock!");return}const le=f.find(Pe=>Pe.id===I.id);if((le?le.quantity:0)>=Y){alert(`Only ${Y} units available in stock!`);return}h(le?f.map(Pe=>Pe.id===I.id?{...Pe,quantity:Pe.quantity+1}:Pe):[...f,{...I,quantity:1}])},Lc=(I,Y)=>{l.find(ge=>ge.id===I);const le=Hi(I);h(f.map(ge=>{if(ge.id===I){const Pe=ge.quantity+Y;return Pe>le?(alert(`Only ${le} units available!`),ge):{...ge,quantity:Math.max(1,Pe)}}return ge}).filter(ge=>ge.quantity>0))},Sk=I=>{h(f.filter(Y=>Y.id!==I))},ir=f.reduce((I,Y)=>I+Y.price*Y.quantity,0),Pk=async()=>{if(console.log("ðŸ›’ [Checkout] Starting optimized checkout flow"),f.length===0||$t){console.log("âš ï¸ [Checkout] Blocked: cart empty or already processing");return}Wt(!0),D(!0);const I=[...f],Y={...Mt},le=V,ge=ce;try{const Pe=f.reduce((pe,Nt)=>pe+Nt.price*Nt.quantity,0),it=V?V.type==="percentage"?Pe*V.value/100:V.value:0;let Tt=0,Nr=0;ce==="inclusive"?(Tt=Pe/1.16*.16,Nr=Pe-it):(Tt=(Pe-it)*.16,Nr=Pe-it+Tt);const as=f.map(pe=>({productId:pe.id,quantity:pe.quantity,unit:Mt[pe.id]||pe.unit||"piece",price:pe.price,name:pe.name}));console.log("ðŸ’³ [Checkout] Processing sale:",{items:as.length,total:Nr,discount:it,tax:Tt});const je=await UK({items:as,total:Nr,discount:it,tax:Tt,taxType:ce,paymentMethod:x,shiftId:Ve?.id},pe=>{console.log("âš¡ [Checkout] Optimistic update:",pe.action),h([]),sr({}),ie(null),U("exclusive")},pe=>{if(console.log(`âœ… [Checkout] Sale completed in ${pe.clientElapsedMs.toFixed(1)}ms ${pe.performanceGrade}`),pe.updatedProducts&&pe.updatedProducts.length>0)c(pe.updatedProducts),console.log("ðŸ“¦ [Checkout] Products updated from server");else{const ut=WK(l,pe.stockDeductions);c(ut),console.log("ðŸ“¦ [Checkout] Products updated optimistically")}zK();const Nt={id:pe.saleId,items:as,total:Nr,discount:it,tax:Tt,taxType:ce,paymentMethod:x,accountId:e?.accountId,cashierId:e?.id,cashierName:e?.name||"Cashier",stockDeductions:pe.stockDeductions||{},createdAt:pe.timestamp||new Date().toISOString()};v(ut=>({...ut,sales:[Nt,...ut.sales]})),console.log("ðŸ“¢ [Checkout] Dispatching sale_completed event for Monitor"),window.dispatchEvent(new CustomEvent("sale_completed",{detail:{sale:Nt,saleId:pe.saleId,total:Nr,timestamp:new Date().toISOString()}}));const Qr=pe.stockDeductions?.products?.map?.(ut=>`${ut.name||ut.productName}: -${ut.quantity||ut.deducted}${ut.unit||""}`).join(`
`)||"Stock updated";if(alert(`âœ… SALE COMPLETE!

Sale ID: #${pe.saleId}
Amount: KSH ${Nr.toLocaleString()}
Time: ${pe.processingTime||pe.clientElapsedMs.toFixed(1)+"ms"}
Performance: ${pe.performanceGrade}

Stock Deducted:
${Qr}`),pe.lowStockWarnings&&pe.lowStockWarnings.length>0){const ut=pe.lowStockWarnings.map(ss=>`âš ï¸ ${ss.name}: ${ss.quantity}${ss.unit} (Low Stock!)`).join(`
`);console.warn(`âš ï¸ [Checkout] Low stock warnings:
`+ut),setTimeout(()=>alert(`Low Stock Alert:

`+ut),1e3)}setTimeout(()=>{St.getAll().then(ut=>{const ss=ut.filter(Jx=>Jx.visibleToCashier!==!1&&!Jx.expenseOnly);c(ss),console.log("ðŸ”„ [Checkout] Background refresh complete")}).catch(ut=>console.warn("Background refresh failed:",ut))},100)},pe=>{console.error(`âŒ [Checkout] Failed after ${pe.elapsedMs.toFixed(1)}ms:`,pe.error),pe.needsRollback&&(h(I),sr(Y),ie(le),U(ge),console.log("ðŸ”„ [Checkout] Rolled back to previous state")),alert(`âŒ Sale Failed:

${pe.error}

Please try again.`)});console.log("âœ… [Checkout] Transaction completed successfully")}catch(Pe){console.error("âŒ [Checkout] Unexpected error:",Pe),h(I),sr(Y),ie(le),U(ge),alert(`âŒ Checkout Failed:

${Pe.message||"Unknown error occurred"}

Your cart has been restored.`)}finally{Wt(!1),D(!1)}},Ak=async I=>{I.preventDefault();try{console.log("âž• Creating new product:",k.name);const Y=await St.create({...k,price:parseFloat(k.price),cost:parseFloat(k.cost||0),quantity:0,visibleToCashier:!0,expenseOnly:!1});console.log("âœ… Product created:",Y),Y&&c(le=>[...le,Y]),T({name:"",price:"",cost:"",category:"finished",image:""}),J(""),w(!1),console.log("âœ… Product added successfully and visible in POS!"),alert("âœ… Product added successfully!")}catch(Y){console.error("âŒ Failed to add product:",Y.message,Y),alert(`âŒ Failed to add product: ${Y.message||"Unknown error"}`)}},Ok=async I=>{I.preventDefault();try{const Y=Array.isArray(u)?u:[],ge={id:Y.length>0?Math.max(...Y.map(Pe=>Pe.id||0))+1:1,productId:O.id,quantity:parseInt(E.quantity),expiryDate:E.expiryDate,batchNumber:E.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(E.cost||O.cost||0)};d(Pe=>[...Pe,ge]),await Mo.create({productId:O.id,quantity:parseInt(E.quantity),expiryDate:E.expiryDate,batchNumber:E.batchNumber||`BATCH-${Date.now()}`,cost:parseFloat(E.cost||O.cost||0)}),$({quantity:"",expiryDate:"",batchNumber:"",cost:""}),A(!1),C(null),await Lt(),alert("Stock added successfully!")}catch(Y){console.error("Failed to add stock:",Y),alert("Failed to add stock")}},Tk=async I=>{I.preventDefault();try{const Y={...H,amount:parseFloat(H.amount)};await Ro.create(Y),re({description:"",amount:"",category:""}),q(!1),window.dispatchEvent(new CustomEvent("expense_added",{detail:{expense:Y}})),await Lt()}catch(Y){console.error("Failed to add expense:",Y),alert("Failed to add expense")}},kk=async I=>{if(I.preventDefault(),!G.customerName||!G.amount){alert("Please fill in all required fields");return}F(!0);try{const Y=await yo.create({customerName:G.customerName,amount:parseFloat(G.amount),reason:G.reason,notes:G.notes});console.log("âœ… Credit request submitted:",Y),Z({customerName:"",amount:"",reason:"",notes:""}),K(!1),alert("âœ… Credit request submitted successfully!")}catch(Y){console.error("Failed to submit credit request:",Y),alert("âŒ Failed to submit credit request: "+(Y.message||"Unknown error"))}finally{F(!1)}},Ck=async()=>{if(window.confirm("Are you sure you want to clear all sales and expenses? This action cannot be undone."))try{const I=localStorage.getItem("token"),le=await fetch(`${ye}/clear-data`,{method:"POST",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({type:"all"})});if(!le.ok){const ge=await le.json();throw new Error(ge.message||"Failed to clear data")}v({sales:[],expenses:[],stats:{totalSales:0,totalExpenses:0,profit:0}}),h([]),alert("Data cleared successfully!"),await Lt()}catch(I){console.error("Failed to clear data:",I),alert("Failed to clear data: "+I.message)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex flex-col",children:[a.jsx(LK,{}),a.jsx("nav",{className:"bg-white/80 backdrop-blur-md border-b border-gray-200 px-6 py-4 sticky top-0 z-50 shadow-sm",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-green-600 to-teal-600 bg-clip-text text-transparent",children:"Cashier Dashboard"}),a.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Cashier Plan - KSH 900/month"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:e?.name}),a.jsx("p",{className:"text-xs text-gray-500",children:e?.email})]}),Ce&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-green-600 font-semibold",children:"ðŸŸ¢ Clocked In"}),a.jsxs("button",{onClick:Be,className:"px-4 py-2 rounded-lg font-medium transition-all bg-red-600 hover:bg-red-700 text-white flex items-center gap-2 shadow-md",children:[a.jsx(tC,{className:"w-4 h-4"}),"Clock Out"]})]}),!Ce&&a.jsxs("button",{onClick:Re,className:"px-4 py-2 rounded-lg font-medium transition-all bg-green-600 hover:bg-green-700 text-white flex items-center gap-2 shadow-md",children:[a.jsx(xo,{className:"w-4 h-4"}),"Clock In"]}),a.jsxs("button",{onClick:()=>{fe(),t()},className:"px-4 py-2 rounded-lg font-medium transition-all bg-red-100 hover:bg-red-200 text-red-600 border border-red-300 flex items-center gap-2",children:[a.jsx(Ir,{className:"w-4 h-4"}),"Logout"]}),a.jsxs("button",{onClick:Ck,className:"px-4 py-2 rounded-lg font-medium transition-all bg-orange-100 hover:bg-orange-200 text-orange-600 border border-orange-300 flex items-center gap-2",children:[a.jsx(tr,{className:"w-4 h-4"}),"Clear"]}),a.jsxs("button",{onClick:()=>K(!0),className:"px-4 py-2 rounded-lg font-medium transition-all bg-blue-100 hover:bg-blue-200 text-blue-600 border border-blue-300 flex items-center gap-2",children:[a.jsx(In,{className:"w-4 h-4"}),"Request Credit"]}),Ce&&et&&a.jsx("div",{className:"ml-auto text-right text-xs",children:a.jsxs("p",{className:"text-green-600 font-semibold flex items-center gap-1",children:[a.jsx(vr,{className:"w-4 h-4"}),"Clocked In: ",et.toLocaleTimeString()]})})]})]})}),a.jsxs("div",{className:"flex gap-2 px-6 py-4 bg-white border-b border-gray-200",children:[a.jsxs("button",{onClick:()=>m("pos"),className:`px-6 py-2 rounded-lg font-medium transition-all ${g==="pos"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(Br,{className:"w-4 h-4 inline mr-2"}),"POS"]}),a.jsxs("button",{onClick:()=>m("monitor"),className:`px-6 py-2 rounded-lg font-medium transition-all ${g==="monitor"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(og,{className:"w-4 h-4 inline mr-2"}),"Monitor"]}),a.jsxs("button",{onClick:()=>m("products"),className:`px-6 py-2 rounded-lg font-medium transition-all ${g==="products"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(jt,{className:"w-4 h-4 inline mr-2"}),"Products"]}),a.jsxs("button",{onClick:()=>m("expenses"),className:`px-6 py-2 rounded-lg font-medium transition-all ${g==="expenses"?"bg-gradient-to-r from-green-600 to-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:[a.jsx(Eo,{className:"w-4 h-4 inline mr-2"}),"Expenses"]})]}),g==="pos"&&a.jsxs("div",{className:"flex-1 flex",children:[a.jsxs("div",{className:"flex-1 p-6 overflow-y-auto",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search products...",className:"input pl-10",value:b,onChange:I=>S(I.target.value)})]})}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:l.filter(I=>I.name?.toLowerCase().includes(b.toLowerCase())).map(I=>{const Y=Hi(I.id),le=Y<10,ge=Y<=0;return a.jsxs("button",{onClick:()=>Nk(I),disabled:ge,className:`card text-left hover:shadow-xl transition-all transform hover:scale-105 relative ${ge?"opacity-50 cursor-not-allowed bg-gray-100":"bg-gradient-to-br from-white to-gray-50"}`,children:[I.image&&a.jsx("div",{className:"w-full h-32 mb-3 rounded-lg overflow-hidden bg-gray-100",children:a.jsx("img",{src:I.image,alt:I.name,className:"w-full h-full object-cover"})}),le&&!ge&&a.jsx("div",{className:"absolute top-2 right-2 bg-yellow-500 text-white p-1 rounded-full",children:a.jsx(pa,{className:"w-4 h-4"})}),ge&&a.jsx("div",{className:"absolute top-2 right-2 bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold",children:"OUT"}),a.jsx("h3",{className:"font-semibold mb-2 text-gray-900",children:I.name}),a.jsxs("p",{className:"text-xl font-bold text-green-600",children:["KSH ",I.price?.toLocaleString()]}),a.jsxs("div",{className:"flex justify-between items-center mt-2",children:[a.jsxs("p",{className:`text-xs font-medium ${ge?"text-red-600":le?"text-yellow-600":"text-gray-500"}`,children:["Stock: ",Y]}),le&&!ge&&a.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-medium",children:"Low Stock"})]})]},I.id)})})]}),a.jsxs("div",{className:"w-96 bg-white border-l border-gray-200 p-6 flex flex-col shadow-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-600 to-teal-600 rounded-xl flex items-center justify-center",children:a.jsx(Br,{className:"w-5 h-5 text-white"})}),a.jsx("h2",{className:"text-xl font-semibold",children:"Cart"}),a.jsxs("span",{className:"ml-auto bg-green-100 text-green-700 px-3 py-1 rounded-full text-sm font-semibold",children:[f.length," items"]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto mb-6",children:f.length===0?a.jsxs("div",{className:"text-center mt-16",children:[a.jsx(Br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400",children:"Cart is empty"})]}):a.jsx("div",{className:"space-y-3",children:f.map(I=>a.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-4 shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-3",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:I.name}),a.jsx("button",{onClick:()=>Sk(I.id),className:"text-red-600 hover:bg-red-50 p-1 rounded",children:a.jsx(tr,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>Lc(I.id,-1),className:"w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-100 transition-colors",children:a.jsx(rC,{className:"w-4 h-4"})}),a.jsx("span",{className:"w-10 text-center font-semibold",children:I.quantity}),a.jsx("button",{onClick:()=>Lc(I.id,1),className:"w-8 h-8 rounded-lg bg-white shadow-sm flex items-center justify-center hover:bg-gray-100 transition-colors",children:a.jsx(Ge,{className:"w-4 h-4"})})]}),a.jsxs("span",{className:"font-bold text-green-600",children:["KSH ",(I.price*I.quantity).toLocaleString()]})]}),a.jsxs("div",{className:"flex gap-2 items-center mt-2",children:[a.jsx("label",{className:"text-xs font-semibold text-gray-600",children:"Unit:"}),a.jsxs("select",{value:Mt[I.id]||I.unit||"piece",onChange:Y=>{sr({...Mt,[I.id]:Y.target.value})},className:"text-xs px-2 py-1 border border-gray-300 rounded bg-white",children:[a.jsx("option",{value:"piece",children:"Piece"}),a.jsx("option",{value:"kg",children:"Kilogram (kg)"}),a.jsx("option",{value:"g",children:"Grams (g)"}),a.jsx("option",{value:"l",children:"Liters (L)"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",max:"999",placeholder:"qty",defaultValue:I.quantity,className:"text-xs px-2 py-1 border border-gray-300 rounded w-16",onChange:Y=>{const le=parseFloat(Y.target.value);!isNaN(le)&&le>0&&Lc(I.id,le-I.quantity)}})]})]},I.id))})}),a.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[a.jsxs("div",{className:"space-y-2 bg-gray-50 p-3 rounded-lg",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:"Subtotal:"}),a.jsxs("span",{className:"text-gray-700",children:["KSH ",ir.toLocaleString()]})]}),V&&a.jsxs("div",{className:"flex justify-between text-sm text-green-600",children:[a.jsx("span",{children:"Discount:"}),a.jsxs("span",{children:["-KSH ",(V.type==="percentage"?ir*V.value/100:V.value).toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm text-orange-600",children:[a.jsxs("span",{children:["Tax (",ce==="exclusive"?"Added":"Included","):"]}),a.jsxs("span",{children:[ce==="exclusive"?"+":"","KSH ",((ir-(V?V.type==="percentage"?ir*V.value/100:V.value:0))*.16).toLocaleString()]})]}),a.jsxs("div",{className:"border-t pt-2 flex justify-between text-lg font-bold",children:[a.jsx("span",{children:"Final Total:"}),a.jsxs("span",{className:"text-green-600",children:["KSH ",(ce==="exclusive"?ir-(V?V.type==="percentage"?ir*V.value/100:V.value:0)+(ir-(V?V.type==="percentage"?ir*V.value/100:V.value:0))*.16:ir-(V?V.type==="percentage"?ir*V.value/100:V.value:0)).toLocaleString()]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Discount (Optional)"}),a.jsxs("select",{value:V?.id||"",onChange:I=>{I.target.value?ie(Q.find(Y=>Y.id===parseInt(I.target.value))):ie(null)},className:"input",children:[a.jsx("option",{value:"",children:"No Discount"}),Q.filter(I=>I.active).map(I=>a.jsxs("option",{value:I.id,children:[I.name," - ",I.type==="percentage"?`${I.value}%`:`KSH ${I.value}`]},I.id))]}),V&&a.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Discount: KSH ",(V.type==="percentage"?ir*V.value/100:V.value).toLocaleString()]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Tax Type"}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",value:"exclusive",checked:ce==="exclusive",onChange:I=>U(I.target.value)}),a.jsx("span",{className:"text-sm",children:"Tax Exclusive (16% added)"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",value:"inclusive",checked:ce==="inclusive",onChange:I=>U(I.target.value)}),a.jsx("span",{className:"text-sm",children:"Tax Inclusive"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold mb-2",children:"Payment Method"}),a.jsxs("select",{value:x,onChange:I=>p(I.target.value),className:"input",children:[a.jsx("option",{value:"cash",children:"Cash"}),a.jsx("option",{value:"mpesa",children:"M-Pesa"}),a.jsx("option",{value:"card",children:"Card"})]})]}),a.jsx("button",{onClick:()=>{try{console.log("ðŸ›’ Complete Sale button clicked"),Pk()}catch(I){console.error("âŒ Button handler error:",I),alert(`Error: ${I.message}`)}},disabled:f.length===0||$t,className:"btn-primary w-full py-4 text-lg bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:$t?"â³ Processing...":"Checkout"})]})]})]}),g==="monitor"&&a.jsxs("div",{className:"p-6 max-w-7xl mx-auto w-full",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"card bg-gradient-to-br from-green-500 to-emerald-600 text-white border-0 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-100 mb-1",children:"Total Sales"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",y.stats.totalSales?.toLocaleString()||0]})]}),a.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(Dt,{className:"w-8 h-8"})})]})}),a.jsx("div",{className:"card bg-gradient-to-br from-red-500 to-pink-600 text-white border-0 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-100 mb-1",children:"Expenses"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",y.stats.totalExpenses?.toLocaleString()||0]})]}),a.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(Eo,{className:"w-8 h-8"})})]})}),a.jsx("div",{className:"card bg-gradient-to-br from-blue-500 to-indigo-600 text-white border-0 shadow-lg",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-100 mb-1",children:"Net Profit"}),a.jsxs("p",{className:"text-3xl font-bold",children:["KSH ",y.stats.profit?.toLocaleString()||0]})]}),a.jsx("div",{className:"w-14 h-14 bg-white/20 rounded-2xl flex items-center justify-center",children:a.jsx(Dt,{className:"w-8 h-8"})})]})})]}),a.jsxs("div",{className:"card shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Sales"}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date & Time"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Items"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Payment"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock Deducted"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Total"})]})}),a.jsx("tbody",{children:y.sales&&y.sales.slice(-15).reverse().map((I,Y)=>{const le=I.stockDeductions?.products?.slice(0,2).map(ge=>`${ge.name}: -${ge.deducted}${ge.unit}`).join(", ")+(I.stockDeductions?.products?.length>2?"...":"")||"None";return a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:new Date(I.createdAt).toLocaleString()}),a.jsxs("td",{className:"px-4 py-3 text-sm",children:[I.items?.length||0," items"]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-success",children:I.paymentMethod||"cash"})}),a.jsx("td",{className:"px-4 py-3 text-sm text-orange-600 font-semibold",children:le}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",I.total?.toLocaleString()]})]},Y)})})]})})]}),a.jsxs("div",{className:"card shadow-lg mt-6",children:[a.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[a.jsx(jt,{className:"w-5 h-5 text-orange-600"}),"Stock Deductions Log"]}),a.jsxs("div",{className:"overflow-x-auto",children:[a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{className:"bg-orange-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Sale ID"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Product"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Before"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Deducted"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"After"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Unit"}),a.jsx("th",{className:"px-4 py-3 text-left font-semibold text-gray-700",children:"Time"})]})}),a.jsx("tbody",{children:y.sales&&y.sales.slice(-20).reverse().map(I=>I.stockDeductions?.products?.map((Y,le)=>a.jsxs("tr",{className:"border-t border-orange-100 hover:bg-orange-50 transition-colors",children:[a.jsxs("td",{className:"px-4 py-3 font-medium text-blue-600",children:["#",I.id]}),a.jsx("td",{className:"px-4 py-3",children:Y.name}),a.jsx("td",{className:"px-4 py-3 text-gray-600",children:Y.before}),a.jsxs("td",{className:"px-4 py-3 font-semibold text-red-600",children:["-",Y.deducted]}),a.jsx("td",{className:"px-4 py-3 font-semibold text-green-600",children:Y.after}),a.jsx("td",{className:"px-4 py-3 text-gray-600",children:Y.unit}),a.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:new Date(I.createdAt).toLocaleTimeString()})]},`${I.id}-${le}`)))})]}),(!y.sales||y.sales.length===0||!y.sales.some(I=>I.stockDeductions?.products?.length>0))&&a.jsx("div",{className:"p-4 text-center text-gray-500",children:"No stock deductions yet"})]})]})]}),a.jsx("div",{className:"p-6 max-w-7xl mx-auto w-full",children:a.jsxs("div",{className:"card shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Manage Products & Stock"}),a.jsxs("button",{onClick:()=>w(!0),className:"btn-primary flex items-center gap-2 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-700 hover:to-teal-700",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Product"]})]}),j&&a.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-br from-green-50 to-teal-50 rounded-xl border-2 border-green-200",children:[a.jsx("h4",{className:"font-semibold mb-4 text-lg",children:"Add New Product"}),a.jsxs("form",{onSubmit:Ak,className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Product Name",className:"input",value:k.name,onChange:I=>T({...k,name:I.target.value}),required:!0}),a.jsxs("select",{className:"input",value:k.category,onChange:I=>T({...k,category:I.target.value}),children:[a.jsx("option",{value:"finished",children:"Finished Product"}),a.jsx("option",{value:"raw",children:"Raw Material"}),a.jsx("option",{value:"service",children:"Service"})]}),a.jsx("input",{type:"number",placeholder:"Selling Price",className:"input",value:k.price,onChange:I=>T({...k,price:I.target.value}),required:!0}),a.jsx("input",{type:"number",placeholder:"Cost Price (Optional)",className:"input",value:k.cost,onChange:I=>T({...k,cost:I.target.value})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Product Image"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:I=>Wi(I,!0),className:"input"}),a.jsx(M1,{className:"w-5 h-5 text-gray-400"})]}),M&&a.jsx("div",{className:"mt-2",children:a.jsx("img",{src:M,alt:"Preview",className:"w-24 h-24 object-cover rounded-lg border"})})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Product"}),a.jsx("button",{type:"button",onClick:()=>{w(!1),J(""),T({name:"",price:"",cost:"",category:"finished",image:""})},className:"btn-secondary",children:"Cancel"})]})]})]}),P&&O&&a.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border-2 border-blue-200",children:[a.jsxs("h4",{className:"font-semibold mb-4 text-lg",children:["Add Stock for ",O.name]}),a.jsxs("form",{onSubmit:Ok,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"number",placeholder:"Quantity",className:"input",value:E.quantity,onChange:I=>$({...E,quantity:I.target.value}),required:!0}),a.jsx("input",{type:"date",placeholder:"Expiry Date (Optional)",className:"input",value:E.expiryDate,onChange:I=>$({...E,expiryDate:I.target.value})}),a.jsx("input",{type:"text",placeholder:"Batch Number (Optional)",className:"input",value:E.batchNumber,onChange:I=>$({...E,batchNumber:I.target.value})}),a.jsx("input",{type:"number",placeholder:"Cost per Unit",className:"input",value:E.cost,onChange:I=>$({...E,cost:I.target.value})}),a.jsxs("div",{className:"flex gap-2 md:col-span-4",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add Stock"}),a.jsx("button",{type:"button",onClick:()=>{A(!1),C(null),$({quantity:"",expiryDate:"",batchNumber:"",cost:""})},className:"btn-secondary",children:"Cancel"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Product"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Price"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Stock"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Batches"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Actions"})]})}),a.jsx("tbody",{children:l.map(I=>{const Y=Hi(I.id),le=u.filter(Pe=>Pe.productId===I.id&&Pe.quantity>0),ge=Y<10;return a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-3",children:a.jsxs("div",{className:"flex items-center gap-3",children:[I.image&&a.jsx("img",{src:I.image,alt:I.name,className:"w-10 h-10 object-cover rounded-lg"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:I.name}),a.jsx("div",{className:"text-xs text-gray-500",children:I.category})]})]})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:["KSH ",I.price?.toLocaleString()]}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`font-medium ${Y===0?"text-red-600":ge?"text-yellow-600":"text-gray-900"}`,children:Y}),ge&&Y>0&&a.jsx(pa,{className:"w-4 h-4 text-yellow-500"}),Y===0&&a.jsx("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full font-medium",children:"Out of Stock"})]})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("span",{className:"text-gray-600",children:[le.length," active"]})}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{C(I),A(!0)},className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-colors",title:"Add Stock",children:a.jsx(Ge,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 hover:bg-green-50 rounded-lg text-green-600 transition-colors",title:"Edit Product",children:a.jsx(Bn,{className:"w-4 h-4"})})]})})]},I.id)})})]})})]})}),")}",g==="expenses"&&a.jsx("div",{className:"p-6 max-w-7xl mx-auto w-full",children:a.jsxs("div",{className:"card shadow-lg",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Track Expenses"}),a.jsxs("button",{onClick:()=>q(!0),className:"btn-primary flex items-center gap-2 bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-700 hover:to-pink-700",children:[a.jsx(Ge,{className:"w-4 h-4"}),"Add Expense"]})]}),L&&a.jsxs("div",{className:"mb-6 p-6 bg-gradient-to-br from-red-50 to-pink-50 rounded-xl border-2 border-red-200",children:[a.jsx("h4",{className:"font-semibold mb-4 text-lg",children:"Add New Expense"}),a.jsxs("form",{onSubmit:Tk,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("input",{type:"text",placeholder:"Description",className:"input",value:H.description,onChange:I=>re({...H,description:I.target.value}),required:!0}),a.jsx("input",{type:"number",placeholder:"Amount",className:"input",value:H.amount,onChange:I=>re({...H,amount:I.target.value}),required:!0}),a.jsx("input",{type:"text",placeholder:"Category",className:"input",value:H.category,onChange:I=>re({...H,category:I.target.value})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{type:"submit",className:"btn-primary flex-1",children:"Add"}),a.jsx("button",{type:"button",onClick:()=>q(!1),className:"btn-secondary",children:"Cancel"})]})]})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Date"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Description"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Category"}),a.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold text-gray-700",children:"Amount"})]})}),a.jsx("tbody",{children:y.expenses.slice().reverse().map((I,Y)=>a.jsxs("tr",{className:"border-t border-gray-100 hover:bg-gray-50 transition-colors",children:[a.jsx("td",{className:"px-4 py-3 text-sm",children:new Date(I.createdAt).toLocaleDateString()}),a.jsx("td",{className:"px-4 py-3 text-sm",children:I.description}),a.jsx("td",{className:"px-4 py-3 text-sm",children:a.jsx("span",{className:"badge badge-warning",children:I.category||"General"})}),a.jsxs("td",{className:"px-4 py-3 text-sm font-semibold text-red-600",children:["KSH ",I.amount?.toLocaleString()]})]},Y))})]})})]})}),z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-96 overflow-y-auto",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white flex justify-between items-center sticky top-0",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(In,{}),"Request Credit"]}),a.jsx("button",{onClick:()=>K(!1),className:"hover:bg-white/20 p-2 rounded-lg transition",children:a.jsx(yr,{size:24})})]}),a.jsxs("form",{onSubmit:kk,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Customer Name *"}),a.jsx("input",{type:"text",placeholder:"Enter customer name",value:G.customerName,onChange:I=>Z({...G,customerName:I.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:R})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Amount (KES) *"}),a.jsx("input",{type:"number",placeholder:"0.00",value:G.amount,onChange:I=>Z({...G,amount:I.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent",min:"0",step:"0.01",required:!0,disabled:R})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Reason"}),a.jsxs("select",{value:G.reason,onChange:I=>Z({...G,reason:I.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:R,children:[a.jsx("option",{value:"",children:"Select reason..."}),a.jsx("option",{value:"regular_customer",children:"Regular Customer"}),a.jsx("option",{value:"emergency",children:"Emergency"}),a.jsx("option",{value:"bulk_order",children:"Bulk Order"}),a.jsx("option",{value:"other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Notes"}),a.jsx("textarea",{placeholder:"Add any additional notes...",value:G.notes,onChange:I=>Z({...G,notes:I.target.value}),className:"w-full px-4 py-3 rounded-lg border focus:ring-2 focus:ring-blue-500 focus:border-transparent",rows:"3",disabled:R})]}),a.jsxs("div",{className:"flex gap-2 pt-4",children:[a.jsx("button",{type:"submit",disabled:R,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 rounded-lg font-bold hover:shadow-lg transition disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Submitting...":"Submit Request"}),a.jsx("button",{type:"button",onClick:()=>K(!1),disabled:R,className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg font-bold hover:bg-gray-300 transition disabled:opacity-50",children:"Cancel"})]})]})]})}),a.jsx($K,{isLocked:s,onUnlock:o,userPin:e?.pin||"1234",userName:e?.name})]})}function KK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState({sales:0,count:0});return N.useEffect(()=>{const i=JSON.parse(localStorage.getItem("dayStats")||'{"sales": 0, "count": 0}');s(i)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-900 to-amber-700",children:[a.jsx("div",{className:"bg-amber-900 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(W1,{size:32,className:"text-amber-300"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Bar POS"}),a.jsx("p",{className:"text-amber-200 text-sm",children:"Drinks & Beverages"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-amber-200 text-sm",children:"Today's Sales"}),a.jsxs("p",{className:"text-2xl font-bold text-green-400",children:[n.sales.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-amber-300 text-xs",children:[n.count," transactions"]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),a.jsx("div",{className:"bg-amber-800 text-white border-b border-amber-700",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-amber-600 rounded-lg font-semibold",children:"ðŸº Beer"}),a.jsx("div",{className:"px-4 py-2 hover:bg-amber-700 rounded-lg cursor-pointer transition",children:"ðŸ· Wine"}),a.jsx("div",{className:"px-4 py-2 hover:bg-amber-700 rounded-lg cursor-pointer transition",children:"ðŸ¥ƒ Spirits"}),a.jsx("div",{className:"px-4 py-2 hover:bg-amber-700 rounded-lg cursor-pointer transition",children:"ðŸ§Š Mixers"}),a.jsx("div",{className:"px-4 py-2 hover:bg-amber-700 rounded-lg cursor-pointer transition",children:"ðŸ¸ Cocktails"})]})}),a.jsx("div",{className:"bg-amber-50",children:a.jsx(hn,{businessType:"bar"})}),a.jsx("div",{className:"bg-amber-900 text-white py-4 text-center",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Hl,{size:16,className:"text-yellow-400"}),a.jsx("p",{className:"text-sm",children:"Fast checkout â€¢ Age verification on premium items â€¢ Real-time inventory"})]})})]})}function GK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState(""),[i,o]=N.useState({revenue:0,patients:0});return N.useEffect(()=>{const l=JSON.parse(localStorage.getItem("dayStats")||'{"revenue": 0, "patients": 0}');o(l)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-red-50 to-red-100",children:[a.jsx("div",{className:"bg-red-700 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(nC,{size:32,className:"text-red-200"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Hospital POS"}),a.jsx("p",{className:"text-red-200 text-sm",children:"Patient Billing System"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-red-200 text-sm",children:"Daily Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-green-300",children:[i.revenue.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-red-200 text-xs",children:[i.patients," patients served"]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-red-900 hover:bg-red-950 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),a.jsx("div",{className:"bg-white border-b shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Va,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search patient by ID or name...",value:n,onChange:l=>s(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),a.jsxs("button",{className:"bg-red-600 hover:bg-red-700 text-white px-6 py-2 rounded-lg transition flex items-center gap-2",children:[a.jsx(vr,{size:18}),"Recent Patients"]})]})})}),a.jsx("div",{className:"bg-gray-100 border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-red-600 text-white rounded-lg font-semibold",children:"ðŸ¥ Services"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ’Š Medicines"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ§ª Lab Tests"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ“‹ Procedures"})]})}),a.jsx("div",{className:"bg-white",children:a.jsx(hn,{businessType:"hospital"})}),a.jsx("div",{className:"bg-red-700 text-white py-4 text-center",children:a.jsx("p",{className:"text-sm",children:"Patient records integrated â€¢ Invoice generation â€¢ Real-time inventory tracking"})})]})}function XK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState(""),[i,o]=N.useState({feesCollected:0,transactions:0});return N.useEffect(()=>{const l=JSON.parse(localStorage.getItem("dayStats")||'{"feesCollected": 0, "transactions": 0}');o(l)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-blue-100",children:[a.jsx("div",{className:"bg-blue-700 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(aC,{size:32,className:"text-blue-200"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"School POS"}),a.jsx("p",{className:"text-blue-200 text-sm",children:"Student & Fee Management"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-blue-200 text-sm",children:"Fees Collected Today"}),a.jsxs("p",{className:"text-2xl font-bold text-green-300",children:[i.feesCollected.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-blue-200 text-xs",children:[i.transactions," transactions"]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-blue-900 hover:bg-blue-950 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),a.jsx("div",{className:"bg-white border-b shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(Xe,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search student by name, admission number, or class...",value:n,onChange:l=>s(l.target.value),className:"w-full pl-10 pr-4 py-2 border border-blue-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("button",{className:"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition flex items-center gap-2",children:[a.jsx(sC,{size:18}),"Fee Slip"]})]})})}),a.jsx("div",{className:"bg-gray-100 border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-semibold",children:"ðŸ’° Term Fees"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ½ï¸ Canteen"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ‘• Uniforms"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ“š Books"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"âœï¸ Supplies"})]})}),a.jsx("div",{className:"bg-white",children:a.jsx(hn,{businessType:"school"})}),a.jsx("div",{className:"bg-blue-700 text-white py-4 text-center",children:a.jsx("p",{className:"text-sm",children:"Student records linked â€¢ Receipt generation â€¢ Year-end reports"})})]})}function YK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState({sales:0,itemsSold:0,lowStockItems:0});return N.useEffect(()=>{const i=JSON.parse(localStorage.getItem("dayStats")||'{"sales": 0, "itemsSold": 0, "lowStockItems": 0}');s(i)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-green-100",children:[a.jsx("div",{className:"bg-green-700 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pm,{size:32,className:"text-green-200"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Kiosk POS"}),a.jsx("p",{className:"text-green-200 text-sm",children:"Fast & Simple Checkout"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-green-200 text-sm",children:"Today's Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-300",children:[n.sales.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-green-200 text-xs",children:[n.itemsSold," items sold"]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-green-900 hover:bg-green-950 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),n.lowStockItems>0&&a.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex items-center gap-2 text-yellow-800",children:[a.jsx(un,{size:20}),a.jsxs("span",{className:"font-semibold",children:[n.lowStockItems," items running low on stock"]})]})}),a.jsx("div",{className:"bg-gray-100 border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-green-600 text-white rounded-lg font-semibold",children:"ðŸª All Items"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ”Œ Electronics"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸª Food"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ¥¤ Drinks"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ›’ Supplies"})]})}),a.jsx("div",{className:"bg-white",children:a.jsx(hn,{businessType:"kiosk"})}),a.jsxs("div",{className:"bg-green-700 text-white py-4 text-center flex items-center justify-center gap-2",children:[a.jsx(Hl,{size:18,className:"text-yellow-300"}),a.jsx("p",{className:"text-sm",children:"Lightning-fast checkout â€¢ Low stock alerts â€¢ Real-time updates"})]})]})}function JK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState("1"),[i,o]=N.useState({revenue:0,liters:0,pumpTotal:0});return N.useEffect(()=>{const l=JSON.parse(localStorage.getItem("dayStats")||'{"revenue": 0, "liters": 0, "pumpTotal": 0}');o(l)},[]),a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-yellow-50 to-yellow-100",children:[a.jsx("div",{className:"bg-gradient-to-r from-yellow-600 to-yellow-700 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(V1,{size:32,className:"text-yellow-200"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Petrol POS"}),a.jsx("p",{className:"text-yellow-200 text-sm",children:"Fuel & Tank Management"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-yellow-200 text-sm",children:"Daily Revenue"}),a.jsxs("p",{className:"text-2xl font-bold text-green-300",children:[i.revenue.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-yellow-200 text-xs",children:[i.liters.toLocaleString()," liters sold"]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-yellow-900 hover:bg-yellow-950 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),a.jsx("div",{className:"bg-white border-b shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"font-semibold text-gray-700",children:"Select Pump:"}),a.jsx("div",{className:"flex gap-3",children:[1,2,3,4,5,6].map(l=>a.jsxs("button",{onClick:()=>s(l.toString()),className:`px-6 py-2 rounded-lg font-bold transition ${n===l.toString()?"bg-yellow-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[a.jsx(iC,{size:18,className:"inline mr-2"}),"Pump ",l]},l))}),a.jsxs("div",{className:"ml-auto text-right",children:[a.jsxs("p",{className:"text-sm text-gray-600",children:["Pump ",n," Total"]}),a.jsxs("p",{className:"text-2xl font-bold text-yellow-600",children:[i.pumpTotal.toLocaleString()," KES"]})]})]})})}),a.jsx("div",{className:"bg-gray-100 border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-yellow-600 text-white rounded-lg font-semibold",children:"â›½ Super"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"â›½ Regular"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"â›½ Diesel"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ›¢ï¸ LPG"})]})}),a.jsx("div",{className:"bg-white",children:a.jsx(hn,{businessType:"petrol",pumpNumber:n})}),a.jsxs("div",{className:"bg-yellow-700 text-white py-4 text-center flex items-center justify-center gap-2",children:[a.jsx(ft,{size:18}),a.jsx("p",{className:"text-sm",children:"Pump tracking â€¢ Tank management â€¢ Shift reconciliation â€¢ Real-time readings"})]})]})}function ZK(){const{user:e,logout:t}=Oe(),r=wt(),[n,s]=N.useState({size:"",color:""}),[i,o]=N.useState({sales:0,pairs:0,topSize:""});N.useEffect(()=>{const u=JSON.parse(localStorage.getItem("dayStats")||'{"sales": 0, "pairs": 0, "topSize": ""}');o(u)},[]);const l=["5","6","7","8","9","10","11","12","13"],c=["Black","White","Brown","Blue","Red","Green","Pink","Gray"];return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-purple-100",children:[a.jsx("div",{className:"bg-purple-700 text-white shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 text-purple-200",children:"ðŸ‘Ÿ"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Shoes POS"}),a.jsx("p",{className:"text-purple-200 text-sm",children:"Footwear & Variants"})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-purple-200 text-sm",children:"Daily Sales"}),a.jsxs("p",{className:"text-2xl font-bold text-green-300",children:[i.sales.toLocaleString()," KES"]}),a.jsxs("p",{className:"text-purple-200 text-xs",children:[i.pairs," pairs sold â€¢ Top: Size ",i.topSize]})]}),a.jsxs("button",{onClick:()=>{t(),r("/auth/login")},className:"flex items-center gap-2 bg-purple-900 hover:bg-purple-950 px-4 py-2 rounded-lg transition",children:[a.jsx(Ir,{size:20}),"Logout"]})]})]})})}),a.jsx("div",{className:"bg-white border-b shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(oC,{size:18,className:"inline mr-2"}),"Filter by Size"]}),a.jsx("div",{className:"flex gap-2 flex-wrap",children:l.map(u=>a.jsx("button",{onClick:()=>s({...n,size:u===n.size?"":u}),className:`w-10 h-10 rounded-lg font-bold transition ${n.size===u?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:u},u))})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:[a.jsx(jt,{size:18,className:"inline mr-2"}),"Filter by Color"]}),a.jsxs("select",{value:n.color,onChange:u=>s({...n,color:u.target.value}),className:"px-4 py-2 border border-purple-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[a.jsx("option",{value:"",children:"All Colors"}),c.map(u=>a.jsx("option",{value:u,children:u},u))]})]})]})})}),a.jsx("div",{className:"bg-gray-100 border-b",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-3 flex gap-4 overflow-x-auto",children:[a.jsx("div",{className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-semibold",children:"ðŸ‘Ÿ All Shoes"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸƒ Sports"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ‘ž Formal"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ‘  Casual"}),a.jsx("div",{className:"px-4 py-2 bg-white rounded-lg cursor-pointer hover:bg-gray-200 transition",children:"ðŸ‘¢ Boots"})]})}),a.jsx("div",{className:"bg-white",children:a.jsx(hn,{businessType:"shoes",filters:n})}),a.jsx("div",{className:"bg-purple-700 text-white py-4 text-center",children:a.jsx("p",{className:"text-sm",children:"Variant management â€¢ Size & color tracking â€¢ Stock by variant â€¢ Real-time availability"})})]})}function _1(){const[e,t]=N.useState([]),[r,n]=N.useState([]),[s,i]=N.useState("all"),[o,l]=N.useState(""),[c,u]=N.useState(!1),[d,f]=N.useState([]),[h,x]=N.useState({subject:"",message:""}),[p,g]=N.useState(!0),[m,y]=N.useState(null),[v,b]=N.useState(!0),[S,j]=N.useState(null),w=wt(),[P,A]=N.useState({totalUsers:0,activeUsers:0,lockedUsers:0,totalRevenue:0,pendingPayments:0,overduePayments:0}),[O,C]=N.useState([]);N.useEffect(()=>{const R=localStorage.getItem("token")||localStorage.getItem("mainAdminToken"),F=localStorage.getItem("user")||localStorage.getItem("mainAdminUser");if(!R||!F){w("/main-admin/login");return}try{if(JSON.parse(F).role!=="owner"){w("/main-admin/login");return}}catch{w("/main-admin/login");return}k().finally(()=>g(!1));const H=JSON.parse(localStorage.getItem("authActivities")||"[]");C(H.slice(0,10));const re=setInterval(()=>{const M=JSON.parse(localStorage.getItem("authActivities")||"[]");C(M.slice(0,10))},5e3);return()=>clearInterval(re)},[w]);const k=async()=>{try{y(null);let R=[],F=!0;try{R=await Fc.getUsers()}catch(H){console.warn("MainAdmin API not available, falling back to regular users API:",H.message);try{R=await Pn.getAll()}catch(re){console.warn("Users API also failed:",re.message),F=!1}}R.length===0&&!F&&(R=E()),t(R),b(F),L(R,[])}catch(R){console.error("Failed to load data:",R),y("Failed to load dashboard data");const F=E();t(F),n($(F)),b(!1),L(F,[])}},T=()=>{localStorage.removeItem("mainAdminToken"),localStorage.removeItem("mainAdminUser"),w("/main-admin/login")},E=()=>{const R=localStorage.getItem("user"),F=[];if(R){const re=JSON.parse(R);F.push({...re,id:re.id||"real-user"})}return[{name:"John Doe",email:"john@example.com",plan:"ultra",price:1600,active:!0,locked:!1,role:"admin"},{name:"Jane Smith",email:"jane@example.com",plan:"basic",price:900,active:!0,locked:!1,role:"cashier"},{name:"Bob Wilson",email:"bob@example.com",plan:"ultra",price:1600,active:!1,locked:!1,role:"admin"},{name:"Alice Brown",email:"alice@example.com",plan:"basic",price:900,active:!0,locked:!0,role:"cashier"},{name:"Mike Johnson",email:"mike@example.com",plan:"ultra",price:1600,active:!0,locked:!1,role:"admin"},{name:"Sarah Davis",email:"sarah@example.com",plan:"basic",price:900,active:!1,locked:!1,role:"cashier"}].forEach((re,M)=>{F.push({id:`demo-${M+1}`,...re,createdAt:new Date(Date.now()-M*864e5).toISOString(),lastLogin:new Date(Date.now()-Math.random()*864e5).toISOString()})}),F},$=R=>R.flatMap(F=>[{id:`payment-${F.id}-1`,userId:F.id,amount:F.plan==="ultra"?1600:900,status:Math.random()>.3?"paid":"pending",createdAt:new Date(Date.now()-30*864e5).toISOString(),dueDate:new Date(Date.now()+5*864e5).toISOString()},{id:`payment-${F.id}-2`,userId:F.id,amount:F.plan==="ultra"?1600:900,status:Math.random()>.7?"paid":Math.random()>.5?"pending":"overdue",createdAt:new Date(Date.now()-60*864e5).toISOString(),dueDate:new Date(Date.now()-5*864e5).toISOString()}]),L=(R,F)=>{const H=R.length,re=R.filter(V=>V.active).length,M=R.filter(V=>V.locked).length,J=F.filter(V=>V.status==="paid").reduce((V,ie)=>V+ie.amount,0),Q=F.filter(V=>V.status==="pending").length,de=F.filter(V=>V.status==="overdue").length;A({totalUsers:H,activeUsers:re,lockedUsers:M,totalRevenue:J,pendingPayments:Q,overduePayments:de})},q=async(R,F)=>{try{j(R);const H=!F;try{await Fc.lockUser(R,H);const re=e.map(Q=>Q.id===R?{...Q,locked:H,active:!H}:Q);t(re),L(re,r);const M=e.find(Q=>Q.id===R),J=H?"locked":"unlocked";alert(`âœ… ${M?.name||`User ${R}`} has been ${J} successfully!`)}catch(re){console.error("API lock failed:",re);const M=e.map(de=>de.id===R?{...de,locked:H,active:!H}:de);t(M),L(M,r);const J=e.find(de=>de.id===R),Q=H?"locked":"unlocked";alert(`âš ï¸ Backend not available. ${J?.name||`User ${R}`} ${Q} locally. Changes will sync when backend is available.`)}}catch(H){console.error("Failed to toggle lock:",H),alert(`âŒ Failed to update user status: ${H.message}`)}finally{j(null)}},z=async(R,F,H)=>{try{g(!0);try{await Fc.sendEmail({userIds:R,subject:F,message:H}),alert("Emails sent successfully!"),u(!1),f([]),x({subject:"",message:""});return}catch(J){console.warn("Backend email operation failed, simulating email send:",J.message)}const re=e.filter(J=>R.includes(J.id)),M=JSON.parse(localStorage.getItem("emailLogs")||"[]");M.push({timestamp:new Date().toISOString(),recipients:re.map(J=>({id:J.id,name:J.name,email:J.email})),subject:F,message:H,status:"simulated"}),localStorage.setItem("emailLogs",JSON.stringify(M)),alert(`âœ… Email simulation successful!

ðŸ“§ Sent to ${re.length} user(s):
${re.map(J=>`${J.name} (${J.email})`).join(`
`)}

${v?"":`ðŸ“Œ Backend not deployed - this was a simulation.
`}ðŸ’¡ Deploy backend to send real emails.`),u(!1),f([]),x({subject:"",message:""})}catch(re){console.error("Failed to send email:",re),alert("Failed to process email request.")}finally{g(!1)}},K=async R=>{const F=e.find(H=>H.id===R);F&&await z([R],"Payment Reminder - Subscription",`Dear ${F.name},

This is a friendly reminder about your pending subscription payment for ${F.plan?.toUpperCase()} plan (KSH ${F.price}).

Please complete your payment to continue enjoying our services.

Thank you!`)},G=e.filter(R=>{const F=R.name?.toLowerCase().includes(o.toLowerCase())||R.email?.toLowerCase().includes(o.toLowerCase());if(s==="all")return F;if(s==="active")return F&&R.active&&!R.locked;if(s==="locked")return F&&R.locked;if(s==="trial")return F&&(!R.active||!R.plan);if(s==="pending-payment"){const H=r.filter(re=>re.userId===R.id&&re.status==="pending");return F&&H.length>0}if(s==="overdue"){const H=r.filter(re=>re.userId===R.id&&re.status==="overdue");return F&&H.length>0}return F}),Z=R=>{const F=r.filter(J=>J.userId===R),H=F.filter(J=>J.status==="pending").length,re=F.filter(J=>J.status==="overdue").length,M=F.filter(J=>J.status==="paid").length;return{pending:H,overdue:re,paid:M,total:F.length}};return p&&e.length===0?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-white mx-auto mb-4"}),a.jsx("p",{className:"text-white text-xl",children:"Loading Main Admin Dashboard..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-blue-900",children:[!v&&a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 text-center",children:a.jsxs("p",{className:"text-sm md:text-base font-semibold",children:["âš ï¸ Demo Mode: Backend not available. Actions are simulated locally.",a.jsx("a",{href:"/BACKEND_NOT_DEPLOYED.md",className:"underline ml-2",children:"Deploy Backend â†’"})]})}),m&&a.jsx("div",{className:"bg-red-500 text-white px-6 py-3 text-center",children:a.jsxs("p",{className:"text-sm font-semibold",children:["âš ï¸ ",m]})}),a.jsx("header",{className:"bg-black/30 backdrop-blur-lg border-b border-white/10 px-6 py-4",children:a.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:"Main Admin Dashboard"}),a.jsx("p",{className:"text-gray-300",children:"Monitor all users, payments, and system activity"})]}),a.jsxs("button",{onClick:T,className:"flex items-center gap-2 bg-red-500/20 hover:bg-red-500/30 text-red-300 px-4 py-2 rounded-lg transition-colors",children:[a.jsx(Ir,{className:"w-4 h-4"}),"Logout"]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Xe,{className:"w-8 h-8 text-blue-400"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:P.totalUsers})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Users"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(xr,{className:"w-8 h-8 text-green-400"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:P.activeUsers})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Active Users"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Ut,{className:"w-8 h-8 text-red-400"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:P.lockedUsers})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Locked Users"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Dt,{className:"w-8 h-8 text-yellow-400"}),a.jsxs("span",{className:"text-2xl font-bold text-white",children:["KSH ",P.totalRevenue.toLocaleString()]})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Total Revenue"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(pa,{className:"w-8 h-8 text-orange-400"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:P.pendingPayments})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Pending Payments"})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx(Ts,{className:"w-8 h-8 text-red-400"}),a.jsx("span",{className:"text-2xl font-bold text-white",children:P.overduePayments})]}),a.jsx("p",{className:"text-gray-300 text-sm",children:"Overdue Payments"})]})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center justify-between",children:[a.jsxs("div",{className:"flex gap-4 flex-1 w-full md:w-auto",children:[a.jsxs("div",{className:"relative flex-1 md:w-80",children:[a.jsx(Va,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",placeholder:"Search users...",className:"w-full pl-10 pr-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:R=>l(R.target.value)})]}),a.jsxs("select",{value:s,onChange:R=>i(R.target.value),className:"px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"All Users"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"locked",children:"Locked"}),a.jsx("option",{value:"trial",children:"Free Trial"}),a.jsx("option",{value:"pending-payment",children:"Pending Payment"}),a.jsx("option",{value:"overdue",children:"Overdue"})]})]}),a.jsxs("button",{onClick:()=>u(!0),disabled:d.length===0||p,className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white px-6 py-3 rounded-lg font-bold flex items-center gap-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(ga,{className:"w-5 h-5"}),"Send Email to Selected (",d.length,")"]})]})}),a.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"xl:col-span-2 bg-white/10 backdrop-blur-lg rounded-xl border border-white/20 overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-white/10",children:a.jsx("h2",{className:"text-xl font-bold text-white",children:"All Users"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-black/30",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-4 py-4 text-left",children:a.jsx("input",{type:"checkbox",checked:d.length===G.length&&G.length>0,onChange:R=>{R.target.checked?f(G.map(F=>F.id)):f([])},className:"w-5 h-5 rounded"})}),a.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"User"}),a.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Plan"}),a.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Status"}),a.jsx("th",{className:"px-4 py-4 text-left text-sm font-semibold text-gray-200",children:"Actions"})]})}),a.jsxs("tbody",{children:[G.length===0&&a.jsx("tr",{children:a.jsxs("td",{colSpan:"5",className:"px-4 py-12 text-center",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-400 text-lg",children:"No users found"}),a.jsx("p",{className:"text-gray-500 text-sm mt-2",children:o||s!=="all"?"Try adjusting your filters":"Users will appear here once they sign up"})]})}),G.map(R=>(Z(R.id),a.jsxs("tr",{className:"border-t border-white/10 hover:bg-white/5 transition",children:[a.jsx("td",{className:"px-4 py-4",children:a.jsx("input",{type:"checkbox",checked:d.includes(R.id),onChange:F=>{F.target.checked?f([...d,R.id]):f(d.filter(H=>H!==R.id))},className:"w-5 h-5 rounded"})}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[R.profilePicture?a.jsx("img",{src:R.profilePicture,alt:R.name,className:"w-10 h-10 rounded-full"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold",children:R.name?.charAt(0).toUpperCase()}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-white",children:R.name}),a.jsx("p",{className:"text-sm text-gray-400",children:R.email})]})]})}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${R.plan==="ultra"?"bg-purple-500/20 text-purple-300":"bg-blue-500/20 text-blue-300"}`,children:[R.plan?.toUpperCase()," - KSH ",R.price]})}),a.jsx("td",{className:"px-4 py-4",children:a.jsx("div",{className:"flex items-center gap-2",children:R.locked?a.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-red-500/20 text-red-300 flex items-center gap-1",children:[a.jsx(Ut,{className:"w-3 h-3"}),"Locked"]}):R.active?a.jsxs("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-green-500/20 text-green-300 flex items-center gap-1",children:[a.jsx(xr,{className:"w-3 h-3"}),"Active"]}):a.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold bg-gray-500/20 text-gray-300",children:"Inactive"})})}),a.jsx("td",{className:"px-4 py-4",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>q(R.id,R.locked),disabled:S===R.id,className:`p-2 rounded-lg transition ${R.locked?"bg-green-500/20 hover:bg-green-500/30 text-green-300":"bg-red-500/20 hover:bg-red-500/30 text-red-300"} ${S===R.id?"opacity-50 cursor-not-allowed":""}`,title:R.locked?"Unlock User":"Lock User",children:S===R.id?a.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}):R.locked?a.jsx(lC,{className:"w-4 h-4"}):a.jsx(Ut,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>K(R.id),disabled:p,className:"p-2 rounded-lg bg-blue-500/20 hover:bg-blue-500/30 text-blue-300 transition",title:"Send Payment Reminder",children:a.jsx(H1,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{R.role==="cashier"?window.open("/dashboard/cashier","_blank"):window.open("/admin","_blank")},className:"p-2 rounded-lg bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 transition",title:"View User Dashboard",children:a.jsx(L1,{className:"w-4 h-4"})})]})})]},R.id)))]})]})})]}),a.jsxs("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl border border-white/20",children:[a.jsx("div",{className:"p-4 border-b border-white/10",children:a.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:[a.jsx(ft,{className:"w-5 h-5"}),"Recent Activity"]})}),a.jsx("div",{className:"p-4 space-y-3 max-h-96 overflow-y-auto",children:O.length===0?a.jsx("p",{className:"text-gray-400 text-center py-8",children:"No recent activity"}):O.map(R=>a.jsxs("div",{className:"bg-white/5 rounded-lg p-3 border border-white/10",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${R.type==="login"?"bg-green-400":"bg-blue-400"}`}),a.jsx("span",{className:"text-white font-medium",children:R.user.name}),a.jsx("span",{className:`text-xs px-2 py-1 rounded ${R.type==="login"?"bg-green-500/20 text-green-300":"bg-blue-500/20 text-blue-300"}`,children:R.type})]}),a.jsx("p",{className:"text-gray-400 text-sm",children:R.user.email}),a.jsx("p",{className:"text-gray-500 text-xs mt-1",children:new Date(R.timestamp).toLocaleString()})]},R.id))})]})]})]}),c&&a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-purple-900 rounded-2xl shadow-2xl max-w-2xl w-full border border-white/20",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 p-6 text-white rounded-t-2xl",children:a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(ga,{}),"Send Email to ",d.length," User(s)"]})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Subject"}),a.jsx("input",{type:"text",value:h.subject,onChange:R=>x({...h,subject:R.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email subject..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Message"}),a.jsx("textarea",{value:h.message,onChange:R=>x({...h,message:R.target.value}),className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 h-40",placeholder:"Email message..."})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>z(d,h.subject,h.message),disabled:p,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 rounded-lg font-bold transition disabled:opacity-50",children:p?"Sending...":"Send Email"}),a.jsx("button",{onClick:()=>u(!1),className:"px-6 py-3 bg-white/10 hover:bg-white/20 text-white rounded-lg font-bold transition",children:"Cancel"})]})]})]})})]})}function QK(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(!0),u=[{value:"registrar",label:"Registrar/Reception",icon:Xe},{value:"doctor",label:"Doctor",icon:Do},{value:"pharmacist",label:"Pharmacist",icon:nn},{value:"cashier",label:"Cashier",icon:ga}];N.useEffect(()=>{d(),f()},[]);const d=async()=>{try{const x=await bt.get("/api/business/users");r(x.data.users||[]),c(!1)}catch(x){console.error("Failed to load staff:",x),c(!1)}},f=async()=>{try{const x=await bt.get("/api/messages/inbox?limit=5");s(x.data.messages||[])}catch(x){console.error("Failed to load messages:",x)}},h=async x=>{try{const p={name:x.name,email:x.email,password:x.password,business_role:x.businessRole};await bt.post("/api/business/users",p),o(!1),d()}catch(p){console.error("Failed to add staff:",p),alert("Failed to add staff member: "+(p.response?.data?.error||p.message))}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-cyan-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-blue-600 via-cyan-600 to-teal-600 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl font-bold text-white flex items-center",children:[a.jsx("span",{className:"text-5xl mr-3",children:"ðŸ¥"}),"Clinic Admin Dashboard"]}),a.jsx("p",{className:"text-cyan-100 mt-2 text-lg",children:"Manage your clinic staff and operations"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-6 py-3 bg-white text-blue-600 rounded-xl hover:bg-blue-50 shadow-lg transform transition hover:scale-105 font-semibold",children:[a.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Add Staff"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:u.map((x,p)=>{const g=x.icon,m=t.filter(v=>v.business_role===x.value).length,y=["from-blue-500 to-blue-600","from-cyan-500 to-cyan-600","from-teal-500 to-teal-600","from-green-500 to-green-600"];return a.jsx("div",{className:`bg-gradient-to-br ${y[p]} rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-100 font-medium",children:x.label}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:m})]}),a.jsx(g,{className:"w-12 h-12 opacity-80"})]})},x.value)})}),n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg mb-8 p-6 border border-blue-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(xa,{className:"w-7 h-7 mr-3 text-blue-600"}),"Recent Messages"]}),a.jsx("a",{href:"/messages",className:"text-blue-600 hover:text-blue-700 font-semibold",children:"View all â†’"})]}),a.jsx("div",{className:"space-y-3",children:n.map(x=>a.jsx("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:x.fromUserName}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.timestamp).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.content}),a.jsxs("span",{className:"text-xs text-blue-600 mt-1 inline-block",children:["From: ",x.fromRole]})]})},x.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-blue-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-cyan-50",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Clinic Staff"})}),a.jsx("div",{className:"p-6",children:l?a.jsx("p",{className:"text-center text-gray-600",children:"Loading staff..."}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members yet"}),a.jsx("button",{onClick:()=>o(!0),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Add your first staff member"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:x.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:x.business_role||x.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("button",{className:"text-blue-600 hover:text-blue-700 mr-3",children:"Edit"}),a.jsx("button",{className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},x.id))})]})})})]})]}),i&&a.jsx(eG,{roles:u,onClose:()=>o(!1),onSubmit:h})]})}function eG({roles:e,onClose:t,onSubmit:r}){const[n,s]=N.useState({name:"",email:"",password:"",businessRole:""}),i=o=>{if(o.preventDefault(),!n.name||!n.email||!n.password||!n.businessRole){alert("Please fill all fields");return}r(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-blue-600 to-cyan-600",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add New Staff Member"})}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"Dr. John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n.email,onChange:o=>s({...n,email:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"john@clinic.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:n.password,onChange:o=>s({...n,password:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:n.businessRole,onChange:o=>s({...n,businessRole:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition",required:!0,children:[a.jsx("option",{value:"",children:"Select role..."}),e.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-cyan-600 text-white rounded-xl hover:from-blue-700 hover:to-cyan-700 transition font-semibold shadow-lg",children:"Add Staff"})]})]})]})})}const tG="http://localhost:5000";function rG({role:e,businessType:t}){const[r,n]=N.useState(""),[s,i]=N.useState(""),[o,l]=N.useState(!1),[c,u]=N.useState(null),[d,f]=N.useState([]),h=async()=>{if(!r.trim()){u("Please enter a question");return}try{l(!0),u(null);const g=localStorage.getItem("token");if(!g)throw new Error("Please login to use AI assistant");const m=await We.post(`${tG}/api/ai/pro/ask`,{question:r.trim(),context:{role:e,businessType:t}},{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}}),y=m.data?.data?.answer||m.data?.answer;if(!y)throw new Error("No response received from AI assistant");i(y),f(v=>[...v,{question:r.trim(),answer:y,timestamp:new Date().toISOString()}]),n("")}catch(g){console.error("AI assistant error:",g);let m="Failed to get AI response";g.response?.status===401?m="Please login to use AI assistant":g.response?.status===403?m=g.response?.data?.message||"AI assistant requires Pro plan":g.response?.status===500?m="AI service temporarily unavailable. Using fallback mode.":g.message?m=g.message:g.response?.data?.message&&(m=g.response.data.message),u(m)}finally{l(!1)}},x=g=>{g.key==="Enter"&&!g.shiftKey&&(g.preventDefault(),h())},p=()=>{f([]),i(""),u(null)};return a.jsxs("div",{className:"pro-ai-assistant",children:[a.jsxs("div",{className:"assistant-header",children:[a.jsx("h3",{children:"ðŸ¤– AI Business Assistant"}),a.jsx("span",{className:"business-badge",children:t||"General"})]}),a.jsxs("div",{className:"assistant-content",children:[s&&a.jsxs("div",{className:"current-answer",children:[a.jsx("div",{className:"answer-header",children:a.jsx("span",{className:"ai-badge",children:"AI Response"})}),a.jsx("pre",{className:"answer-text",children:s})]}),c&&a.jsxs("div",{className:"assistant-error",children:[a.jsx("span",{className:"error-icon",children:"âš ï¸"}),c]}),a.jsxs("div",{className:"assistant-input",children:[a.jsx("textarea",{value:r,onChange:g=>n(g.target.value),onKeyPress:x,placeholder:`Ask AI about ${t||"your business"}...
Example: "How can I increase bar sales?" or "Best clinic scheduling tips"`,rows:4,disabled:o}),a.jsxs("div",{className:"assistant-actions",children:[a.jsx("button",{onClick:h,disabled:o||!r.trim(),className:"ask-btn",children:o?"Thinking...":"âœ¨ Ask AI"}),d.length>0&&a.jsx("button",{onClick:p,className:"clear-btn",children:"Clear History"})]})]}),d.length>0&&a.jsxs("div",{className:"assistant-history",children:[a.jsx("h4",{children:"Recent Questions"}),a.jsx("div",{className:"history-list",children:d.slice().reverse().map((g,m)=>a.jsxs("div",{className:"history-item",children:[a.jsxs("div",{className:"history-question",children:[a.jsx("strong",{children:"Q:"})," ",g.question]}),a.jsxs("div",{className:"history-answer",children:[a.jsx("strong",{children:"A:"})," ",g.answer]}),a.jsx("div",{className:"history-time",children:new Date(g.timestamp).toLocaleString()})]},m))})]}),!s&&!o&&a.jsxs("div",{className:"assistant-suggestions",children:[a.jsx("p",{children:"ðŸ’¡ Try asking:"}),a.jsxs("ul",{children:[t==="bar"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{onClick:()=>n("What are the best-selling drinks?"),children:"What are the best-selling drinks?"}),a.jsx("li",{onClick:()=>n("How to reduce bar waste?"),children:"How to reduce bar waste?"})]}),t==="clinic"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{onClick:()=>n("How to optimize appointment scheduling?"),children:"How to optimize appointment scheduling?"}),a.jsx("li",{onClick:()=>n("Patient retention strategies?"),children:"Patient retention strategies?"})]}),t==="hotel"&&a.jsxs(a.Fragment,{children:[a.jsx("li",{onClick:()=>n("How to improve occupancy rates?"),children:"How to improve occupancy rates?"}),a.jsx("li",{onClick:()=>n("Guest satisfaction tips?"),children:"Guest satisfaction tips?"})]}),a.jsx("li",{onClick:()=>n("What are my top revenue opportunities?"),children:"What are my top revenue opportunities?"}),a.jsx("li",{onClick:()=>n("How to reduce operational costs?"),children:"How to reduce operational costs?"})]})]})]})]})}function nG(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(!0),u=[{value:"bartender",label:"Bartender",icon:W1},{value:"cashier",label:"Cashier",icon:Dt},{value:"store",label:"Store Manager",icon:jt}];N.useEffect(()=>{d(),f()},[]);const d=async()=>{try{const x=await bt.get("/api/business/users");r(x.data.users||[]),c(!1)}catch(x){console.error("Failed to load staff:",x),c(!1)}},f=async()=>{try{const x=await bt.get("/api/messages/inbox?limit=5");s(x.data.messages||[])}catch(x){console.error("Failed to load messages:",x)}},h=async x=>{try{const p={name:x.name,email:x.email,password:x.password,business_role:x.businessRole};await bt.post("/api/business/users",p),o(!1),d()}catch(p){console.error("Failed to add staff:",p),alert("Failed to add staff member: "+(p.response?.data?.error||p.message))}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-indigo-600 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl font-bold text-white flex items-center",children:[a.jsx("span",{className:"text-5xl mr-3",children:"ðŸ»"}),"Bar Admin Dashboard"]}),a.jsx("p",{className:"text-purple-100 mt-2 text-lg",children:"Manage your bar staff and operations"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-6 py-3 bg-white text-purple-600 rounded-xl hover:bg-purple-50 shadow-lg transform transition hover:scale-105 font-semibold",children:[a.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Add Staff"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:u.map((x,p)=>{const g=x.icon,m=t.filter(v=>v.business_role===x.value).length,y=["from-purple-500 to-purple-600","from-pink-500 to-pink-600","from-indigo-500 to-indigo-600"];return a.jsx("div",{className:`bg-gradient-to-br ${y[p]} rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-purple-100 font-medium",children:x.label}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:m})]}),a.jsx(g,{className:"w-12 h-12 opacity-80"})]})},x.value)})}),n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg mb-8 p-6 border border-purple-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(xa,{className:"w-7 h-7 mr-3 text-purple-600"}),"Recent Messages"]}),a.jsx("a",{href:"/messages",className:"text-purple-600 hover:text-purple-700 font-semibold",children:"View all â†’"})]}),a.jsx("div",{className:"space-y-3",children:n.map(x=>a.jsx("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:x.fromUserName}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(x.timestamp).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.content}),a.jsxs("span",{className:"text-xs text-purple-600 mt-1 inline-block",children:["From: ",x.fromRole]})]})},x.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-50 to-pink-50",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Bar Staff"})}),a.jsx("div",{className:"p-6",children:l?a.jsx("p",{className:"text-center text-gray-600",children:"Loading staff..."}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members yet"}),a.jsx("button",{onClick:()=>o(!0),className:"text-purple-600 hover:text-purple-700 font-medium",children:"Add your first staff member"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(x=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:x.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:x.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-purple-100 text-purple-800",children:x.business_role||x.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:x.is_active?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("button",{className:"text-purple-600 hover:text-purple-700 mr-3",children:"Edit"}),a.jsx("button",{className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},x.id))})]})})})]}),a.jsxs("div",{className:"mt-8",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6 mb-4 border border-purple-200",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"ðŸ¤– AI Business Assistant"}),a.jsx("p",{className:"text-gray-600 mt-1",children:"Get intelligent insights and recommendations for your bar"})]}),a.jsx("span",{className:"px-4 py-2 bg-purple-600 text-white rounded-full text-sm font-bold shadow-lg",children:"PRO FEATURE"})]})}),a.jsx(rG,{})]})]}),i&&a.jsx(aG,{roles:u,onClose:()=>o(!1),onSubmit:h})]})}function aG({roles:e,onClose:t,onSubmit:r}){const[n,s]=N.useState({name:"",email:"",password:"",businessRole:""}),i=o=>{if(o.preventDefault(),!n.name||!n.email||!n.password||!n.businessRole){alert("Please fill all fields");return}r(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-purple-600 to-pink-600",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add New Staff Member"})}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n.email,onChange:o=>s({...n,email:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",placeholder:"john@bar.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:n.password,onChange:o=>s({...n,password:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:n.businessRole,onChange:o=>s({...n,businessRole:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent transition",required:!0,children:[a.jsx("option",{value:"",children:"Select role..."}),e.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl hover:from-purple-700 hover:to-pink-700 transition font-semibold shadow-lg",children:"Add Staff"})]})]})]})})}function sG(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(!0),[u,d]=N.useState({totalRooms:0,occupied:0,available:0,maintenance:0}),f=[{value:"receptionist",label:"Receptionist",icon:ry},{value:"housekeeping",label:"Housekeeping",icon:mm},{value:"manager",label:"Manager",icon:on},{value:"cashier",label:"Cashier",icon:vr}];N.useEffect(()=>{h(),x(),p()},[]);const h=async()=>{try{const y=await bt.get("/api/business/users");r(y.data.users||[]),c(!1)}catch(y){console.error("Failed to load staff:",y),c(!1)}},x=async()=>{try{const y=await bt.get("/api/messages/inbox?limit=5");s(y.data.messages||[])}catch(y){console.error("Failed to load messages:",y)}},p=async()=>{try{d({totalRooms:50,occupied:32,available:15,maintenance:3})}catch(y){console.error("Failed to load stats:",y)}},g=async y=>{try{const v={name:y.name,email:y.email,password:y.password,business_role:y.businessRole};await bt.post("/api/business/users",v),o(!1),h()}catch(v){console.error("Failed to add staff:",v),alert("Failed to add staff member: "+(v.response?.data?.error||v.message))}},m=u.totalRooms>0?Math.round(u.occupied/u.totalRooms*100):0;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 via-white to-orange-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-amber-600 via-orange-600 to-red-600 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl font-bold text-white flex items-center",children:[a.jsx("span",{className:"text-5xl mr-3",children:"ðŸ¨"}),"Hotel Admin Dashboard"]}),a.jsx("p",{className:"text-amber-100 mt-2 text-lg",children:"Manage your hotel staff and operations"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-6 py-3 bg-white text-amber-600 rounded-xl hover:bg-amber-50 shadow-lg transform transition hover:scale-105 font-semibold",children:[a.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Add Staff"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-blue-100 font-medium",children:"Total Rooms"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.totalRooms})]}),a.jsx(on,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-100 font-medium",children:"Occupied"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.occupied})]}),a.jsx(mm,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-amber-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-amber-100 font-medium",children:"Available"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.available})]}),a.jsx(ry,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-red-500 to-red-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-red-100 font-medium",children:"Occupancy Rate"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:[m,"%"]})]}),a.jsx(on,{className:"w-12 h-12 opacity-80"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:f.map((y,v)=>{const b=y.icon,S=t.filter(w=>w.business_role===y.value).length,j=["from-amber-500 to-amber-600","from-orange-500 to-orange-600","from-red-500 to-red-600","from-rose-500 to-rose-600"];return a.jsx("div",{className:`bg-gradient-to-br ${j[v]} rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-amber-100 font-medium",children:y.label}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:S})]}),a.jsx(b,{className:"w-12 h-12 opacity-80"})]})},y.value)})}),n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg mb-8 p-6 border border-amber-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(xa,{className:"w-7 h-7 mr-3 text-amber-600"}),"Recent Messages"]}),a.jsx("a",{href:"/messages",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"View all â†’"})]}),a.jsx("div",{className:"space-y-3",children:n.map(y=>a.jsx("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:y.fromUserName}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(y.timestamp).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.content}),a.jsxs("span",{className:"text-xs text-amber-600 mt-1 inline-block",children:["From: ",y.fromRole]})]})},y.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-amber-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-orange-50",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Hotel Staff"})}),a.jsx("div",{className:"p-6",children:l?a.jsx("p",{className:"text-center text-gray-600",children:"Loading staff..."}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members yet"}),a.jsx("button",{onClick:()=>o(!0),className:"text-amber-600 hover:text-amber-700 font-medium",children:"Add your first staff member"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(y=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:y.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:y.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-amber-100 text-amber-800",children:y.business_role||y.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.is_active?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("button",{className:"text-amber-600 hover:text-amber-700 mr-3",children:"Edit"}),a.jsx("button",{className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},y.id))})]})})})]})]}),i&&a.jsx(iG,{roles:f,onClose:()=>o(!1),onSubmit:g})]})}function iG({roles:e,onClose:t,onSubmit:r}){const[n,s]=N.useState({name:"",email:"",password:"",businessRole:""}),i=o=>{if(o.preventDefault(),!n.name||!n.email||!n.password||!n.businessRole){alert("Please fill all fields");return}r(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-amber-600 to-orange-600",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add New Staff Member"})}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n.email,onChange:o=>s({...n,email:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition",placeholder:"john@hotel.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:n.password,onChange:o=>s({...n,password:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:n.businessRole,onChange:o=>s({...n,businessRole:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-amber-500 focus:border-transparent transition",required:!0,children:[a.jsx("option",{value:"",children:"Select role..."}),e.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-xl hover:from-amber-700 hover:to-orange-700 transition font-semibold shadow-lg",children:"Add Staff"})]})]})]})})}function oG(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState([]),[i,o]=N.useState(!1),[l,c]=N.useState(!0),[u,d]=N.useState({todaySales:0,todayOrders:0,lowStockItems:0,departments:0}),f=[{value:"department_head",label:"Department Head",icon:jt},{value:"cashier",label:"Cashier",icon:Dt},{value:"stock_clerk",label:"Stock Clerk",icon:Br},{value:"supervisor",label:"Supervisor",icon:ft}];N.useEffect(()=>{h(),x(),p()},[]);const h=async()=>{try{const m=await bt.get("/api/business/users");r(m.data.users||[]),c(!1)}catch(m){console.error("Failed to load staff:",m),c(!1)}},x=async()=>{try{const m=await bt.get("/api/messages/inbox?limit=5");s(m.data.messages||[])}catch(m){console.error("Failed to load messages:",m)}},p=async()=>{try{const m=await bt.get("/api/v2/monitor/stats");d({todaySales:m.data.totalSales||0,todayOrders:m.data.transactionCount||0,lowStockItems:0,departments:8})}catch(m){console.error("Failed to load stats:",m)}},g=async m=>{try{const y={name:m.name,email:m.email,password:m.password,business_role:m.businessRole};await bt.post("/api/business/users",y),o(!1),h()}catch(y){console.error("Failed to add staff:",y),alert("Failed to add staff member: "+(y.response?.data?.error||y.message))}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-green-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-emerald-600 via-green-600 to-teal-600 shadow-lg",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl font-bold text-white flex items-center",children:[a.jsx("span",{className:"text-5xl mr-3",children:"ðŸ›’"}),"Supermarket Admin Dashboard"]}),a.jsx("p",{className:"text-emerald-100 mt-2 text-lg",children:"Manage your supermarket staff and operations"})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-6 py-3 bg-white text-emerald-600 rounded-xl hover:bg-emerald-50 shadow-lg transform transition hover:scale-105 font-semibold",children:[a.jsx(Ge,{className:"w-5 h-5 mr-2"}),"Add Staff"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-emerald-100 font-medium",children:"Today's Sales"}),a.jsxs("p",{className:"text-3xl font-bold mt-2",children:["$",u.todaySales.toFixed(2)]})]}),a.jsx(Dt,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-green-100 font-medium",children:"Orders"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.todayOrders})]}),a.jsx(Br,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-teal-500 to-teal-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-teal-100 font-medium",children:"Low Stock"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.lowStockItems})]}),a.jsx(jt,{className:"w-12 h-12 opacity-80"})]})}),a.jsx("div",{className:"bg-gradient-to-br from-cyan-500 to-cyan-600 rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-cyan-100 font-medium",children:"Departments"}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:u.departments})]}),a.jsx(ft,{className:"w-12 h-12 opacity-80"})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:f.map((m,y)=>{const v=m.icon,b=t.filter(j=>j.business_role===m.value).length,S=["from-emerald-500 to-emerald-600","from-green-500 to-green-600","from-teal-500 to-teal-600","from-cyan-500 to-cyan-600"];return a.jsx("div",{className:`bg-gradient-to-br ${S[y]} rounded-xl shadow-lg p-6 text-white transform transition hover:scale-105`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-emerald-100 font-medium",children:m.label}),a.jsx("p",{className:"text-3xl font-bold mt-2",children:b})]}),a.jsx(v,{className:"w-12 h-12 opacity-80"})]})},m.value)})}),n.length>0&&a.jsxs("div",{className:"bg-white rounded-xl shadow-lg mb-8 p-6 border border-emerald-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[a.jsx(xa,{className:"w-7 h-7 mr-3 text-emerald-600"}),"Recent Messages"]}),a.jsx("a",{href:"/messages",className:"text-emerald-600 hover:text-emerald-700 font-semibold",children:"View all â†’"})]}),a.jsx("div",{className:"space-y-3",children:n.map(m=>a.jsx("div",{className:"flex items-start p-3 bg-gray-50 rounded-lg",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:m.fromUserName}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(m.timestamp).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:m.content}),a.jsxs("span",{className:"text-xs text-emerald-600 mt-1 inline-block",children:["From: ",m.fromRole]})]})},m.id))})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-emerald-100",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-emerald-50 to-green-50",children:a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Supermarket Staff"})}),a.jsx("div",{className:"p-6",children:l?a.jsx("p",{className:"text-center text-gray-600",children:"Loading staff..."}):t.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Xe,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"No staff members yet"}),a.jsx("button",{onClick:()=>o(!0),className:"text-emerald-600 hover:text-emerald-700 font-medium",children:"Add your first staff member"})]}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(m=>a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"font-medium text-gray-900",children:m.name})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:m.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-emerald-100 text-emerald-800",children:m.business_role||m.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:m.is_active?"Active":"Inactive"})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[a.jsx("button",{className:"text-emerald-600 hover:text-emerald-700 mr-3",children:"Edit"}),a.jsx("button",{className:"text-red-600 hover:text-red-700",children:"Remove"})]})]},m.id))})]})})})]})]}),i&&a.jsx(lG,{roles:f,onClose:()=>o(!1),onSubmit:g})]})}function lG({roles:e,onClose:t,onSubmit:r}){const[n,s]=N.useState({name:"",email:"",password:"",businessRole:""}),i=o=>{if(o.preventDefault(),!n.name||!n.email||!n.password||!n.businessRole){alert("Please fill all fields");return}r(n)};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 transform transition-all",children:[a.jsx("div",{className:"p-6 border-b border-gray-200 bg-gradient-to-r from-emerald-600 to-green-600",children:a.jsx("h3",{className:"text-2xl font-bold text-white",children:"Add New Staff Member"})}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),a.jsx("input",{type:"text",value:n.name,onChange:o=>s({...n,name:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition",placeholder:"John Doe",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsx("input",{type:"email",value:n.email,onChange:o=>s({...n,email:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition",placeholder:"john@supermarket.com",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),a.jsx("input",{type:"password",value:n.password,onChange:o=>s({...n,password:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",required:!0,minLength:6})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),a.jsxs("select",{value:n.businessRole,onChange:o=>s({...n,businessRole:o.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-emerald-500 focus:border-transparent transition",required:!0,children:[a.jsx("option",{value:"",children:"Select role..."}),e.map(o=>a.jsx("option",{value:o.value,children:o.label},o.value))]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:t,className:"px-6 py-3 border border-gray-300 rounded-xl text-gray-700 hover:bg-gray-50 transition font-semibold",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-emerald-600 to-green-600 text-white rounded-xl hover:from-emerald-700 hover:to-green-700 transition font-semibold shadow-lg",children:"Add Staff"})]})]})]})})}function cG(){const{user:e}=Oe(),[t,r]=N.useState([]),[n,s]=N.useState(0),[i,o]=N.useState(!1),[l,c]=N.useState([]);N.useEffect(()=>{u(),d()},[]);const u=async()=>{try{const f=await bt.get("/api/messages/inbox");r(f.data.messages||[]),s(f.data.unreadCount||0)}catch(f){console.error("Failed to load messages:",f)}},d=async()=>{c([{id:1,name:"Patient A",status:"Waiting",room:"101"},{id:2,name:"Patient B",status:"In Progress",room:"102"}])};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-blue-600 shadow",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-white",children:"ðŸ‘¨â€âš•ï¸ Doctor Dashboard"}),a.jsxs("p",{className:"text-blue-100 mt-1",children:["Welcome, Dr. ",e?.name]})]}),a.jsxs("button",{onClick:()=>o(!0),className:"flex items-center px-4 py-2 bg-white text-blue-600 rounded-lg hover:bg-gray-100",children:[a.jsx(H1,{className:"w-5 h-5 mr-2"}),"Send Message"]})]})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Patients Today"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:l.length})]}),a.jsx(Xe,{className:"w-10 h-10 text-blue-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Unread Messages"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:n})]}),a.jsx(xa,{className:"w-10 h-10 text-blue-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Prescriptions"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:"0"})]}),a.jsx(U1,{className:"w-10 h-10 text-blue-600"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow mb-8 p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(xa,{className:"w-6 h-6 mr-2 text-blue-600"}),"Messages"]}),t.length===0?a.jsx("p",{className:"text-center text-gray-600 py-8",children:"No messages"}):a.jsx("div",{className:"space-y-3",children:t.map(f=>a.jsx("div",{className:"flex items-start p-4 bg-gray-50 rounded-lg hover:bg-gray-100",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:f.fromUserName}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(f.timestamp).toLocaleString()})]}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:f.content}),a.jsxs("div",{className:"flex items-center mt-2",children:[a.jsxs("span",{className:"text-xs text-blue-600",children:["From: ",f.fromRole]}),f.status==="sent"&&a.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs bg-blue-100 text-blue-800 rounded-full",children:"New"})]})]})},f.id))})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[a.jsx(Do,{className:"w-6 h-6 mr-2 text-blue-600"}),"Patient Queue"]}),l.length===0?a.jsx("p",{className:"text-center text-gray-600 py-8",children:"No patients in queue"}):a.jsx("div",{className:"space-y-3",children:l.map(f=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:f.name}),a.jsxs("p",{className:"text-sm text-gray-600",children:["Room: ",f.room]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${f.status==="Waiting"?"bg-yellow-100 text-yellow-800":f.status==="In Progress"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:f.status}),a.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm hover:bg-blue-700",children:"View"})]})]},f.id))})]})]}),i&&a.jsx(uG,{onClose:()=>o(!1)})]})}function uG({onClose:e}){const[t,r]=N.useState([]),[n,s]=N.useState({toRole:"",content:"",priority:"normal"});N.useEffect(()=>{i()},[]);const i=async()=>{try{const l=await bt.get("/api/messages/available-roles");r(l.data.roles||[])}catch(l){console.error("Failed to load roles:",l)}},o=async l=>{l.preventDefault();try{await bt.post("/api/messages/send",n),alert("Message sent!"),e()}catch(c){console.error("Failed to send message:",c),alert("Failed to send message")}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[a.jsx("div",{className:"p-6 border-b border-gray-200",children:a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Send Message"})}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To (Role)"}),a.jsxs("select",{value:n.toRole,onChange:l=>s({...n,toRole:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[a.jsx("option",{value:"",children:"Select role..."}),t.map(l=>a.jsx("option",{value:l,children:l},l))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),a.jsx("textarea",{value:n.content,onChange:l=>s({...n,content:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",rows:"4",placeholder:"Type your message...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),a.jsxs("select",{value:n.priority,onChange:l=>s({...n,priority:l.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"normal",children:"Normal"}),a.jsx("option",{value:"urgent",children:"Urgent"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send"})]})]})]})})}function bs({children:e}){const{user:t,loading:r}=Oe();return r?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),a.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):t?e:a.jsx(Ne,{to:"/auth/login",replace:!0})}function vs({children:e}){const{user:t}=Oe();return t?t.subscription==="pro"||t.plan==="pro"||t.subscription==="custom"?e:a.jsx(Ne,{to:"/upgrade",replace:!0}):a.jsx(Ne,{to:"/auth/login",replace:!0})}function wk({children:e,allowedRoles:t=[]}){const{user:r}=Oe();if(!r)return a.jsx(Ne,{to:"/auth/login",replace:!0});const n=r.businessRole||r.business_role||r.role;return t.length===0||t.includes(n)?e:a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"ðŸš«"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have permission to access this page."}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Required role: ",t.join(", ")]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Your role: ",n]}),a.jsx("button",{onClick:()=>window.history.back(),className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go Back"})]})})}function js({children:e,requiredType:t}){const{user:r}=Oe();if(!r)return a.jsx(Ne,{to:"/auth/login",replace:!0});const n=r.businessType||r.business_type;return n?n!==t?a.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-6xl mb-4",children:"ðŸ¢"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Wrong Business Type"}),a.jsxs("p",{className:"text-gray-600 mb-4",children:["This page is for ",t," businesses only."]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Your business type: ",n]}),a.jsx("button",{onClick:()=>window.location.href=`/admin/${n}`,className:"mt-6 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Your Dashboard"})]})}):e:a.jsx(Ne,{to:"/select-business-type",replace:!0})}function go({children:e}){return a.jsx(wk,{allowedRoles:["admin"],children:e})}function dG({user:e}){const[t,r]=N.useState(!1);if(t||!e)return null;const n=e?.serviceStartDate?new Date(e.serviceStartDate):null,s=e?.daysUsed||0,i=e?.plan||"",l=Math.max(0,30-s);return l>7?null:a.jsxs("div",{className:"bg-amber-50 border-l-4 border-amber-500 p-3 md:p-4 flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[a.jsx(un,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:l===0?`Your ${i} plan has expired. Please renew to continue.`:`Your ${i} plan expires in ${l} day${l!==1?"s":""}. Consider upgrading.`}),a.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Service started: ",n?.toLocaleDateString()||"Unknown"]})]})]}),a.jsx("button",{onClick:()=>r(!0),className:"flex-shrink-0 text-amber-600 hover:text-amber-900",children:a.jsx(yr,{className:"w-5 h-5"})})]})}function fG(){const{refreshProducts:e}=ug();return N.useEffect(()=>{const t=s=>{console.log(" Stock update received:",s.detail),e()},r=s=>{console.log(" Sale completed, refreshing stock:",s.detail),e()},n=s=>{console.log(" Products sync event:",s.detail)};return window.addEventListener("stockUpdate",t),window.addEventListener("saleComplete",r),window.addEventListener("productsSync",n),()=>{window.removeEventListener("stockUpdate",t),window.removeEventListener("saleComplete",r),window.removeEventListener("productsSync",n)}},[e]),null}function kt({children:e,adminOnly:t=!1,ultraOnly:r=!1,ownerOnly:n=!1}){const{user:s,loading:i}=Oe(),{isLocked:o,lock:l,unlock:c}=Q1(),[u,d]=N.useState(!1),f=jk(6e4),h=f?.[0]||o||!1,x=N.useCallback(()=>{f?.[1]?.(),c()},[f,c]),[p,g]=N.useState({});if(N.useEffect(()=>{s&&!n&&((async()=>{try{const v=localStorage.getItem("token"),S=await fetch(`${ye}/settings`,{headers:{Authorization:`Bearer ${v}`}});if(S.ok){const j=await S.json();g(j)}}catch(v){console.error("Failed to load settings:",v)}})(),sessionStorage.getItem("reminderShown")||(d(!0),sessionStorage.setItem("reminderShown","true")))},[s,n]),N.useEffect(()=>{const y=v=>{console.log("ðŸ”’ Admin locked screen:",v.detail),l("admin")};return window.addEventListener("admin_locked_user_screen",y),()=>window.removeEventListener("admin_locked_user_screen",y)},[l]),i&&!n)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(n){const y=localStorage.getItem("ownerToken"),v=localStorage.getItem("ownerUser");if(!y||!v)return a.jsx(Ne,{to:"/main.admin"});try{if(JSON.parse(v).type!=="main_admin")return a.jsx(Ne,{to:"/main.admin"})}catch{return a.jsx(Ne,{to:"/main.admin"})}}else{if(!s)return a.jsx(Ne,{to:"/auth/login"});if(!s.active)return a.jsx(Ne,{to:"/choose-subscription"});if(t&&s.role!=="admin")return a.jsx(Ne,{to:"/dashboard"});if(r&&(s.role!=="admin"||s.plan!=="ultra"))return a.jsx(Ne,{to:"/dashboard"})}const m=n?"owner":"user";return a.jsxs(a.Fragment,{children:[a.jsx(dG,{}),a.jsx(fG,{}),h&&a.jsx(vk,{onUnlock:x,userType:m}),u&&a.jsx(bk,{onClose:()=>d(!1)}),e]})}function hG(){const{user:e}=Oe();if(!e||!e.active)return a.jsx(Ne,{to:"/choose-subscription"});const t=e.subscription==="pro"||e.plan==="pro"||e.subscription==="custom"||e.plan===3e3,r=e.businessType||e.business_type,n=e.businessRole||e.business_role;if(t&&r){if(console.log("[Dashboard Router] Pro user detected:",{businessType:r,businessRole:n,role:e.role}),e.role==="admin")return a.jsx(Ne,{to:`/admin/${r}`});if(n){if(r==="clinic"){if(n==="doctor")return a.jsx(Ne,{to:"/dashboard/clinic/doctor"});if(n==="registrar"||n==="reception")return a.jsx(Ne,{to:"/dashboard/clinic/reception"});if(n==="pharmacist"||n==="pharmacy")return a.jsx(Ne,{to:"/dashboard/clinic/pharmacy"});if(n==="cashier")return a.jsx(Ne,{to:"/dashboard/cashier"})}if(r==="bar"){if(n==="bartender")return a.jsx(Ne,{to:"/dashboard/bar/bartender"});if(n==="cashier")return a.jsx(Ne,{to:"/dashboard/cashier"})}if(r==="hotel"){if(n==="receptionist")return a.jsx(Ne,{to:"/dashboard/hotel/reception"});if(n==="housekeeping")return a.jsx(Ne,{to:"/dashboard/hotel/housekeeping"});if(n==="cashier")return a.jsx(Ne,{to:"/dashboard/cashier"})}if(r==="supermarket"){if(n==="department_head")return a.jsx(Ne,{to:"/dashboard/supermarket/department"});if(n==="cashier")return a.jsx(Ne,{to:"/dashboard/cashier"})}}return a.jsx(Ne,{to:"/dashboard/cashier"})}return t&&!r&&e.role==="admin"?a.jsx(Ne,{to:"/select-business-type"}):e.role==="admin"?a.jsx(Ne,{to:"/admin"}):a.jsx(Ne,{to:"/dashboard/cashier"})}function mG(){return a.jsx(yC,{children:a.jsx(bC,{children:a.jsx(jC,{children:a.jsx(Ik,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsxs(I1,{children:[a.jsx(xe,{path:"/",element:a.jsx(k1,{})}),a.jsx(xe,{path:"/get-started",element:a.jsx(k1,{})}),a.jsx(xe,{path:"/choose-subscription",element:a.jsx(RK,{})}),a.jsx(xe,{path:"/auth/login",element:a.jsx(C1,{})}),a.jsx(xe,{path:"/auth/signup",element:a.jsx(C1,{})}),a.jsx(xe,{path:"/plans",element:a.jsx(Ne,{to:"/choose-subscription"})}),a.jsx(xe,{path:"/build-pos",element:a.jsx(MK,{})}),a.jsx(xe,{path:"/main.admin/*",element:a.jsx(_1,{})}),a.jsx(xe,{path:"/main-admin",element:a.jsx(kt,{ownerOnly:!0,children:a.jsx(_1,{})})}),a.jsx(xe,{path:"/select-business-type",element:a.jsx(kt,{adminOnly:!0,children:a.jsx(DK,{})})}),a.jsx(xe,{path:"/pro-dashboard",element:a.jsx(kt,{adminOnly:!0,children:a.jsx(IK,{})})}),a.jsx(xe,{path:"/admin/clinic",element:a.jsx(bs,{children:a.jsx(vs,{children:a.jsx(js,{requiredType:"clinic",children:a.jsx(go,{children:a.jsx(QK,{})})})})})}),a.jsx(xe,{path:"/admin/bar",element:a.jsx(bs,{children:a.jsx(vs,{children:a.jsx(js,{requiredType:"bar",children:a.jsx(go,{children:a.jsx(nG,{})})})})})}),a.jsx(xe,{path:"/admin/hotel",element:a.jsx(bs,{children:a.jsx(vs,{children:a.jsx(js,{requiredType:"hotel",children:a.jsx(go,{children:a.jsx(sG,{})})})})})}),a.jsx(xe,{path:"/admin/supermarket",element:a.jsx(bs,{children:a.jsx(vs,{children:a.jsx(js,{requiredType:"supermarket",children:a.jsx(go,{children:a.jsx(oG,{})})})})})}),a.jsx(xe,{path:"/dashboard/clinic/doctor",element:a.jsx(bs,{children:a.jsx(vs,{children:a.jsx(js,{requiredType:"clinic",children:a.jsx(wk,{allowedRoles:["doctor"],children:a.jsx(cG,{})})})})})}),a.jsx(xe,{path:"/dashboard",element:a.jsx(kt,{children:a.jsx(hG,{})})}),a.jsx(xe,{path:"/dashboard/cashier",element:a.jsx(kt,{children:a.jsx(hn,{})})}),a.jsx(xe,{path:"/cashier/bar",element:a.jsx(kt,{children:a.jsx(KK,{})})}),a.jsx(xe,{path:"/cashier/hospital",element:a.jsx(kt,{children:a.jsx(GK,{})})}),a.jsx(xe,{path:"/cashier/school",element:a.jsx(kt,{children:a.jsx(XK,{})})}),a.jsx(xe,{path:"/cashier/kiosk",element:a.jsx(kt,{children:a.jsx(YK,{})})}),a.jsx(xe,{path:"/cashier/petrol",element:a.jsx(kt,{children:a.jsx(JK,{})})}),a.jsx(xe,{path:"/cashier/shoes",element:a.jsx(kt,{children:a.jsx(ZK,{})})}),a.jsx(xe,{path:"/admin/*",element:a.jsx(kt,{adminOnly:!0,children:a.jsx(zl,{})})}),a.jsx(xe,{path:"/admin",element:a.jsx(kt,{adminOnly:!0,children:a.jsx(zl,{})})}),a.jsx(xe,{path:"/login",element:a.jsx(Ne,{to:"/auth/login"})}),a.jsx(xe,{path:"/signup",element:a.jsx(Ne,{to:"/auth/signup"})}),a.jsx(xe,{path:"/subscription",element:a.jsx(Ne,{to:"/choose-subscription"})}),a.jsx(xe,{path:"/payment",element:a.jsx(Ne,{to:"/choose-subscription"})}),a.jsx(xe,{path:"/cashier",element:a.jsx(kt,{children:a.jsx(hn,{})})})]})})})})})}hC.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(mG,{})}));
